(window._vfP=window._vfP||[]).push([[33,180],{1311:function(t,e,n){"use strict";n.r(e);n(38),n(17),n(26),n(3),n(15),n(16),n(57);var i=n(4),r=n(0),o=n(241),s=n(240),a=n(1),c=n(75),u=n(6),l=n(141),d=n(413),h=(n(19),n(33),n(123),n(7),n(9),n(11),n(40),n(32),n(28),n(671)),p=n.n(h),f=n(307),m=n(2),b=n(651),v=n(664),_=n(720),g=n(891),y=n(890),O=n(892),E=n(755),C=(n(44),n(58),n(83)),T=n(126),S=n(93),A=n(116),w=n(239),j=n(36),P=n(109),R=n(416),N=n(680),I=n(690);function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var D=Object(w.b)("ad-container-comments-bottom-"),$={props:{contentContainerUuid:j.a.string,enabled:j.a.bool.def(!1),hidePpidTrigger:j.a.bool.def(!1)},data:()=>({adSettings:{ad_integration:A.b[u.d.COMMENTS].ad_integration,pixel_threshold:A.b[u.d.COMMENTS].pixel_threshold,site_ad_id:A.b[u.d.COMMENTS].site_ad_id,widget_tag:u.d.COMMENTS},adStatus:S.PENDING,isThresholdReached:!1,adProvider:null,isAdBlockerDetected:!0}),created(){this.isAdBlockerDetected=Object(R.a)(),this.ppidTriggerPosition=I.c},mounted(){this.loadSetting(),this.isAdEnabled&&this.initializeLoadTracker()},computed:{eventPayload(){return{content_container_uuid:this.contentContainerUuid,content_container_type:T.b,widget:u.d.COMMENTS,ad_setting:this.adSettings.ad_integration,adData:{index:0}}},isAdEnabled(){return this.enabled},isReadyToLoad(){return this.isAdEnabled&&this.isThresholdReached},showAd(){return this.adStatus===S.SUCCESS},showAdLabel(){if(!this.adProvider)return null;var t=this.adProvider;return![C.a.TABOOLA,C.a.OUTBRAIN].includes(t)},adProviderClass(){return this.adProvider?"vf-promo-".concat(this.adProvider):null}},beforeCreate(){this.uniqueId=D()},methods:L(L({},Object(l.b)({trackAdEvent:i.gd})),{},{initializeLoadTracker(){var t=this;Object(P.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"".concat(this.pixel_threshold,"px")}).then((function(){t.isThresholdReached=!0,t.initializeAnalytics(t.$el)}))},initializeAnalytics(t){var e=L(L({},this.eventPayload),{},{event_type:a.b.EVENTS.AD_LOAD,adElement:t});this.trackAdEvent(e)},onSuccess(){this.adStatus=S.SUCCESS},onError(){this.adStatus=S.ERROR},loadSetting(){var t=this.$store.getters[r.Jc],e=t[this.adSettings.ad_integration];this.adProvider=e,this.pixel_threshold=t[this.adSettings.pixel_threshold]}}),watch:{isAdEnabled(){var t=this;this.isAdEnabled&&this.$nextTick().then((function(){t.initializeLoadTracker()}))}},components:{adContainer:N.a,optOutPersonal:I.b}},k=n(56),B=Object(k.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isAdEnabled&&!t.isAdBlockerDetected?n("div",{staticClass:"vf-promo-wrapper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAd,expression:"showAd"}],staticClass:"vf-promo",class:t.adProviderClass},[t.showAdLabel?n("div",{staticClass:"vf-label vf-label-upper vf-promo__label"},[t._v("\n            "+t._s(t.$i18n("ads.advertisement"))+"\n        ")]):t._e(),t._v(" "),t.isReadyToLoad?n("ad-container",{attrs:{"unique-id":t.uniqueId,"ad-settings":t.adSettings,"load-video-ad":!1},on:{success:t.onSuccess,error:t.onError}}):t._e(),t._v(" "),n("opt-out-personal",{staticClass:"vf-promo__opt-out-personal",attrs:{"ad-provider":t.adProvider,"unique-id":t.uniqueId,"trigger-position":t.ppidTriggerPosition.CENTER,"hide-ppid-trigger":t.hidePpidTrigger}})],1)]):t._e()}),[],!1,null,"5e679b8a",null).exports,M=n(142),F=n(22),H=n(170),q=n(758),G=n(847);function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){W(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var K={props:{contentContainer:j.a.object.isRequired,sectionUuid:j.a.uuid.isRequired},mounted(){this.$subscribe(a.E.CHANNEL,a.E.EVENTS.LOADED,this.handleUserLoaded)},computed:z(z({},Object(l.c)({isSubscribedToLivecomments:r.Zb,currentUser:r.hb,getSettingsByUuid:r.Dc,rootSectionUuid:r.yc})),{},{isSubscribedToContentContainer(){return this.isSubscribedToLivecomments(this.contentContainer.content_container_uuid)},settings(){return this.getSettingsByUuid(this.sectionUuid)},canFollowContentContainer(){return Object(F.h)(this.settings)}}),methods:{toggleSubscription(){if(H.a.getInstance().$authorize("follow","page",[this.currentUser,this.settings],{action:M.v})){var t=this.isSubscribedToContentContainer?i.ud:i.Kc;this.$store.dispatch(t,{content_container_uuid:this.contentContainer.content_container_uuid,section_uuid:this.sectionUuid,author_host_section_uuid:this.rootSectionUuid})}},handleUserLoaded(){Object(F.s)(this.currentUser)&&this.$store.dispatch(i.lb,{section_uuid:this.sectionUuid,content_container_uuid:this.contentContainer.content_container_uuid})}},components:{followButton:q.a,authenticationActions:G.a}},Y=Object(k.a)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"vf-comment-header"},[n("h2",{staticClass:"vf-comment-header__heading vf-heading-text"},[t._v("\n        "+t._s(t.$i18n("comments.heading"))+"\n    ")]),t._v(" "),n("div",{staticClass:"vf-comment-header__actions"},[t.canFollowContentContainer?n("follow-button",{staticClass:"vf-actions-subscribe",attrs:{"is-following":t.isSubscribedToContentContainer,"unfollow-text":t.$i18n("user_actions.unfollow"),"is-following-text":t.$i18n("user_actions.following"),"is-following-aria":t.$i18n("conversations.content_container.user_actions.unfollow_aria_label.comments"),"is-not-following-text":t.$i18n("user_actions.follow"),"is-not-following-aria":t.$i18n("conversations.content_container.user_actions.follow_aria_label.comments")},on:{click:t.toggleSubscription}}):t._e(),t._v(" "),n("authentication-actions",{staticClass:"vf-actions-authentication",attrs:{user:t.currentUser}})],1)])}),[],!1,null,"67ba0573",null).exports,J=n(51),Z=n(711),X=n(682),Q=n(103),tt=n(902),et=n(848),nt=n(842);function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var st={inject:[f.a],props:{contentContainer:j.a.object.isRequired,tabName:j.a.string.isRequired,areSettingsExpanded:j.a.bool.isRequired,settingsId:j.a.string.isRequired},created(){this.COMMENT_TABS=X.a,this.sorts=[{key:J.k.NEWEST,title:this.$i18n("conversations.sorts.newest").toUpperCase(),buttonClass:"vf-sort-action__newest"},{key:J.k.OLDEST,title:this.$i18n("conversations.sorts.oldest").toUpperCase(),buttonClass:"vf-sort-action__oldest"},{key:J.k.NUM_LIKES_DESC,title:this.$i18n("conversations.sorts.most_liked").toUpperCase(),buttonClass:"vf-sort-action__most-liked"},{key:J.k.NUM_REPLIES_DESC,title:this.$i18n("conversations.sorts.most_replies").toUpperCase(),buttonClass:"vf-sort-action__most-replies"}]},computed:rt(rt({},Object(l.c)({widgetSettings:r.zd,isCurrentUserModOrAdmin:r.Tb})),{},{sorted_by(){return this.widgetSettings(this.contentContainer.content_container_uuid).sorted_by},tagName:()=>u.d.COMMENTS}),methods:{handleSortSelected(t){var e=this,n=t.key,r=this.contentContainer.content_container_uuid;Object(Q.f)(this.$store.commit,Z.b,r),this.$store.dispatch(i.zd,{content_container_uuid:r,sorted_by:n}).then((function(){Object(Q.g)(e.$store.commit,Z.b,r)})).catch((function(){Object(Q.e)(e.$store.commit,Z.b,r)}))}},components:{settingsButton:tt.a,selectDropdown:et.a,vfBell:nt.default}},at=Object(k.a)(st,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-nav-right"},[n("select-dropdown",{staticClass:"vf-sort-actions",class:{"vf-sort-actions--hidden":t.tabName!==t.COMMENT_TABS.ALL_COMMENTS},attrs:{autohide:"",positions:["bottom-left","bottom-right","right-bottom","left-bottom"],items:t.sorts,selection:t.sorted_by,"enable-hover-light":!1},on:{"list-item-clicked":t.handleSortSelected}}),t._v(" "),n("div",{staticClass:"comment-nav-right__settings-button",class:{"comment-nav-right__settings-button--expanded":t.areSettingsExpanded}},[t.isCurrentUserModOrAdmin?n("settings-button",{staticClass:"comment-nav-right__icon",attrs:{palette:t.PALETTES.ACCENT,"aria-label":t.$i18n("conversations.navigation.settings_aria"),"aria-expanded":t.areSettingsExpanded.toString(),"aria-controls":t.settingsId},nativeOn:{click:function(e){return t.$emit("settings-toggled")}}}):t._e()],1),t._v(" "),t.areSettingsExpanded?n("a",{staticClass:"vf-offscreen-until-focused-text",attrs:{href:"#"+t.settingsId}},[t._v("\n        "+t._s(t.$i18n("conversations.navigation.settings_a11y_jump"))+"\n    ")]):t._e(),t._v(" "),n("vf-bell",{staticClass:"comment-nav-right__icon",attrs:{"parent-component":t.tagName}})],1)}),[],!1,null,"465c3926",null).exports,ct=n(655),ut=n(674),lt=(n(52),n(189),n(440),n(54)),dt=n(645),ht=n(510),pt=n(407),ft=n(660),mt=n(49),bt=n(676),vt=n(167),_t=n(689),gt=n(884),yt=n(895),Ot=n(735),Et=n(667),Ct=n(84),Tt=n(659),St=n(244),At=n(652),wt=n(653),jt=n(871),Pt=n(872),Rt=n(751),Nt=n(904),It=n(747),Ut={components:{moderationActions:n(883).a},props:{comment:j.a.object.isRequired},methods:{handleUnflag(){this.$store.dispatch(i.j,this.comment.content_uuid)},handleUnspam(){this.$store.dispatch(i.td,this.comment.content_uuid)},handleDisable(){this.$store.dispatch(i.D,this.comment.content_uuid)},handleEnable(){this.$store.dispatch(i.R,this.comment.content_uuid)}}},Lt=Object(k.a)(Ut,(function(){var t=this.$createElement;return(this._self._c||t)("moderation-actions",{attrs:{content:this.comment},on:{disable:this.handleDisable,unflag:this.handleUnflag,unspam:this.handleUnspam,enable:this.handleEnable}})}),[],!1,null,null,null).exports,xt=n(650),Dt=n(81),$t=n(901);function kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(n),!0).forEach((function(e){Mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ft={props:{comment:j.a.object.isRequired,isEntered:j.a.bool.def(!1),isContentRemovalEnabled:j.a.bool.def(!1),isEditionAllowed:j.a.bool.def(!0)},created(){this.CONTENT_ACTIONS=xt.a},computed:Bt(Bt({},Object(l.c)({getLivecommentsSettingsByUuid:r.U,getContentEditingDuration:r.S})),{},{isFlagged(){return this.comment.actions.includes(xt.a.FLAG)},isSpam(){return this.comment.state_reasons.includes(Dt.d.CONTENT_MARKED_AS_SPAM)},isDisabled(){return this.comment.state_reasons.includes(Dt.d.CONTENT_DISABLED)},contentContainerSettings(){return this.getLivecommentsSettingsByUuid(this.comment.content_container_uuid)},contentEditingDuration(){return this.getContentEditingDuration(this.comment.content_container_uuid)}}),methods:{handleFlag(){this.$store.dispatch(i.Fb,this.comment.content_uuid)},toggleFlag(){var t=this.isFlagged?i.j:i.Fb;this.$store.dispatch(t,this.comment.content_uuid)},toggleEditorsPick(){var t=this.comment.is_picked?i.K:i.I;this.$store.dispatch(t,this.comment.content_uuid)},toggleSpam(){var t=this.isSpam?i.td:i.Jc;this.$store.dispatch(t,this.comment.content_uuid)},toggleDisable(){var t=this.isDisabled?i.R:i.D;this.$store.dispatch(t,this.comment.content_uuid)},togglePin(){var t=this.comment.is_pinned?i.rd:i.mc;this.$store.dispatch(t,this.comment.content_uuid)},handleRemove(){this.$store.dispatch(i.Dc,this.comment.content_uuid)}},components:{secondaryActions:$t.a}},Ht=Object(k.a)(Ft,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("secondary-actions",{staticClass:"vf-comment-actions",attrs:{content:t.comment,"is-entered":t.isEntered,"is-flag-enabled":"","is-live-comments":"","is-content-removal-enabled":t.isContentRemovalEnabled,"is-content-editing-enabled":t.contentContainerSettings.is_content_editing_enabled&&t.isEditionAllowed,"content-editing-duration":t.contentEditingDuration},on:{edit:function(e){return t.$emit(t.CONTENT_ACTIONS.EDIT)},remove:t.handleRemove,flag:t.handleFlag,"toggle-flag":t.toggleFlag,"toggle-editors-pick":t.toggleEditorsPick,"toggle-spam":t.toggleSpam,"toggle-disable":t.toggleDisable,"toggle-pin":t.togglePin}})}),[],!1,null,null,null).exports,qt=n(899),Gt={components:{squareBadge:n(646).a},inject:[f.a]},Vt=Object(k.a)(Gt,(function(){var t=this.$createElement;return(this._self._c||t)("square-badge",{staticClass:"vf-deactivated-badge",attrs:{palette:this.PALETTES.DANGER,"aria-label":this.$i18n("conversations.moderation.disabled_aria_label")}},[this._v("\n    "+this._s(this.$i18n("conversations.moderation.disabled_content"))+"\n")])}),[],!1,null,null,null).exports,zt=n(915),Wt=n(916),Kt=n(917),Yt=n(918),Jt=n(910),Zt=n(703),Xt=n(658),Qt=n(900),te=n(886);function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(n),!0).forEach((function(e){ie(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var re={props:{comment:j.a.object.isRequired,isReply:j.a.bool.def(!1),locationInThread:Ot.b.isRequired,threadPalette:Ot.a.isRequired,isReplyToClickable:j.a.bool},inject:[f.a,f.e],setup(t,e){var n=t.comment.content_uuid,i=e.parent.$store;return ne(ne({},Object(jt.a)(i,n)),Object(Pt.a)(i,n))},data:()=>({isEntered:!1,editorStatus:Et.STATIC,hasContentUpdated:!1,editorContents:null,editorErrorMessage:"",thread:null}),mounted(){this.thread=this.threadByUuid(this.comment.thread_uuid);var t=this.comment.content_uuid,e=this.$el.getBoundingClientRect(),n=e.top,i=e.bottom,r=n<0,o=window.innerHeight-i<0;this.shouldScrollToSelf(r||o)&&this.scrollToSelf(t),this.observe()},beforeDestroy(){this.unobserve()},computed:ne(ne(ne({},Object(l.c)({getUser:r.kd,currentUser:r.hb,contentByUuid:r.R,activeReplyThreadByContainerUuid:r.a,mentionNotificationByContentUuid:r.gd,getLivecommentsSettingsByUuid:r.U,isOwner:r.fc,isCommentingExpired:r.Db})),Object(l.d)({threadByUuid(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Uc)]},isUnreadReplyInThread(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.cc)]},isUnreadMentionInThread(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.bc)]}})),{},{ariaTitle(){return this.isStubbed?this.isReply?this.$i18n("conversations.posts.aria_title.stubbed.reply"):this.$i18n("conversations.posts.aria_title.stubbed.comment"):this.isReply?this.$i18n("conversations.posts.aria_title.enabled.reply",{username:this.user.name}):this.$i18n("conversations.posts.aria_title.enabled.comment",{username:this.user.name})},parent(){return this.contentByUuid(this.comment.parent_uuid)},replyingTo(){return this.getUser(this.comment.parent_actor_uuid)},contentUuid(){return this.comment.content_uuid},avatarSize(){return this.isReply||vt.e?Tt.a.SMALL:Tt.a.MEDIUM},isOnlyContentInThread(){return this.locationInThreadBasedOnEditorStatus===pt.c.ONLY},avatarOutline(){return this.isReply||this.isOnlyContentInThread?this.PALETTES.NONE:this.threadPalette===this.PALETTES.ACCENT?this.PALETTES.ACCENT:this.threadPalette===this.PALETTES.MENTION?this.PALETTES.MENTION:this.PALETTES.LIGHT_PRIMARY},user(){var t=this.getUser(this.comment.actor_uuid);return this.isMutedStub||this.isDisabledStub||this.isDeletedStub||!t?this.getUser(Ct.c):t},isLoggedUserTheContentActor(){return this.comment.actor_uuid===this.currentUser.uuid},replyName(){return this.isReply&&this.replyingTo?this.replyingTo.name:""},boundingClientRect(){var t=this.$el.getBoundingClientRect();return{top:t.top,bottom:t.bottom}},notifierPalette(){return this.isUnreadMention?this.PALETTES.MENTION:this.PALETTES.ACCENT},isLoggedUserModOrAdmin(){return Object(F.I)(this.currentUser)},activeReplyThread(){return this.activeReplyThreadByContainerUuid(this.comment.content_container_uuid)},isMention(){return this.comment.parent_actor_uuid===this.currentUser.uuid&&this.comment.actor_uuid!==this.currentUser.uuid},mentionNotification(){return this.mentionNotificationByContentUuid(this.comment.content_uuid)},hasNotifier(){return this.isUnreadMention||this.isUnreadReply},threadUuidForUnreadContent(){return this.thread&&this.thread.thread_top_uuid&&this.comment.content_container_uuid!==this.thread.thread_top_uuid?this.thread.thread_top_uuid:this.comment.thread_uuid},isUnreadReply(){return this.isUnreadReplyInThread({thread_uuid:this.threadUuidForUnreadContent,content_uuid:this.comment.content_uuid})},isUnreadMention(){return this.isUnreadMentionInThread({thread_uuid:this.threadUuidForUnreadContent,content_uuid:this.comment.content_uuid})},contentContainerSettings(){return this.getLivecommentsSettingsByUuid(this.comment.content_container_uuid)},isEditorStatusStatic(){return this.editorStatus===Et.STATIC},locationInThreadBasedOnEditorStatus(){return this.isEditorStatusStatic?this.locationInThread:pt.c.ONLY},isEditorContentDifferent(){return this.editorContents&&this.editorContents!==this.comment.content},isContentRemovalEnabled(){return this.contentContainerSettings.is_content_removal_enabled},isReplyToEditedPost(){return this.parent&&this.parent.date_edited>this.comment.date_created},isEditionAllowed(){return!this.comment.is_picked&&!this.comment.is_pinned},enabledContentActions(){var t=this.isBadged&&!this.hasEditedBadge;return{isReplyEnabled:!t&&!this.isCommentingExpired(this.comment.content_container_uuid),isLikeEnabled:!t,isDislikeEnabled:!t,isFlagEnabled:!t,isShareEnabled:!t}}}),methods:ne(ne({},Object(l.b)({markMentionNotificationAsRead:i.cc})),{},{intersectionHandler(t){var e=this,n=t?this.findPlacement(t[0]):this.comment.place;if(this.$store.commit(m.qc,{content_uuid:this.comment.content_uuid,place:n}),this.hasNotifier&&n===pt.b.VIEW&&(setTimeout((function(){var t=e.comment,n=t.thread_uuid,r=t.content_uuid;return e.$store.dispatch("".concat(e.THREAD_NAMESPACE,"/").concat(i.Bc),{thread_uuid:n,content_uuid:r})}),pt.a),this.isMention&&this.mentionNotification)){var r=this.mentionNotification.notification_uuid;this.markMentionNotificationAsRead(r)}},onEnterOrLeave(t){this.isEntered=t},focusOnAvatar(){this.$refs.avatar.$el.focus()},observe(){var t=this;Object(P.d)().then((function(){t.commentObserver=Object(P.a)(t.$refs.intersector,t.intersectionHandler)}))},unobserve(){this.commentObserver&&this.commentObserver.unobserve(this.$refs.intersector)},findPlacement(t){var e=t.isIntersecting,n=t.boundingClientRect,i=t.rootBounds,r=n&&i&&n.top>i.top;return e?pt.b.VIEW:r?pt.b.BELOW:pt.b.ABOVE},shouldScrollToSelf(t){var e=this.comment,n=e.isNew,i=e.actor_uuid;return!this.activeReplyThread.thread_uuid&&n&&i===this.currentUser.uuid&&t},scrollToSelf(t){var e=Object(bt.a)(this.THREAD_NAMESPACE,t);Object(mt.a)(e).scrollIntoView(!0),Object(mt.a)("html").scrollTop-=X.d,Object(mt.a)("body").scrollTop-=X.d,this.$store.commit(m.eb,t)},handleEdit(){var t=this;this.editorStatus=Et.EDITABLE,setTimeout((function(){return t.$refs.contentEditor.focusOnInput()}),0)},handleFocusIn(t){var e=t.target;this.isEditorStatusStatic||(document.removeEventListener("click",this.closeEditorFromOutside),document.addEventListener("click",this.closeEditorFromOutside),Object(St.b)(e)||this.$refs.contentEditor.focusOnInput())},handleContentUpdate(t,e){this.hasContentUpdated=t,this.editorContents=e},handleSubmitEdit(){var t=this;this.isEditorContentDifferent&&(this.editorErrorMessage="",this.$store.dispatch(i.N,{content_uuid:this.comment.content_uuid,content:this.editorContents}).then((function(){t.handleCancelEdit()})).catch((function(){t.editorErrorMessage=t.$i18n("settings.error.generic_error")})))},closeEditorFromOutside(t){this.$el.contains(t.target)||this.handleCancelEdit()},handleCancelEdit(){this.editorStatus=Et.STATIC,this.hasContentUpdated=!1,this.editorContents=null,this.editorErrorMessage="",document.removeEventListener("click",this.closeEditorFromOutside)},setCommentVisibility(t,e){this.$emit("set-comment-visibility",e,t)}}),watch:{hasNotifier(){this.hasNotifier&&this.intersectionHandler()},currentUser:{handler(){var t=""!==this.getUser(this.comment.actor_uuid).name,e=!this.isLoggedUserTheContentActor&&!this.isLoggedUserModOrAdmin&&!t;this.setCommentVisibility(e,Boolean(this.parent))},immediate:!0}},components:{contentFocusContainerWithActions:Rt.a,contentEditor:It.a,threadedLayout:Zt.a,frontAvatar:Xt.a,contentActions:Nt.a,moderationActions:Lt,secondaryActions:Ht,unseenContentNotifier:Qt.a,postDetails:te.a,disabledBadge:qt.a,deactivatedBadge:Vt,pendingBadge:zt.a,mutedBadge:Wt.a,deletedBadge:Kt.a,editedBadge:Yt.a,bannedBadge:Jt.a},directives:{innerFocus:At.a,hovered:wt.a}},oe=Object(k.a)(re,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-focus-container-with-actions",{attrs:{"can-focus":!t.isEditorStatusStatic,"is-focused":!t.isEditorStatusStatic,"has-content-updated":t.hasContentUpdated,"editor-status":t.editorStatus,"is-submit-enabled":t.isEditorContentDifferent,"error-message":t.editorErrorMessage,"show-user-status":!t.isEditorStatusStatic},on:{"focus-on-element":t.handleFocusIn,submit:t.handleSubmitEdit,"cancel-edit":t.handleCancelEdit},nativeOn:{focusin:function(e){return t.handleFocusIn(e)}}},[n("div",{ref:"intersector"}),t._v(" "),n("article",{directives:[{name:"inner-focus",rawName:"v-inner-focus",value:t.onEnterOrLeave,expression:"onEnterOrLeave"},{name:"hovered",rawName:"v-hovered",value:t.onEnterOrLeave,expression:"onEnterOrLeave"}],staticClass:"vf3-comment",class:{"vf3-comment--collapsed":t.isOnlyContentInThread,"vf3-comment--entered":t.isEntered,"vf3-comment--muted":t.isMutedStub,"vf3-comment--disabled":t.isDisabledStub,"vf3-comment--pinned":t.comment.is_pinned,"vf3-comment--pinned--collapsed":t.comment.is_pinned&&t.isOnlyContentInThread},attrs:{"aria-label":t.ariaTitle}},[n("threaded-layout",{staticClass:"vf3-comment__content-layout",class:{"vf3-comment__content-layout--entered":t.isEntered},attrs:{"location-in-thread":t.locationInThreadBasedOnEditorStatus,palette:t.threadPalette},scopedSlots:t._u([{key:"left",fn:function(){return[n("unseen-content-notifier",{attrs:{"is-new":t.hasNotifier,palette:t.notifierPalette}}),t._v(" "),n("front-avatar",{ref:"avatar",staticClass:"vf3-comment__avatar",class:{"vf3-comment__top-level-avatar":!t.isReply,"vf3-comment__reply-avatar":t.isReply},attrs:{user:t.user,outline:t.avatarOutline,size:t.avatarSize,"is-clickable":!t.isStubbed}})]},proxy:!0},t.isStubbed?{key:"right",fn:function(){return[n("div",{staticClass:"vf3-comment__stubbed-badge",class:{"vf3-comment__stubbed-badge--reply":t.isReply}},[t.isDisabledStub?n("disabled-badge"):t.isMutedStub?n("muted-badge"):t.isDeletedStub?n("deleted-badge"):t._e()],1),t._v(" "),n("content-actions",{staticClass:"vf-comment__bottom-actions",attrs:{"is-reply-enabled":!1,"is-like-enabled":!1,"is-dislike-enabled":!1,"is-flag-enabled":!1,"is-share-enabled":!1,comment:t.comment,"is-entered":t.isEntered},on:{replies:function(e){return t.$emit("replies",e)}}})]},proxy:!0}:{key:"right",fn:function(){return[n("div",{staticClass:"vf3-comment__header"},[n("post-details",{attrs:{"content-uuid":t.comment.content_uuid,"user-uuid":t.user.uuid,"is-from-user":!0,"is-pinned":t.comment.is_pinned,"is-reply":t.isReply,"reply-name":t.replyName,"is-reply-to-edited-post":t.isReplyToEditedPost,"has-author-badge":t.isOwner(t.user.uuid),"custom-badges":t.user.custom_badges,"is-entered":t.isEntered,"is-reply-to-clickable":t.isReplyToClickable},on:{"reply-to-clicked":function(e){return t.$emit("reply-to-clicked")}}}),t._v(" "),n("secondary-actions",{directives:[{name:"show",rawName:"v-show",value:t.isEditorStatusStatic,expression:"isEditorStatusStatic"}],staticClass:"vf-comment__secondary-actions",attrs:{comment:t.comment,"is-entered":t.isEntered,"is-content-removal-enabled":t.isContentRemovalEnabled,"is-edition-allowed":t.isEditionAllowed},on:{edit:t.handleEdit}})],1),t._v(" "),t.isLoggedUserModOrAdmin?n("moderation-actions",{attrs:{comment:t.comment}}):t._e(),t._v(" "),n("content-editor",{ref:"contentEditor",staticClass:"vf-comment__content-editor",attrs:{"is-rich-text-enabled":!1,"content-uuid":t.comment.content_uuid,"content-container-uuid":t.comment.content_container_uuid,status:t.editorStatus,"is-focused":!t.isEditorStatusStatic,"character-limit":t.contentContainerSettings.maximum_content_length},on:{"content-update":t.handleContentUpdate,"request-submit":t.handleSubmitEdit},scopedSlots:t._u([{key:"content-start",fn:function(){return[t.hasDeletedBadge?n("deleted-badge",{staticClass:"vf-comment__content-badge"}):t.hasBannedBadge?n("banned-badge",{staticClass:"vf-comment__content-badge",attrs:{"is-ghost":t.hasGhostBannedBadge}}):t.hasDisabledBadge?n("disabled-badge",{staticClass:"vf-comment__content-badge vf-comment__content-badge--disabled",attrs:{"has-reason":""}}):t.hasDeactivatedBadge?n("deactivated-badge",{staticClass:"vf-comment__content-badge vf-comment__content-badge--deactivated"}):t.hasPendingBadge?n("pending-badge",{staticClass:"vf-comment__content-badge"}):t._e()]},proxy:!0},t.hasEditedBadge?{key:"content-end",fn:function(){return[n("edited-badge",{staticClass:"vf-comment__edited-badge"})]},proxy:!0}:null],null,!0)}),t._v(" "),n("content-actions",t._b({directives:[{name:"show",rawName:"v-show",value:t.isEditorStatusStatic,expression:"isEditorStatusStatic"}],staticClass:"vf-comment__bottom-actions",attrs:{comment:t.comment,"is-entered":t.isEntered},on:{reply:function(e){return t.$emit("reply",e)},replies:function(e){return t.$emit("replies",e)}}},"content-actions",t.enabledContentActions,!1))]},proxy:!0}],null,!0)})],1)])}),[],!1,null,"78d4cd6a",null).exports,se=n(762);function ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ae(Object(n),!0).forEach((function(e){ue(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var le={inject:[f.a,f.e,f.d],data:()=>({isExpanded:!1,isFocused:!1,preloadedContent:null,canRender:!0}),props:{threadUuid:j.a.uuid.isRequired,isReply:j.a.bool.def(!1),locationInThread:Ot.b.isRequired,threadPalette:Ot.a.isRequired,isReplyToClickable:j.a.bool},beforeCreate(){this.storeAction=i.n},created(){this.getSessionStorageContent(),this.showReplyBox()},computed:ce(ce({},Object(l.c)({getSettings:r.U,contentByUuid:r.R,isActiveReplyThread:r.Mb,deepLinkUuid:r.kb})),{},{localThreadLocation(){return this.isExpanded?pt.c.FIRST:this.locationInThread},localThreadPalette(){return this.isExpanded?this.PALETTES.LIGHT_PRIMARY:this.threadPalette},maximumCommentLength(){return this.getSettings(this.content.content_container_uuid).maximum_content_length},content(){return this.contentByUuid(this.threadUuid)},commentId(){return Object(bt.b)(this.THREAD_NAMESPACE,this.content.content_uuid)}}),methods:ce(ce({},Object(l.b)({addActiveReplyThread:i.a})),{},{getSessionStorageContent(){var t=sessionStorage.getItem("vf_content_editor_id_".concat(this.threadUuid));t&&(this.preloadedContent=t,this.isExpanded=!0)},showReplyBox(){var t=this.isActiveReplyThread(this.content.content_container_uuid),e=this.deepLinkUuid===this.threadUuid,n=0===this.content.total_replies;t&&e&&n&&(this.isExpanded=!0)},expandForm(){var t=this;this.isExpanded=!0,this.$nextTick((function(){Object(mt.a)(".vf-content-editor-form__textarea",t.$el).focus()})),this.trackReplyClick()},trackReplyClick(t){H.a.getInstance().$can("create","live-content",{trigger:t,action:M.g})||this.$publish(a.b.CHANNEL,a.b.EVENTS.ATTEMPTED_ACTION,{action:M.i})},repliesClicked(){0!==this.content.total_replies&&this.setReplyThread()},setReplyThread(){var t,e=this.content,n=e.content_uuid,i=e.thread_uuid;if(this.isReply){var r=Object(bt.a)(this.THREAD_NAMESPACE,i);t=this.$el.offsetTop+Object(mt.a)(r).parentElement.parentElement.offsetTop-X.c}else t=this.$el.parentElement.parentElement.offsetTop-X.c;return this.addActiveReplyThread({thread_uuid:n,offset_top:t,mode:ht.REPLY_THREAD_MODES.REPLIES})},focusedIn(){this.isExpanded=!0,this.isFocused=!0,this.$emit("focusin")},focusRemoved(){this.isFocused=!1,this.isExpanded=!1,this.preloadedContent=null,this.$emit("remove-focus")},removeFocus(){this.$refs.replyForm.removeFocus()},replyToClicked(){var t=this;return this.$store.dispatch("".concat(this.THREAD_NAMESPACE,"/").concat(i.Sb),{content_container_uuid:this.content.content_container_uuid,thread_uuid:this.content.parent_uuid,selected_content_uuids:[this.content.content_uuid],fetchAction:this.THREAD_FETCH_ACTION}).then((function(){return t.updateReplyThread(t.content.parent_uuid,t.content.thread_uuid)}))},updateReplyThread(t,e){this.isActiveReplyThread(this.content.content_container_uuid)?this.$store.commit(m.id,{uuid:this.content.content_container_uuid,mode:ht.REPLY_THREAD_MODES.REPLY_PARENT}):this.openReplyThread(t,e)},openReplyThread(t,e){var n=Object(bt.a)(this.THREAD_NAMESPACE,e),i=Object(mt.a)(n).parentElement.parentElement.offsetTop-X.c;return this.addActiveReplyThread({thread_uuid:t,offset_top:i,mode:ht.REPLY_THREAD_MODES.REPLY_PARENT})},setCommentVisibility(t,e){t&&(this.canRender=!e)}}),components:{comment:oe,replyForm:se.a}},de=Object(k.a)(le,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("reply-form",{ref:"replyForm",staticClass:"vf3-content-with-reply-form",class:{"vf3-content-with-reply-form--is-reply":t.isReply},attrs:{id:t.commentId,"replying-to":t.content,"store-action":t.storeAction,"is-expanded":t.isExpanded,"character-limit":t.maximumCommentLength,"preloaded-content":t.preloadedContent},on:{focusin:t.focusedIn,"remove-focus":t.focusRemoved,"clear-reply":function(e){t.isExpanded=!1}}},[n("comment",t._g({directives:[{name:"show",rawName:"v-show",value:t.canRender,expression:"canRender"}],ref:"comment",attrs:{comment:t.content,"is-reply":t.isReply,"location-in-thread":t.localThreadLocation,"thread-palette":t.localThreadPalette,"is-reply-to-clickable":t.isReplyToClickable},on:{reply:t.expandForm,replies:t.repliesClicked,"reply-to-clicked":t.replyToClicked,"set-comment-visibility":t.setCommentVisibility}},t.$listeners))],1)}),[],!1,null,"2d49d3f2",null).exports,he=(n(329),n(897)),pe=n(887),fe=n(898);function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(Object(n),!0).forEach((function(e){ve(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _e={props:{contentContainerUuid:j.a.uuid.isRequired,threads:j.a.array.isRequired,itemClass:j.a.string.isRequired,isExpanded:j.a.bool.def(!1),enablePromos:j.a.bool.def(!1),enableReplyPromos:j.a.bool.def(!1),hasMoreAvailable:j.a.bool,fadeOutShowing:j.a.bool.def(!1),nextFocusedComment:j.a.uuid},inject:[f.e],data:()=>({hiddenComments:[]}),created(){this.widgetTag=u.d.COMMENTS,this.HEADER_HEIGHT=X.c,this.createAction=i.n,this.fetchRepliesAction=i.bb,this.fetchSelectedAction=i.ub,this.contentContainerType=T.b,this.commentWithReplyForm=de,this.flaggedThreadsForRemoval=[],this.hiddenComments=[]},computed:be(be({},Object(l.c)({widgetSettingsByUuid:r.zd,livecommentsSettingsByUuid:r.U,totalVisibleContentLoaded:r.bd})),{},{limit(){return this.widgetSettingsByUuid(this.contentContainerUuid).pagination_reply_limit},maximumContentLength(){return this.settings.maximum_content_length},settings(){return this.livecommentsSettingsByUuid(this.contentContainerUuid)},totalCount(){return this.totalVisibleContentLoaded(this.contentContainerUuid)}}),methods:{hasBorder(t){return this.hasMoreAvailable||t!==this.threads.length-1},setCommentVisibility(t,e,n){if(!e){var i=0,r=this.hiddenComments;if(n)r.push(t),i=-1;else{var o=r.indexOf(t);o>-1&&(r.splice(o,1),i=1)}this.THREAD_NAMESPACE===s.b?this.$store.commit(m.kd,{content_container_uuid:this.contentContainerUuid,count:i}):this.$store.commit(m.jd,{content_container_uuid:this.contentContainerUuid,count:i})}}},components:{adContainerConversation:fe.a,topLevelThread:pe.a,conversationsList:he.a}},ge=Object(k.a)(_e,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("conversations-list",{attrs:{"has-no-separator":"","has-height-transition":""}},[t._l(t.threads,(function(e,i){return[n("li",{directives:[{name:"show",rawName:"v-show",value:!t.hiddenComments.includes(e),expression:"!hiddenComments.includes(threadUuid)"}],key:e,class:t.itemClass},[n("top-level-thread",{attrs:{"content-container-uuid":t.contentContainerUuid,limit:t.limit,"fetch-replies-action":t.fetchRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"thread-uuid":e,"header-height-px":t.HEADER_HEIGHT,"store-action":t.createAction,"maximum-content-length":t.maximumContentLength,"content-component":t.commentWithReplyForm,"is-expanded":t.isExpanded,"has-border":t.hasBorder(i),"content-container-type":t.contentContainerType,"enable-promos":t.enablePromos,"enable-reply-promos":t.enableReplyPromos,"widget-tag":t.widgetTag,"total-count":t.totalCount,"fade-out-showing":t.fadeOutShowing,"next-comment-uuid":t.threads[i+1],"next-focused-comment":t.nextFocusedComment},on:{"set-comment-visibility":t.setCommentVisibility}}),t._v(" "),t.fadeOutShowing?t._e():n("ad-container-conversation",{staticClass:"vf3-conversations-list__promo",attrs:{"widget-tag":t.widgetTag,enabled:t.enablePromos,index:i,"thread-uuid":e,"content-container-type":t.contentContainerType,"total-count":t.totalCount,"is-last-comment":t.threads.length-1===i}})],1)]}))],2)}),[],!1,null,null,null).exports,ye=n(849);function Oe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ee(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(n),!0).forEach((function(e){Ce(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ce(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Te={props:{containerId:{type:String,required:!0}},data:function(){return{isThresholdReached:!1,adSettings:{ad_integration:A.b[u.d.COMMENTS].ad_integration,pixel_threshold:A.b[u.d.COMMENTS].pixel_threshold,site_ad_id:A.b[u.d.COMMENTS].site_ad_id,widget_tag:u.d.COMMENTS},adStatus:S.PENDING,enabledAd:!0,adProvider:null}},computed:{showAd(){return this.adStatus===S.SUCCESS},showLabelAd(){if(!this.adProvider)return null;var t=this.adProvider;return![C.a.TABOOLA,C.a.OUTBRAIN].includes(t)},adImplementationClass(){return this.adProvider?"vf-promo-".concat(this.adProvider):null},eventPayload(){return{ad_setting:this.adSettings.ad_integration,widget:u.d.COMMENTS,adData:{index:0,container_id:this.containerId,total_count:0}}}},methods:Ee(Ee({},Object(l.b)({trackAdEvent:i.gd})),{},{loadSetting(){var t=this.$store.getters[r.Jc],e=t[this.adSettings.ad_integration];this.enabledAd=e!==C.a.NONE,this.adProvider=e,this.pixel_threshold=t[this.adSettings.pixel_threshold]},initializeLoadTracker(){var t=this;Object(P.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"".concat(this.pixel_threshold,"px")}).then((function(){t.isThresholdReached=!0,t.initializeAnalytics(t.$el)}))},initializeAnalytics(t){var e=Ee(Ee({},this.eventPayload),{},{event_type:a.b.EVENTS.AD_LOAD,adElement:t});this.trackAdEvent(e)},onSuccess(){this.adStatus=S.SUCCESS},onError(){this.adStatus=S.ERROR}}),mounted(){var t;(this.loadSetting(),this.enabledAd)?this.initializeLoadTracker():this.initializeAnalytics(null===(t=this.$el)||void 0===t?void 0:t.parentNode)},components:{adContainer:N.a}},Se=Object(k.a)(Te,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.enabledAd?n("div",{staticClass:"vf-ad-comments"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAd,expression:"showAd"}],staticClass:"vf-promo",class:t.adImplementationClass},[t.showLabelAd?n("div",{staticClass:"vf-label vf-label-upper vf-promo__label"},[t._v("\n            "+t._s(t.$i18n("ads.advertisement"))+"\n        ")]):t._e(),t._v(" "),t.isThresholdReached?n("ad-container",{attrs:{"unique-id":""+t._uid,"ad-settings":t.adSettings},on:{success:t.onSuccess,error:t.onError}}):t._e()],1)]):t._e()}),[],!1,null,"78224914",null).exports,Ae={components:{commentIcon:ye.a,adContainerConversationEmpty:Se},props:{showAdOnEmptyWidget:j.a.bool.isRequired,containerId:j.a.string.isRequired}},we=Object(k.a)(Ae,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vf-ad-empty-comments"},[e("div",[e("span",{staticClass:"vf-empty-comments__icon-wrapper"},[e("comment-icon",{staticClass:"vf-icon-small vf-empty-comments__icon"})],1),this._v("\n        "+this._s(this.$i18n("conversations.announce.empty.title.comments"))+"\n    ")]),this._v(" "),this.showAdOnEmptyWidget?e("ad-container-conversation-empty",{attrs:{"container-id":this.containerId}}):this._e()],1)}),[],!1,null,"f1086c48",null).exports;function je(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Pe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Re(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Re(Object(n),!0).forEach((function(e){Ie(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ue={props:{thread:j.a.object.isRequired,contentContainer:j.a.object.isRequired,hasMoreAvailable:j.a.bool,isTabActive:j.a.bool.def(!1),disableMentions:j.a.bool.def(!1),hasPreview:j.a.bool,fadeOutShowing:j.a.bool.def(!1),nextFocusedComment:j.a.uuid},inject:[f.e,f.d],data:()=>({isTopIntersecting:!1,isBelowPinnedIntersecting:!1}),created(){this.PALETTES=dt.a,this.HEADER_HEIGHT=X.c,this.BOTTOM=ft.BOTTOM,this.createAction=i.n,this.fetchAction=i.ub,this.fetchRepliesAction=i.bb,this.fetchDirectRepliesAction=i.ab,this.fetchSelectedAction=i.ub,this.commentWithReplyForm=de,this.isJumpyBrowser=vt.d},mounted(){var t=this;Object(P.d)().then((function(){t.topIntersectionObserver=Object(P.a)(t.$refs.top,t.topObserverHandler,{rootMargin:"-50px"}),t.belowPinnedIntersectionObserver=Object(P.a)(t.$refs.belowPinned,t.belowPinnedObserverHandler,{rootMargin:"-50px"})}))},beforeDestroy(){this.topIntersectionObserver&&this.topIntersectionObserver.unobserve(this.$refs.top),this.belowPinnedIntersectionObserver&&this.belowPinnedIntersectionObserver.unobserve(this.$refs.belowPinned)},computed:Ne(Ne({},Object(l.c)({interactions:r.Lb,activeReplyThreadByContainerUuid:r.a,allMentionNotifications:r.m,mentionNotificationByUuid:r.rc,contentByUuid:r.R,siteSettings:r.Jc,livecommentsSettingsByUuid:r.U,widgetSettingsByUuid:r.zd,isOffline:r.Wb})),{},{showAdOnEmptyWidget(){return 1===this.$store.getters[r.Jc].show_ads_on_empty_widget},containerId(){return this.$store.getters[r.M](this.contentContainer.content_container_uuid)},isEmpty(){return 0===this.thread.visible_content.length},limit(){return this.widgetSettingsByUuid(this.contentContainer.content_container_uuid).pagination_reply_limit},pinnedThreads(){return this.thread.pinned_content},unPinnedThreads(){return this.thread.unpinned_content},visibleThreads(){return this.thread.visible_content},maximumContentLength(){return this.settings.maximum_content_length},below(){return this.newCommentsByPlacement(pt.b.BELOW)},unreadComments(){return this.$store.getters["".concat(this.THREAD_NAMESPACE,"/").concat(r.hd)](this.contentContainer.content_container_uuid)},notOwnUnreadComments(){var t=this;return this.unreadComments.filter((function(e){var n=e.content_uuid;return!t.$store.getters[r.X](n)}))},newTopLevelAbove(){return this.newCommentsByPlacement(pt.b.ABOVE)},allContainerMentionNotifications(){if(this.disableMentions)return[];var t=this.contentContainer.content_container_uuid;return this.allMentionNotifications.filter((function(e){return e.content_container_uuid===t}))},shouldPreserveTopRTBarHeight(){return vt.d&&(this.allContainerMentionNotifications.length>0||this.newTopLevelAbove.length>0)},mentionsAbove(){var t=this;return this.allContainerMentionNotifications.filter((function(e){return t.filterMentionsByPlacement(e,pt.b.ABOVE)})).sort((function(e,n){if(e.thread_uuid===n.thread_uuid)return n.time-e.time;var i=t.contentByUuid(e.thread_uuid),r=t.contentByUuid(n.thread_uuid);return i&&r?i.time-r.time:0})).map((function(t){return t.content_uuid}))},mentionsBelow(){var t=this;return this.allContainerMentionNotifications.filter((function(e){return t.filterMentionsByPlacement(e,pt.b.BELOW)})).sort((function(e,n){if(e.thread_uuid===n.thread_uuid)return e.time-n.time;var i=t.contentByUuid(e.thread_uuid),r=t.contentByUuid(n.thread_uuid);return i&&r?r.time-i.time:0})).map((function(t){return t.content_uuid}))},isTopRTBarMention(){return this.mentionsAbove.length>0},topRTBarCount(){return this.isTopRTBarMention?this.mentionsAbove.length:this.newTopLevelAbove.length},topRTBarLabel(){return this.isTopRTBarMention?"conversations.realtime_bar.label.mentions":"conversations.realtime_bar.label.comments"},rtBarTopProps(){return this.isBackOnline?{isVisible:!0,labelText:this.$i18n("conversations.reload"),showActionButton:!1,palette:dt.a.ACCENT,disabled:this.isOffline}:this.isTopRTBarMention?{isVisible:!0,labelText:this.$i18n("conversations.realtime_bar.label.mentions",{count:this.topRTBarCount}),showActionButton:!1,palette:dt.a.MENTION}:{isVisible:this.topRTBarCount>0&&!(vt.d&&this.pinnedThreads.length>0),labelText:this.$i18n("conversations.realtime_bar.label.comments",{count:this.topRTBarCount}),actionText:this.$i18n("conversations.realtime_bar.skip_to_top"),showActionButton:!this.isTopIntersecting,palette:dt.a.ACCENT}},showTopRTBarBelowPinned(){return this.pinnedThreads.length>0&&!this.isTopRTBarMention&&this.topRTBarCount>0&&vt.d},showBottomRTBar(){return this.mentionsBelow.length>0},activeReplyThread(){return this.activeReplyThreadByContainerUuid(this.contentContainer.content_container_uuid)},shouldShowReplyThread(){return this.activeReplyThread.thread_uuid&&this.isTabActive},realtimeContentCount(){return this.$store.getters["".concat(this.THREAD_NAMESPACE,"/").concat(r.Xc)](this.contentContainer.content_container_uuid)},arePromosEnabled(){return this.siteSettings[lt.a]!==C.a.NONE},areReplyPromosEnabled(){return Boolean(this.siteSettings[C.c])},settings(){return this.livecommentsSettingsByUuid(this.contentContainer.content_container_uuid)},isBackOnline(){return this.contentContainer.is_stale}}),methods:Ne(Ne({},Object(l.b)({addActiveReplyThread:i.a,reloadContainer:i.yc})),{},{topObserverHandler(t){this.isTopIntersecting=t[0].isIntersecting,this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(m.ld),{thread_uuid:this.contentContainer.content_container_uuid,is_in_view:t[0].isIntersecting})},belowPinnedObserverHandler(t){var e=je(t,1)[0].isIntersecting;this.isBelowPinnedIntersecting=e,this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(m.ld),{thread_uuid:this.contentContainer.content_container_uuid,is_in_view:e})},newCommentsByPlacement(t){return this.notOwnUnreadComments.filter((function(e){return e.place===t}))},handleRtBarTopClick(){var t=this;if(this.isBackOnline){var e=this.contentContainer.content_container_uuid;Object(Q.f)(this.$store.commit,Z.b,e),this.reloadContainer(e).then((function(){Object(Q.g)(t.$store.commit,Z.b,e)})).catch((function(){Object(Q.e)(t.$store.commit,Z.b,e,"",1/0)}))}else this.isTopIntersecting?this.skipToTop():this.goToNextUnseenTop()},goToNextUnseenTop(){var t=this,e=this.isTopRTBarMention,n=this.nextUnseen({place:pt.b.ABOVE,isMention:e});this.$nextTick().then((function(){return t.findElement(n,e)}))},goToNextUnseenBottom(){var t=this.nextUnseen({place:pt.b.BELOW,isMention:!0});this.findElement(t,!0)},findElement(t,e){if(e){var n=Object(bt.a)(this.THREAD_NAMESPACE,t);return Object(mt.a)(n)?this.goToElement(t):this.initializeAndFetchThread(t)}return this.goToElement(t)},initializeAndFetchThread(t){var e=this,n=this.$store.getters[r.gd](t),o=n.target_uuid,s=n.thread_uuid;return this.$store.dispatch("".concat(this.THREAD_NAMESPACE,"/").concat(i.Sb),{content_container_uuid:this.contentContainer.content_container_uuid,thread_uuid:o,selected_content_uuids:[t],fetchAction:this.THREAD_FETCH_ACTION}).then((function(){return e.openReplyThread(o,s)}))},openReplyThread(t,e){var n=Object(bt.a)(this.THREAD_NAMESPACE,e),i=Object(mt.a)(n).parentElement.parentElement.offsetTop-X.c;return this.addActiveReplyThread({thread_uuid:t,offset_top:i,mode:ht.REPLY_THREAD_MODES.MENTION})},skipToTop(){if(this.realtimeContentCount){var t=this.contentContainer.content_container_uuid;this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(m.yb),{thread_uuid:t,limit:this.limit})}this.goToTop()},goToElement(t){var e=Object(bt.a)(this.THREAD_NAMESPACE,t),n=Object(mt.a)(e);n&&(this.scrollToElement(n),this.$store.commit(m.eb,t))},goToTop(){var t=this.pinnedThreads.length>0?this.$refs.belowPinned:this.$refs.top;t&&this.scrollToElement(t)},scrollToElement(t){var e=vt.d?this.$refs.rtJumpyBrowserHeader:this.$refs.rtHeader,n=getComputedStyle(e).getPropertyValue("top"),i=t.getBoundingClientRect().top;window.scrollBy({top:i-parseFloat(n),behavior:"smooth"})},nextUnseen(t){var e=t.place;if(t.isMention)return e===pt.b.ABOVE?this.mentionsAbove[0]:this.mentionsBelow[0];if(this.realtimeContentCount){var n=this.contentContainer.content_container_uuid;this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(m.yb),{thread_uuid:n,limit:1})}return this.newTopLevelAbove.length?this.newTopLevelAbove[0].content_uuid:{}},filterMentionsByPlacement(t,e){var n=t.content_uuid,i=t.thread_uuid;return this.visibleThreads.includes(i)?this.$store.getters["".concat(this.THREAD_NAMESPACE,"/").concat(r.Uc)](i).visible_content.includes(n)?this.contentByUuid(n).place===e:this.contentByUuid(i).place===e:this.unreadComments.find((function(t){return t.thread_uuid===i}))?e===pt.b.ABOVE&&t:e===pt.b.BELOW&&t}}),watch:{shouldShowReplyThread(){this.fadeOutShowing&&this.shouldShowReplyThread&&this.$emit("hide-fade-out")}},components:{topTypingIndicator:yt.a,realtimeBar:_t.a,replyThread:gt.a,heightTransition:v.a,emptyComments:we,commentsList:ge}},Le=Object(k.a)(Ue,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all-comments"},[n("div",{ref:"top"}),t._v(" "),n("div",{ref:"rtHeader",staticClass:"all-comments__top-rt-bar-container",class:{"all-comments__top-rt-bar-container--preserve":t.shouldPreserveTopRTBarHeight}},[n("realtime-bar",t._b({staticClass:"all-comments__top-rt-bar",attrs:{"aria-hidden":(!t.rtBarTopProps.isVisible).toString()},on:{"realtime-main-action":t.handleRtBarTopClick,"realtime-arrow-action":t.skipToTop}},"realtime-bar",t.rtBarTopProps,!1))],1),t._v(" "),n("height-transition",[t.isEmpty?t._e():n("comments-list",{staticClass:"vf-conversations-list__pinned-comments",class:{"vf-conversations-list__pinned-comments--empty":0===t.pinnedThreads.length},attrs:{"item-class":"vf3-conversations-list--pinned--list","enable-promos":t.arePromosEnabled,"content-container-uuid":t.contentContainer.content_container_uuid,threads:t.pinnedThreads,"fade-out-showing":t.fadeOutShowing,"next-focused-comment":t.nextFocusedComment}})],1),t._v(" "),n("div",{ref:"belowPinned"}),t._v(" "),t.isJumpyBrowser?n("div",{ref:"rtJumpyBrowserHeader",staticClass:"all-comments__top-rt-bar-container",class:{"all-comments__top-rt-bar-container--preserve":t.shouldPreserveTopRTBarHeight}},[n("realtime-bar",{staticClass:"all-comments__top-rt-bar",attrs:{"is-visible":t.showTopRTBarBelowPinned,"label-text":t.$i18n("conversations.realtime_bar.label.comments",{count:t.topRTBarCount}),"action-text":t.$i18n("conversations.realtime_bar.skip_to_top"),palette:t.PALETTES.ACCENT,"show-action-button":!t.isBelowPinnedIntersecting,"aria-hidden":(!t.showTopRTBarBelowPinned).toString()},on:{"realtime-main-action":function(e){t.isBelowPinnedIntersecting?t.skipToTop():t.goToNextUnseenTop()},"realtime-arrow-action":t.skipToTop}})],1):t._e(),t._v(" "),n("top-typing-indicator",{staticClass:"all-comments__typing-indicator",attrs:{"is-typing":t.interactions(t.contentContainer.content_container_uuid).isTyping}}),t._v(" "),n("height-transition",[t.isEmpty?n("empty-comments",{attrs:{"show-ad-on-empty-widget":t.showAdOnEmptyWidget,"container-id":t.containerId}}):t._e()],1),t._v(" "),n("height-transition",[t.isEmpty?t._e():n("comments-list",{staticClass:"vf3-conversations-list--comments",attrs:{"item-class":"vf3-conversations-list--comments--list","is-expanded":t.hasPreview,"content-container-uuid":t.contentContainer.content_container_uuid,threads:t.unPinnedThreads,"enable-promos":t.arePromosEnabled,"enable-reply-promos":t.areReplyPromosEnabled,"has-more-available":t.hasMoreAvailable,"fade-out-showing":t.fadeOutShowing,"next-focused-comment":t.nextFocusedComment}})],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowReplyThread,expression:"shouldShowReplyThread"}],staticClass:"all-comments__reply-thread-overlay"})]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.shouldShowReplyThread?n("reply-thread",{style:{top:t.activeReplyThread.offset_top+"px"},attrs:{limit:t.limit,"create-action":t.createAction,"fetch-action":t.fetchAction,"fetch-replies-action":t.fetchRepliesAction,"fetch-direct-replies-action":t.fetchDirectRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"maximum-content-length":t.maximumContentLength,"content-component":t.commentWithReplyForm,"active-reply-thread":t.activeReplyThread},on:{"is-reply-thread-header-sticky":function(e){return t.$emit("is-reply-thread-header-sticky",e)}}}):t._e()],1),t._v(" "),n("realtime-bar",{staticClass:"bottom-rt-bar",attrs:{location:t.BOTTOM,"is-visible":t.showBottomRTBar,"label-text":t.$i18n("conversations.realtime_bar.label.mentions",{count:t.mentionsBelow.length}),palette:t.PALETTES.MENTION,"show-action-button":!1},on:{"realtime-main-action":t.goToNextUnseenBottom}})],1)}),[],!1,null,"693d272f",null).exports,xe={props:{contentContainer:j.a.object.isRequired,thread:j.a.object.isRequired,isReady:j.a.bool.isRequired,isRefetchingComments:j.a.bool.isRequired,reloadStatus:j.a.string,hasMoreAvailable:j.a.bool,isTabActive:j.a.bool.def(!1),fadeOutShowing:j.a.bool.def(!1),nextFocusedComment:j.a.string},components:{threadTab:Le,vfSpinningLoader:ut.a,vfExclamationMarkIcon:ct.a},inject:[f.a,f.b],provide:{[f.e]:s.a,[f.d]:i.ub}},De=Object(k.a)(xe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isReady?n("thread-tab",{attrs:{thread:t.thread,"content-container":t.contentContainer,"has-more-available":t.hasMoreAvailable,"is-tab-active":t.isTabActive,"fade-out-showing":t.fadeOutShowing,"next-focused-comment":t.nextFocusedComment},on:{"is-reply-thread-header-sticky":function(e){return t.$emit("is-reply-thread-header-sticky",e)},"hide-fade-out":function(e){return t.$emit("hide-fade-out")}}}):n("div",{staticClass:"vf3-comments__loader vf-flex vf-centered"},[t.isRefetchingComments?n("vf-spinning-loader",{attrs:{size:t.SIZES.MEDIUM,palette:t.PALETTES.ACCENT,status:t.reloadStatus}}):n("vf-exclamation-mark-icon",{attrs:{circle:"outline",size:t.SIZES.MEDIUM}})],1)}),[],!1,null,"47d41eec",null).exports,$e={props:{contentContainer:j.a.object.isRequired,thread:j.a.object.isRequired,isReady:j.a.bool.isRequired,isRefetchingComments:j.a.bool.isRequired,reloadStatus:j.a.string,hasMoreAvailable:j.a.bool,isTabActive:j.a.bool.def(!1),fadeOutShowing:j.a.bool.def(!1),nextFocusedComment:j.a.string},components:{threadTab:Le,vfSpinningLoader:ut.a,vfExclamationMarkIcon:ct.a},inject:[f.a,f.b],provide:{[f.e]:s.b,[f.d]:i.db}},ke=Object(k.a)($e,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isReady?n("thread-tab",{attrs:{"disable-mentions":"",thread:t.thread,"content-container":t.contentContainer,"has-more-available":t.hasMoreAvailable,"is-tab-active":t.isTabActive,"has-preview":!1,"fade-out-showing":t.fadeOutShowing,"next-focused-comment":t.nextFocusedComment},on:{"is-reply-thread-header-sticky":function(e){return t.$emit("is-reply-thread-header-sticky",e)}}}):n("div",{staticClass:"vf3-comments__loader vf-flex vf-centered"},[t.isRefetchingComments?n("vf-spinning-loader",{attrs:{size:t.SIZES.MEDIUM,palette:t.PALETTES.ACCENT,status:t.reloadStatus}}):n("vf-exclamation-mark-icon",{attrs:{circle:"outline",size:t.SIZES.MEDIUM}})],1)}),[],!1,null,"43f95e4a",null).exports,Be=n(267),Me=n(670),Fe=n(434);function He(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return qe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ge(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ge(Object(n),!0).forEach((function(e){ze(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var We=Object(w.b)("settings-"),Ke={props:{thread:j.a.object.isRequired,featuredThread:j.a.object.isRequired,contentContainer:j.a.object.isRequired,sectionUuid:j.a.uuid.isRequired,user:j.a.object.isRequired,initialHeight:j.a.oneOfType([Number,String])},inject:[f.a,f.b],data:()=>({hasStickiedTabs:!1,isLoadingNewComments:!1,newCommentsHasError:!1,isReplyThreadHeaderSticky:!1,areSettingsOpenedByUser:!1,settingsComponent:null,trendingArticlesComponent:null,initialTab:null,fadeoutShow:!1,fadeoutObserver:null,loadMoreCommentsCount:0,nextFocusedComment:null}),beforeCreate(){this.settingsAreaID=We(),this.storeAction=i.m},created(){this.setInitialTab()},mounted(){this.$publish(a.f.CHANNEL,a.f.EVENTS.LOADED,this.$el),this.initDom(),this.deeplinkUuid&&this.initializeFocusView(),this.fetchTrendingArticlesComponent(),this.initializeFadeout(),this.registerActions()},beforeDestroy(){this.observer&&this.observer.unobserve(this.$refs.tabbedNavTop)},computed:Ve(Ve({},Object(l.c)({isCommentingExpired:r.Db,deeplinkUuid:r.kb,currentUser:r.hb,errorStatus:r.ub,getSettings:r.U,getWidgetSettings:r.zd,isCurrentUserModOrAdmin:r.Tb,siteSettings:r.Jc,allCommentsCount:r.h,getFeaturedCommentsCount:r.nb,getCurrentTab:r.jc})),{},{contentContainerUuid(){return this.contentContainer.content_container_uuid},settings(){return this.getSettings(this.contentContainerUuid)},widgetSettings(){return this.getWidgetSettings(this.contentContainerUuid)},areSettingsVisible(){return this.isCurrentUserModOrAdmin&&null!==this.settingsComponent&&this.areSettingsOpenedByUser},featuredCommentsCount(){return this.getFeaturedCommentsCount(this.contentContainerUuid)},tabs(){return[{name:X.a.FEATURED,text:this.$i18n("comments.navigation.featured"),hasNewContent:!1,count:this.featuredCommentsCount,ariaLabel:this.$i18n("comments.navigation.featured_tab_label",{count:this.featuredCommentsCount}),test:this.featuredCommentsCount>0},{name:X.a.ALL_COMMENTS,text:this.$i18n("comments.navigation.all_comments"),hasNewContent:!1,count:this.allCommentsCount(this.contentContainerUuid),ariaLabel:this.$i18n("comments.navigation.all_comments_tab_label",{count:this.allCommentsCount(this.contentContainerUuid)}),test:!0}]},filteredTabs(){return this.tabs.filter((function(t){return t.test}))},isReady(){return this.thread&&!this.isRefetchingComments&&!this.didRefetchingFail},newCommentPlaceholder(){var t=this.thread.visible_content.length,e=t>0?this.$i18n("comments.new_comment.join_placeholder"):this.$i18n("comments.new_comment.start_placeholder"),n=t>0?this.$i18n("comments.new_comment.join_placeholder_with_name",{name:this.currentUser.username_pending||this.currentUser.name}):this.$i18n("comments.new_comment.start_placeholder_with_name",{name:this.currentUser.username_pending||this.currentUser.name});return Object(F.H)(this.currentUser)?n:e},reloadStatus(){return this.errorStatus(this.contentContainerUuid,Z.b)},isRefetchingComments(){return this.reloadStatus===Be.a.PENDING},didRefetchingFail(){return this.reloadStatus===Be.a.ERROR},areTrendingArticlesVisible(){return null!==this.trendingArticlesComponent},areMoreCommentsAvailable(){switch(this.currentTab){case X.a.ALL_COMMENTS:return this.thread.more_available;case X.a.FEATURED:return this.featuredThread.more_available;default:return!1}},currentTab(){return this.getCurrentTab(this.contentContainerUuid)},isAllCommentsTabActive(){return this.currentTab===X.a.ALL_COMMENTS},isFeaturedCommentsTabActive(){return this.currentTab===X.a.FEATURED},fadeoutMaxHeight(){return this.fadeoutShow?{"max-height":"".concat(this.initialHeight,"px")}:{}},fadeoutPosition(){var t=parseInt(this.initialHeight,10);return{top:"".concat(t-100,"px")}},fadeoutEnabled(){return this.initialHeight>0&&!this.deeplinkUuid},arePromosEnabled(){return this.siteSettings[lt.a]&&this.siteSettings[lt.a]!==C.a.NONE},doesLastCommentHaveAd(){var t=this.thread.visible_content.length,e=this.widgetSettings,n=e.first_promo_position,i=e.promo_interval;return t===n||(t-n)%i==0}}),methods:Ve(Ve({},Object(l.b)({fetchAllComments:i.kb,fetchFeaturedComments:i.db,addActiveReplyThread:i.a,initializeThread:"".concat(s.a,"/").concat(i.Sb)})),{},{toggleSettings(){var t=this;this.hasStickiedTabs?(this.areSettingsOpenedByUser=!0,this.$nextTick().then((function(){t.$refs.settings.$el.scrollIntoView()}))):this.areSettingsOpenedByUser=!this.areSettingsOpenedByUser},initDom(){var t=this;p.a.add(Object(mt.a)(".vf3-comments__tabbed-nav .vf-tabbed-nav",this.$el)),Object(P.d)().then((function(){t.observer=Object(P.a)(t.$refs.tabbedNavTop,t.handleObserved,{})}))},initializeFocusView(){var t=this;this.$refs.tabbedNavigation.selectTab(X.a.ALL_COMMENTS);var e=this.deeplinkUuid,n=this.contentContainer.content_container_uuid;return this.$store.dispatch(i.ub,{content_container_uuid:n,content_uuids:e}).then((function(){if(!t.$store.getters[r.Qb](e))return Promise.resolve();var o,s,a=t.$store.getters[r.R](e),c=a.thread_uuid===n;return c?(s=e,o=[]):(s=a.parent_uuid,o=[e]),t.initializeThread({content_container_uuid:n,thread_uuid:s,selected_content_uuids:o,fetchAction:i.ub}).then((function(){var n=c?e:a.thread_uuid,i=t.findElementOffset(n);return t.addActiveReplyThread({thread_uuid:s,offset_top:i,mode:ht.REPLY_THREAD_MODES.REPLIES})}))}))},findElementOffset(t){var e=Object(bt.a)(s.a,t);return Object(mt.a)(e).parentElement.parentElement.offsetTop-X.c},handleObserved(t){var e=He(t,1)[0].isIntersecting;this.hasStickiedTabs=!e},registerActions(){Fe.b.register({actionName:"live_comments.load_more",callback:this.handleLoadMore,context:this,instanceId:this.thread.thread_uuid})},handleLoadMoreClick(){Fe.b.call("live_comments.load_more",{instanceId:this.thread.thread_uuid})},handleLoadMore(){var t,e=this;switch(this.isLoadingNewComments=!0,this.newCommentsHasError=!1,this.currentTab){case X.a.ALL_COMMENTS:t=this.fetchAllComments(this.contentContainerUuid),this.trackLoadMore(X.a.ALL_COMMENTS);break;case X.a.FEATURED:t=this.fetchFeaturedComments(this.contentContainerUuid),this.trackLoadMore(X.a.FEATURED);break;default:t=Promise.resolve()}t.then((function(t){e.isLoadingNewComments=!1,e.nextFocusedComment=t[0].content_uuid})).catch((function(){e.newCommentsHasError=!0}))},trackLoadMore(t){this.loadMoreCommentsCount+=1,this.$publish(a.b.CHANNEL,a.b.EVENTS.LOAD_MORE_CLICK,{widget:u.d.COMMENTS,tab:t}),this.$publish(a.g.CHANNEL,a.g.EVENTS.MORE_LOADED,this.loadMoreCommentsCount)},trackLoadMoreInitialHeight(){this.$publish(a.b.CHANNEL,a.b.EVENTS.LOAD_MORE_INITIAL_HEIGHT_CLICK,{widget:u.d.COMMENTS})},trackBoxClick(t){H.a.getInstance().$can("create","live-content",{trigger:t,action:M.g})||this.$publish(a.b.CHANNEL,a.b.EVENTS.ATTEMPTED_ACTION,{action:M.c})},setReplyThreadStickyHeader(t){this.isReplyThreadHeaderSticky=t},fetchSettingsComponent(){var t=this;Promise.all([n.e(0),n.e(5),n.e(34)]).then(n.bind(null,1328)).then((function(e){t.settingsComponent=e.default}))},fetchTrendingArticlesComponent(){var t=this;this.siteSettings.enable_comments_trending_articles&&n.e(35).then(n.bind(null,1329)).then((function(e){t.trendingArticlesComponent=e.default}))},redirectToAllCommentsTab(){this.currentTab!==X.a.ALL_COMMENTS&&this.$refs.tabbedNavigation.selectTab(X.a.ALL_COMMENTS)},setScrollToTop(){if(this.hasStickiedTabs){var t=Object(mt.a)("nav",this.$refs.tabbedNavigation.$el).offsetTop-document.scrollingElement.scrollTop;document.scrollingElement.scrollTop=this.$refs.tabbedNavTop.offsetTop-t}},initializeFadeout(){if(this.fadeoutEnabled){var t=this.$refs.comments;this.fadeoutShow=t.scrollHeight>this.initialHeight}},fadeoutHide(){this.fadeoutShow=!1,this.trackLoadMoreInitialHeight()},setInitialTab(){this.initialTab=this.currentTab,this.initialTab||(this.initialTab=this.featuredThread.visible_content.length>=this.widgetSettings.featured_tab_active_threshold&&!this.deeplinkUuid?X.a.FEATURED:X.a.ALL_COMMENTS,this.$store.commit(m.jc,{key:this.contentContainerUuid,item:{current_tab:this.initialTab}})),this.setScrollToTop()},tabChanged(t){this.$store.commit(m.jc,{key:this.contentContainerUuid,item:{current_tab:t}}),this.setScrollToTop()}}),watch:{deeplinkUuid(){this.fadeoutShow&&this.fadeoutHide(),this.initializeFocusView()},isRefetchingComments(t){t&&this.$refs.commentHeader.$el.getBoundingClientRect().top<0&&(this.$refs.commentHeader.$el.scrollIntoView(!0),Object(mt.a)("html").scrollTop-=X.e,Object(mt.a)("body").scrollTop-=X.e)},isCurrentUserModOrAdmin:{immediate:!0,handler(t){t?this.fetchSettingsComponent():this.areSettingsOpenedByUser=!1}},currentTab(t){var e=this.$refs.tabbedNavigation.selectedTabName;t&&t!==e&&(this.$refs.tabbedNavigation.selectedTabName=t)}},components:{conversationsFooter:E.a,vfTabbedNavigation:_.a,heightTransition:v.a,commentHeader:Y,commentNavRight:at,navTabButton:O.a,postForm:y.a,loadMore:g.a,allCommentsWrapper:De,vfStatusMessage:Me.a,featuredCommentsWrapper:ke,vfButton:b.a,adContainerConversationsBottom:B},provide:{[f.e]:s.a}},Ye=Object(k.a)(Ke,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{ref:"comments",staticClass:"vf3-comments",class:{"vf3-comments__fade-out":t.fadeoutShow},style:t.fadeoutMaxHeight},[t.fadeoutShow?n("div",{staticClass:"vf3-comments-fadeout-container"},[n("div",{staticClass:"vf3-comments-fadeout",style:t.fadeoutPosition,on:{click:t.fadeoutHide}},[n("vf-button",{attrs:{"is-cta":"",palette:"accent",size:"medium"}},[t._v("\n                    "+t._s(t.$i18n("conversations.load_more.label.comments"))+"\n                ")])],1)]):t._e(),t._v(" "),n("comment-header",{ref:"commentHeader",attrs:{"content-container":t.contentContainer,"section-uuid":t.sectionUuid}}),t._v(" "),n("post-form",{staticClass:"v3-comments__post-form",attrs:{placeholder:t.newCommentPlaceholder,user:t.user,"content-container-uuid":t.contentContainerUuid,"store-action":t.storeAction,"is-rich-text-enabled":!1,"character-limit":t.settings.maximum_content_length,"is-expired":t.isCommentingExpired(t.contentContainerUuid),"expiry-notice":t.$i18n("conversations.content_container.expiry_notice.comments")},on:{"on-content-created":t.redirectToAllCommentsTab},nativeOn:{click:function(e){return t.trackBoxClick(e)}}}),t._v(" "),n("height-transition",[t.settings.is_hidden&&t.isCurrentUserModOrAdmin&&!t.areSettingsVisible?n("vf-status-message",{attrs:{type:"warning"},scopedSlots:t._u([{key:"vf-status-message-content",fn:function(){return[t._v("\n                    "+t._s(t.$i18n("comments.settings.hidden"))+"\n                ")]},proxy:!0}],null,!1,2919478943)}):t._e()],1),t._v(" "),n("height-transition",[t.areSettingsVisible?n(t.settingsComponent,{ref:"settings",tag:"component",attrs:{id:t.settingsAreaID,"content-container-uuid":t.contentContainerUuid}}):t._e()],1),t._v(" "),n("div",{ref:"tabbedNavTop"}),t._v(" "),n("vf-tabbed-navigation",{ref:"tabbedNavigation",staticClass:"vf3-comments__tabbed-nav",class:{"vf3-comments__tabbed-nav--stickied":t.hasStickiedTabs,"vf3-comments__tabbed-nav--overlayed":t.isReplyThreadHeaderSticky},attrs:{type:"dropdown",tabs:t.filteredTabs,"initial-tab":t.initialTab,"nav-label":t.$i18n("comments.heading")},on:{"tab-to":t.tabChanged},scopedSlots:t._u([{key:"nav-right",fn:function(){return[n("comment-nav-right",{staticClass:"vf3-comments__tabbed-nav__right",attrs:{"content-container":t.contentContainer,"tab-name":t.currentTab,"settings-id":t.settingsAreaID,"are-settings-expanded":t.areSettingsVisible&&t.areSettingsOpenedByUser&&!t.hasStickiedTabs},on:{"settings-toggled":t.toggleSettings}})]},proxy:!0},{key:"button",fn:function(e){var i=e.tab;return[n("nav-tab-button",t._b({attrs:{"is-inside-trigger":i.isInsideTrigger,"is-inside-dropdown":i.isInsideDropdown}},"nav-tab-button",i,!1)),t._v(" "),i.isInsideTrigger?n("p",{staticClass:"vf-offscreen-text"},[t._v("\n                    "+t._s(t.$i18n("comments.navigation.filter_label"))+"\n                ")]):t._e()]}},{key:"all",fn:function(){return[n("h3",{staticClass:"vf-offscreen-text"},[t._v("\n                    "+t._s(t.$i18n("comments.navigation.all_comments"))+"\n                ")]),t._v(" "),n("all-comments-wrapper",{attrs:{"is-ready":t.isReady,thread:t.thread,"content-container":t.contentContainer,"is-refetching-comments":t.isRefetchingComments,"reload-status":t.reloadStatus,"has-more-available":!1,"is-tab-active":t.isAllCommentsTabActive,"fade-out-showing":t.fadeoutShow,"next-focused-comment":t.nextFocusedComment},on:{"is-reply-thread-header-sticky":t.setReplyThreadStickyHeader,"hide-fade-out":t.fadeoutHide}})]},proxy:!0},{key:"featured",fn:function(){return[n("h3",{staticClass:"vf-offscreen-text"},[t._v("\n                    "+t._s(t.$i18n("comments.navigation.featured_tab_heading"))+"\n                ")]),t._v(" "),n("p",{staticClass:"vf-offscreen-text"},[t._v("\n                    "+t._s(t.$i18n("comments.navigation.featured_tab_content_description"))+"\n                ")]),t._v(" "),n("featured-comments-wrapper",{attrs:{"is-ready":t.isReady,thread:t.featuredThread,"content-container":t.contentContainer,"is-refetching-comments":t.isRefetchingComments,"reload-status":t.reloadStatus,"has-more-available":!1,"is-tab-active":t.isFeaturedCommentsTabActive,"fade-out-showing":t.fadeoutShow,"next-focused-comment":t.nextFocusedComment},on:{"is-reply-thread-header-sticky":t.setReplyThreadStickyHeader}})]},proxy:!0}])}),t._v(" "),t.isReady?n("div",{staticClass:"vf3-comments__bottom-action"},[t.areMoreCommentsAvailable?n("load-more",{attrs:{"is-loading":t.isLoadingNewComments,"has-error":t.newCommentsHasError,"error-aria-label":t.$i18n("conversations.load_more.error_aria.comments")},on:{"load-more":t.handleLoadMoreClick}},[n("span",[t._v(t._s(t.$i18n("conversations.load_more.label.comments")))])]):t.isFeaturedCommentsTabActive?n("vf-button",{staticClass:"vf-label-text",attrs:{"is-cta":"","is-inverted":"","is-full-width":"",size:t.SIZES.SMALL,palette:t.PALETTES.ACCENT},nativeOn:{click:function(e){return t.redirectToAllCommentsTab(e)}}},[t._v("\n                "+t._s(t.$i18n("conversations.view_all.comments"))+"\n            ")]):t._e()],1):t._e(),t._v(" "),t.areTrendingArticlesVisible?n(t.trendingArticlesComponent,{tag:"component",attrs:{"content-container-uuid":t.contentContainerUuid}}):t._e(),t._v(" "),t.fadeoutShow||!t.areTrendingArticlesVisible||t.doesLastCommentHaveAd?t._e():n("ad-container-conversations-bottom",{staticClass:"vf3-comments vf-promo-wrapper--vf3-comments-end",attrs:{"content-container-uuid":t.contentContainerUuid,enabled:t.arePromosEnabled&&0!==t.allCommentsCount(t.contentContainerUuid),"hide-ppid-trigger":!0}}),t._v(" "),n("conversations-footer",{attrs:{product:"LiveCommenting","section-uuid":t.sectionUuid}})],1),t._v(" "),n("ad-container-conversations-bottom",{staticClass:"vf3-comments",attrs:{"content-container-uuid":t.contentContainerUuid,enabled:t.arePromosEnabled&&t.fadeoutShow}})],1)}),[],!1,null,"7d954118",null).exports;function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ze(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){Xe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Qe={props:{sectionUuid:j.a.uuid.isRequired,commentsUuid:j.a.uuid.isRequired,dataVfId:j.a.string.isRequired,initialHeight:j.a.oneOfType([Number,String])},data(){return{commentsBaseWithActivity:Object(d.a)(Ye,u.d.COMMENTS,this.dataVfId,50,50)}},mounted(){this.rtSubscribe({container_uuid:[this.commentsUuid],section_uuid:[this.sectionUuid],message_type:[o.b.LIVECOMMENT,o.b.LIVECOMMENT_POST,o.b.REPLY_TO_LIVECOMMENT_POST_DEPRECATED,o.b.INTERACTION],action:[o.a.CREATED,o.a.UPDATED,o.a.VISIBLE,o.a.SPAM,o.a.DISABLED,o.a.FLAGGED,o.a.FLAGS_CLEARED,o.a.DELETED,o.a.LIKED,o.a.UNLIKED,o.a.DISLIKED,o.a.UNDISLIKED,o.a.STARTED_TYPING,o.a.PICKED,o.a.UNPICKED,o.a.PINNED,o.a.UNPINNED]}),this.initializeMentionNotifications(),this.$subscribe(a.E.CHANNEL,a.E.EVENTS.LOADED,this.onRealtimeUserChange)},computed:Ze(Ze({},Object(l.c)({currentUser:r.hb,getContentContainer:r.ic,getSettings:r.U,getThreadByUuid:"".concat(s.a,"/").concat(r.Zc),getFeaturedThreadByUuid:"".concat(s.b,"/").concat(r.Zc),isCurrentUserModOrAdmin:r.Tb})),{},{settings(){return this.getSettings(this.contentContainerUuid)},contentContainer(){return this.getContentContainer(this.commentsUuid)||{}},contentContainerUuid(){return this.contentContainer.content_container_uuid},isWidgetVisible(){return!(this.settings&&this.settings.is_hidden)||this.isCurrentUserModOrAdmin},isReady(){return this.contentContainer&&this.contentContainer.hasOwnProperty("content_container_uuid")&&this.thread&&this.featuredThread},thread(){return this.getThreadByUuid(this.commentsUuid)},featuredThread(){return this.getFeaturedThreadByUuid(this.commentsUuid)}}),methods:Ze(Ze({},Object(l.b)({fetchMentionNotificationsByContainerUuid:i.mb})),{},{fetchMentionNotifications(){this.fetchMentionNotificationsByContainerUuid(this.commentsUuid)},onRealtimeUserChange(){this.initializeMentionNotifications()},initializeMentionNotifications(){this.currentUser.uuid!==c.b&&this.fetchMentionNotifications()}})},tn=Object(k.a)(Qe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isReady&&t.isWidgetVisible?n(t.commentsBaseWithActivity,{tag:"component",attrs:{"content-container":t.contentContainer,"section-uuid":t.sectionUuid,user:t.currentUser,thread:t.thread,"featured-thread":t.featuredThread,"data-vf-id":t.dataVfId,"initial-height":t.initialHeight}}):t._e()}),[],!1,null,null,null);e.default=tn.exports},510:function(t,e,n){"use strict";n.r(e),n.d(e,"REPLY_THREAD_MODES",(function(){return d})),n.d(e,"replyThreads",(function(){return p}));n(3);var i=n(2),r=n(37),o=n(105),s=n(47),a={[i.ub](t,e){(t[e]||[]).pop()},[i.a]:Object(o.a)(r.default,(function(t,e){return!e.some((function(e){return e.thread_uuid===t.thread_uuid}))})),[i.C]:Object(s.e)(r.default),[i.id](t,e){var n=e.uuid,i=e.mode,r=t[n];r[r.length-1].mode=i}},c=n(0),u={[c.a]:function(t){return function(e){var n=t[e]||[];return n[n.length-1]||{}}},[c.Mb]:function(t){return function(e){return Boolean(t[e])}}},l={[n(4).a](t,e){var n=e.thread_uuid,r=e.offset_top,o=e.mode,s=t.getters[c.R](n),a=t.getters[c.V](n);r=t.getters[c.a](a).offset_top||r;var u={key:a,items:[{parent_thread_uuid:s.thread_uuid,content_container_uuid:a,thread_uuid:n,offset_top:r,mode:o}]};t.commit(i.a,u)}},d={MENTION:"mention",REPLY_PARENT:"reply",REPLIES:"replies"},h=function(){return{}},p=function(){return{state:h,mutations:a,getters:u,actions:l}}},650:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={DISABLE:"disable",DISLIKE:"dislike",EDIT:"edit",ENABLE:"enable",FLAG:"flag",LIKE:"like",PIN:"pin",REMOVE:"remove",REPLIES:"replies",REPLY:"reply",TOGGLE_DISABLE:"toggle-disable",TOGGLE_DISLIKE:"toggle-dislike",TOGGLE_EDITORS_PICK:"toggle-editors-pick",TOGGLE_FLAG:"toggle-flag",TOGGLE_LIKE:"toggle-like",TOGGLE_PIN:"toggle-pin",TOGGLE_SPAM:"toggle-spam",UNFLAG:"unflag",UNPIN:"unpin",UNSPAM:"unspam",CONSOLE_URL:"console-url"}},658:function(t,e,n){"use strict";var i=n(0),r=n(405),o=n(84),s=n(1),a=n(408),c=n(142),u=n(22),l=n(652),d=n(653),h={components:{vfAvatar:n(663).a},directives:{hovered:d.a,innerFocus:l.a},props:{isClickable:{type:Boolean,default:!0},outline:{type:String,default:r.a.NONE},user:Object,size:String},computed:{currentUser(){return this.$store.getters[i.hb]},isAvatarClickable(){return this.isClickable&&o.b!==this.user.uuid},classes(){return{[a.b]:this.isAvatarClickable}},isCurrentUser(){return this.user.uuid===this.currentUser.uuid},isLoginAvatar(){return this.isCurrentUser&&!Object(u.H)(this.currentUser)},alt(){return this.isClickable?this.isLoginAvatar?this.$i18n("aria.images.avatar_login"):this.isCurrentUser&&Object(u.H)(this.currentUser)?this.$i18n("aria.images.open_profile"):this.$i18n("aria.images.open_other_profile",{username:this.user.name}):this.isCurrentUser?this.$i18n("aria.images.avatar_current_user"):this.$i18n("aria.images.avatar_user",{username:this.user.name})}},methods:{onAvatarClick(t){var e=this,n=t.currentTarget;this.isAvatarClickable&&(this.isLoginAvatar?setTimeout((function(){return e.$publish(s.c.CHANNEL,s.c.EVENTS.NEEDED,{action:c.b},e.user)})):setTimeout((function(){return e.$publish(s.t.CHANNEL,s.t.EVENTS.SHOW,n,e.user)})))},trayIntent(){this.$publish(s.C.CHANNEL,s.C.EVENTS.OPEN_INTENT)}}},p=n(56),f=Object(p.a)(h,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("vf-avatar",{directives:[{name:"hovered",rawName:"v-hovered",value:t.trayIntent,expression:"trayIntent"},{name:"inner-focus",rawName:"v-inner-focus",value:t.trayIntent,expression:"trayIntent"}],staticClass:"vf-front-avatar",class:t.classes,attrs:{user:t.user,current_user_uuid:t.currentUser.uuid,size:t.size,"is-clickable":t.isClickable,"outline-palette":t.outline,alt:t.alt},nativeOn:{click:function(e){return t.onAvatarClick(e)}}})}),[],!1,null,"63066b2a",null);e.a=f.exports},667:function(t,e,n){"use strict";n.r(e),n.d(e,"STATIC",(function(){return i})),n.d(e,"EDITABLE",(function(){return r})),n.d(e,"SUBMITTING",(function(){return o})),n.d(e,"ERROR",(function(){return s}));var i="static",r="editable",o="submitting",s="error"},668:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={ERROR:"error",WARNING:"warning"}},670:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n(37),r=n(678),o=n.n(r),s=n(668),a=n(655),c={[s.a.ERROR]:"vf-status-message-error",[s.a.WARNING]:"vf-status-message-warning"},u=i.default.extend({components:{vfExclamationMarkIcon:a.a},props:["type"],methods:{getClasses(){return{"vf-flex":!0,"vf-status-message":!0,[c[this.type]]:!0}}},template:o.a})},676:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));n(38);var i=function(t,e){return"vf-".concat(t,"-").concat(e)},r=function(t,e){return"#".concat(i(t,e))}},678:function(t,e){t.exports='<div class="vf-flex vf-status-message" :class="getClasses()">\n    <div class="vf-status-message-triangle vf-status-message-triangle-upper"></div>\n    <div class="vf-status-message-badge vf-flex">\n        <div class="icon">\n            <vf-exclamation-mark-icon class="vf-status-message-icon vf-icon-medium"></vf-exclamation-mark-icon>\n        </div>\n        <slot name="vf-status-message-content"></slot>\n    </div>\n</div>\n'},679:function(t,e,n){"use strict";var i={props:{count:{required:!0},visibleThreshold:{type:Number,default:20},warningThreshold:{default:10},errorThreshold:{default:0},a11yWarning:{type:String,required:!0},a11yError:{type:String,required:!0}},data:()=>({pulseWarning:!1}),computed:{hasWarningState(){return this.count<=this.warningThreshold&&this.count>=this.errorThreshold},hasErrorState(){return this.count<this.errorThreshold},isVisible(){return this.visibleThreshold&&this.count<=this.visibleThreshold},classes(){return{"vf-character-count--warning":this.hasWarningState,"vf-character-count--error":this.hasErrorState,"vf-character-count--pulse":this.pulseWarning}},ariaLive(){return this.hasErrorState?"assertive":this.hasWarningState?"polite":"off"},ariaI18nKey(){return this.hasErrorState?this.a11yError:this.hasWarningState?this.a11yWarning:""},ariaLabel(){return this.ariaI18nKey?this.$i18n(this.ariaI18nKey,{count:Math.abs(this.count)}):""}},methods:{pulse(){var t=this;clearTimeout(this.pulseTid),this.pulseWarning=!0,this.pulseTid=setTimeout((function(){t.pulseWarning=!1}),300)}},watch:{count(){this.hasErrorState&&this.pulse()}}},r=n(56),o=Object(r.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isVisible?n("span",{staticClass:"vf-character-count",class:t.classes},[n("span",{staticClass:"vf-offscreen-text",attrs:{"aria-live":t.ariaLive}},[t._v("\n        "+t._s(t.ariaLabel)+"\n    ")]),t._v(" "),n("span",{staticClass:"vf-character-count__value",attrs:{"aria-hidden":"true"}},[t._v("\n        "+t._s(t.count)+"\n    ")])]):t._e()}),[],!1,null,"5e729e84",null);e.a=o.exports},682:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));var i=300,r=50,o=49,s=4294967295e3,a={ALL_COMMENTS:"all",FEATURED:"featured"}},685:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={UP:"u",DOWN:"d",LEFT:"l",RIGHT:"r"}},689:function(t,e,n){"use strict";n(44),n(58);var i=n(671),r=n.n(i),o=n(645),s=n(685),a=n(660),c=(n(92),n(314)),u={props:{enterDirection:{type:String,default:a.TOP,validator:function(t){return[a.TOP,a.BOTTOM].includes(t)}},transitionSpeed:{type:String,default:c.d.FAST,validator:function(t){return Object.values(c.d).includes(t)}}}},l=n(56),d=Object(l.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"transition-wrapper"},[e("transition",{attrs:{name:"slide-in-out","enter-active-class":"slide-in-out-enter-active--"+this.transitionSpeed,"leave-active-class":"slide-in-out-leave-active--"+this.transitionSpeed,"enter-class":"slide-in-out-enter--"+this.enterDirection,"leave-to-class":"slide-in-out-leave-to--"+this.enterDirection}},[this._t("default")],2)],1)}),[],!1,null,"3f6168e0",null).exports,h=n(651),p={[a.TOP]:"realtime-bar-button--at-top",[a.BOTTOM]:"realtime-bar-button--at-bottom"},f={components:{slideInOutTransition:d,vfButton:h.a},props:{labelText:{type:String,required:!1},showMainButton:{type:Boolean,default:!0,required:!1},showActionButton:{type:Boolean,default:!0,required:!1},actionText:{type:String,required:!1},actionDirection:{type:String,default:s.a.UP},palette:{type:String,default:o.a.ACCENT},location:{type:String,default:a.TOP,validator:function(t){return[a.BOTTOM,a.TOP].includes(t)}},isVisible:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},computed:{actionArrow(){return"&".concat(this.actionDirection,"arr;")},buttonClasses(){return{"realtime-bar-button":!0,[p[this.location]]:!0,"realtime-bar-button--with-skip":this.showActionButton}}},mounted(){this.location===a.TOP&&r.a.add(this.$el)}},m=Object(l.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"realtime-bar vf-rt-stuck-link vf-rt-main-sticky",class:"realtime-bar--at-"+t.location},[n("slide-in-out-transition",{attrs:{"enter-direction":t.location}},[t.isVisible?n("div",{staticClass:"realtime-buttons-wrapper",class:{"realtime-buttons-wrapper--with-skip":t.showActionButton}},[t.showMainButton?n("vf-button",{staticClass:"realtime-main-button",class:t.buttonClasses,attrs:{size:"small",palette:t.palette,disabled:t.disabled,"is-cta":""},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("realtime-main-action")}}},[t._v("\n                "+t._s(t.labelText)+"\n            ")]):t._e(),t._v(" "),t.showActionButton?n("vf-button",{staticClass:"realtime-action-button",class:t.buttonClasses,attrs:{size:"small","is-cta":"",palette:t.palette},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("realtime-arrow-action")}}},[n("span",{staticClass:"realtime-action-button__label"},[t._v("\n                    "+t._s(t.actionText)+"\n                ")]),t._v(" "),n("span",{staticClass:"realtime-action-button__arrow",domProps:{innerHTML:t._s(t.actionArrow)}})]):t._e()],1):t._e()])],1)}),[],!1,null,"9ff0535e",null);e.a=m.exports},691:function(t,e,n){"use strict";var i=n(405),r={props:{palette:{type:String,default:i.a.ACCENT}}},o=n(56),s=Object(o.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vf-unseen-notifier",class:["vf-unseen-notifier--"+this.palette]})}),[],!1,null,"0418c2fe",null);e.a=s.exports},694:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return a}));var i=n(22),r=function(t){return 1===t.anonymous},o=function(t,e){return Object(i.H)(t)&&Object(i.E)(t,e)},s=function(t,e){var n=e.enable_username_premoderation;return Object(i.H)(t)&&n&&!Object(i.J)(t.username_moderation_status)},a=function(t,e){var n=e.enable_avatar_premoderation;return Object(i.H)(t)&&n&&!Object(i.J)(t.avatar_moderation_status)}},695:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={EMAIL:"email",FACEBOOK:"facebook",TWITTER:"twitter"};i.EMAIL,i.FACEBOOK,i.TWITTER},699:function(t,e,n){"use strict";n(9),n(3),n(11),n(195),n(188),n(168);var i={},r=n(56),o={components:{vfLogo:Object(r.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"vf-logo",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 300 60"}},[e("path",{staticClass:"viafoura-logo__logo",attrs:{d:"M33.6 1.1a29 29 0 1 0 0 58 29 29 0 0 0 0-58zm5.2 39.8l-4.5 7.7a1 1 0 0 1-.9.5c-.3 0-.7-.2-.9-.5L15.7 19.2a1 1 0 0 1 0-1c.2-.3.5-.5.9-.5h8.9c.3 0 .7.2.9.5l12.4 21.7c.3.3.3.7 0 1zm7.3-12.6L41.6 36a1 1 0 0 1-.9.5c-.3 0-.7-.2-.9-.5l-9.6-16.8a1 1 0 0 1 0-1c.2-.3.5-.5.9-.5H40c.3 0 .7.2.9.5l5.2 9.1c.2.3.2.6 0 1zm5.2-9.1l-2.4 4.2a1 1 0 0 1-.9.5 1 1 0 0 1-.9-.5l-2.3-4.2a1 1 0 0 1 0-1c.2-.3.5-.5.9-.5h4.9c.3 0 .7.2.9.5 0 .4 0 .7-.2 1zM89.6 49.1L78 17.7h8.9l6 20.4.1.5h1.2l.1-.5 5.9-20.4h8.7L97.1 49.1zM115.8 49.1v-22l.7-3.4h-4.8l3.2-6h8.5v31.4zM143.2 49.7c-2.1 0-4-.1-5.8-.6-1.7-.4-3.1-.9-4.3-1.8-1.1-.7-2-1.9-2.6-3.1-.6-1.3-.9-2.9-.9-4.9 0-1.9.4-3.5 1.2-4.6a7.5 7.5 0 0 1 3.1-3c1.3-.7 2.7-1.3 4.3-1.6 1.6-.4 3.3-.5 5-.5h1.3l1.9.1 1 .1v-1.1c-.1-2.6-1.3-3.7-2.4-4.2-1.3-.5-2.9-.8-4.9-.8-1 0-2.2.1-3.6.4-1 .1-2.1.4-3.2.7l-.7-2.5-.5-2-.2-1.1c1.8-.6 3.4-.9 5-1.3 1.9-.4 3.5-.4 5-.4 4.3 0 7.5 1 9.7 3s3.3 5.2 3.3 9.5v17.9L150 49c-2.1.4-4.4.7-6.8.7zm.5-15.4c-1.9 0-3.6.4-4.9.9-1.4.7-2.2 2-2.2 3.8 0 1.1.2 2 .8 2.7a4 4 0 0 0 1.9 1.3l2.2.5 1.8.1c.9 0 1.9-.1 3-.4l.7-.1v-8.5l-.7-.1-1.4-.1-1.2-.1zM163.4 49.1V23.7h-4.3v-6h4.3v-2c0-1.9.5-2.9 1.1-4.3a12 12 0 0 1 11.3-6.3l3.1.2 2.3.6c-.6.9-1.7 2.5-3.1 5.1h-1c-1.6 0-3.1.4-4 1-1.1.7-1.9 2-1.9 3.7v2h8.1l-3.2 5.9h-4.9v25.6h-7.8zM194.5 49.5c-2.1 0-4.2-.2-5.9-.8a11.5 11.5 0 0 1-7.5-7.6c-.7-2-1.1-4.6-1.1-7.5s.4-5.3 1.1-7.4a12.1 12.1 0 0 1 7.6-7.7 18 18 0 0 1 5.8-.9c2.1 0 4 .2 5.8.8 1.8.6 3.3 1.4 4.5 2.7 1.3 1.3 2.3 2.9 3 4.9.7 2 1.1 4.6 1.1 7.5 0 3-.4 5.5-1.1 7.5a11.5 11.5 0 0 1-7.5 7.6c-1.7.6-3.7.9-5.8.9zm0-25.8c-2.2 0-4 .7-5.3 2.4-1.3 1.5-1.9 4-1.9 7.4 0 3.6.6 5.9 1.9 7.5a6.7 6.7 0 0 0 5.3 2.3c2.2 0 4-.7 5.3-2.3 1.3-1.5 1.9-3.9 1.9-7.5s-.6-5.9-1.9-7.5a6.4 6.4 0 0 0-5.3-2.3zM229.5 49.5c-2.1 0-4.2-.1-6.1-.5-1.8-.4-3.4-1-4.8-1.9-1.3-1-2.7-2.5-3.5-4.4s-1.5-4.6-1.5-8.2V17.7h7.6v16.5c0 1.6.4 2.9.7 4a5.8 5.8 0 0 0 4 4.3c.8.2 1.9.4 3 .4l3.5-.1.8-.1-.1-1.9v-23h7.6v30l-4.8 1.2c-2 .2-4.3.5-6.4.5zM250.2 49.1V23.7h-4.4l3.1-5.9h9.1v3.7s3-3.1 5.1-3.5c.8-.1 1.7-.4 2.7-.4l2.3.1h.1v6.4H266l-2.6.4c-1 .2-1.9.6-2.8 1.2-1 .7-1.8 1.7-2.2 3-.4 1.1-.6 2.6-.6 4.6v16h-7.6zM283.7 49.7c-2.1 0-4-.1-5.8-.6-1.7-.4-3.1-.9-4.3-1.8-1.1-.7-2-1.9-2.6-3.1a12 12 0 0 1-.9-4.9c0-1.9.4-3.5 1.2-4.6a7.5 7.5 0 0 1 3.1-3c1.3-.7 2.7-1.3 4.3-1.6 1.6-.4 3.3-.5 5-.5h1.3l1.9.1 1.1.1v-1.1c-.1-2.6-1.3-3.7-2.4-4.2-1.3-.5-2.9-.8-4.9-.8-1 0-2.2.1-3.6.4-1 .1-2.1.4-3.2.7l-.7-2.5-.5-2-.2-1.1c1.8-.6 3.4-.9 5-1.3 1.9-.4 3.5-.4 5-.4 4.3 0 7.4 1 9.7 3 2.2 1.9 3.2 5.2 3.2 9.5v17.9c-.8.4-3 .7-4.8 1.1-2.3.4-4.4.7-6.9.7zm.6-15.4c-1.9 0-3.6.4-4.9.9-1.4.7-2.2 2-2.2 3.8 0 1.1.2 2 .8 2.7a4 4 0 0 0 1.9 1.3l2.2.5 1.8.1c.9 0 1.8-.1 2.9-.4l.7-.1v-8.5l-.7-.1-1.4-.1-1.1-.1z"}})])}),[],!1,null,"15f2be42",null).exports},props:["sectionUuid","rootSectionUuid","product"],computed:{vfLink:()=>new URL("https://bit.ly/PowerByViafoura").toString()}},s=Object(r.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"vf-branding-container"},[this._v("\n    "+this._s(this.$i18n("branding.powered_by"))+"\n    "),e("a",{staticClass:"vf-branding",attrs:{href:this.vfLink,title:"Visit the Viafoura website",rel:"noopener noreferrer",target:"_blank"}},[e("vf-logo",{staticClass:"vf-branding__logo"})],1)])}),[],!1,null,"da60f2d8",null);e.a=s.exports},701:function(t,e,n){"use strict";var i=n(645),r=n(22),o=n(36),s={props:{isFocused:o.a.bool.def(!1),currentUser:o.a.object.isRequired,showMobileView:o.a.bool.def(!1),isDefaultContainer:o.a.bool},computed:{isLoggedIn(){return Object(r.H)(this.currentUser)},isModerator(){return Object(r.K)(this.currentUser)},isAdmin(){return Object(r.F)(this.currentUser)},classes(){return{"vf-content-focus-container--default":this.isDefaultContainer,"vf-content-focus-container--focused":this.isFocused,"vf-content-focus-container__mobile":this.showMobileView,"vf-is-anonymous":!this.isLoggedIn,"vf-is-logged-in":this.isLoggedIn,"vf-is-mod":this.isModerator,"vf-is-admin":this.isAdmin}}},created(){this.size=i.b.SMALL}},a=n(56),c=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-content-focus-container",class:t.classes,on:{click:function(e){return t.$emit("focus-on-element",e)}}},[t._t("header"),t._v(" "),n("div",{staticClass:"vf-content-focus-container__contents"},[t._t("default")],2),t._v(" "),t._t("footer")],2)}),[],!1,null,"2917e5f4",null);e.a=c.exports},702:function(t,e,n){"use strict";var i={props:{count:{type:Number,required:!0},a11yLabel:{type:String,required:!0},hasRealtime:{type:Boolean,default:!1},hasMentions:{type:Boolean,default:!1},isTyping:{type:Boolean,default:!1}},computed:{classes(){return{"remaining-content--accent":this.hasRealtime,"remaining-content--mention":this.hasMentions}},formattedCount(){return this.count>99?"99+":this.count}}},r=n(56),o=Object(r.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"vf-icon remaining-content",class:this.classes,attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 25 25"}},[e("path",{attrs:{d:"M.5 23.793V2A1.5 1.5 0 0 1 2 .5h21A1.5 1.5 0 0 1 24.5 2v17a1.5 1.5 0 0 1-1.5 1.5H3.793L.5 23.793z"}}),this._v(" "),e("transition",{attrs:{name:"fade",mode:"out-in"}},[this.isTyping?e("g",this._l([6.25,12.5,18.75],(function(t){return e("circle",{key:t,staticClass:"remaining-content__loader-circle",attrs:{cx:t,cy:"10.5",r:"1.5"}})})),0):e("text",{staticClass:"remaining-content__count",attrs:{"aria-hidden":"true",y:"15",x:"12.5","text-anchor":"middle"}},[this._v("\n            "+this._s(this.formattedCount)+"\n        ")])])],1)}),[],!1,null,"6d708264",null);e.a=o.exports},703:function(t,e,n){"use strict";n(44),n(58);var i=n(723),r=n(405),o=n(407),s=[o.c.MIDDLE,o.c.LAST],a=[o.c.FIRST,o.c.MIDDLE,o.c.ONLY_TYPING],c={[r.a.LIGHT_PRIMARY]:"pin-line--light-primary",[r.a.ACCENT]:"pin-line--accent",[r.a.MENTION]:"pin-line--mention"},u={components:{contentLayout:i.a},props:{locationInThread:{type:String,required:!0},palette:{type:String,required:!1,default:r.a.LIGHT_PRIMARY},showBottomLine:{type:Boolean,default:!0}},computed:{paletteClassTop(){return this.showPinAbove?c[this.palette]:""},paletteClassBottom(){return this.showPinBelow?c[this.palette]:""},bottomClasses(){return{[this.paletteClassBottom]:!0,"pin-line--typing":this.locationInThread===o.c.ONLY_TYPING}},showPinAbove(){return s.includes(this.locationInThread)},showPinBelow(){return a.includes(this.locationInThread)}}},l=n(56),d=Object(l.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-layout",{scopedSlots:t._u([{key:"left",fn:function(){return[n("div",{staticClass:"pin-line",class:t.paletteClassTop}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showBottomLine,expression:"showBottomLine"}],staticClass:"pin-line pin-line--bottom",class:t.bottomClasses}),t._v(" "),t._t("left")]},proxy:!0},{key:"right",fn:function(){return[t._t("right")]},proxy:!0}],null,!0)})}),[],!1,null,"dddb053c",null);e.a=d.exports},705:function(t,e,n){"use strict";var i=n(737),r=n.n(i),o=n(36),s=n(675),a=n(911),c={components:{dropdownButton:s.a},props:{url:o.a.string.isRequired,copyText:o.a.string.isRequired,copiedText:o.a.string.isRequired},data:()=>({isCopied:!1}),created(){this.copyIcon=a.a},mounted(){var t=this;this.isCopied=!1,setTimeout((function(){t.clipboard=new r.a(t.$el,{container:t.$el}),t.clipboard.on("success",(function(){t.isCopied=!0,setTimeout((function(){t.isCopied=!1}),3e3)}))}),0)},destroyed(){this.clipboard&&this.clipboard.destroy()}},u=n(56),l=Object(u.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isCopied?n("dropdown-button",{staticClass:"vf-dropdown__list-item-button vf-dropdown-list__accent-hover-button vf-no-outline vf-horiz-list vf-action-button js-list-link vf-icon-button",attrs:{icon:t.copyIcon}},[t._v("\n    "+t._s(t.copiedText)+"\n")]):n("dropdown-button",{staticClass:"vf-dropdown__list-item-button vf-dropdown-list__accent-hover-button vf-no-outline vf-horiz-list vf-action-button js-list-link vf-icon-button",attrs:{"data-clipboard-text":t.url,icon:t.copyIcon}},[t._v("\n    "+t._s(t.copyText)+"\n")])}),[],!1,null,null,null);e.a=l.exports},707:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(0),r=n(5),o={["email"]:"comment_share_email",["facebook"]:"comment_share_facebook",["twitter"]:"comment_share_twitter",DEFAULT:"comment_share"},s=n(22),a=function(t){var e=r.vuexStore.getInstance().getters[i.hb],n=o[t]||o.DEFAULT,a=e.uuid,c="medium=".concat(n);return Object(s.H)(e)&&(c+="|sharer_uuid=".concat(a)),c}},711:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));var i="LIVECOMMENTS_RELOAD_KEY",r="LIVEBLOG_RELOAD_KEY"},728:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n(19),n(91),n(17),n(26),n(3),n(15),n(16),n(57),n(196);var i=n(43),r=n(242);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=i.a.interaction_api_url||"https://interaction.viafoura.co/v4/interaction";function u(t,e,n,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return r.a.register(c).api.request(s({withCredentials:!0,headers:o,method:t,params:n,data:i,url:e},a))}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="/{section_uuid}/{content_container_uuid}/{thread_uuid}/{content_uuid}/typing",i={},r={},o={Accept:"application/json"};return u("POST",n=(n=(n=(n=n.replace("{section_uuid}",t.section_uuid)).replace("{content_container_uuid}",t.content_container_uuid)).replace("{thread_uuid}",t.thread_uuid)).replace("{content_uuid}",t.content_uuid),r,i,o,e)}},734:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(684),r={inserted(t){Object(i.a)(t)},clear(t){t.style.height="",t.style.overflowY="hidden"},update(t){i.a.update(t)},unbind(t){i.a.destroy(t)}}},735:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a}));n(92);var i=n(36),r=n(405),o=n(407),s=i.a.oneOf(Object.values(r.a)),a=i.a.oneOf(Object.values(o.c))},736:function(t,e,n){"use strict";n(44),n(58);var i=n(0),r=n(81),o=n(31),s=function(t,e){return Object(o.a)((function(){return t.value.state_reasons.includes(e)}))};e.a=function(t,e){var n=t.getters,a=Object(o.a)((function(){return n[i.R](e)})),c=Object(o.a)((function(){return n[i.hb]}));return{isActorGhostBanned:s(a,r.d.ACTOR_GHOST_BANNED),isActorHideBanned:s(a,r.d.ACTOR_HIDE_BANNED),isDeleted:s(a,r.d.CONTENT_DELETED),isDisabled:s(a,r.d.CONTENT_DISABLED),isPending:s(a,r.d.CONTENT_AWAITING_MODERATION),isSpam:s(a,r.d.CONTENT_MARKED_AS_SPAM),isEdited:Object(o.a)((function(){return a.value.is_edited})),isByCurrentUser:Object(o.a)((function(){return c.value.uuid===a.value.actor_uuid})),isMuted:Object(o.a)((function(){return n[i.md](a.value.actor_uuid)}))}}},738:function(t,e){t.exports='<path fill="currentColor" fill-rule="evenodd" d="M50 3c7 0 13 3 18 7 4 5 7 11 8 18l5 28c2 7 5 10 9 12l3 3c1 1 2 2 2 5 0 2-2 5-5 5H10c-3 0-5-3-5-5 0-3 1-4 2-5l3-3c4-2 7-5 9-12l5-28c1-7 4-13 8-18 5-4 11-7 18-7zM36 83h28v1c0 8-6 14-14 14s-14-6-14-14v-1z"></path>\n'},746:function(t,e,n){"use strict";n(17),n(26),n(3),n(15),n(16),n(57);var i=n(0),r=n(141),o=n(81),s=n(664),a=n(694),c=(n(44),n(58),n(92),n(1)),u=n(307),l=n(93),d=n(408),h=n(641),p=n(655),f=[l.ERROR,l.WARNING],m={components:{vfExclamationMarkIcon:p.a},props:{level:{type:String,required:!0,validator:function(t){return f.includes(t)}},showCloseButton:{type:Boolean,required:!1,default:!1}},computed:{classes(){return{"vf-error":this.level===l.ERROR,"vf-warning":this.level===l.WARNING,"warning-icon":this.level===l.WARNING}},circle(){return this.level===l.ERROR?h.a.filled:h.a.outline}}},b=n(56),v=Object(b.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-status"},[e("span",{staticClass:"user-status__icon-wrapper"},[e("vf-exclamation-mark-icon",{staticClass:"vf-icon-medium",class:this.classes,attrs:{circle:this.circle}})],1),this._v(" "),e("div",{staticClass:"user-status__content"},[this._t("default")],2)])}),[],!1,null,"1406895b",null).exports,_=n(124),g=n(651),y=n(652),O=n(653),E={[_.REJECTED]:"moderation.username_rejected",[_.PENDING_NEW]:"moderation.username_pending_new",[_.PENDING_UPDATE]:"moderation.username_pending_update"},C={components:{userStatus:v,vfButton:g.a},directives:{hovered:O.a,innerFocus:y.a},inject:[u.b,u.a],props:{status:{type:String,required:!0,validator:function(t){return Object.values(_).includes(t)}}},computed:{level(){switch(this.status){case _.REJECTED:return l.ERROR;case _.PENDING_NEW:case _.PENDING_UPDATE:default:return l.WARNING}},isUsernameRejected(){return this.status===_.REJECTED}},beforeCreate(){this.I18N_KEYS=E},methods:{showProfileTabInTray(t){this.$publish(c.C.CHANNEL,c.C.EVENTS.OPEN,t.currentTarget,d.c.SETTINGS)},trayIntent(){this.$publish(c.C.CHANNEL,c.C.EVENTS.OPEN_INTENT)}}},T=Object(b.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("user-status",{attrs:{level:t.level}},[n("span",{staticClass:"vf-label vf-label-upper"},[t._v("\n        "+t._s(t.$i18n(t.I18N_KEYS[t.status]))+"\n        "),t.isUsernameRejected?n("vf-button",{directives:[{name:"hovered",rawName:"v-hovered",value:t.trayIntent,expression:"trayIntent"},{name:"inner-focus",rawName:"v-inner-focus",value:t.trayIntent,expression:"trayIntent"}],attrs:{size:t.SIZES.NONE,"is-link":!0,palette:t.PALETTES.ACCENT},on:{click:t.showProfileTabInTray}},[n("span",{staticClass:"sr-only"},[t._v("\n                "+t._s(t.$i18n(t.I18N_KEYS[t.status]))+"\n            ")]),t._v(" "),n("span",[t._v(t._s(t.$i18n("settings.update.display_name")))])]):t._e()],1)])}),[],!1,null,"683c58f8",null).exports,S={[_.REJECTED]:"moderation.avatar_rejected",[_.PENDING_NEW]:"moderation.avatar_pending_new",[_.PENDING_UPDATE]:"moderation.avatar_pending_update"},A={components:{userStatus:v},props:{status:{type:String,required:!0,validator:function(t){return Object.values(_).includes(t)}}},computed:{level(){switch(this.status){case _.REJECTED:return l.ERROR;case _.PENDING_NEW:case _.PENDING_UPDATE:default:return l.WARNING}}},beforeCreate(){this.I18N_KEYS=S}},w=Object(b.a)(A,(function(){var t=this.$createElement,e=this._self._c||t;return e("user-status",{attrs:{level:this.level}},[e("span",{staticClass:"vf-label vf-label-upper"},[this._v(this._s(this.$i18n(this.I18N_KEYS[this.status])))])])}),[],!1,null,null,null).exports,j=n(645),P=n(764);function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){I(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var U={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},L={props:{message:{type:String,required:!0},dateExpired:{type:Number,required:!0},isPermanent:{type:Boolean,required:!0}},beforeCreate(){this.ERROR_LEVEL=l.ERROR,this.BUTTON_SIZE=j.b.INLINE,this.BUTTON_PALETTE=j.a.ACCENT},computed:N(N({},Object(r.c)({dateFormat:i.wb})),{},{formattedDate(){return this.dateFormat(this.dateExpired,U)},banMessage(){return this.$i18n("error.banned_from_posting",{permanent:this.isPermanent?1:0,endDate:this.dateExpired,reason:void 0})}}),components:{userStatus:v,textTip:P.a}},x=Object(b.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("user-status",{staticClass:"vf-posting-ban-error vf-label vf-label-upper",attrs:{level:t.ERROR_LEVEL,"aria-live":"polite"}},[t.isPermanent?[t._v("\n        "+t._s(t.banMessage)+"\n    ")]:[n("time",{attrs:{datetime:new Date(t.dateExpired).toISOString()}},[t._v(t._s(t.banMessage))])],t._v(" "),t.message.trim().length>0?[t._v("\n        \n        "),n("text-tip",{staticClass:"vf-posting-ban-error__tooltip",attrs:{positions:["bottom-left"],"is-link":"",content:t.message,palette:t.BUTTON_PALETTE,size:t.BUTTON_SIZE},scopedSlots:t._u([{key:"trigger",fn:function(){return[t._v("\n                "+t._s(t.$i18n("error.why_banned"))+"\n            ")]},proxy:!0}],null,!1,2972872782)})]:t._e()],2)}),[],!1,null,"4f2e76f1",null).exports,D={[_.REJECTED]:"moderation.email_rejected",[_.PENDING_NEW]:"moderation.email_pending_new",[_.PENDING_UPDATE]:"moderation.email_pending_update"},$={components:{userStatus:v},props:{status:{type:String,required:!0,validator:function(t){return Object.values(_).includes(t)}}},computed:{level(){switch(this.status){case _.REJECTED:return l.ERROR;case _.PENDING_NEW:case _.PENDING_UPDATE:default:return l.WARNING}}},beforeCreate(){this.I18N_KEYS=D}},k=Object(b.a)($,(function(){var t=this.$createElement,e=this._self._c||t;return e("user-status",{attrs:{level:this.level}},[e("span",{staticClass:"vf-label vf-label-upper"},[this._v(this._s(this.$i18n(this.I18N_KEYS[this.status])))])])}),[],!1,null,null,null).exports;function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){F(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H={computed:M(M({},Object(r.c)({currentUser:i.hb,settings:i.Jc,currentBan:i.o})),{},{usernameNotApproved(){return Object(a.d)(this.currentUser,this.settings)},avatarNotApproved(){return Object(a.a)(this.currentUser,this.settings)},isPostingBanned(){return this.currentBan&&this.currentBan.ban_level===o.a.POSTING},mustVerifyEmail(){return Object(a.b)(this.currentUser,this.settings)}}),components:{emailVerificationError:k,usernameWarning:T,avatarWarning:w,postingBanError:x}},q=Object(b.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isPostingBanned?n("posting-ban-error",{staticClass:"user-moderation-status",attrs:{"aria-live":"polite",message:t.currentBan.user_message,"date-expired":t.currentBan.date_expired,"is-permanent":t.currentBan.is_permanent}}):t.mustVerifyEmail?n("email-verification-error",{staticClass:"user-moderation-status",attrs:{status:t.currentUser.email_verification_status}}):t.usernameNotApproved?n("username-warning",{staticClass:"user-moderation-status",attrs:{status:t.currentUser.username_moderation_status}}):t.avatarNotApproved?n("avatar-warning",{staticClass:"user-moderation-status",attrs:{status:t.currentUser.avatar_moderation_status}}):t._e()}),[],!1,null,null,null).exports,G={components:{userStatus:v},beforeCreate(){this.ERROR_LEVEL=l.ERROR}},V=Object(b.a)(G,(function(){var t=this.$createElement;return(this._self._c||t)("user-status",{staticClass:"vf-offline-posting-error vf-label vf-label-upper",attrs:{level:this.ERROR_LEVEL,"aria-live":"polite"}},[this._v("\n    "+this._s(this.$i18n("conversations.posts.offline"))+"\n")])}),[],!1,null,null,null).exports,z=n(667),W=n(167),K=n(640),Y=n(657),J=n(267),Z=n(36),X={data:()=>({buttonStatus:J.a.NONE}),props:{status:Z.a.oneOf(Object.values(z)).def(z.EDITABLE),isEnabled:Z.a.bool.def(!1)},computed:{isSubmitting(){return this.status===z.SUBMITTING},showCancelButton:()=>!W.e},watch:{status(){this.setButtonStatus(this.status)}},methods:{setButtonStatus(t){var e=this,n=this.getButtonStatus(t);clearTimeout(this.errorTid),this.buttonStatus=n,t!==J.a.ERROR&&t!==J.a.SUCCESS||(this.errorTid=setTimeout((function(){e.buttonStatus=J.a.NONE}),4e3))},getButtonStatus(t){switch(t){case z.ERROR:return J.a.ERROR;case z.SUBMITTING:return J.a.PENDING;case z.STATIC:return J.a.SUCCESS;case z.EDITABLE:default:return J.a.NONE}}},components:{loaderButton:Y.a,vfButton:K.a}},Q=Object(b.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-content-editor-actions"},[t.showCancelButton?n("vf-button",{staticClass:"vf-content-editor-actions__cancel vf-label vf-label-upper",attrs:{role:"button","aria-label":t.$i18n("conversations.rich_text.cancel"),palette:"accent","is-link":""},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("cancel")}}},[t._v("\n        "+t._s(t.$i18n("conversations.rich_text.cancel"))+"\n    ")]):t._e(),t._v(" "),n("loader-button",{staticClass:"vf-content-editor-actions__submit vf-label vf-label-upper",attrs:{role:"button","aria-label":t.$i18n("conversations.rich_text.post"),"is-cta":"",palette:"accent",size:"medium",status:t.buttonStatus,disabled:!t.isEnabled||t.isSubmitting},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("submit",e.target)}}},[t._v("\n        "+t._s(t.$i18n("conversations.rich_text.post"))+"\n    ")])],1)}),[],!1,null,"2733d110",null).exports;function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){nt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var it={props:{showUserStatus:Z.a.bool.def(!1),isFocused:Z.a.bool.def(!1),editorStatus:Z.a.string,hasContentUpdated:Z.a.bool.def(!1),isSubmitEnabled:Z.a.bool,hasEditableContents:Z.a.bool.def(!1)},computed:et(et({},Object(r.c)({currentBan:i.o,isOffline:i.Wb})),{},{isBanned(){return this.currentBan.ban_level!==o.a.NONE},areActionsVisible(){return this.isFocused||this.hasEditableContents}}),components:{heightTransition:s.a,contentEditorActions:Q,offlineError:V,userModerationStatus:q}},rt=Object(b.a)(it,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-focus-container__footer"},[n("height-transition",[t.isOffline&&t.isFocused?n("offline-error",{staticClass:"vf-user-moderation-status"}):t._e()],1),t._v(" "),n("height-transition",[t.showUserStatus&&!t.isOffline?n("user-moderation-status",{staticClass:"vf-user-moderation-status"}):t._e()],1),t._v(" "),n("height-transition",[t.areActionsVisible?n("content-editor-actions",{staticClass:"vf-content-focus-container__editor-actions",attrs:{status:t.editorStatus,"is-enabled":t.hasContentUpdated&&t.isSubmitEnabled&&!t.isBanned&&!t.isOffline},on:{submit:function(e){return t.$emit("submit",e)},cancel:function(e){return t.$emit("cancel-edit")}},nativeOn:{focusin:function(e){return t.$emit("actions-focused",e)}}}):t._e()],1)],1)}),[],!1,null,"9d79afae",null);e.a=rt.exports},747:function(t,e,n){"use strict";n(92),n(26),n(3),n(52),n(17),n(15),n(16),n(57);var i=n(0),r=n(667),o=n(88),s=n(141),a=n(49),c=n(60),u=n(983),l=n(995),d=n(943),h=n(944),p=n(869),f=n(945),m=n(868),b=n(946),v=n(947),_=n(948),g=n(949),y=(n(66),n(238),n(266),n(28),n(438),n(37)),O={components:{vfImage:n(708).b},props:["src"]},E=n(56),C=Object(E.a)(O,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vf-uploaded-image"},[this.src?e("vf-image",{attrs:{src:this.src,"has-overlay":!0}},[this._t("default")],2):this._e()],1)}),[],!1,null,null,null).exports,T={components:{vfPostImageWrapper:C},props:["uuid"],computed:{src(){var t=this.$store.getters[i.F](this.uuid);return t?t.url:null}}},S=Object(E.a)(T,(function(){var t=this.$createElement;return(this._self._c||t)("vf-post-image-wrapper",{attrs:{src:this.src}})}),[],!1,null,null,null).exports,A=n(922),w=n(655),j=n(641);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){N(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I={props:["uuid"],computed:R(R({},Object(s.c)({getUpload:i.lc})),{},{upload(){return this.getUpload(this.uuid)},src(){return this.upload.versions[0]&&this.upload.versions[0].url},isUploading(){return"completed"!==this.upload.status&&!this.hasUploadError},hasUploadError(){return Boolean(this.upload&&this.upload.error)},uploadProgress(){return this.upload&&this.upload.progress},classes(){return{"vf-is-uploading":this.isUploading,"vf-has-upload-error":this.hasUploadError}},exclamationProps:()=>({circle:j.a.outline})}),components:{vfPostImageWrapper:C,vfProgressBar:A.a,vfExclamationMarkIcon:w.a}},U=Object(E.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-post-image-wrapper",{class:t.classes,attrs:{src:t.src}},[t.isUploading?n("vf-progress-bar",{staticClass:"vf-centered",attrs:{progress:t.uploadProgress}}):t._e(),t._v(" "),t.hasUploadError?n("vf-exclamation-mark-icon",t._b({staticClass:"vf-centered vf-icon-medium"},"vf-exclamation-mark-icon",t.exclamationProps,!1)):t._e()],1)}),[],!1,null,null,null).exports;function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $={props:["uploadUuid","mediaUuid"],computed:x(x({},Object(s.c)({getUpload:i.lc})),{},{internalMediaUuid(){return this.mediaUuid||this.upload&&this.upload.media_uuid},internalUploadUuid(){return this.internalMediaUuid?"":this.uploadUuid},upload(){return this.getUpload(this.uploadUuid)},componentIs(){return this.mediaUuid?S:this.uploadUuid?U:""},componentUuid(){return this.mediaUuid?this.mediaUuid:this.uploadUuid?this.uploadUuid:""}})},k=Object(E.a)($,(function(){var t=this.$createElement;return(this._self._c||t)(this.componentIs,{tag:"component",attrs:{contenteditable:"false",uuid:this.componentUuid,"data-media-uuid":this.internalMediaUuid,"data-upload-uuid":this.internalUploadUuid}})}),[],!1,null,null,null).exports,B=n(5),M=n(666);function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function q(){return(q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=G(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function G(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K(t)););return t}function V(t,e){return(V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=K(t);if(e){var r=K(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return W(this,n)}}function W(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(o,t);var e,n,i,r=z(o);function o(){return F(this,o),r.apply(this,arguments)}return e=o,i=[{key:"create",value:function(t){var e={el:q(K(o),"create",this).call(this),store:B.vuexStore.getInstance(),propsData:t},n=Object.assign(e,k);return new y.default(n).$el}},{key:"value",value:function(t){var e=t.dataset.mediaUuid;return{uploadUuid:t.dataset.uploadUuid,mediaUuid:e}}}],(n=[{key:"length",value:function(){return 1}}])&&H(e.prototype,n),i&&H(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(M.a);Y.blotName="image-upload",Y.tagName="vf-post-image-upload";var J=n(197),Z=function(){var t=this,e=function(){var t=document.createElement("input");return t.setAttribute("type","file"),t.setAttribute("accept",'"image/*"'),t.setAttribute("multiple",!0),t.setAttribute("class","vf-image-upload__input"),t}();document.body.appendChild(e),e.click();var n=this.quill.getSelection(),i=n&&n.index||0;e.addEventListener("change",(function(){Array.from(e.files).forEach((function(e){return function(t,e,n){var i=Object(J.a)();e.emitter.emit("image-embed",{uploadUuid:i,file:t}),e.insertEmbed(n,"image-upload",{uploadUuid:i})}(e,t.quill,i)})),document.body.removeChild(e)}))};function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function tt(){return(tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=et(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function et(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ot(t)););return t}function nt(t,e){return(nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ot(t);if(e){var r=ot(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return rt(this,n)}}function rt(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nt(t,e)}(o,t);var e,n,i,r=it(o);function o(){return X(this,o),r.apply(this,arguments)}return e=o,i=[{key:"create",value:function(t){var e=tt(ot(o),"create",this).call(this),n=this.makeAnchor(t.link);return e.appendChild(n),e.dataset.link=t.link,e}},{key:"value",value:function(t){return t.dataset}},{key:"makeAnchor",value:function(t){var e=document.createElement("a");return e.setAttribute("href",t),e.setAttribute("class","embedly-card"),e}}],(n=[{key:"length",value:function(){return 1}}])&&Q(e.prototype,n),i&&Q(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(M.a);st.blotName="embedly",st.tagName="div";n(19),n(169),n(213),n(40),n(9),n(11),n(32),n(33);var at=n(716),ct=n(773);function ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(t,e)||dt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t){return function(t){if(Array.isArray(t))return ht(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||dt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(t,e){if(t){if("string"==typeof t)return ht(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(t,e):void 0}}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var pt=function(t){return t.match(at.a)},ft=function(t,e){var n=Object.assign({},e);if("string"!=typeof t.data)return n;var i=pt(t.data);if(i&&i.length>0){var r=function(t,e){var n=[],i=0;return t.forEach((function(t){var r=e.indexOf(t,i),o=e.substring(i,r);n.push({insert:o}),n.push({insert:t,attributes:{link:t}}),i=r+t.length})),i!==e.length&&n.push({insert:e.substring(i)}),n.push({insert:"\n"}),t.forEach((function(t){n.push({insert:{embedly:{link:t}}})})),n.push({insert:""}),n}(i,t.data);n.ops=r}return n},mt=function(t){return"block"===t.constructor.blotName&&t.children.length<=1&&"break"===t.children.head.constructor.blotName},bt=function(t){return"embedly"===t.constructor.blotName},vt=function(t){return{blot:t,link:t.domNode.dataset.link}},_t=function(t,e,n){var i=t.getLine(e)[0];if(!i.next)return[t.getLength(),!0];var r=function(t){return lt(t.domNode.childNodes).filter((function(t){return"A"===t.nodeName})).map((function(t){return t.getAttribute("href")}))}(i),o=function(t){for(var e=[],n=t.next;n;){var i=bt(n);if(!mt(n)&&!i)break;i&&e.push(vt(n)),n=n.next}return e}(i);if(!o.length)return[t.getIndex(i.next),!0];if(o.filter((function(t){return t.link===n})).length)return[null,null];for(var s=r.indexOf(n),a=0,c=r.filter((function(t){return t!==n})),u=Math.min(o.length,s),l=0;l<u;l++)o[l].link!==c[l+a]&&(a+=1);var d=a+1<=s,h=d?s-1-a:0,p=d?1:0,f=!!d&&h===o.length-1;return[t.getIndex(o[h].blot)+p,f]},gt=function(t,e){var n=pt(e.prefix.trim());if(n&&n.length){var i=n[0];yt(this.quill,i,t.index)}return!0},yt=function(t,e,n){var i=e;Object(ct.b)(i)||(i=Object(ct.a)(i));var r=n-e.length;t.formatText(r,e.length,"link",i);var o=ut(_t(t,n,i),2),s=o[0],a=o[1];null!==s&&(t.insertEmbed(s,"embedly",{link:i}),a&&t.insertText(s+1,""))},Ot=n(774),Et=[["link"],["bold","italic"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["clean"]];u.a.register({"modules/toolbar":d.a,"modules/toolbarBottom":d.a,"themes/bubble":l.a,"formats/image":h.a,"formats/bold":p.a,"formats/italic":f.a,"formats/header":b.a,"formats/link":m.a,"formats/list":v.b,"formats/list/item":v.a,"formats/indent":_.a,"formats/blockquote":g.a}),u.a.register(Y),u.a.register(st);var Ct=Object(c.b)((function(){var t=document.createDocumentFragment(),e=document.createElement("div");t.appendChild(e);var n=Tt(e);return{toHTML:t=>(n.setContents(t),n.root.cloneNode(!0).innerHTML)}})),Tt=function(t,e,n){if(n){var i=n;n=function(t,e){return{placeholder:t,theme:"bubble",modules:{toolbar:{container:Et},toolbarBottom:(n=e,{containerClass:"ql-toolbar-bottom",container:n,handlers:{image:Z}}),clipboard:{matchers:[[Node.TEXT_NODE,ft]]},keyboard:{bindings:{tab:{key:Ot.KEY_TAB,handler:()=>!0},spaceBuildLink:St(Ot.KEY_SPACE),returnBuildLink:St(Ot.KEY_RETURN)}}}};var n}(i.placeholder,i.bottomToolbar)}var r=new u.a(t,n);return r.setContents(e),r},St=function(t){return{key:t,collapsed:!0,shiftKey:null,prefix:at.b,handler:gt}},At=n(734),wt=n(182),jt=n(846),Pt=n(36),Rt={props:{content:Pt.a.string.isRequired}},Nt=Object(E.a)(Rt,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._t("start"),this._v(" "),e("div",{staticClass:"vf-content-html__content",domProps:{innerHTML:this._s(this.content)}}),this._v(" "),this._t("end")],2)}),[],!1,null,"350830c5",null).exports,It={functional:!0,props:{isHtml:Pt.a.bool.isRequired,content:Pt.a.string.isRequired},render(t,e){var n=e.props,i=e.slots;return t(n.isHtml?Nt:jt.a,{props:n.isHtml?{content:n.content}:{text:n.content},scopedSlots:{start:function(){return i().start},end:function(){return i().end}}})}},Ut=Object(E.a)(It,void 0,void 0,!1,null,null,null).exports,Lt=(n(102),n(4)),xt=n(757),Dt={props:{content:Pt.a.object.def((function(){})),contentContainerUuid:Pt.a.uuid.isRequired,placeholder:Pt.a.string,showMediaIcon:Pt.a.bool.def(!1),isDisabled:Pt.a.bool.def(!1)},data:()=>({editor:null}),watch:{content(){this.editor&&this.resetEditor()},placeholder(){this.editor&&(this.editor.root.dataset.placeholder=this.placeholder)},isDisabled(){this.editor.enable(!this.isDisabled)}},mounted(){this.setEditor()},methods:{setEditor(){this.editor||(this.editor=Tt(Object(a.a)(".js-vf-editor-mount",this.$el),this.content,{placeholder:this.placeholder,bottomToolbar:Object(a.a)(".vf-js-custom-ql-toolbar",this.$el)}),this.editor.on("image-embed",this.onImageUpload.bind(this)),this.editor.on("text-change",this.editorChange.bind(this)),this.isDisabled&&this.editor.enable(!1))},editorChange(){var t=!Object(a.a)(".ql-blank",this.$el),e=JSON.stringify(this.editor.getContents());this.$emit("on-change",{hasContents:t,contents:e})},onImageUpload(t){var e=t.uploadUuid,n=t.file,i={uuid:e,content_container_uuid:this.contentContainerUuid,file:n};this.$store.dispatch(Lt.Bd,i)},focusEditor(){this.editor.focus()},resetEditor(){this.editor.setContents(this.content)}},components:{attachImageButton:xt.a}},$t=Object(E.a)(Dt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-quill-editor"},[n("div",{staticClass:"js-vf-editor-mount vf-content-editor-input vf-content",on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.$emit("request-submit"):null}}}),t._v(" "),n("div",{staticClass:"ql-toolbar vf-bottom-toolbar vf-js-custom-ql-toolbar"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.showMediaIcon,expression:"showMediaIcon"}],staticClass:"ql-formats"},[n("attach-image-button",{staticClass:"ql-image",attrs:{tag:"button"}})],1)])])}),[],!1,null,null,null).exports,kt=n(679);function Bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(n),!0).forEach((function(e){Ft(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ft(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ht={props:{preloadedContent:Pt.a.string,contentUuid:Pt.a.uuid,contentContainerUuid:Pt.a.uuid,status:Pt.a.oneOf(Object.values(r)).def(r.EDITABLE),placeholder:Pt.a.string,isRichTextEnabled:Pt.a.bool.isRequired,isFocused:Pt.a.bool.def(!1),characterLimit:Pt.a.number.def(1/0),isDisabled:Pt.a.bool.def(!1)},data:()=>({contents:null,hasContents:!1}),beforeCreate(){this.CHARACTER_COUNT_VISIBILITY_THRESHOLD=50,this.isAndroid=Object(wt.c)(window)===wt.a},mounted(){!this.isRichTextEnabled&&this.isAndroid&&window.addEventListener("resize",this.handleResize),this.contents=this.preloadedContent},beforeDestroy(){!this.isRichTextEnabled&&this.isAndroid&&window.removeEventListener("resize",this.handleResize)},computed:Mt(Mt({},Object(s.c)({contentByUuid:i.R})),{},{isStatic(){return this.status===r.STATIC},staticRichTextContent(){return Ct.getInstance().toHTML(this.content)},showMediaIcon(){return this.isFocused||this.hasContents},contentLength(){return this.contents&&this.contents.length},isOverCharLimit(){return!this.isRichTextEnabled&&this.remainingCharacterCount<0},remainingCharacterCount(){return this.characterLimit-this.contentLength},hasCharacterLimit(){return this.characterLimit!==1/0},content(){var t=this.isRichTextEnabled?{}:"",e=this.contentUuid?this.contentByUuid(this.contentUuid).content:t;return this.isRichTextEnabled&&this.contentUuid&&(e=JSON.parse(e)),e},staticContent(){return this.isRichTextEnabled?this.staticRichTextContent:this.content}}),methods:{getAttachments(t){return this.isRichTextEnabled&&""!==t?JSON.parse(t).ops.map((function(t){return Object(o.b)(["insert","image-upload","mediaUuid"],t)})).filter(Boolean):[]},requestSubmit(){this.hasContents&&this.$emit("request-submit")},onRichTextChange(t){var e=t.hasContents,n=t.contents;this.hasContents=e;var i={content:n,media_uuids:this.getAttachments(n)};this.$emit("content-update",this.hasContents,i)},onNonRichTextChange(){this.hasContents=this.contentLength>0,this.$emit("content-update",this.hasContents,this.contents),this.$emit("is-over-char-limit",this.isOverCharLimit)},handleResize(){this.isFocused&&"TEXTAREA"===document.activeElement.tagName&&setTimeout((function(){document.activeElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),0)},focusOnInput(){this.isRichTextEnabled?this.$refs.quillEditor.focusEditor():this.$refs.textarea.focus()},resetContents(){this.isRichTextEnabled?this.$refs.quillEditor&&this.$refs.quillEditor.resetEditor():this.contents=this.content}},watch:{isFocused(){var t;this.isRichTextEnabled||this.isFocused||null!==(t=this.contents)&&void 0!==t&&t.length||At.a.clear(Object(a.a)("textarea",this.$el))},hasContents(){At.a.update(this.$refs.textarea)},status:{handler(t,e){t===r.EDITABLE&&e!==r.ERROR&&this.resetContents()},immediate:!0}},components:{characterCount:kt.a,quillEditor:$t,staticContent:Ut},directives:{autoresize:At.a}},qt=Object(E.a)(Ht,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isStatic?n("static-content",{attrs:{"is-html":t.isRichTextEnabled,content:t.staticContent},scopedSlots:t._u([{key:"start",fn:function(){return[t._t("content-start")]},proxy:!0},{key:"end",fn:function(){return[t._t("content-end")]},proxy:!0}],null,!0)}):n("div",{staticClass:"vf-content-editor-form"},[n("div",{staticClass:"vf-editor-area",class:{"vf-editor-area--with-limit":t.hasCharacterLimit}},[t.isRichTextEnabled?n("quill-editor",{ref:"quillEditor",attrs:{content:t.content,placeholder:t.placeholder,"content-container-uuid":t.contentContainerUuid,"show-media-icon":t.showMediaIcon,"is-disabled":t.isDisabled},on:{"on-change":t.onRichTextChange,"request-submit":t.requestSubmit}}):n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.contents,expression:"contents"},{name:"autoresize",rawName:"v-autoresize"}],ref:"textarea",staticClass:"vf-content-editor-input vf-content vf-content-editor-form__textarea",class:{"vf-content-editor-form__textarea--empty":0===t.contentLength},attrs:{"aria-label":t.placeholder,placeholder:t.placeholder,disabled:t.isDisabled},domProps:{value:t.contents},on:{input:[function(e){e.target.composing||(t.contents=e.target.value)},t.onNonRichTextChange],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.requestSubmit(e):null}}}),t._v(" "),n("character-count",{staticClass:"vf-content-editor-form__character-count",attrs:{"a11y-warning":"conversations.rich_text.character_limit.warning","a11y-error":"conversations.rich_text.character_limit.error","visible-threshold":t.CHARACTER_COUNT_VISIBILITY_THRESHOLD,count:t.remainingCharacterCount}})],1)])}),[],!1,null,null,null);e.a=qt.exports},748:function(t,e,n){"use strict";n(44),n(58),n(3),n(17),n(26),n(15),n(16),n(57);var i=n(141),r=n(0),o=n(650),s=n(124),a=n(167),c=n(22),u=n(645),l=n(640),d=n(896),h=(n(52),n(66),n(38),n(9),n(11),n(195),n(188),n(721)),p=n(907),f=n(908),m=n(909),b=n(59),v=n(707),_=n(695),g=n(705),y=n(36);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){C(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T="facebook",S="twitter",A="email",w="url",j=[{key:T,value:"conversations.actions.facebook",buttonClass:"vf-horiz-list vf-action-button js-list-link vf-icon-button",icon:p.a},{key:S,value:"conversations.actions.twitter",buttonClass:"vf-horiz-list vf-action-button js-list-link vf-icon-button",icon:f.a},{key:A,value:"conversations.actions.email",buttonClass:"vf-horiz-list vf-action-button js-list-link vf-icon-button",icon:m.a},{key:w,value:"conversations.actions.copy_url"}],P={props:{contentUuid:y.a.uuid.isRequired,contentType:y.a.string.isRequired},data:()=>({isDropdownOpen:!1}),created(){this.PALETTES=u.a,this.copyUrlKey=w},mounted(){this.$el.addEventListener("mouseleave",this.hide)},beforeDestroy(){this.$el.removeEventListener("mouseleave",this.hide)},computed:E(E({},Object(i.c)({getContentByUuid:r.R,getContentContainerData:r.T,getMetadataByLocationId:r.mc})),{},{shareOptions(){var t=this;return j.map((function(e){return Object.assign({},e,{value:t.$i18n(e.value)})}))},checkOutText(){return this.$i18n("social.check_out",{content_type:this.contentType})},facebookUrl(){var t={u:this.buildShareLink(_.a.FACEBOOK)};return Object(b.b)("http://www.facebook.com/sharer/sharer.php",{queryParams:t})},twitterUrl(){var t=this.buildShareLink(_.a.TWITTER),e={text:"".concat(this.checkOutText,": ").concat(t)};return Object(b.b)("https://twitter.com/intent/tweet",{queryParams:e})},emailUrl(){var t=this.buildShareLink(_.a.EMAIL),e=encodeURIComponent(this.checkOutText),n=encodeURIComponent(this.$i18n("social.email_body",{url:t,content_type:this.contentType}));return"".concat("mailto",":?subject=").concat(e,"&body=").concat(n)},buttonProps:()=>({class:"vf-label-upper",size:"inline"})}),methods:{toggleOnEnter(t){this.isDropdownOpen=t},toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen},hide(){this.toggleOnEnter(!1)},onAction(t){switch(t.key){case T:this.openShareLink(this.facebookUrl,"Facebook");break;case S:this.openShareLink(this.twitterUrl,"Twitter");break;case A:location.href=this.emailUrl}},buildShareLink(t){var e=this.getContentByUuid(this.contentUuid),n=this.getContentContainerData(null==e?void 0:e.content_container_uuid),i=this.getMetadataByLocationId(null==n?void 0:n.locationId),r=new URL(null==i?void 0:i.origin_url);return r.searchParams.append("__vfz",Object(v.a)(t)),r.hash="vf-".concat(this.contentUuid),r.href},openShareLink(t,e){window.open(t,e,"status = 1, height = 350, width = 550, resizable = 0")}},components:{vfButton:l.a,listDropdown:h.a,copyUrlButton:g.a}},R=n(56),N=Object(R.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("list-dropdown",{staticClass:"vf-share-menu",attrs:{items:t.shareOptions,"enable-hover-light":!1,"button-properties":t.buttonProps,positions:["bottom-left"],"is-dropdown-open":t.isDropdownOpen},on:{"list-item-clicked":t.onAction},scopedSlots:t._u([{key:"trigger",fn:function(){return[n("vf-button",{staticClass:"vf-label vf-label-upper vf-share-menu__trigger",attrs:{palette:t.PALETTES.ACCENT,size:"inline","is-link":"","is-inverted":""},nativeOn:{"&click":function(e){return t.toggleDropdown(e)}}},[t._v("\n            "+t._s(t.$i18n("conversations.posts.share"))+"\n        ")])]},proxy:!0},{key:t.copyUrlKey,fn:function(){return[n("copy-url-button",{attrs:{url:t.buildShareLink(),"copy-text":t.$i18n("conversations.actions.copy_url"),"copied-text":t.$i18n("conversations.actions.copied")}})]},proxy:!0}],null,!0)})}),[],!1,null,"3ba9dd38",null).exports,I=n(850),U=n(851);function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $=Object(l.b)(I.a),k=Object(l.b)(U.a),B={props:{isReplyEnabled:y.a.bool,areRepliesEnabled:y.a.bool,isLikeEnabled:y.a.bool,isDislikeEnabled:y.a.bool,isShareEnabled:y.a.bool.def(!1),isFlagEnabled:y.a.bool.def(!1),isEntered:y.a.bool.def(!1),content:y.a.object,contentType:y.a.string},created(){this.CONTENT_ACTIONS=o.a,this.PALETTES=u.a,this.isMobileOrTablet=a.e},computed:x(x({},Object(i.c)({currentUser:r.hb,siteSettings:r.Jc,getUserByUuid:r.kd})),{},{contentActor(){return this.getUserByUuid(this.content.actor_uuid)},isContentDislikable(){return Boolean(this.siteSettings.enable_dislikes)},isFlagVisible(){return Object(c.G)(this.currentUser,this.siteSettings,this.contentActor)},numOfReplies(){return this.content.total_replies},isLiked(){return this.content.actions.includes(o.a.LIKE)},isDisliked(){return this.content.actions.includes(o.a.DISLIKE)},isFlagged(){return this.content.actions.includes(o.a.FLAG)},flagText(){return this.isFlagged?this.$i18n("conversations.posts.flag.past"):this.$i18n("conversations.posts.flag.verb")},likeLabel(){return this.isLiked?this.$i18n("conversations.posts.unlike_aria_label",{count:this.content.total_likes}):this.$i18n("conversations.posts.like_aria_label",{count:this.content.total_likes})},dislikeLabel(){return this.isDisliked?this.$i18n("conversations.posts.undislike_aria_label",{count:this.content.total_dislikes}):this.$i18n("conversations.posts.dislike_aria_label",{count:this.content.total_dislikes})},canLikeOrDislike(){return this.isActionPermitted()}}),watch:{currentUser(){this.isActionPermitted()}},methods:{getFlagPalette:t=>t?u.a.DANGER:u.a.ACCENT,isActionPermitted(){var t=this;return![s.PENDING_NEW,s.REJECTED].some((function(e){return t.currentUser.username_moderation_status===e}))}},components:{countButton:d.a,dislikeButton:k,likeButton:$,shareMenu:N,vfButton:l.a}},M=Object(R.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-content-actions",class:{"vf-content-actions--entered":t.isEntered||t.isMobileOrTablet}},[n("div",{staticClass:"vf-content-actions__left-actions vf-horiz-list"},[t.isReplyEnabled?n("vf-button",{staticClass:"vf-content-actions__left-action vf-content-actions__reply vf-label is-size-inline is-link is-accent-color",attrs:{"aria-label":t.$i18n("conversations.posts.reply_aria_label"),palette:t.PALETTES.ACCENT},nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.REPLY)}}},[t._v("\n            "+t._s(t.$i18n("conversations.posts.reply.verb"))+"\n        ")]):t._e(),t._v(" "),t.areRepliesEnabled&&t.numOfReplies>0?n("count-button",{staticClass:"vf-content-actions__left-action vf-content-actions__replies vf-label is-size-inline is-link is-accent-color",attrs:{"aria-label":t.$i18n("conversations.posts.replies_aria_label",{count:t.numOfReplies}),count:t.numOfReplies},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit(t.CONTENT_ACTIONS.REPLIES)},mousedown:function(t){t.stopPropagation(),t.preventDefault()}}},[t._v("\n            "+t._s(t.$i18n("conversations.posts.reply.noun",{count:t.numOfReplies}))+"\n        ")]):t._e(),t._v(" "),t.isLikeEnabled?n("like-button",{staticClass:"vf-content-actions__left-action vf-content-actions__like vf-label is-size-inline is-link is-accent-color is-inverted",class:{"vf-content-actions__like--liked":t.isLiked},attrs:{size:"vf-icon-small","aria-label":t.likeLabel,text:t.content.total_likes.toString(),disabled:!t.canLikeOrDislike},nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.TOGGLE_LIKE)}}}):t._e(),t._v(" "),t.isDislikeEnabled&&t.isContentDislikable?n("dislike-button",{staticClass:"vf-content-actions__left-action vf-content-actions__dislike vf-label is-size-inline is-link is-accent-color is-inverted",class:{"vf-content-actions__dislike--disliked":t.isDisliked},attrs:{size:"vf-icon-small","aria-label":t.dislikeLabel,text:t.content.total_dislikes.toString(),disabled:!t.canLikeOrDislike},nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.TOGGLE_DISLIKE)}}}):t._e()],1),t._v(" "),n("div",{staticClass:"vf-content-actions__right-actions vf-horiz-list",class:{"vf-content-actions__right-actions--desktop":!t.isMobileOrTablet}},[t.isShareEnabled?n("share-menu",{staticClass:"vf-content-actions__share",attrs:{"content-uuid":t.content.content_uuid,"content-type":t.contentType}}):t._e(),t._v(" "),t.isFlagEnabled&&t.isFlagVisible?n("vf-button",{staticClass:"vf-content-actions__flag vf-label is-size-inline is-link is-accent-color",class:{"vf-content-actions__flag--flagged":t.isFlagged},attrs:{palette:t.getFlagPalette(t.isFlagged),"is-inverted":!t.isFlagged},nativeOn:{click:function(e){!t.isFlagged&&t.$emit(t.CONTENT_ACTIONS.FLAG)}}},[t._v("\n            "+t._s(t.flagText)+"\n        ")]):t._e()],1)])}),[],!1,null,"ab385954",null);e.a=M.exports},750:function(t,e,n){"use strict";n(38),n(3),n(52),n(26),n(17),n(15),n(16),n(57);var i=n(4),r=n(0),o=n(2),s=n(307),a=n(407),c=n(510),u=n(81),l=n(141),d=n(109),h=n(762),p=n(723),f=n(763),m={components:{contentLayout:p.a,typingIndicator:f.a},props:{isTyping:Boolean}},b=n(56),v=Object(b.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reply-typing-indicator",class:{"reply-typing-indicator--visible":t.isTyping}},[n("content-layout",{staticClass:"reply-typing-indicator__internal",scopedSlots:t._u([{key:"left",fn:function(){return[n("div",{staticClass:"reply-typing-indicator__indicator"},[n("typing-indicator",{attrs:{"is-typing":t.isTyping}})],1)]},proxy:!0}])})],1)}),[],!1,null,"1eba3f14",null).exports,_=n(752),g=n(994),y=n(36),O=n(1),E=n(142),C=n(126),T=n(6);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j={props:{threadUuid:y.a.uuid.isRequired,subthreads:y.a.array.isRequired,threadPalette:y.a.string.isRequired,contentContainerUuid:y.a.uuid.isRequired,limit:y.a.number.isRequired,fetchRepliesAction:y.a.string.isRequired,fetchSelectedAction:y.a.string.isRequired,oldReplyCount:y.a.number,oldMentionsInThread:y.a.array,realtimeCount:y.a.number,isReadyForContent:y.a.bool,storeAction:y.a.string.isRequired,isFocused:y.a.bool.def(!1),maximumContentLength:y.a.number.def(1/0),isExpanded:y.a.bool,headerHeightPx:y.a.number,isFetchingContent:y.a.bool.def(!1),hasBorder:y.a.bool},data:()=>({isFetchingOldContent:!1}),inject:[s.a,s.e],mounted(){var t=this;Object(d.d)().then((function(){t.observer=Object(d.a)(t.$refs.intersector,t.intersectionHandler)}))},beforeDestroy(){this.observer&&this.observer.unobserve(this.$refs.intersector)},computed:A(A(A({},Object(l.d)({threadByUuid(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Uc)]},hasUnreadRepliesInThread(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Hb)]},hasUnreadMentionsInThread(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Fb)]},hasUnreadRepliesInSubthread(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Gb)]},hasUnreadMentionsInSubthread(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Eb)]},selectedContentInThread(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Cc)]}})),Object(l.c)({interactions:r.Lb,contentByUuid:r.R,isUserMutedByCurrentUser:r.md,activeReplyThreadByContainerUuid:r.a,isExpired:r.Db,isActiveReplyThread:r.Mb})),{},{oldMentionCount(){return this.oldMentionsInThread.length},isReplyFormVisible(){return this.hasReplies&&!this.isUserMutedByCurrentUser(this.head.actor_uuid)&&this.head.state===u.c.VISIBLE&&!this.isExpired(this.contentContainerUuid)},isClosed(){return this.isExpired(this.contentContainerUuid)},thread(){return this.threadByUuid(this.threadUuid)},hasUnreadMentions(){return this.head.content_container_uuid===this.thread.thread_top_uuid?this.hasUnreadMentionsInThread(this.threadUuid):this.hasUnreadMentionsInSubthread({thread_uuid:this.thread.thread_top_uuid,subthread_uuid:this.threadUuid})},hasUnreadReplies(){return this.head.content_container_uuid===this.thread.thread_top_uuid?this.hasUnreadRepliesInThread(this.threadUuid):this.hasUnreadRepliesInSubthread({thread_uuid:this.thread.thread_top_uuid,subthread_uuid:this.threadUuid})},head(){return this.contentByUuid(this.threadUuid)},hasReplies(){return this.head.total_replies>0},parentLocationInThread(){return this.isExpanded?this.hasReplies?a.c.FIRST:this.isTypingInThread?a.c.ONLY_TYPING:a.c.ONLY:a.c.ONLY},isTypingInThread(){var t=this;return this.interactions(this.threadUuid).isTyping||this.subthreads.some((function(e){return t.interactions(e).isTyping}))},contentIndicatorText(){var t,e,n=this.realtimeCount;return this.hasUnreadMentions&&this.hasUnreadReplies?(t=this.$i18n("conversations.threads.content_indicator.reply_and_mention.label"),e=this.$i18n("conversations.threads.content_indicator.reply_and_mention.count",{count:n})):this.hasUnreadMentions?(t=this.$i18n("conversations.threads.content_indicator.mention.label",{count:n}),e=this.$i18n("conversations.threads.content_indicator.mention.count",{count:n})):(t=this.$i18n("conversations.threads.content_indicator.reply.label",{count:n}),e=this.$i18n("conversations.threads.content_indicator.reply.count",{count:n})),{buttonText:t,iconText:e}},activeReplyThread(){return this.activeReplyThreadByContainerUuid(this.head.content_container_uuid)},selectedThreadContent(){return this.selectedContentInThread(this.threadUuid)},hasSelectedThreadContent(){return this.selectedThreadContent.length>0},oldContentPalette(){return this.oldMentionCount>0?this.threadPalette:this.PALETTES.LIGHT_PRIMARY},oldCountWithSelectedContent(){var t=this.head.total_replies,e=this.thread,n=e.thread_uuid,i=e.thread_top_uuid;return n!==i&&i!==this.head.content_container_uuid&&(t=this.threadByUuid(i).total_content),t-this.selectedThreadContent.length},oldContentCount(){return this.oldMentionCount>0?this.oldMentionCount:this.hasSelectedThreadContent?this.oldCountWithSelectedContent:this.oldReplyCount},oldContentIndicatorText(){var t,e,n=this.oldContentCount;return this.oldMentionCount>0?(t=this.$i18n("conversations.threads.old_content_indicator.mention.label"),e=this.$i18n("conversations.threads.old_content_indicator.mention.count",{count:n})):this.hasSelectedThreadContent?(t=this.$i18n("conversations.threads.old_content_indicator.thread.label"),e=this.$i18n("conversations.threads.old_content_indicator.thread.count",{count:n})):(t=this.$i18n("conversations.threads.old_content_indicator.reply.label"),e=this.$i18n("conversations.threads.old_content_indicator.reply.count",{count:n})),{buttonText:t,iconText:e}},realtimeLocationInThread(){return this.isReplyFormVisible?a.c.MIDDLE:a.c.LAST},visibleContentCount(){return this.thread.visible_content.length}}),methods:A(A({},Object(l.b)({addActiveReplyThread:i.a})),{},{isLastReply(t){return t+1===this.subthreads.length},getChildLocationInThread(t){return!this.isReplyFormVisible&&this.isLastReply(t)&&0===this.realtimeCount?a.c.LAST:a.c.MIDDLE},intersectionHandler(t){this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(o.ld),{thread_uuid:this.threadUuid,is_in_view:t[0].isIntersecting})},removeFocus(){this.$refs.replyForm.removeFocus()},fetchOldContent(){var t=this;if(this.oldMentionCount>0)return this.fetchOldMentions();var e=this.thread,n=e.selected_content,i=e.thread_uuid,r=e.thread_top_uuid,s=e.page_from;if(n.length>0&&i!==r&&r!==this.contentContainerUuid){this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(o.L),this.threadUuid);var a=this.$el.parentElement.parentElement.offsetTop-this.headerHeightPx;return this.addActiveReplyThread({thread_uuid:r,offset_top:a,mode:c.REPLY_THREAD_MODES.REPLIES})}return n.length>0&&this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(o.L),this.threadUuid),this.isFetchingOldContent=!0,this.$store.dispatch(this.fetchRepliesAction,{content_uuid:this.threadUuid,limit:this.limit,starting_from:s,THREAD_NAMESPACE:this.THREAD_NAMESPACE}).then((function(){t.isFetchingOldContent=!1,t.$publish(O.b.CHANNEL,O.b.EVENTS.INTERACTION,{action:E.h,label:"in-thread",widget_type:T.d.COMMENTS,content_container_type:C.b,content_container_uuid:t.contentContainerUuid}),t.isActiveReplyThread(t.contentContainerUuid)&&t.$store.commit(o.id,{uuid:t.contentContainerUuid,mode:c.REPLY_THREAD_MODES.REPLIES})}))},fetchOldMentions(){var t=this,e=this.oldMentionsInThread[0].target_uuid,n=this.oldMentionsInThread.filter((function(t){return t.target_uuid===e})).map((function(t){return t.content_uuid}));return this.thread.selected_content.length>0&&this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(o.L),this.threadUuid),this.$store.dispatch("".concat(this.THREAD_NAMESPACE,"/").concat(i.Sb),{content_container_uuid:this.contentContainerUuid,thread_uuid:e,selected_content_uuids:n,fetchAction:this.fetchSelectedAction}).then((function(){var n=t.$el.parentElement.parentElement.offsetTop-t.headerHeightPx;return t.addActiveReplyThread({thread_uuid:e,offset_top:n,mode:c.REPLY_THREAD_MODES.MENTION})}))},showNewContent(){this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(o.A),{thread_uuid:this.threadUuid,limit:this.limit})}}),components:{replyTypingIndicator:v,replyForm:h.a,threadedContentIndicator:_.b,heightTransitionGroup:g.a}},P=Object(b.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-thread",class:{"vf-thread--open":t.hasReplies,"vf-thread--no-border":!t.hasBorder}},[t.activeReplyThread.thread_uuid&&t.isFocused?n("div",{staticClass:"vf-thread__reply-thread-overlay",on:{click:function(e){return t.$emit("remove-focus")}}}):t._e(),t._v(" "),t._t("head",null,{locationInThread:t.parentLocationInThread}),t._v(" "),n("threaded-content-indicator",t._b({directives:[{name:"show",rawName:"v-show",value:t.oldContentCount>0&&t.isExpanded,expression:"oldContentCount > 0 && isExpanded"}],staticClass:"vf-thread__old-content-indicator",attrs:{"thread-palette":t.threadPalette,palette:t.oldContentPalette,count:t.oldContentCount,"is-loading":t.isFetchingContent||t.isFetchingOldContent,"show-bottom-line":!t.isClosed||t.visibleContentCount>0&&t.isClosed},on:{"show-content":t.fetchOldContent}},"threaded-content-indicator",t.oldContentIndicatorText,!1)),t._v(" "),t.isReadyForContent&&t.isExpanded?n("height-transition-group",{staticClass:"vf-thread__replies",attrs:{tag:"ul",role:"list"}},t._l(t.subthreads,(function(e,i){return n("li",{key:e,staticClass:"vf-thread__reply-list-item",attrs:{id:"vf-thread--"+e}},[t._t("reply",null,{threadUuid:e,locationInThread:t.getChildLocationInThread(i)}),t._v(" "),t._t("reply-ad",null,{index:i,threadUuid:e,threadCount:t.subthreads.length,hasSiblingReply:Boolean(t.subthreads[i+1])})],2)})),0):t._e(),t._v(" "),t.realtimeCount>0&&t.isExpanded?n("threaded-content-indicator",t._b({attrs:{"thread-palette":t.threadPalette,"location-in-thread":t.realtimeLocationInThread,"is-typing":t.isTypingInThread,palette:t.threadPalette,count:t.realtimeCount,"show-bottom-line":!t.isClosed||t.visibleContentCount>0&&t.isClosed},on:{"show-content":t.showNewContent}},"threaded-content-indicator",t.contentIndicatorText,!1)):t.isExpanded?n("reply-typing-indicator",{attrs:{"is-typing":t.isTypingInThread}}):t._e(),t._v(" "),n("div",{ref:"intersector"}),t._v(" "),t.isReplyFormVisible&&t.isExpanded?n("reply-form",{ref:"replyForm",staticClass:"vf-thread__reply-form",attrs:{"is-expanded":"","replying-to":t.head,palette:t.threadPalette,"store-action":t.storeAction,"show-parent":!1,"character-limit":t.maximumContentLength},on:{focusin:function(e){return t.$emit("focusin")},"remove-focus":function(e){return t.$emit("focusout")}}}):t._e()],2)}),[],!1,null,"219161ba",null);e.a=P.exports},751:function(t,e,n){"use strict";n(17),n(26),n(3),n(15),n(16),n(57);var i=n(0),r=n(141),o=n(701),s=n(36),a={props:{isFocused:s.a.bool.def(!1),currentUser:s.a.object.isRequired,errorMessage:s.a.string.def("")},components:{contentFocusContainer:o.a}},c=n(56),u=Object(c.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-focus-container",{attrs:{"is-focused":t.isFocused,"current-user":t.currentUser},on:{"focus-on-element":function(e){return t.$emit("focus-on-element",e)},close:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"header",fn:function(){return[t._t("header")]},proxy:!0},{key:"footer",fn:function(){return[t._t("footer",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.errorMessage,expression:"errorMessage"}],staticClass:"vf-rich-text-form__error"},[t._v("\n                "+t._s(t.errorMessage)+"\n            ")])])]},proxy:!0}],null,!0)},[t._t("default")],2)}),[],!1,null,null,null).exports,l=n(746);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={props:{showUserStatus:s.a.bool.def(!1),isSubmitEnabled:s.a.bool,isFocused:s.a.bool.def(!1),hasContentUpdated:s.a.bool.def(!1),canFocus:s.a.bool,editorStatus:s.a.string,errorMessage:s.a.string.def("")},computed:h(h({},Object(r.c)({currentUser:i.hb})),{},{hasEditableContents(){return this.hasContentUpdated&&this.canFocus},classes(){return{"vf-content-focus-container--has-contents":!this.isFocused&&this.hasEditableContents}}}),components:{contentFocusContainerWithError:u,contentFocusContainerFooter:l.a}},m=Object(c.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-focus-container-with-error",{class:t.classes,attrs:{"is-focused":t.isFocused,"error-message":t.errorMessage,"current-user":t.currentUser},on:{"focus-on-element":function(e){return t.$emit("focus-on-element",e)},close:function(e){return t.$emit("remove-focus")}},scopedSlots:t._u([{key:"header",fn:function(){return[t._t("header")]},proxy:!0},{key:"footer",fn:function(){return[n("content-focus-container-footer",{attrs:{"is-focused":t.isFocused,"show-user-status":t.showUserStatus,"editor-status":t.editorStatus,"has-content-updated":t.hasContentUpdated,"is-submit-enabled":t.isSubmitEnabled,"has-editable-contents":t.hasEditableContents},on:{submit:function(e){return t.$emit("submit",e)},"cancel-edit":function(e){return t.$emit("cancel-edit")},"actions-focused":function(e){return t.$emit("actions-focused",e)}}})]},proxy:!0}],null,!0)},[t._t("default")],2)}),[],!1,null,"7b6b3cc8",null);e.a=m.exports},752:function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return d}));n(44),n(58),n(92);var i=n(407),r=n(703),o=n(645),s={components:{contentBadge:n(702).a},props:{isTyping:Boolean,count:{type:Number,default:0,required:!1},palette:String},computed:{a11yLabel:()=>"",hasRealtime(){return this.palette===o.a.ACCENT},hasMentions(){return this.palette===o.a.MENTION}}},a=n(56),c=Object(a.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"grow"}},[e("content-badge",{attrs:{"is-typing":this.isTyping,"has-realtime":this.hasRealtime,"has-mentions":this.hasMentions,count:this.count,"a11y-label":this.a11yLabel}})],1)}),[],!1,null,"2585fda7",null).exports,u=n(674),l=[o.a.ACCENT,o.a.MENTION,o.a.LIGHT_PRIMARY],d={[o.a.ACCENT]:"vf-threaded-content-indicator--accent",[o.a.MENTION]:"vf-threaded-content-indicator--mention",[o.a.LIGHT_PRIMARY]:"vf-threaded-content-indicator--light-primary"},h={components:{threadedLayout:r.a,contentIndicator:c,spinningLoader:u.a},props:{buttonText:String,iconText:String,count:Number,palette:{type:String,validator:function(t){return l.includes(t)},default:o.a.LIGHT_PRIMARY},threadPalette:String,locationInThread:{type:String,validator:function(t){return Object.values(i.c).includes(t)},default:i.c.MIDDLE},isTyping:Boolean,isLoading:{type:Boolean,default:!1},showBottomLine:{type:Boolean,default:!0}},computed:{paletteClass(){return d[this.palette]}},methods:{showContent(){this.$emit("show-content")}}},p=Object(a.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"vf-threaded-content-indicator vf-no-outline",class:t.paletteClass,attrs:{palette:t.palette},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showContent(e)}}},[n("threaded-layout",{staticClass:"vf-threaded-content-indicator__layout",attrs:{"location-in-thread":t.locationInThread,palette:t.threadPalette,"show-bottom-line":t.showBottomLine},scopedSlots:t._u([{key:"left",fn:function(){return[n("content-indicator",{staticClass:"vf-threaded-content-indicator__icon",attrs:{count:t.count,"is-typing":t.isTyping,palette:t.palette}}),t._v(" "),n("span",{staticClass:"vf-offscreen-text"},[t._v("\n                "+t._s(t.iconText)+"\n            ")])]},proxy:!0},{key:"right",fn:function(){return[n("span",{staticClass:"vf-label vf-label-upper",class:{"vf-threaded-content-indicator__text--hidden":t.isLoading},attrs:{"aria-hidden":t.isLoading}},[t._v("\n                "+t._s(t.buttonText)+"\n            ")]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("span",{staticClass:"vf-threaded-content-indicator__loader-wrapper"},[n("spinning-loader")],1):t._e()])]},proxy:!0}])})],1)}),[],!1,null,"59456b5e",null);e.b=p.exports},755:function(t,e,n){"use strict";var i=n(0),r=n(239),o=n(36),s=n(116),a=n(6),c=n(699),u=n(690),l={components:{branding:c.a,optOutPersonal:u.b},props:{sectionUuid:o.a.uuid.isRequired,rootSectionUuid:o.a.uuid,product:o.a.string.isRequired},data:()=>({adSettings:{ad_integration:s.b[a.d.STANDALONE_AD].ad_integration},adProvider:null,isPrivacyExpanded:!1}),computed:{getUniqueId:()=>Object(r.b)("conversations-footer_")()},methods:{loadSetting(){var t=this.$store.getters[i.Jc][this.adSettings.ad_integration];this.adProvider=t},onTogglePrivacySettings(t){this.isPrivacyExpanded=t}},mounted(){this.loadSetting()}},d=n(56),h=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"vf3-conversations-footer",class:{"vf3-conversations-footer--privacy-expanded":t.isPrivacyExpanded}},[n("opt-out-personal",{attrs:{"ad-provider":t.adProvider,"unique-id":t.getUniqueId},on:{"toggle-privacy-settings":t.onTogglePrivacySettings}}),t._v(" "),n("div",{staticClass:"vf3-conversations-footer__branding"},[n("branding",{attrs:{product:t.product,"section-uuid":t.sectionUuid,"root-section-uuid":t.rootSectionUuid}})],1)],1)}),[],!1,null,"c1b33bf6",null);e.a=h.exports},756:function(t,e,n){"use strict";var i=n(659),r=n(407),o=n(167),s=n(747),a=n(703),c={[r.c.ONLY]:"vf-new-content--single"},u={components:{contentEditor:s.a,threadedLayout:a.a},props:{user:Object,isRichTextEnabled:Boolean,editorStatus:String,placeholder:String,isFocused:Boolean,contentContainerUuid:String,avatarSize:{type:String,default:i.a.MEDIUM},locationInThread:String,palette:String,characterLimit:Number,isDisabled:{type:Boolean,default:!1},preloadedContent:String},computed:{computedAvatarSize(){return o.e?i.a.SMALL:this.avatarSize},contentEditorClasses(){return{["vf-new-content__editor--".concat(this.computedAvatarSize,"-avatar")]:!0}}},created(){this.threadedLayoutClasses=c[this.locationInThread]},methods:{handleContentUpdate(t,e){this.$emit("content-update",t,e)},focusOnContentEditor(){this.$refs.contentEditor.focusOnInput()},clearContent(){this.$refs.contentEditor.resetContents()}}},l=n(56),d=Object(l.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("threaded-layout",{staticClass:"vf-new-content",class:t.threadedLayoutClasses,attrs:{"location-in-thread":t.locationInThread,palette:t.palette},scopedSlots:t._u([{key:"left",fn:function(){return[t._t("avatar",null,{user:t.user,size:t.computedAvatarSize})]},proxy:!0},{key:"right",fn:function(){return[n("div",{staticClass:"vf-new-content__content-editor-slot-wrapper"},[n("div",{staticClass:"vf-new-content__content-editor-wrapper"},[n("content-editor",{ref:"contentEditor",staticClass:"vf-new-content__content-editor",class:t.contentEditorClasses,attrs:{"content-container-uuid":t.contentContainerUuid,"preloaded-content":t.preloadedContent,status:t.editorStatus,placeholder:t.placeholder,"is-focused":t.isFocused,"is-rich-text-enabled":t.isRichTextEnabled,"character-limit":t.characterLimit,"is-disabled":t.isDisabled},on:{"content-update":t.handleContentUpdate,"is-over-char-limit":function(e){return t.$emit("is-over-char-limit",e)},"request-submit":function(e){return t.$emit("request-submit")}}}),t._v(" "),t._t("default")],2),t._v(" "),t._t("footer")],2)]},proxy:!0}],null,!0)})}),[],!1,null,"3a04c549",null);e.a=d.exports},757:function(t,e,n){"use strict";var i={components:{vfAttachImgIcon:n(920).a},props:["tag","isFocused"]},r=n(56),o=Object(r.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e(this.tag,{tag:"component",staticClass:"attach-image-button vf-button",class:{"is-focused":this.isFocused}},[e("vf-attach-img-icon",{staticClass:"vf-icon-medium"}),this._v(" "),this._t("default")],2)}),[],!1,null,"267452ea",null);e.a=o.exports},758:function(t,e,n){"use strict";n(3),n(17),n(26),n(15),n(16),n(57);var i=n(141),r=n(0),o=n(307),s=n(124),a=n(652),c=n(653);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h={components:{vfButton:n(651).a},inject:[o.b,o.a],props:{isFollowing:{type:Boolean,required:!0},unfollowText:{type:String,required:!0},isFollowingText:{type:String,required:!0},isNotFollowingText:{type:String,required:!0},isFollowingAria:{type:String,required:!0},isNotFollowingAria:{type:String,required:!0}},data:()=>({isEntered:!1,wasJustClicked:!1}),computed:l(l({},Object(i.c)({currentUser:r.hb})),{},{currentText(){return this.canShowUnfollow?this.unfollowText:this.isFollowing?this.isFollowingText:this.isNotFollowingText},currentAriaLabel(){return this.isFollowing?this.isFollowingAria:this.isNotFollowingAria},currentPalette(){return this.canShowUnfollow?this.PALETTES.DANGER:this.isFollowing?this.PALETTES.SUCCESS:this.PALETTES.ACCENT},longestText(){return[this.unfollowText,this.isFollowingText,this.isNotFollowingText].reduce((function(t,e){return t.length>e.length?t:e}))},canShowUnfollow(){return this.isFollowing&&!this.wasJustClicked&&this.isEntered},canFollow(){return this.isActionPermitted()}}),methods:{toggleEntered(t){this.isEntered=t,t||(this.wasJustClicked=!1)},setClicked(){this.wasJustClicked=!0},isActionPermitted(){var t=this;return![s.PENDING_NEW,s.REJECTED].some((function(e){return t.currentUser.username_moderation_status===e}))}},directives:{hovered:c.a,innerFocus:a.a}},p=n(56),f=Object(p.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-button",t._g(t._b({directives:[{name:"inner-focus",rawName:"v-inner-focus",value:t.toggleEntered,expression:"toggleEntered"},{name:"hovered",rawName:"v-hovered",value:t.toggleEntered,expression:"toggleEntered"}],staticClass:"vf-follow-button vf-label-text",attrs:{"is-cta":"",palette:t.currentPalette,size:t.SIZES.TINY,"is-inverted":!t.isFollowing,disabled:!t.canFollow},on:{click:t.setClicked}},"vf-button",t.$attrs,!1),t.$listeners),[n("span",{staticClass:"vf-offscreen-text",attrs:{"aria-live":"polite"}},[t._v("\n        "+t._s(t.currentAriaLabel)+"\n    ")]),t._v(" "),n("span",{staticClass:"vf-follow-button__text vf-flex vf-centered",attrs:{"aria-hidden":"true"}},[t._v("\n        "+t._s(t.currentText)+"\n    ")]),t._v(" "),n("span",{staticClass:"vf-follow-button__hidden-text",attrs:{"aria-hidden":"true"}},[t._v("\n        "+t._s(t.longestText)+"\n    ")])])}),[],!1,null,"6161f1f6",null);e.a=f.exports},762:function(t,e,n){"use strict";n(3),n(7),n(17),n(26),n(15),n(16),n(57);var i=n(667),r=n(0),o=n(659),s=n(407),a=n(142),c=n(411),u=n(307),l=n(141),d=(n(125),n(113)),h=n(244),p=n(728),f=n(170),m=n(751),b=n(756),v=n(658),_=n(664);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t,e){var n=this.$store.getters[r.V](t),i=this.$store.getters[r.Bc](n);e=n===e?t:e,Object(p.a)({content_container_uuid:n,section_uuid:i,content_uuid:t,thread_uuid:e}).then((function(t){}))}var C={inject:[u.e],props:{isExpanded:{type:Boolean,default:!1},replyingTo:{required:!0},storeAction:{type:String,required:!0},locationInThread:String,palette:String,characterLimit:Number,preloadedContent:String},data(){return{isFocused:!1,hasContents:!1,replyEditorContent:this.defaultEditorContent,replyStatus:i.EDITABLE,editedContents:this.defaultEditorContent,replyErrorMessage:"",isOverCharLimit:!1}},mounted(){this.signalTyping=Object(d.e)(E,c.a),this.hasContents=Boolean(this.preloadedContent),this.editedContents=this.preloadedContent},computed:y(y({},Object(l.c)({settings:r.Jc,user:r.hb,contentContainerByContentUuid:r.V})),{},{avatarSize:()=>o.a.SMALL,hasSlotContent(){return Boolean(this.$slots.default)},localLocationInThread(){return this.hasSlotContent?(this.isFocused,s.c.LAST):this.isFocused||this.isExpanded&&this.hasContents?s.c.ONLY:s.c.LAST}}),methods:{removeFocus(){this.isFocused=!1,this.isExpanded&&this.$emit("remove-focus")},focusedIn(t){var e=t.target;this.$refs.avatar.$el!==e&&(document.removeEventListener("click",this.closeFromOutside),document.addEventListener("click",this.closeFromOutside),this.isFocused=!0,this.$emit("focusin"),Object(h.b)(e)||this.$refs.newContent.focusOnContentEditor())},handleSubmit(t){this.hasContents?this.addReply(t):this.addReplyFail()},addReply(t){var e=this;if(f.a.getInstance().$authorize("create","reply",[this.user,this.settings],{trigger:t,action:a.w})){this.replyStatus=i.SUBMITTING,this.replyEditorContent=this.editedContents;var n={content:this.editedContents};return this.$store.dispatch(this.storeAction,{content_uuid:this.replyingTo.content_uuid,container_uuid:this.contentContainerByContentUuid(this.replyingTo.content_uuid),content:n,actor_uuid:this.user.uuid,parent_actor_uuid:this.replyingTo.actor_uuid,thread_uuid:this.replyingTo.parent_actor_uuid?this.replyingTo.thread_uuid:this.replyingTo.content_uuid,THREAD_NAMESPACE:this.THREAD_NAMESPACE}).then((function(){e.clearReply()})).catch((function(t){return e.addReplyFail(t)}))}return this.addReplyFail()},addReplyFail(t){var e=this;if(this.replyStatus=i.ERROR,sessionStorage.setItem("vf_content_editor_id_".concat(this.replyingTo.content_uuid),this.editedContents),setTimeout((function(){e.replyStatus=i.EDITABLE}),3e3),t){if(403!==t.error_status)return Promise.reject(t);var n=JSON.parse(t.message);return"POSTING_BAN_ACTIVE"!==n.error_code||(this.replyErrorMessage=this.$i18n("conversations.posts.ban",{reason:n.message||0})),Promise.reject(t)}return Promise.reject()},handleCancelAction(){this.clearReply()},clearReply(){var t=this;sessionStorage.removeItem("vf_content_editor_id_".concat(this.replyingTo.content_uuid)),this.$emit("clear-reply"),this.replyStatus=i.EDITABLE,this.replyEditorContent={},this.removeFocus(),this.$nextTick().then((function(){t.replyEditorContent={},t.editedContents={},t.hasContents=!1,t.isFocused=!1}))},updateContents(t,e){this.hasContents=t,this.editedContents=e,this.signalTyping(this.replyingTo.content_uuid,this.replyingTo.thread_uuid)},closeFromOutside(t){this.$el.contains(t.target)||(this.hasContents?this.isFocused=!1:this.removeFocus())},focusOnElement(t){this.isExpanded&&this.focusedIn(t)}},components:{contentFocusContainerWithActions:m.a,heightTransition:_.a,newContent:b.a,vfAvatar:v.a}},T=n(56),S=Object(T.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-focus-container-with-actions",{staticClass:"vf-content-focus-container--reply-form vf3-reply-with-new",class:{"vf-content-focus-container--reply-form--is-expanded":t.isExpanded,"vf-content-focus-container--reply-form--is-focused":t.isFocused},attrs:{"i18n-prefix":"comments","is-rich-text-enabled":!1,"is-focused":t.isFocused,"has-content-updated":t.hasContents,"error-message":t.replyErrorMessage,"editor-status":t.replyStatus,"is-submit-enabled":!t.isOverCharLimit,"show-user-status":t.isFocused},on:{submit:t.handleSubmit,"cancel-edit":t.handleCancelAction,"actions-focused":t.focusedIn,"remove-focus":t.removeFocus,"focus-on-element":t.focusOnElement}},[n("div",{staticClass:"vf3-reply-with-new__content"},[t._t("default"),t._v(" "),n("height-transition",[t.isExpanded?n("new-content",{ref:"newContent",staticClass:"vf3-reply-with-new__form",class:{"vf3-reply-with-new__form--expanded":t.isExpanded,"vf3-reply-with-new__form--expanded--replyingTo":t.isExpanded&&t.hasSlotContent,"vf3-reply-with-new__form--unfocused--expanded--withContent":!t.isFocused&&t.isExpanded&&t.hasContents},attrs:{placeholder:t.$i18n("conversations.rich_text.reply_placeholder"),user:t.user,"is-rich-text-enabled":!1,"is-focused":t.isFocused,"avatar-size":t.avatarSize,"editor-status":t.replyStatus,"location-in-thread":t.localLocationInThread,palette:t.palette,"character-limit":t.characterLimit,"preloaded-content":t.preloadedContent},on:{"is-over-char-limit":function(e){t.isOverCharLimit=e},"content-update":t.updateContents,"request-submit":t.handleSubmit},nativeOn:{focusin:function(e){return t.focusedIn(e)}},scopedSlots:t._u([{key:"avatar",fn:function(t){var e=t.user,i=t.size;return[n("vf-avatar",{ref:"avatar",staticClass:"vf3-reply-with-new__avatar",attrs:{user:e,size:i}})]}}],null,!1,3645480504)}):t._e()],1)],2)])}),[],!1,null,"4d7a6640",null);e.a=S.exports},763:function(t,e,n){"use strict";var i={components:{contentBadge:n(702).a},props:{isTyping:Boolean},computed:{a11yLabel:()=>""}},r=n(56),o=Object(r.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"grow"}},[this.isTyping?e("content-badge",{attrs:{count:0,"a11y-label":this.a11yLabel,"is-typing":this.isTyping,"has-realtime":!1}}):this._e()],1)}),[],!1,null,"b22a6584",null);e.a=o.exports},842:function(t,e,n){"use strict";n.r(e);n(3),n(168);var i=n(0),r=n(2),o=n(406),s=n(1),a=n(185),c=n(652),u=n(653),l=n(844),d=n(738),h=n.n(d),p=n(641),f=Object(p.c)("bell_icon",h.a),m=n(640),b=n(6),v=b.d.LIVEBLOG,_=b.d.TRAY_TRIGGER,g=b.d.COMMENTS,y={components:{roundCountBadge:l.a,vfBellIcon:f,vfButton:m.a},directives:{hovered:u.a,innerFocus:c.a},props:{floating:{type:String,default:"false"},parentComponent:{type:String,default:"",validator:t=>-1!==[v,_,g].indexOf(t)}},data:()=>({dataVfId:-1,hidden:!1}),computed:{countBadgeSize(){return this.isFloating?o.a.SMALL:o.a.TINY},isFloating(){return"true"===this.floating},isLoggedIn(){return this.$store.getters[i.Sb]},currentUserUuid(){return this.$store.getters[i.jb]},count(){var t=this.$store.state.notifications.broadcasts.guest_user;return this.isLoggedIn||""===t?this.$store.getters[i.pc]:0},ariaCount(){return this.$i18n("aria.new_notifications",{num:this.count.toString()})},ariaLabel(){return this.$i18n("aria.open_tray")},classes(){return{"vf-tray-trigger":!0,"vf-offscreen-text":this.hidden,floating:this.isFloating,"vf-tray-trigger--floating":this.isFloating}},countClasses(){return{"vf-tray-count":!0,"vf-tray-count--floating":this.isFloating,"vf-tray-count--has-plus":this.count>9}}},created(){this.MAXIMUM_BEFORE_TRUNCATION=9},mounted(){var t=this;window.vf.context.init(a.a.NOTIFICATIONS),this.$publish(s.b.CHANNEL,s.b.EVENTS.BELL_LOAD,{widget_type:this.parentComponent}),this.$publish(s.I.CHANNEL,s.I.EVENTS.LOADED,this),this.$subscribe(s.I.CHANNEL,s.I.EVENTS.HIDE,(function(){t.hidden=t.isFloating})),this.$subscribe(s.I.CHANNEL,s.I.EVENTS.UNHIDE,(function(){setTimeout((function(){t.hidden=!1}),250)}));var e=window.localStorage.getItem("_vf_notification_queue_last_seen_".concat(this.currentUserUuid));this.isLoggedIn||null===e||this.$store.commit(r.fc,e)},methods:{toggle(){this.$publish(s.C.CHANNEL,s.C.EVENTS.TOGGLE,this.$el),this.$publish(s.I.CHANNEL,s.I.EVENTS.CLICKED),this.parentComponent===_?this.$publish(s.b.CHANNEL,s.b.EVENTS.TRAY_TRIGGER_CLICK,{floating:this.isFloating}):this.parentComponent===g?this.$publish(s.b.CHANNEL,s.b.EVENTS.CONVERSATION_BELL_CLICK):this.parentComponent===v&&this.$publish(s.b.CHANNEL,s.b.EVENTS.LIVEBLOG_BELL_CLICK)},trayIntent(){this.$publish(s.C.CHANNEL,s.C.EVENTS.OPEN_INTENT)}}},O=n(56),E=Object(O.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-button",{directives:[{name:"hovered",rawName:"v-hovered",value:t.trayIntent,expression:"trayIntent"},{name:"inner-focus",rawName:"v-inner-focus",value:t.trayIntent,expression:"trayIntent"}],class:t.classes,attrs:{"aria-label":t.ariaLabel,"data-vf-id":t.dataVfId},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggle(e)}}},[n("round-count-badge",{directives:[{name:"show",rawName:"v-show",value:t.count>0,expression:"count > 0"}],class:t.countClasses,attrs:{count:t.count,max:t.MAXIMUM_BEFORE_TRUNCATION,"aria-label":t.ariaCount,size:t.countBadgeSize}}),t._v(" "),n("vf-bell-icon",{staticClass:"vf-icon-medium"})],1)}),[],!1,null,"d5125bc6",null);e.default=E.exports},847:function(t,e,n){"use strict";n(17),n(26),n(3),n(15),n(16),n(57);var i=n(0),r=n(307),o=n(645),s=n(1),a=n(22),c=n(167),u=n(141),l=n(640);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={inject:[r.a],props:{user:{},isExpired:{type:Boolean,default:!1},isFocused:{type:Boolean,default:!1},hasContents:{type:Boolean,default:!1}},data:()=>({isSigningOut:!1}),computed:h(h({},Object(u.c)({settings:i.Jc})),{},{isLoggedIn(){return Object(a.H)(this.user)},areAuthActionsEnabled(){return!this.isFocused&&!this.hasContents&&!this.isExpired},authActionButtonProps(){var t=c.e?o.b.SMALL:o.b.LARGE;return{palette:this.PALETTES.ACCENT,"is-link":!0,size:t}}}),watch:{isLoggedIn(){this.isSigningOut=!1}},methods:{handleSignOutClick(){this.isSigningOut=!0,this.$publish(s.c.CHANNEL,s.c.EVENTS.LOGOUT)},handleSignInClick(){this.$publish(s.c.CHANNEL,s.c.EVENTS.NEEDED,{trigger:this.$refs.signInButton.$el,method:s.c.METHODS.LOGIN})},handleSignUpClick(){this.$publish(s.c.CHANNEL,s.c.EVENTS.NEEDED,{trigger:this.$refs.signUpButton.$el,method:s.c.METHODS.SIGNUP})}},components:{vfButton:l.a}},m=n(56),b=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.areAuthActionsEnabled?n("div",{staticClass:"vf-post-form__auth-actions vf-label vf-label-upper"},[t.isLoggedIn?n("vf-button",t._b({ref:"signOutButton",staticClass:"vf-post-form__sign-out-action",attrs:{disabled:t.isSigningOut},nativeOn:{click:function(e){return t.handleSignOutClick(e)}}},"vf-button",t.authActionButtonProps,!1),[t._v("\n        "+t._s(t.$i18n("settings.controls.logout"))+"\n    ")]):[n("vf-button",t._b({ref:"signInButton",staticClass:"vf-post-form__sign-in-action",nativeOn:{click:function(e){return t.handleSignInClick(e)}}},"vf-button",t.authActionButtonProps,!1),[t._v("\n            "+t._s(t.$i18n("feed.account.nav.login"))+"\n        ")]),t._v(" "),n("span",{staticClass:"vf-post-form__auth-action-separator"},[t._v("|")]),t._v(" "),n("vf-button",t._b({ref:"signUpButton",staticClass:"vf-post-form__sign-up-action",nativeOn:{click:function(e){return t.handleSignUpClick(e)}}},"vf-button",t.authActionButtonProps,!1),[t._v("\n            "+t._s(t.$i18n("feed.account.nav.signup"))+"\n        ")])]],2):t._e()}),[],!1,null,"6c34fabb",null);e.a=b.exports},871:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(0),r=n(22),o=n(31),s=n(736),a=function(t,e){var n=t.getters,a=Object(s.a)({getters:n},e),c=Object(o.a)((function(){return n[i.hb]})),u=Object(o.a)((function(){return Object(r.I)(c.value)})),l=Object(o.a)((function(){return a.isMuted.value})),d=Object(o.a)((function(){return!u.value&&a.isDeleted.value})),h=Object(o.a)((function(){return!u.value&&!a.isByCurrentUser.value&&(a.isDisabled.value||a.isSpam.value||a.isActorHideBanned.value||a.isActorGhostBanned.value)}));return{isDeletedStub:d,isDisabledStub:h,isMutedStub:l,isStubbed:Object(o.a)((function(){return d.value||h.value||l.value}))}}},872:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(0),r=n(81),o=n(22),s=n(31),a=n(736),c=function(t,e){var n=t.getters,c=Object(a.a)({getters:n},e),u=Object(s.a)((function(){return n[i.hb]})),l=Object(s.a)((function(){return n[i.R](e)})),d=Object(s.a)((function(){return n[i.kd](l.value.actor_uuid)})),h=Object(s.a)((function(){return n[i.jd](l.value)})),p=Object(s.a)((function(){return Object(o.I)(u.value)})),f=Object(s.a)((function(){return u.value.id===d.value.id})),m=Object(s.a)((function(){return c.isDeleted.value})),b=Object(s.a)((function(){return c.isEdited.value})),v=Object(s.a)((function(){return p.value&&h.value.ban_level!==r.a.NONE})),_=Object(s.a)((function(){return!(!p.value&&!f)&&""===d.value.name})),g=Object(s.a)((function(){return p.value&&c.isActorGhostBanned.value})),y=Object(s.a)((function(){return!p.value&&c.isPending.value})),O=Object(s.a)((function(){return!p.value&&!c.isActorGhostBanned.value&&(c.isDisabled.value||c.isSpam.value&&!c.isByCurrentUser.value)}));return{hasBannedBadge:v,hasGhostBannedBadge:g,hasDeletedBadge:m,hasDisabledBadge:O,hasDeactivatedBadge:_,hasPendingBadge:y,hasEditedBadge:b,isBadged:Object(s.a)((function(){return v.value||m.value||O.value||y.value||b.value}))}}},883:function(t,e,n){"use strict";n(44),n(58),n(17),n(26),n(3),n(15),n(16),n(57);var i=n(0),r=n(81),o=n(409),s=n(650),a=n(141),c=n(307),u=n(646),l=n(640),d={components:{squareBadge:u.a,vfButton:l.a},inject:[c.a],created(){this.CONTENT_ACTIONS=s.a}},h=n(56),p=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-disabled"},[n("square-badge",{attrs:{palette:t.PALETTES.DANGER,"aria-label":t.$i18n("conversations.moderation.disabled_aria_label")}},[t._v("\n        "+t._s(t.$i18n("conversations.moderation.disabled"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.enable"))+"\n    ")])],1)}),[],!1,null,null,null).exports,f=n(709),m={components:{squareBadge:u.a,vfFlagIcon:f.a,vfButton:l.a},inject:[c.a],props:{flagCount:{type:Number,required:!0}},created(){this.CONTENT_ACTIONS=s.a}},b=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-flagged"},[n("square-badge",{attrs:{palette:t.PALETTES.DANGER,"aria-label":t.$i18n("conversations.moderation.flagged_aria_label",{count:t.flagCount})}},[n("vf-flag-icon",{staticClass:"vf-moderation-flagged__icon vf-icon-small"}),t._v("\n        "+t._s(t.$i18n("conversations.moderation.flagged",{count:t.flagCount}))+"\n    ")],1),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.UNFLAG)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.unflag"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.DISABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.disable"))+"\n    ")])],1)}),[],!1,null,"7861a23b",null).exports,v={components:{squareBadge:u.a,vfButton:l.a},inject:[c.a],created(){this.CONTENT_ACTIONS=s.a}},_=Object(h.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-pending"},[n("square-badge",{attrs:{palette:t.PALETTES.WARNING,"aria-label":t.$i18n("conversations.moderation.pending_aria_label")}},[t._v("\n        "+t._s(t.$i18n("conversations.moderation.pending"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.enable"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.DISABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.disable"))+"\n    ")])],1)}),[],!1,null,null,null).exports,g={components:{squareBadge:u.a,vfButton:l.a},inject:[c.a],created(){this.CONTENT_ACTIONS=s.a}},y=Object(h.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-spam"},[n("square-badge",{attrs:{palette:t.PALETTES.DANGER,"aria-label":t.$i18n("conversations.moderation.spam_aria_label")}},[t._v("\n        "+t._s(t.$i18n("conversations.moderation.spam"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.unspam"))+"\n    ")])],1)}),[],!1,null,null,null).exports,O=(n(38),n(40),n(9),n(11),n(32),n(19),n(33),n(28),n(405));function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var w={functional:!0,render(t,e){var n=e.data,i=e.parent;return t(u.a,{class:[n.staticClass].concat(S(n.class||[])),props:{palette:O.a.WARNING,ariaLabel:i.$i18n("conversations.moderation.unavailable_aria_label")},attrs:C({},n.attrs||[])},[i.$i18n("conversations.moderation.unavailable")])}},j=Object(h.a)(w,void 0,void 0,!1,null,null,null).exports;function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){N(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I={props:{content:{type:Object,required:!0}},created(){this.CONTENT_ACTIONS=s.a},computed:R(R({},Object(a.c)({currentUser:i.hb})),{},{isDisabled(){return this.content.state_reasons.includes(r.d.CONTENT_DISABLED)},isPending(){return this.content.state_reasons.includes(r.d.CONTENT_AWAITING_MODERATION)},isSpam(){return this.content.state_reasons.includes(r.d.CONTENT_MARKED_AS_SPAM)},isFlagged(){return this.content.total_flags>0},isUnavailable(){return this.content.origin===o.b.NONE}}),components:{vfDisabled:p,vfFlagged:b,vfPending:_,vfSpam:y,vfUnavailable:j}},U=Object(h.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-actions"},[t.isDisabled?n("vf-disabled",{on:{enable:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)}}}):t.isPending?n("vf-pending",{on:{enable:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)},disable:function(e){return t.$emit(t.CONTENT_ACTIONS.DISABLE)}}}):t.isSpam?n("vf-spam",{on:{enable:function(e){return t.$emit(t.CONTENT_ACTIONS.UNSPAM)}}}):t.isFlagged?n("vf-flagged",{attrs:{"flag-count":t.content.total_flags},on:{unflag:function(e){return t.$emit(t.CONTENT_ACTIONS.UNFLAG)},disable:function(e){return t.$emit(t.CONTENT_ACTIONS.DISABLE)}}}):t.isUnavailable?n("vf-unavailable"):t._e()],1)}),[],!1,null,"034f1c31",null);e.a=U.exports},884:function(t,e,n){"use strict";n(38),n(26),n(3),n(17),n(15),n(16),n(57);var i=n(0),r=n(2),o=n(141),s=n(307),a=n(510),c=(n(44),n(58),n(92),n(750)),u=n(36);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={inject:[s.a,s.e],data:()=>({isFocused:!1}),props:{threadUuid:u.a.uuid.isRequired,contentContainerUuid:u.a.uuid.isRequired,isHeadReply:u.a.bool.def(!1),isReadyForContent:u.a.bool,headerHeightPx:u.a.number,createAction:u.a.string.isRequired,fetchRepliesAction:u.a.string.isRequired,fetchDirectRepliesAction:u.a.string.isRequired,fetchSelectedAction:u.a.string.isRequired,maximumContentLength:u.a.number.def(1/0),contentComponent:u.a.object.isRequired,limit:u.a.number.isRequired,isFetchingContent:u.a.bool.def(!1),isReplyToClickable:u.a.bool},computed:d(d(d({},Object(o.d)({threadByUuid(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Uc)]},threadOldContentCount(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Vc)]},threadRealtimeCount(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Xc)]},threadPaletteByUuid(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Wc)]}})),Object(o.c)({mentionNotificationsByThreadUuid:i.fd})),{},{thread(){return this.threadByUuid(this.threadUuid)},subthreads(){return this.thread.selected_content.length>0?this.thread.selected_content:this.thread.visible_content},threadPalette(){var t=this.thread.thread_top_uuid===this.contentContainerUuid?this.threadUuid:this.thread.thread_top_uuid;return this.oldMentionCount>0?this.PALETTES.MENTION:this.threadPaletteByUuid(t)},oldMentionsInThread(){var t=this;if(this.thread.selected_content.length>0){var e=this.thread.thread_top_uuid===this.contentContainerUuid?this.threadUuid:this.thread.thread_top_uuid;return this.mentionNotificationsByThreadUuid(e).filter((function(e){var n=e.content_uuid;return!t.thread.selected_content.includes(n)}))}return this.mentionNotificationsByThreadUuid(this.threadUuid).filter((function(e){var n=e.content_uuid;return!t.thread.visible_content.includes(n)&&!t.thread.realtime_content.includes(n)}))},oldMentionCount(){return this.oldMentionsInThread.length},oldReplyCount(){return this.thread.selected_content.length>0?1:this.threadOldContentCount(this.threadUuid)},realtimeCount(){return this.thread.selected_content.length>0?0:this.threadRealtimeCount(this.threadUuid)}}),methods:{focusedIn(){this.isFocused=!0},focusedOut(){this.isFocused=!1},removeFocus(){var t=Object.values(this.$refs).filter(Boolean).find((function(t){return t.isFocused}));t&&t.removeFocus(),this.isFocused=!1}},components:{vfThread:c.a}},f=n(56),m=Object(f.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-thread",{ref:"thread",attrs:{"thread-uuid":t.threadUuid,subthreads:t.subthreads,"thread-palette":t.threadPalette,"initial-shown-replies":1/0,"is-head-reply":t.isHeadReply,"old-reply-count":t.oldReplyCount,"old-mentions-in-thread":t.oldMentionsInThread,"realtime-count":t.realtimeCount,"is-ready-for-content":t.isReadyForContent,"store-action":t.createAction,"is-focused":t.isFocused,"maximum-content-length":t.maximumContentLength,"content-container-uuid":t.contentContainerUuid,limit:t.limit,"fetch-replies-action":t.isHeadReply?t.fetchDirectRepliesAction:t.fetchRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"header-height-px":t.headerHeightPx,"is-fetching-content":t.isFetchingContent},on:{focusin:t.focusedIn,focusout:t.focusedOut,"remove-focus":t.removeFocus},scopedSlots:t._u([{key:"head",fn:function(e){var i=e.locationInThread;return[n(t.contentComponent,{ref:"threadHead",tag:"component",staticClass:"vf-thread__head",attrs:{"thread-uuid":t.threadUuid,"is-reply":t.isHeadReply,"thread-palette":t.threadPalette,"location-in-thread":i},on:{focusin:t.focusedIn,"remove-focus":t.focusedOut}})]}},{key:"reply",fn:function(e){var i=e.threadUuid,r=e.locationInThread;return[n(t.contentComponent,{ref:"reply-"+i,tag:"component",staticClass:"vf-thread__reply",attrs:{"thread-uuid":i,"location-in-thread":r,"thread-palette":t.threadPalette,"is-reply":"","is-reply-to-clickable":t.isReplyToClickable},on:{focusin:t.focusedIn,"remove-focus":t.focusedOut}})]}}])})}),[],!1,null,null,null).exports,b=(n(123),n(40),n(9),n(11),n(32),n(19),n(33),n(28),n(671)),v=n.n(b),_=n(167),g=n(109),y=n(672),O=n(701),E=n(645),C=n(1004),T=n(640),S={components:{vfBackIcon:C.a,vfButton:T.a},computed:{size:()=>_.e?E.b.SMALL:E.b.LARGE}},A=Object(f.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-button",{staticClass:"vf-back-button vf-label-text",attrs:{size:t.size},nativeOn:{click:function(e){return e.preventDefault(),t.$emit("go-back")}}},[n("span",{staticClass:"vf-back-button__icon-wrapper"},[n("vf-back-icon",{staticClass:"vf-icon-small"})],1),t._v("\n    "+t._s(t.$i18n("conversations.threads.reply_thread.back"))+"\n")])}),[],!1,null,null,null).exports,w=n(700),j=n(1),P=n(6),R=n(142),N=n(126);function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var L={rootMargin:"-50px 0px 0px 0px"},x={components:{FocusTrap:y.FocusTrap,contentFocusContainer:O.a,backButton:A,closeButton:w.a},props:{isFocused:{type:Boolean,default:!1},currentUser:{type:Object,required:!0},headerText:{type:String,required:!0},labeledBy:{type:String,default:""},hasBackButton:{type:Boolean,default:!1}},data:()=>({hasStickiedHeader:!1,topElementPosition:null}),created(){this.isMobileOrTablet=_.e},mounted(){v.a.add(this.$refs.header),this.scrollToTop(),this.lockBodyScroll(),this.$publish(j.b.CHANNEL,j.b.EVENTS.INTERACTION,{action:R.h,label:"modal",widget_type:P.d.COMMENTS,content_container_type:N.b,content_container_uuid:this.contentContainerUuid})},beforeDestroy(){this.topObserver&&this.topObserver.unobserve(this.$refs.top),this.bottomObserver&&this.bottomObserver.unobserve(this.$refs.bottom),this.unlockBodyScroll(),this.removeOnScrollEvent(),document.removeEventListener("click",this.emitClose)},destroyed(){this.$emit("is-header-sticky",!1)},methods:{scrollToTop(){var t=this.getContainerPosition();t&&(this.topElementPosition=t,document.documentElement.scrollTop=t,document.body.scrollTop=t,document.addEventListener("scroll",this.onScroll))},onScroll(){var t=this,e=this.topElementPosition;e&&document.documentElement.scrollTop===e&&(this.removeOnScrollEvent(),Object(g.d)().then((function(){t.topObserver=Object(g.a)(t.$refs.top,t.handleTopObserved,L),t.bottomObserver=Object(g.a)(t.$refs.bottom,t.handleBottomObserved,L)})),this.$refs.heading.focus())},removeOnScrollEvent(){document.removeEventListener("scroll",this.onScroll)},getContainerPosition(){var t=this.$refs.top.getBoundingClientRect(),e=t.top,n=t.bottom,i=e<0,r=window.innerHeight-n<0,o=document.documentElement.scrollTop;return i?parseInt(o+e-150,10):r?parseInt(o+n-150,10):null},lockBodyScroll(){_.e&&(this.existingBodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden")},unlockBodyScroll(){_.e&&(document.body.style.overflow=this.existingBodyOverflow)},handleTopObserved(t){var e=I(t,1)[0],n=e.isIntersecting,i=e.boundingClientRect,r=e.rootBounds;!n&&i.top>r.top&&!_.e&&this.emitClose(),(n||i.top<=r.top)&&(this.hasStickiedHeader=!n),this.$emit("is-header-sticky",this.hasStickiedHeader)},handleBottomObserved(t){var e=I(t,1)[0],n=e.isIntersecting,i=e.boundingClientRect,r=e.rootBounds;!n&&i.bottom<r.bottom&&!_.e&&this.emitClose(),this.hasStickiedHeader&&this.$emit("is-header-sticky",n)},handleFocusIn(){document.removeEventListener("click",this.emitClose),document.addEventListener("click",this.emitClose)},emitClose(){this.$emit("close")}}},D=Object(f.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("focus-trap",{staticClass:"vf-content-focus-container-modal",attrs:{role:"dialog","aria-modal":"true","deactivate-on-outside-click":"","deactivate-on-esc":"","return-focus-on-deactivate":"","focus-on-activate":!1},on:{deactivated:t.emitClose}},[n("content-focus-container",{attrs:{"is-focused":t.isFocused,"current-user":t.currentUser,"show-mobile-view":""},nativeOn:{focusin:function(e){return t.handleFocusIn(e)},click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{ref:"header",staticClass:"vf-content-focus-container-modal__header",class:{"vf-content-focus-container-modal__header--stickied":t.hasStickiedHeader}},[t.hasBackButton?n("back-button",{on:{"go-back":function(e){return t.$emit("go-back")}}}):t._e(),t._v(" "),n("div",{staticClass:"vf-content-focus-container-modal__header-text-wrapper"},[n("h2",{ref:"heading",staticClass:"vf-content-focus-container-modal__header-text vf-label-text vf-no-outline",attrs:{tabindex:"-1"}},[t._v("\n                        "+t._s(t.headerText)+"\n                    ")])]),t._v(" "),n("div",[n("close-button",{staticClass:"vf-content-focus-container-modal__close-button",attrs:{"aria-label":t.$i18n("conversations.threads.reply_thread.aria_close_label")},on:{close:function(e){return e.stopPropagation(),t.$emit("close")}}})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t._t("footer")]},proxy:!0}],null,!0)},[n("div",{ref:"top"}),t._v(" "),t._v(" "),t._t("default"),t._v(" "),t._v(" "),n("div",{ref:"bottom"})],2)],1)}),[],!1,null,"856c4244",null).exports;function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){B(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function B(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var M={props:{activeReplyThread:u.a.object.isRequired,limit:u.a.number.isRequired,headerHeightPx:u.a.number,createAction:u.a.string.isRequired,fetchAction:u.a.string.isRequired,fetchRepliesAction:u.a.string.isRequired,fetchDirectRepliesAction:u.a.string.isRequired,fetchSelectedAction:u.a.string.isRequired,maximumContentLength:u.a.number.def(1/0),contentComponent:u.a.object.isRequired},data:()=>({isReadyForContent:!1,isFetchingContent:!1}),inject:[s.e],created(){this.checkForContent()},beforeDestroy(){this.thread.selected_content.length&&this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(r.L),this.activeReplyThread.thread_uuid)},computed:k(k(k({},Object(o.d)({threadByUuid(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Uc)]}})),Object(o.c)({contentByUuid:i.R,userByUuid:i.kd,currentUser:i.hb})),{},{threadContent(){return this.contentByUuid(this.activeReplyThread.thread_uuid)},thread(){return this.threadByUuid(this.activeReplyThread.thread_uuid)},isHeadReply(){return this.activeReplyThread.content_container_uuid!==this.activeReplyThread.parent_thread_uuid},repliesGetter(){return this.isHeadReply?i.P:"".concat(this.THREAD_NAMESPACE,"/").concat(i.sd)},threadOwner(){return this.userByUuid(this.threadContent.actor_uuid)},isReplyToClickable(){return this.activeReplyThread.mode!==a.REPLY_THREAD_MODES.REPLY_PARENT}}),methods:{closeReplyThread(){this.$store.commit(r.C,this.activeReplyThread.content_container_uuid)},goBack(){this.$store.commit(r.ub,this.activeReplyThread.content_container_uuid)},fetchContent(){var t=this,e=this.threadContent,n=e.thread_uuid===e.content_container_uuid?this.fetchRepliesAction:this.fetchDirectRepliesAction;this.isFetchingContent=!0,this.$store.dispatch(n,{content_uuid:this.thread.thread_uuid,limit:this.limit,starting_from:this.thread.page_from,THREAD_NAMESPACE:this.THREAD_NAMESPACE}).then((function(){t.isFetchingContent=!1}))},initializeThread(){var t={thread_uuid:this.activeReplyThread.thread_uuid,thread_top_uuid:this.threadContent.thread_uuid,total_content:this.threadContent.total_replies};this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(r.R),t),this.isReadyForContent=!0,this.fetchContent()},fetchSelectedContent(){var t=this,e=this.thread.selected_content.filter((function(e){return!t.contentByUuid(e)})).join();e.length>0?this.$store.dispatch(this.fetchAction,{content_container_uuid:this.activeReplyThread.content_container_uuid,content_uuids:e}).then((function(){t.isReadyForContent=!0})):this.isReadyForContent=!0},checkForContent(){this.thread?this.thread.selected_content.length>0?this.fetchSelectedContent():this.thread.visible_content.length<this.thread.total_content?(this.isReadyForContent=!0,this.fetchContent()):this.isReadyForContent=!0:this.initializeThread()}},watch:{activeReplyThread(){this.isReadyForContent=!1,this.checkForContent(),this.$refs.modal.scrollToTop()}},components:{replyLevelThread:m,replyThreadModal:D}},F=Object(f.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("reply-thread-modal",{ref:"modal",attrs:{"has-back-button":"","is-focused":"","current-user":t.currentUser,"header-text":t.$i18n("conversations.threads.title"),"aria-label":t.isFetchingContent?t.$i18n("conversations.threads.title_loading"):t.$i18n("conversations.threads.title")},on:{"go-back":t.goBack,close:t.closeReplyThread,"is-header-sticky":function(e){return t.$emit("is-reply-thread-header-sticky",e)}}},[n("reply-level-thread",{ref:"replyLevelThread",attrs:{limit:t.limit,"content-container-uuid":t.activeReplyThread.content_container_uuid,"create-action":t.createAction,"fetch-replies-action":t.fetchRepliesAction,"fetch-direct-replies-action":t.fetchDirectRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"maximum-content-length":t.maximumContentLength,"thread-uuid":t.activeReplyThread.thread_uuid,"is-head-reply":t.isHeadReply,"is-ready-for-content":t.isReadyForContent,"header-height-px":t.headerHeightPx,"content-component":t.contentComponent,"is-fetching-content":t.isFetchingContent,"is-reply-to-clickable":t.isReplyToClickable}})],1)}),[],!1,null,null,null);e.a=F.exports},886:function(t,e,n){"use strict";n(17),n(26),n(3),n(15),n(16),n(57);var i=n(0),r=n(409),o=n(75),s=n(1),a=n(408),c=n(167),u=n(141),l=n(882),d=n(307),h=n(651),p=n(36),f={props:{replyName:p.a.string,isEntered:p.a.bool.def(!1),isClickable:p.a.bool},components:{vfButton:h.a},inject:[d.b,d.a],computed:{palette(){return this.hasEnteredState?this.PALETTES.ACCENT:this.PALETTES.NONE},hasEnteredState(){return this.isEntered||c.e}}},m=n(56),b=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isClickable?n("vf-button",{staticClass:"vf-reply-to vf-reply-to--clickable vf-label-text vf-label-text--default-case",class:{"vf-reply-to--entered":t.hasEnteredState},attrs:{size:t.SIZES.INLINE,palette:t.palette,"aria-label":t.$i18n("conversations.reply_to.reply_to_button_aria_label",{user:t.replyName}),"is-link":""},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("reply-to-clicked")}}},[t._v("\n    "+t._s(t.$i18n("conversations.reply_to.reply_to"))+"\n    "),n("span",{staticClass:"vf-reply-to__reply-name"},[t._v(" "+t._s(t.replyName))]),t._v(" "),t.isEntered?n("span",[t._v(" - "+t._s(t.$i18n("conversations.reply_to.view_message")))]):t._e()]):n("span",{staticClass:"vf-reply-to vf-label-text vf-label-text--default-case",attrs:{"aria-label":t.$i18n("conversations.reply_to.reply_to_aria_label",{user:t.replyName})}},[t._v("\n    "+t._s(t.$i18n("conversations.reply_to.reply_to"))+"\n    "),n("span",{staticClass:"vf-reply-to__reply-name"},[t._v(" "+t._s(t.replyName))])])}),[],!1,null,"78246394",null).exports,v=n(22);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O={props:{contentUuid:p.a.uuid.isRequired,userUuid:p.a.string.def(o.b),isPinned:p.a.bool.def(!1),isFromUser:p.a.bool.def(!1),isModBadgeEnabled:p.a.bool,customBadges:p.a.array,hasAuthorBadge:p.a.bool.def(!1),isReply:p.a.bool.def(!1),replyName:p.a.string,isReplyToEditedPost:p.a.bool.def(!1),isEntered:p.a.bool.def(!1),isReplyToClickable:p.a.bool},computed:g(g({},Object(u.c)({userByOrigin:i.jd,getRelativeTime:i.xc,contentByUuid:i.R,currentUser:i.hb})),{},{user(){return this.userByOrigin({actor_uuid:this.userUuid,origin:this.content.origin})},isModOrAdmin(){return this.isModBadgeEnabled&&Object(v.I)(this.user)},isLoggedUserTheContentActor(){return this.content.actor_uuid===this.currentUser.uuid},isLoggedUserModOrAdmin(){return Object(v.I)(this.currentUser)},isTrustedUser(){return this.$can("trust","user",this.user)},content(){return this.contentByUuid(this.contentUuid)},name(){switch(this.content?this.content.origin:"none"){case r.b.TWITTER:return this.$i18n("social.twitter");default:return this.user.username_pending&&(this.isLoggedUserTheContentActor||this.isLoggedUserModOrAdmin)?this.user.username_pending:this.user.name}},timestamp(){return this.content?this.content.time:null},timeString(){return this.content?this.getRelativeTime(this.content.time):""},isEditorPicked(){return Boolean(this.content&&this.content.is_picked)},classes:()=>({"vf-post-details--mobile":c.e}),postNameButtonClasses(){return{[a.b]:this.isFromUser}}}),methods:{displayProfile(t,e){var n=this,i=t.currentTarget,r=e||this.user;setTimeout((function(){n.$publish(s.t.CHANNEL,s.t.EVENTS.SHOW,i,r)}))}},components:{postDetails:l.a,replyTo:b}},E=Object(m.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("post-details",{staticClass:"vf-post-details",class:t.classes,attrs:{name:t.name,"time-string":t.timeString,timestamp:t.timestamp,"are-names-clickable":t.isFromUser,"is-by-page-author":t.hasAuthorBadge,"is-by-mod-or-admin":t.isModOrAdmin,"is-by-trusted-user":t.isTrustedUser,"is-editors-pick":t.isEditorPicked,"custom-badges":t.customBadges,"is-pinned":t.isPinned,"is-reply-to-edited-post":t.isReplyToEditedPost,"post-name-button-classes":t.postNameButtonClasses},on:{"username-clicked":t.displayProfile}}),t._v(" "),t.isReply?n("reply-to",{attrs:{"reply-name":t.replyName,"is-entered":t.isEntered,"is-clickable":t.isReplyToClickable},on:{"reply-to-clicked":function(e){return t.$emit("reply-to-clicked")}}}):t._e()],1)}),[],!1,null,"0d913046",null);e.a=E.exports},887:function(t,e,n){"use strict";n(38),n(26),n(3),n(44),n(58),n(17),n(15),n(16),n(57);var i=n(141),r=n(0),o=n(307),s=n(750),a=n(4),c=n(6),u=n(116),l=n(93),d=n(83),h=n(1),p=n(36),f=n(54),m=n(109),b=n(680),v=n(752);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}v.c.push("");var O={props:{widgetTag:p.a.string.isRequired,enablePromos:p.a.bool.def(!1),enableReplyPromos:p.a.bool.def(!1),threadUuid:p.a.uuid.isRequired,nextCommentUuid:p.a.string,subThreadUuid:p.a.uuid.isRequired,hasSiblingReply:p.a.bool.def(!1),index:p.a.number.isRequired,contentContainerType:p.a.string.isRequired,threadType:p.a.string.def("sub_thread"),totalCount:p.a.number.def(0),threadCount:p.a.number.def(0),fadeOutShowing:p.a.bool.def(!1),threadPalette:g(g({},p.a.string.def("")),{},{validator:function(t){return v.c.includes(t)}})},inject:[o.e],data:function(){return{adStatus:l.PENDING,isThresholdReached:!1,adProvider:null,pixel_threshold:f.r}},mounted(){this.loadSetting(),this.isPromoPlacement&&this.initializeLoadTracker()},computed:g(g(g({},Object(i.d)({isThreadPromoPlacement(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.ac)]}})),Object(i.c)({contentContainerUuidByContentUuid:r.V,widgetSettingsByUuid:r.zd})),{},{contentContainerUuid(){return this.contentContainerUuidByContentUuid(this.threadUuid)},getWidgetSettings(){return this.widgetSettingsByUuid(this.contentContainerUuid)},checkIfParentOrNextCommentHasAd(){var t=this.isThreadPromoPlacement(this.contentContainerUuid,this.threadUuid),e=this.isThreadPromoPlacement(this.contentContainerUuid,this.nextCommentUuid);return t||e},getReplyAdInterval(){var t=this.getWidgetSettings.reply_interval;return this.checkIfParentOrNextCommentHasAd?2*t:t},isCorrectPromoInterval(){var t=this.getReplyAdInterval,e=this.threadCount>=3&&1,n=this.index>e&&(this.index-e)%t==0;return this.index===e||n},isPromoPlacement(){return this.enablePromos&&this.enableReplyPromos&&this.isCorrectPromoInterval&&this.hasSiblingReply},isReadyToLoad(){return this.isPromoPlacement&&this.isThresholdReached&&!this.fadeOutShowing},adSettings(){return{ad_integration:u.b[c.d.COMMENTS].ad_integration,pixel_threshold:u.b[c.d.COMMENTS].pixel_threshold,site_ad_id:u.b[c.d.COMMENTS].site_ad_id,widget_tag:this.widgetTag}},eventPayload(){return{content_container_uuid:this.contentContainerUuid,content_container_type:this.contentContainerType,widget:this.widgetTag,ad_setting:this.adSettings.ad_integration,adData:{index:this.index,thread_type:this.threadType}}},showAd(){return this.adStatus===l.SUCCESS},showLabelAd(){if(!this.adProvider)return null;var t=this.adProvider;return![d.a.TABOOLA,d.a.OUTBRAIN].includes(t)},adImplementationClass(){return this.adProvider?"vf-promo-".concat(this.adProvider):null},adContainerClass(){return this.showLabelAd?"vf-promo-has-label":null},threadPaletteClass(){return v.a[this.threadPalette]}}),methods:g(g({},Object(i.b)({trackAdEvent:a.gd})),{},{loadSetting(){var t=this.$store.getters[r.Jc];this.adProvider=t[this.adSettings.ad_integration],this.pixel_threshold=t[this.adSettings.pixel_threshold]},initializeLoadTracker(){var t=this;Object(m.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"".concat(this.pixel_threshold,"px")}).then((function(){t.isThresholdReached=!0;var e=g(g({},t.eventPayload),{},{event_type:h.b.EVENTS.AD_LOAD,adElement:t.$el});e.adData=e.adData||{},e.adData.total_count=t.totalCount,t.trackAdEvent(e)}))},onSuccess(){this.adStatus=l.SUCCESS},onError(){this.adStatus=l.ERROR}}),watch:{isPromoPlacement(){var t=this;this.isPromoPlacement&&this.$nextTick().then((function(){t.initializeLoadTracker()}))}},components:{adContainer:b.a}},E=n(56),C=Object(E.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isPromoPlacement?n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAd,expression:"showAd"}],staticClass:"vf-promo",class:[t.adImplementationClass,t.adContainerClass,t.threadPaletteClass]},[t.showLabelAd?n("div",{staticClass:"vf-label vf-label-upper vf-promo__label"},[t._v("\n            "+t._s(t.$i18n("ads.advertisement"))+"\n        ")]):t._e(),t._v(" "),t.isReadyToLoad?n("ad-container",{attrs:{"unique-id":t.subThreadUuid,"ad-settings":t.adSettings,"load-video-ad":!1},on:{success:t.onSuccess,error:t.onError}}):t._e()],1)]):t._e()}),[],!1,null,"20e06976",null).exports;function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){A(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w={props:{contentContainerUuid:p.a.uuid.isRequired,threadUuid:p.a.uuid.isRequired,headerHeightPx:p.a.number,storeAction:p.a.string.isRequired,maximumContentLength:p.a.number.def(1/0),contentComponent:p.a.object.isRequired,isExpanded:p.a.bool,limit:p.a.number.isRequired,fetchRepliesAction:p.a.string.isRequired,fetchSelectedAction:p.a.string.isRequired,hasBorder:p.a.bool,widgetTag:p.a.string.isRequired,enablePromos:p.a.bool.def(!1),enableReplyPromos:p.a.bool.def(!1),contentContainerType:p.a.string.isRequired,totalCount:p.a.number.def(0),fadeOutShowing:p.a.bool.def(!1),nextCommentUuid:p.a.string,nextFocusedComment:p.a.uuid},data(){return{shouldBeExpanded:this.isExpanded}},created(){this.adContainerReplies=C},inject:[o.e],computed:S(S(S({},Object(i.d)({threadByUuid(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Uc)]},threadOldContentCount(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Vc)]},threadRealtimeCount(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Xc)]},hasUnreadRepliesInThreadByCurrentUser(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Ib)]}})),Object(i.c)({contentByThreadUuid:r.Q,mentionNotificationsByThreadUuid:r.fd})),{},{thread(){return this.threadByUuid(this.threadUuid)},subthreads(){return this.thread.visible_content},threadPalette(){return this.thread.thread_palette},oldReplyCount(){return this.threadOldContentCount(this.threadUuid)},oldMentionsInThread(){var t=this;return this.mentionNotificationsByThreadUuid(this.threadUuid).filter((function(e){var n=e.content_uuid;return!t.thread.visible_content.includes(n)&&!t.thread.realtime_content.includes(n)}))},oldMentionCount(){return this.oldMentionsInThread.length},realtimeCount(){return this.threadRealtimeCount(this.threadUuid)},hasUnreadRepliesByCurrentUser(){return this.hasUnreadRepliesInThreadByCurrentUser(this.threadUuid)}}),methods:{setCommentVisibility(t,e){this.$emit("set-comment-visibility",this.threadUuid,t,e)}},watch:{hasUnreadRepliesByCurrentUser(t){t&&!this.isExpanded&&(this.shouldBeExpanded=!0)},nextFocusedComment(){this.nextFocusedComment===this.thread.thread_uuid&&this.$refs[this.nextFocusedComment].$refs.comment.$refs.avatar.$el.focus()}},components:{vfThread:s.a}},j=Object(E.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-thread",{attrs:{"thread-uuid":t.threadUuid,"old-reply-count":t.oldReplyCount,"realtime-count":t.realtimeCount,subthreads:t.subthreads,"thread-palette":t.threadPalette,"store-action":t.storeAction,"maximum-content-length":t.maximumContentLength,"is-expanded":t.isExpanded||t.shouldBeExpanded,"content-container-uuid":t.contentContainerUuid,limit:t.limit,"fetch-replies-action":t.fetchRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"header-height-px":t.headerHeightPx,"old-mentions-in-thread":t.oldMentionsInThread,"has-border":t.hasBorder,"widget-tag":t.widgetTag,"content-container-type":t.contentContainerType},scopedSlots:t._u([{key:"head",fn:function(e){return[n(t.contentComponent,{ref:t.thread.thread_uuid,tag:"component",staticClass:"vf-thread__head",attrs:{"thread-uuid":t.threadUuid,"thread-palette":t.threadPalette,"location-in-thread":e.locationInThread},on:{"set-comment-visibility":t.setCommentVisibility}})]}},{key:"reply",fn:function(e){return[n(t.contentComponent,{tag:"component",staticClass:"vf-thread__reply",attrs:{"is-reply":"","thread-uuid":e.threadUuid,"thread-palette":t.threadPalette,"location-in-thread":e.locationInThread},on:{"set-comment-visibility":t.setCommentVisibility}})]}},{key:"reply-ad",fn:function(e){return[n(t.adContainerReplies,{tag:"component",attrs:{"is-reply":"","enable-promos":t.enablePromos,"enable-reply-promos":t.enableReplyPromos,"fade-out-showing":t.fadeOutShowing,"widget-tag":t.widgetTag,"thread-uuid":t.threadUuid,"next-comment-uuid":t.nextCommentUuid,"has-sibling-reply":e.hasSiblingReply,"sub-thread-uuid":e.threadUuid,index:e.index,"content-container-type":t.contentContainerType,"total-count":t.totalCount,"thread-count":e.threadCount,"thread-palette":t.threadPalette}})]}}])})}),[],!1,null,null,null);e.a=j.exports},890:function(t,e,n){"use strict";n(26),n(3),n(17),n(15),n(16),n(57);var i=n(667),r=n(0),o=n(307),s=n(411),a=n(142),c=n(244),u=n(141),l=(n(125),n(113)),d=n(728),h=n(88),p=n(170),f=n(658),m=n(664),b=n(701),v=n(756),_=n(746),g=n(847);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(){Object(d.a)({content_container_uuid:this.contentContainerUuid,section_uuid:this.$store.getters[r.Bc](this.contentContainerUuid),content_uuid:this.contentContainerUuid,thread_uuid:this.contentContainerUuid}).then((function(t){}))}var T={inject:[o.a,o.e],props:{user:{},contentContainerUuid:{type:String,required:!0},placeholder:{type:String,required:!0},storeAction:{type:String,required:!0},isRichTextEnabled:{type:Boolean,default:!0},characterLimit:Number,isExpired:{type:Boolean,default:!1},expiryNotice:{type:String},showAuthActions:{type:Boolean,default:!1}},data:()=>({isFocused:!1,hasContents:!1,isOverCharLimit:!1,editedContents:{},contentStatus:i.EDITABLE,preloadedContent:null}),created(){this.getSessionStorageContent()},mounted(){this.signalTyping=Object(l.e)(C,s.a)},computed:O(O({},Object(u.c)({settings:r.Jc,currentUser:r.hb})),{},{computedPlaceholder(){return this.isExpired?this.expiryNotice:this.placeholder}}),methods:{getSessionStorageContent(){var t=sessionStorage.getItem("vf_content_editor_id_".concat(this.contentContainerUuid));t&&(this.preloadedContent=t,this.editedContents=t,this.hasContents=!0,this.isFocused=!0)},removeFocus(){this.isFocused=!1,document.removeEventListener("click",this.closeFromOutside)},focusedIn(t){var e=this,n=t.target;this.$refs.authActions&&this.$refs.authActions.$el===n.parentElement||this.$refs.avatar.$el===n||this.isExpired||(this.isFocused=!0,setTimeout((function(){document.removeEventListener("click",e.closeFromOutside),document.addEventListener("click",e.closeFromOutside)})),Object(c.b)(n)||this.$refs.newContent.focusOnContentEditor())},handleSubmit(t){this.hasContents&&!this.hasPendingUploads(this.editedContents)?this.createPost(t):this.handleError()},updateContents(t,e){this.hasContents=t,this.editedContents=e,this.signalTyping()},createPost(t){var e=this;if(p.a.getInstance().$authorize("create","live-content",[this.user,this.settings],{trigger:t,action:a.g})){this.contentStatus=i.SUBMITTING;var n=this.isRichTextEnabled?this.editedContents:{content:this.editedContents};this.$store.dispatch(this.storeAction,{container_uuid:this.contentContainerUuid,content:n,THREAD_NAMESPACE:this.THREAD_NAMESPACE}).then((function(){e.clearPost(),e.$emit("on-content-created")})).catch((function(){e.handleError()}))}else this.handleError()},handleError(){var t=this;this.contentStatus=i.ERROR,sessionStorage.setItem("vf_content_editor_id_".concat(this.contentContainerUuid),this.editedContents),setTimeout((function(){t.contentStatus=i.EDITABLE}),3e3)},clearPost(){sessionStorage.removeItem("vf_content_editor_id_".concat(this.contentContainerUuid)),this.preloadedContent=null,this.contentStatus=i.EDITABLE,this.$refs.newContent.clearContent(),this.editedContents={},this.hasContents=!1,this.removeFocus()},hasPendingUploads(t){var e=t.content;return!(!e||!this.isRichTextEnabled)&&JSON.parse(e).ops.filter((function(t){return Object(h.b)(["insert","image-upload"],t)})).filter((function(t){return!Object(h.b)(["insert","image-upload","mediaUuid"],t)})).length>0},closeFromOutside(t){this.$el.contains(t.target)||this.removeFocus()}},components:{contentFocusContainer:b.a,heightTransition:m.a,newContent:v.a,contentFocusContainerFooter:_.a,vfAvatar:f.a,authenticationActions:g.a}},S=n(56),A=Object(S.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("height-transition",[n("content-focus-container",{staticClass:"vf-post-form vf-post-form__container vf-post-form__content-container",class:{"vf-post-form__container--focused":t.isFocused},attrs:{"is-focused":t.isFocused,"is-default-container":!1,"current-user":t.currentUser},on:{"remove-focus":t.removeFocus,"focus-on-element":t.focusedIn},nativeOn:{focusin:function(e){return t.focusedIn(e)}}},[n("new-content",{ref:"newContent",staticClass:"vf-post-form__new-content",class:{"vf-post-form__new-content__disabled":t.isExpired},attrs:{"location-in-thread":"only",user:t.user,"editor-status":t.contentStatus,"is-rich-text-enabled":t.isRichTextEnabled,"is-focused":t.isFocused,"content-container-uuid":t.contentContainerUuid,placeholder:t.computedPlaceholder,"character-limit":t.characterLimit,"is-disabled":t.isExpired,"preloaded-content":t.preloadedContent},on:{"content-update":t.updateContents,"is-over-char-limit":function(e){t.isOverCharLimit=e},"request-submit":t.handleSubmit},scopedSlots:t._u([{key:"avatar",fn:function(t){var e=t.user,i=t.size;return[n("vf-avatar",{ref:"avatar",staticClass:"vf-post-form__avatar",attrs:{user:e,size:i}})]}},{key:"footer",fn:function(){return[n("content-focus-container-footer",{attrs:{"show-user-status":"","is-focused":t.isFocused,"has-content-updated":t.hasContents,"has-editable-contents":t.hasContents,"is-submit-enabled":!t.hasPendingUploads(t.editedContents)&&!t.isOverCharLimit&&!t.isExpired,"editor-status":t.contentStatus},on:{submit:t.handleSubmit,"cancel-edit":t.clearPost}})]},proxy:!0}])},[t._v(" "),t.showAuthActions?[n("authentication-actions",{ref:"authActions",attrs:{user:t.user,"is-focused":t.isFocused,"has-contents":t.hasContents}})]:t._e()],2)],1)],1)}),[],!1,null,"ea6bd46e",null);e.a=A.exports},891:function(t,e,n){"use strict";var i=n(645),r=n(267),o={components:{loaderButton:n(657).a},props:{errorAriaLabel:{type:String,required:!0},isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1}},computed:{status(){return this.hasError?r.a.ERROR:this.isLoading?r.a.PENDING:r.a.NONE},palette(){return this.status===r.a.ERROR?i.a.DANGER:i.a.ACCENT}},created(){this.STATUSES=r.a}},s=n(56),a=Object(s.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-load-more vf-label-text"},[n("loader-button",{staticClass:"vf-load-more__button",attrs:{palette:t.palette,status:t.status,"is-inverted":t.status===t.STATUSES.NONE,size:"small","is-cta":"","is-full-width":""},nativeOn:{click:function(e){return t.$emit("load-more")},mousedown:function(t){t.stopPropagation(),t.preventDefault()}}},[t._t("default"),t._v(" "),t.hasError?n("span",{staticClass:"vf-offscreen-text",attrs:{"aria-live":"polite"}},[t._v("\n            "+t._s(t.errorAriaLabel)+"\n        ")]):t._e()],2)],1)}),[],!1,null,"53c23728",null);e.a=a.exports},892:function(t,e,n){"use strict";var i=n(406),r=n(646),o=n(691),s=n(36),a={props:{count:s.a.number,text:s.a.string.isRequired,ariaLabel:s.a.string.isRequired,hasNewContent:s.a.bool.def(!1),isInsideTrigger:s.a.bool.def(!1),isInsideDropdown:s.a.bool.def(!1)},inject:{size:{default:i.a.SMALL},components:{default:{squareBadge:r.a,unseenNotifier:o.a}}}},c=n(56),u=Object(c.a)(a,(function(t,e){var n=e._c;return n("span",{class:{"vf-nav-label vf-nav-tab-button":!e.props.isInsideTrigger&&!e.props.isInsideDropdown,"vf-nav-tab-button--inside-trigger":e.props.isInsideTrigger,"vf-nav-tab-button--inside-dropdown":e.props.isInsideDropdown},attrs:{"aria-label":e.ariaLabel}},[n("span",{class:{"vf-label-text vf-nav-tab-button__text":!e.props.isInsideDropdown&&!e.props.isInsideTrigger}},[e._v("\n        "+e._s(e.props.text)+"\n    ")]),e._v(" "),e.props.count?n(e.injections.components.squareBadge,{tag:"component",staticClass:"vf-nav-tab-button__badge",attrs:{"aria-hidden":"true",size:e.injections.size,disabled:!0}},[e._v("\n        "+e._s(e.props.count)+"\n    ")]):e._e(),e._v(" "),e.props.hasNewContent?n(e.injections.components.unseenNotifier,{tag:"component",staticClass:"vf-nav-tab-button__unseen-notifier",attrs:{"aria-hidden":"true"}}):e._e()],1)}),[],!0,null,"58b5b311",null);e.a=u.exports},895:function(t,e,n){"use strict";var i=n(109),r=n(723),o=n(763),s={root:null,threshold:1},a={components:{contentLayout:r.a,typingIndicator:o.a},props:{isTyping:Boolean},data(){return{hasTyped:this.isTyping,isInViewPort:!1}},computed:{isVisible(){return this.isInViewPort&&this.isTyping}},watch:{isVisible(){this.hasTyped=!0}},mounted(){var t=this;Object(i.d)().then((function(){Object(i.a)(t.$el,(function(e,n){return t.onIntersection(e,n)}),s)}))},methods:{onIntersection(t,e){var n=t[0];this.isInViewPort=this.hasTyped||n.isIntersecting,this.hasTyped&&e.unobserve(n.target)}}},c=n(56),u=Object(c.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top-typing-indicator",class:{"top-typing-indicator--entered":t.hasTyped,"top-typing-indicator--visible":t.isVisible}},[n("content-layout",{staticClass:"top-typing-indicator__internal",scopedSlots:t._u([{key:"left",fn:function(){return[n("typing-indicator",{staticClass:"top-typing-indicator__indicator",attrs:{"is-typing":t.isVisible}})]},proxy:!0},{key:"right",fn:function(){return[n("transition",{attrs:{name:"fade"}},[t.isVisible?n("div",{staticClass:"top-typing-indicator__text",attrs:{"aria-live":"polite"}},[t._v("\n                    "+t._s(t.$i18n("conversations.typing.top_level"))+"\n                ")]):t._e()])]},proxy:!0}])})],1)}),[],!1,null,"5724d166",null);e.a=u.exports},897:function(t,e,n){"use strict";n(38);var i={props:{enterActiveClass:{type:String,default:""},leaveActiveClass:{type:String,default:""},hasNoSeparator:{type:Boolean,default:!1},hasHeightTransition:{type:Boolean,default:!1}},data:()=>({hasSlotData:!1}),computed:{commonProps(){return{tag:"ol",class:{"vf3-conversations-list":!0,"vf3-conversations-list--empty":!this.hasSlotData,"vf3-conversations-list--no-separator":this.hasNoSeparator}}}},updated(){this.hasSlotData=this.$slots.default&&this.$slots.default.length>0},methods:{onEnter(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.$emit.apply(this,["enter"].concat(e))},onLeave(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.$emit.apply(this,["leave"].concat(e))}}},r=n(56),o=Object(r.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasHeightTransition?n("transition-group",t._b({attrs:{name:"fade-scale"}},"transition-group",t.commonProps,!1),[t._t("default")],2):n("transition-group",t._b({attrs:{"enter-active-class":t.enterActiveClass,"leave-active-class":t.leaveActiveClass},on:{enter:t.onEnter,leave:t.onLeave}},"transition-group",t.commonProps,!1),[t._t("default")],2)}),[],!1,null,null,null);e.a=o.exports},898:function(t,e,n){"use strict";n(38),n(44),n(58),n(17),n(26),n(3),n(15),n(16),n(57);var i=n(141),r=n(4),o=n(0),s=n(307),a=n(6),c=n(116),u=n(126),l=n(93),d=n(83),h=n(1),p=n(54),f=n(36),m=n(109),b=n(680),v=n(239);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O=Object(v.b)("ad-container-comments-"),E={props:{widgetTag:f.a.string.isRequired,enabled:f.a.bool.def(!1),threadUuid:f.a.uuid.isRequired,index:f.a.number.isRequired,contentContainerType:f.a.string.isRequired,threadType:f.a.string.def("main_thread"),totalCount:f.a.number.def(0),isLastComment:f.a.bool.def(!1)},inject:[s.e],data:function(){return{adStatus:l.PENDING,isThresholdReached:!1,adProvider:null,pixel_threshold:p.r}},beforeCreate(){this.uniqueId=O()},mounted(){this.loadSetting(),this.isPromoPlacement&&this.initializeLoadTracker()},computed:g(g(g({},Object(i.d)({isThreadPromoPlacement(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.ac)]}})),Object(i.c)({contentContainerUuidByContentUuid:o.V})),{},{contentContainerUuid(){return this.contentContainerUuidByContentUuid(this.threadUuid)},isPromoPlacement(){return this.enabled&&this.isThreadPromoPlacement(this.contentContainerUuid,this.threadUuid)},isReadyToLoad(){return this.isPromoPlacement&&this.isThresholdReached},adSettings(){return this.contentContainerType===u.e?{ad_integration:c.b[a.d.LIVEBLOG].ad_integration,pixel_threshold:c.b[a.d.LIVEBLOG].pixel_threshold,site_ad_id:c.b[a.d.LIVEBLOG].site_ad_id,widget_tag:this.widgetTag}:{ad_integration:c.b[a.d.COMMENTS].ad_integration,pixel_threshold:c.b[a.d.COMMENTS].pixel_threshold,site_ad_id:c.b[a.d.COMMENTS].site_ad_id,widget_tag:this.widgetTag}},eventPayload(){return{content_container_uuid:this.contentContainerUuid,content_container_type:this.contentContainerType,widget:this.widgetTag,ad_setting:this.adSettings.ad_integration,adData:{index:this.index,thread_type:this.threadType}}},showAd(){return this.adStatus===l.SUCCESS},showLabelAd(){if(!this.adProvider)return null;var t=this.adProvider;return![d.a.TABOOLA,d.a.OUTBRAIN].includes(t)},adImplementationClass(){return this.adProvider?"vf-promo-".concat(this.adProvider):null}}),methods:g(g({},Object(i.b)({trackAdEvent:r.gd})),{},{loadSetting(){var t=this.$store.getters[o.Jc];this.adProvider=t[this.adSettings.ad_integration],this.pixel_threshold=t[this.adSettings.pixel_threshold]},initializeLoadTracker(){var t=this;Object(m.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"".concat(this.pixel_threshold,"px")}).then((function(){t.isThresholdReached=!0;var e=g(g({},t.eventPayload),{},{event_type:h.b.EVENTS.AD_LOAD,adElement:t.$el});e.adData=e.adData||{},e.adData.total_count=t.totalCount,t.trackAdEvent(e)}))},onSuccess(){this.adStatus=l.SUCCESS},onError(){this.adStatus=l.ERROR}}),watch:{isPromoPlacement(){var t=this;this.isPromoPlacement&&this.$nextTick().then((function(){t.initializeLoadTracker()}))}},components:{adContainer:b.a}},C=n(56),T=Object(C.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isPromoPlacement?n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAd,expression:"showAd"}],staticClass:"vf-promo",class:[t.adImplementationClass,{"no-border-bottom":t.isLastComment&&t.isPromoPlacement}]},[t.showLabelAd?n("div",{staticClass:"vf-label vf-label-upper vf-promo__label"},[t._v("\n            "+t._s(t.$i18n("ads.advertisement"))+"\n        ")]):t._e(),t._v(" "),t.isReadyToLoad?n("ad-container",{attrs:{container:"article","unique-id":t.uniqueId,"ad-settings":t.adSettings},on:{success:t.onSuccess,error:t.onError}}):t._e()],1)]):t._e()}),[],!1,null,"4c0dfd19",null);e.a=T.exports},899:function(t,e,n){"use strict";var i=n(764),r=n(646),o=n(307),s={components:{textTip:i.a,squareBadge:r.a},inject:[o.a],props:{hasReason:{type:Boolean,default:!1}}},a=n(56),c=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("square-badge",{staticClass:"vf-disabled-badge",attrs:{palette:t.PALETTES.LIGHT_PRIMARY,"aria-label":t.$i18n("conversations.moderation.disabled_aria_label")}},[t._v("\n    "+t._s(t.$i18n("conversations.moderation.disabled_content"))+"\n    "),t.hasReason?[t._v("\n        \n        "),n("text-tip",{staticClass:"vf-disabled-badge__text-tip",attrs:{content:t.$i18n("conversations.moderation.disabled_reason"),positions:["bottom"]},scopedSlots:t._u([{key:"trigger",fn:function(){return[t._v("\n                "+t._s(t.$i18n("conversations.moderation.disabled_reason_trigger"))+"\n            ")]},proxy:!0}],null,!1,1315484605)})]:t._e()],2)}),[],!1,null,"1963ef4c",null);e.a=c.exports},900:function(t,e,n){"use strict";var i={components:{unseenNotifier:n(691).a},props:{isNew:{type:Boolean,default:!1},palette:String}},r=n(56),o=Object(r.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"fade"}},[this.isNew?e("unseen-notifier",{staticClass:"unseen-notifier",attrs:{palette:this.palette}}):this._e()],1)}),[],!1,null,"317ea076",null);e.a=o.exports},901:function(t,e,n){"use strict";n(52),n(26),n(3),n(19),n(33),n(44),n(58),n(38),n(17),n(15),n(16),n(57);var i=n(0),r=n(141),o=n(22),s=n(167),a=n(905),c=n(914),u=n(709),l=n(912),d=n(766),h=n(724),p=n(706),f=n(996),m=n(906),b=n(81),v=n(981),_=n(650),g=n(982),y=n(705),O=n(36),E=n(43);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=[{key:_.a.EDIT,value:"conversations.actions.edit",icon:l.a,test:i.v},{key:_.a.REMOVE,value:"conversations.actions.remove_post",icon:d.a,test:i.x},{key:_.a.DISABLE,value:"conversations.actions.disable_post",icon:p.a,test:i.r},{key:_.a.ENABLE,value:"conversations.actions.enable_post",icon:h.a,test:i.u},{key:_.a.PIN,value:"conversations.actions.pin_post",icon:h.a,test:i.w},{key:_.a.UNPIN,value:"conversations.actions.unpin_post",icon:p.a,test:i.z}],w={props:{content:O.a.object.isRequired,isFlagEnabled:O.a.bool.def(!1),isSpamEnabled:O.a.bool.def(!0),isLiveComments:O.a.bool.def(!1),isEntered:O.a.bool.def(!1),isContentRemovalEnabled:O.a.bool.def(!1),isContentEditingEnabled:O.a.bool.def(!1),contentEditingDuration:O.a.number.def(0)},data:()=>({isDropdownToggled:!1}),created(){this.isMobileOrTablet=s.e,this.ellipsisIcon=c.a,this.editorPickKey=_.a.TOGGLE_EDITORS_PICK},computed:T(T({},Object(r.c)({currentUser:i.hb,siteSettings:i.Jc,getUserByUuid:i.kd,canModifyContent:i.v,currentTime:i.gb})),{},{contentActor(){return this.getUserByUuid(this.content.actor_uuid)},canCurrentUserModerate(){return Object(o.n)(this.currentUser)},isContentTopLevel(){return this.content.parent_uuid===this.content.content_container_uuid},isContentEditable(){var t=this.content,e=t.content_uuid,n=t.date_created;return this.isContentEditingEnabled&&this.canModifyContent(e)&&(this.contentEditingDuration===1/0||this.currentTime-n<this.contentEditingDuration)},actions(){var t=this;return(this.isLiveComments?[{key:this.canCurrentUserModerate?_.a.TOGGLE_FLAG:_.a.FLAG,value:this.flagText,icon:u.a,test:Boolean(s.e&&this.isFlagEnabled&&Object(o.f)(this.currentUser,this.siteSettings,this.contentActor)),disabled:Boolean(!this.canCurrentUserModerate&&this.isFlagged)},{key:_.a.EDIT,value:"conversations.actions.edit",test:Boolean(this.isContentEditable),buttonClass:"vf-secondary-actions__edit",component:v.a,componentProps:{endTime:this.content.date_created+this.contentEditingDuration,secondsRemainingToShowCountdown:this.contentEditingDuration===1/0?0:300}},{key:_.a.REMOVE,value:this.removeText,icon:d.a,test:Boolean(this.$store.getters[i.x](this.content.content_uuid)&&this.isContentRemovalEnabled),className:"vf-secondary-actions__remove"},{key:_.a.TOGGLE_SPAM,value:this.spamText,icon:f.a,test:this.canCurrentUserModerate&&this.isSpamEnabled,buttonClass:"vf-secondary-actions__spam"},{key:_.a.TOGGLE_EDITORS_PICK,test:this.canCurrentUserModerate},{key:_.a.TOGGLE_DISABLE,value:this.disableText,icon:this.disableIcon,test:this.canCurrentUserModerate&&!this.isDeleted,buttonClass:"vf-secondary-actions__disable"},{key:_.a.TOGGLE_PIN,value:this.pinText,icon:m.a,test:this.canCurrentUserModerate&&this.isContentTopLevel,buttonClass:"vf-secondary-actions__pin"},{key:_.a.CONSOLE_URL,test:this.canCurrentUserModerate,component:y.a,componentProps:{url:this.buildConsoleShareLink(),copyText:this.$i18n("conversations.actions.copy_console_url"),copiedText:this.$i18n("conversations.actions.copied")}}]:A).filter((function(e){var n=e.test;return t.test(n)})).map((function(e){return t.transformAction(e)}))},hasActions(){return this.actions.length>0},isFlagged(){return this.content.actions.includes(_.a.FLAG)},isSpam(){return this.content.state_reasons.includes(b.d.CONTENT_MARKED_AS_SPAM)},isDisabled(){return this.content.state_reasons.includes(b.d.CONTENT_DISABLED)},isDeleted(){return this.content.state_reasons.includes(b.d.CONTENT_DELETED)},flagText(){return this.canCurrentUserModerate?this.isFlagged?"conversations.actions.unflag":"conversations.posts.flag.verb":this.isFlagged?"conversations.posts.flag.past":"conversations.posts.flag.verb"},spamText(){return this.isSpam?"conversations.actions.unspam":"conversations.actions.mark_as_spam"},disableText(){return this.isDisabled?"conversations.actions.enable":"conversations.actions.disable"},removeText(){return this.isLiveComments?"conversations.actions.remove_comment":"conversations.actions.remove_post"},pinText(){return this.content.is_pinned?"conversations.actions.unpin":"conversations.actions.pin"},disableIcon(){return this.isDisabled?h.a:p.a}}),methods:{buildConsoleShareLink(){var t=E.a.console_url||"https://console.viafoura.co";return"".concat(t,'/moderation/quick_search?filters=[\n                {"field":"content_id","operator":"equals","values":["').concat(this.content.content_uuid,'"]},\n                {"field":"service","operator":"equals","values":["livecomment"]}\n            ]')},transformAction(t){return T(T({},t),{},{value:t.value?this.$i18n(t.value):"",class:"vf-".concat(t.key,"-content")})},test(t){return"boolean"!=typeof t?this.$store.getters[t](this.content.content_uuid):t},setIsDropdownToggled(t){this.isDropdownToggled=t}},components:{iconDropdown:a.a,editorPickButton:g.a}},j=n(56),P=Object(j.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasActions?n("icon-dropdown",{staticClass:"vf-secondary-actions",class:{"vf-secondary-actions--entered":t.isEntered||t.isMobileOrTablet||t.isDropdownToggled},attrs:{positions:["bottom-left"],items:t.actions,icon:t.ellipsisIcon,"aria-label":t.$i18n("conversations.actions.button_aria"),"hide-on-mouseleave":""},on:{toggled:t.setIsDropdownToggled,"list-item-clicked":function(e){return t.$emit(e.key)}},scopedSlots:t._u([{key:t.editorPickKey,fn:function(){return[n("editor-pick-button",{staticClass:"vf-secondary-actions__editors-pick",attrs:{"is-picked":t.content.is_picked},on:{click:function(e){return t.$emit(t.editorPickKey)}}})]},proxy:!0}],null,!0)}):t._e()}),[],!1,null,"668eaf5a",null);e.a=P.exports},904:function(t,e,n){"use strict";n(44),n(58),n(17),n(26),n(3),n(15),n(16),n(57);var i=n(4),r=n(0),o=n(142),s=n(650),a=n(141),c=n(170),u=n(748),l=n(36),d=n(1);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m={props:{comment:l.a.object.isRequired,isEntered:l.a.bool.def(!1),isReplyEnabled:l.a.bool.def(!0),isLikeEnabled:l.a.bool.def(!0),isDislikeEnabled:l.a.bool.def(!0),isFlagEnabled:l.a.bool.def(!0),isShareEnabled:l.a.bool.def(!0)},computed:p(p({},Object(a.c)({currentUser:r.hb,siteSettings:r.Jc,getUserByUuid:r.kd})),{},{commentActor(){return this.getUserByUuid(this.comment.actor_uuid)},isLiked(){return this.comment.actions.includes(s.a.LIKE)},isDisliked(){return this.comment.actions.includes(s.a.DISLIKE)},enabledContentActions(){return{isReplyEnabled:this.isReplyEnabled,isLikeEnabled:this.isLikeEnabled,isDislikeEnabled:this.isDislikeEnabled,isFlagEnabled:this.isFlagEnabled,isShareEnabled:this.isShareEnabled}}}),methods:{toggleLike(){var t=c.a.getInstance(),e={action:o.u},n=this.isLiked?i.od:i.Vb,r=this.comment;t.$authorize(s.a.LIKE,"comment",[this.currentUser],e)?this.$store.dispatch(n,r.content_uuid):(this.$publish(d.f.CHANNEL,"GUEST_USER.LIKE_LIVECOMMENTS_COMMENT",{content_uuid:r.content_uuid,content_container_uuid:r.content_container_uuid,section_uuid:r.section_uuid}),this.$emit("like_attempt_after",{content_uuid:r.content_uuid,content_container_uuid:r.content_container_uuid,section_uuid:r.section_uuid}))},toggleDislike(){var t=c.a.getInstance(),e={action:o.s},n=this.isDisliked?i.jd:i.G,r=this.comment;t.$authorize(s.a.DISLIKE,"comment",[this.currentUser,this.siteSettings],e)?this.$store.dispatch(n,r.content_uuid):(this.$publish(d.f.CHANNEL,"GUEST_USER.DISLIKE_LIVECOMMENTS_COMMENT",{content_uuid:r.content_uuid,content_container_uuid:r.content_container_uuid,section_uuid:r.section_uuid}),this.$emit("dislike_attempt_after",{content_uuid:r.content_uuid,content_container_uuid:r.content_container_uuid,section_uuid:r.section_uuid}))},handleFlag(){c.a.getInstance().$authorize(s.a.FLAG,"content",[this.currentUser,this.siteSettings,this.commentActor],{action:o.t})&&this.$store.dispatch(i.Fb,this.comment.content_uuid)}},components:{contentActions:u.a}},b=n(56),v=Object(b.a)(m,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("content-actions",t._b({staticClass:"vf-comment-actions",attrs:{content:t.comment,"is-entered":t.isEntered,"content-type":t.$i18n("comments.comment",{count:1})},on:{reply:function(e){return t.$emit("reply",e)},replies:function(e){return t.$emit("replies")},"toggle-like":t.toggleLike,"toggle-dislike":t.toggleDislike,flag:t.handleFlag}},"content-actions",t.enabledContentActions,!1))}),[],!1,null,null,null);e.a=v.exports},910:function(t,e,n){"use strict";var i=n(646),r=n(307),o={components:{squareBadge:i.a},inject:[r.a,r.b],props:{isGhost:{type:Boolean,required:!0}}},s=n(56),a=Object(s.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("square-badge",{staticClass:"vf-banned-badge",attrs:{palette:t.PALETTES.WARING,size:t.SIZES.SMALL}},[t._v("\n    "+t._s(t.$i18n("conversations.moderation.comment_status_banned"))+"\n    "),t.isGhost?[t._v("\n        \n    ")]:t._e()],2)}),[],!1,null,null,null);e.a=a.exports},915:function(t,e,n){"use strict";n(38),n(17),n(40),n(3),n(9),n(11),n(32),n(19),n(33),n(28),n(26),n(15),n(16),n(57);var i=n(646),r=n(405);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l={functional:!0,render(t,e){var n=e.data,o=e.parent;return t(i.a,{class:["vf-pending-badge",n.staticClass].concat(c(n.class||[])),props:{palette:r.a.WARNING,ariaLabel:o.$i18n("conversations.moderation.awaiting_moderation_aria_label")},attrs:s({},n.attrs||[])},[o.$i18n("conversations.moderation.awaiting_moderation")])}},d=n(56),h=Object(d.a)(l,void 0,void 0,!1,null,null,null);e.a=h.exports},916:function(t,e,n){"use strict";n(38),n(17),n(40),n(3),n(9),n(11),n(32),n(19),n(33),n(28),n(26),n(15),n(16),n(57);var i=n(646);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u={functional:!0,render(t,e){var n=e.data,r=e.parent;return t(i.a,{class:["vf-muted-badge",n.staticClass].concat(a(n.class||[])),props:{disabled:!0,ariaLabel:r.$i18n("conversations.posts.muted_aria_label")},attrs:o({},n.attrs||[])},[r.$i18n("conversations.posts.muted")])}},l=n(56),d=Object(l.a)(u,void 0,void 0,!1,null,null,null);e.a=d.exports},917:function(t,e,n){"use strict";n(38),n(17),n(40),n(3),n(9),n(11),n(32),n(19),n(33),n(28),n(26),n(15),n(16),n(57);var i=n(646);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u={functional:!0,render(t,e){var n=e.data,r=e.parent;return t(i.a,{class:["vf-deleted-badge",n.staticClass].concat(a(n.class||[])),props:{disabled:!0,ariaLabel:r.$i18n("conversations.posts.deleted_aria_label")},attrs:o({},n.attrs||[])},[r.$i18n("conversations.posts.deleted")])}},l=n(56),d=Object(l.a)(u,void 0,void 0,!1,null,null,null);e.a=d.exports},918:function(t,e,n){"use strict";n(38),n(17),n(40),n(3),n(9),n(11),n(32),n(19),n(33),n(28),n(26),n(15),n(16),n(57);var i=n(646),r=n(406);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l={functional:!0,render(t,e){var n=e.data,o=e.parent;return t(i.a,{class:["vf-edited-badge",n.staticClass].concat(c(n.class||[])),props:{disabled:!0,size:r.a.SMALL,ariaLabel:o.$i18n("conversations.posts.edited_aria_label")},attrs:s({},n.attrs||[])},[o.$i18n("conversations.posts.edited")])}},d=n(56),h=Object(d.a)(l,void 0,void 0,!1,null,null,null);e.a=h.exports},921:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n(66);var i=2;function r(t,e){return t<.5?function(t,e){return Math.pow(t,e)}(2*t,e)/2:function(t,e){return 1-Math.abs(Math.pow(t-1,e))}(2*t-1,e)/2+.5}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return n*r(t/o,i)+e}var s={duration:1e3,isVertical:!1,cb:function(){}};function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.assign({},s,n),r=i.isVertical,a=i.duration,c=i.cb,u=r?"scrollTop":"scrollLeft",l=t[u],d=e-l,h=20,p=0,f=function e(){p+=h,t[u]=o(p,l,d,a),p<a?setTimeout(e,h):c()};setTimeout(f,h)}}}]);
//# sourceMappingURL=comments_js.03bcb47bdc038aa19ee2.js.map