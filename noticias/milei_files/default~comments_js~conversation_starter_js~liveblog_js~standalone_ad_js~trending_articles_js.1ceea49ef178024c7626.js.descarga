(window._vfP=window._vfP||[]).push([[4],{680:function(e,t,a){"use strict";a(17),a(26),a(3),a(15),a(16),a(57);var r=a(141),i=a(0),n=a(36),s=a(256),o=a(1),c=a(93),d=a(421),l=a(416);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={props:{uniqueId:n.a.string.isRequired,adSettings:n.a.object.isRequired,container:n.a.string.def("div"),loadVideoAd:n.a.bool.def(!0)},data:()=>({isAdBlockerDetected:!0}),created(){this.isAdBlockerDetected=Object(l.a)()},mounted(){var e=this;this.adService=Object(s.d)(this.adSettings,this.adIntegration),this.adService.loadScript(this.siteAdId,this.loadVideoAd).then((function(){e.adService.generateAd(e.slotId).then((function(){e.$emit(c.SUCCESS)})).catch((function(t){var a=t&&t.rejectedData||{},r="unknown error while generating ad: ".concat(t&&(t.message||t.src||t.id)||"error reason not specified");a.widget=a.widget||e.adSettings.widget_tag,a.adData=a.adData||{},a.adData.failureReason||(a.adData.status="failure",a.adData.failureReason=r),Object(d.a)(o.b.EVENTS.AD_CODE,a),e.$emit(c.ERROR)}))})).catch((function(t){var a=t&&t.rejectedData||{};a.widget=a.widget||e.adSettings.widget_tag;var r="unknown error while loading ad script: ".concat(t&&(t.message||t.src||t.id)||"error reason not specified");a.adData=a.adData||{},a.adData.failureReason||(a.adData.status="failure",a.adData.failureReason=r),Object(d.a)(o.b.EVENTS.AD_CODE,a),e.$emit(c.ERROR)}))},computed:f(f({},Object(r.c)({siteSettings:i.Jc})),{},{adIntegration(){return this.siteSettings[this.adSettings.ad_integration]},siteAdId(){return this.siteSettings[this.adSettings.site_ad_id]},slotId(){return"vf-promo-".concat(this.uniqueId)}}),beforeDestroy(){this.adService.adCleanup(this.slotId)}},g=a(56),h=Object(g.a)(u,(function(){var e=this.$createElement,t=this._self._c||e;return this.isAdBlockerDetected?this._e():t(this.container,{tag:"container",attrs:{id:this.slotId}})}),[],!1,null,null,null);t.a=h.exports},690:function(e,t,a){"use strict";a.d(t,"a",(function(){return E})),a.d(t,"c",(function(){return C}));a(44),a(58),a(3),a(7),a(102),a(17),a(26),a(15),a(16),a(57),a(308);var r=a(31),i=a(141),n=a(36),s=a(640),o=a(706),c=a(665),d=a(985),l=a(674),b=a(0),f=a(4),p=a(83),u=a(34),g=a(22),h=a(85),v=(a(38),a(40),a(9),a(11),a(32),a(19),a(33),a(28),["00000000-0000-4000-8000-d1f9946a6c71","00000000-0000-4000-8000-c9195879f3fe","00000000-0000-4000-8000-90abee4482e3","00000000-0000-4000-8000-f19cceca446f","00000000-0000-4000-8000-d2ef49a611c6","00000000-0000-4000-8000-e539779dc1c9","00000000-0000-4000-8000-b860d4b11b99","00000000-0000-4000-8000-c991e35af44b","00000000-0000-4000-8000-122225fc06d1","00000000-0000-4000-8000-115fd0cb20a5","00000000-0000-4000-8000-3f89d5d756b9","00000000-0000-4000-8000-cddb2a59dcbc","00000000-0000-4000-8000-0ecefb0b028e","00000000-0000-4000-8000-637fbe482950","00000000-0000-4000-8000-8e59fcadfcff","00000000-0000-4000-8000-d4a50a5aa68d","00000000-0000-4000-8000-19db5ae59454","00000000-0000-4000-8000-e75059a15ad0","00000000-0000-4000-8000-db31b5fd0008","00000000-0000-4000-8000-269b3f73b317","00000000-0000-4000-8000-d7927ac6ddef","00000000-0000-4000-8000-ade83b9cfc9f","00000000-0000-4000-8000-204baeb2a0be","00000000-0000-4000-8000-0aa0767ea962","00000000-0000-4000-8000-7c5cf78fde2e","00000000-0000-4000-8000-7604a3c645b2","00000000-0000-4000-8000-f4f8d85be1d0","00000000-0000-4000-8000-064d52bb7112","00000000-0000-4000-8000-1c81d880e21f","00000000-0000-4000-8000-6bb6e4d7fe73","00000000-0000-4000-8000-e5d619db09ef","00000000-0000-4000-8000-c8c1efc16bcb","00000000-0000-4000-8000-ae0dc6c46aeb","00000000-0000-4000-8000-628aacfba682","00000000-0000-4000-8000-f16db20bb693","00000000-0000-4000-8000-aa46bac7854b","00000000-0000-4000-8000-71c757b5a04c","00000000-0000-4000-8000-3addc37936eb","00000000-0000-4000-8000-7d30fcad7db6","00000000-0000-4000-8000-3a05ac28d739","00000000-0000-4000-8000-00afa33247a2","00000000-0000-4000-8000-b7f43e4c5189","00000000-0000-4000-8000-4f31f8db03b0","00000000-0000-4000-8000-1d3668d5c541","00000000-0000-4000-8000-875020bc63fb","00000000-0000-4000-8000-568cc19f665b","00000000-0000-4000-8000-021dba170b07","00000000-0000-4000-8000-5121384b5658","00000000-0000-4000-8000-eab48903bdb1","00000000-0000-4000-8000-0436d5cd9bf1","00000000-0000-4000-8000-e4ba23323cc4","00000000-0000-4000-8000-0d66c696e800","00000000-0000-4000-8000-59e7c2bb9aea","00000000-0000-4000-8000-49f0c4dfe804","00000000-0000-4000-8000-3ac430b7fc52","00000000-0000-4000-8000-9c4b7d2bd142","00000000-0000-4000-8000-771456930b27","00000000-0000-4000-8000-bfc14e581109","00000000-0000-4000-8000-d71c33b1c414","00000000-0000-4000-8000-73d5de217ede","00000000-0000-4000-8000-c6ead506e9b5","00000000-0000-4000-8000-c7159b76e4de","00000000-0000-4000-8000-9c2b9b898e02","00000000-0000-4000-8000-6d6c8152fd30","00000000-0000-4000-8000-e86efaa1c9a2","00000000-0000-4000-8000-9b92c8a984d2","00000000-0000-4000-8000-5b4753095c02","00000000-0000-4000-8000-c25b555aa043","00000000-0000-4000-8000-c27c39b36b57","00000000-0000-4000-8000-3299b6f1f330"]);function _(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var P=[].concat(_(["00000000-0000-4000-8000-b7c3e80e5ef3","00000000-0000-4000-8000-530063b48e37","00000000-0000-4000-8000-08c316bd0c91","00000000-0000-4000-8000-60b3a34cf2d8","00000000-0000-4000-8000-2e030ad480fc","00000000-0000-4000-8000-db69eaa6a028","00000000-0000-4000-8000-93e912a1d173","00000000-0000-4000-8000-e546ea7bdb5a","00000000-0000-4000-8000-8cef58327b08","00000000-0000-4000-8000-f2fed05563d6","00000000-0000-4000-8000-ff6c3c62fcf5","00000000-0000-4000-8000-7520c1ccc451","00000000-0000-4000-8000-eafb9cdd39e5","00000000-0000-4000-8000-0cd0ec02c1a6","00000000-0000-4000-8000-a8c6f988c90c","00000000-0000-4000-8000-c46866252f6b","00000000-0000-4000-8000-08dd17b71b01","00000000-0000-4000-8000-67e599051dc3","00000000-0000-4000-8000-14cc93248f99","00000000-0000-4000-8000-b72c1a6f9789","00000000-0000-4000-8000-fe9e49ec9edd","00000000-0000-4000-8000-6fd37ba7c0ec","00000000-0000-4000-8000-e40deda4938b","00000000-0000-4000-8000-e5c81b276e78","00000000-0000-4000-8000-791bc79b4efd","00000000-0000-4000-8000-0d6613e2c239","00000000-0000-4000-8000-b916e3dd9dff","00000000-0000-4000-8000-e629277e92f8","00000000-0000-4000-8000-d91d2fe21258","00000000-0000-4000-8000-299f0a8ff53a","00000000-0000-4000-8000-60de860f9c07","00000000-0000-4000-8000-287fbf16dab3","00000000-0000-4000-8000-c608644907c4","00000000-0000-4000-8000-d53ee3d50073","00000000-0000-4000-8000-837a801e835b","00000000-0000-4000-8000-014c3665d778","00000000-0000-4000-8000-9dd5aa60dcf4","00000000-0000-4000-8000-534847382267","00000000-0000-4000-8000-40af056e634f","00000000-0000-4000-8000-e023a75cf8cd","00000000-0000-4000-8000-0ed77b31aaaf","00000000-0000-4000-8000-d0a628957588","00000000-0000-4000-8000-b9c39f2a8585","00000000-0000-4000-8000-7594cc3ce58a","00000000-0000-4000-8000-f3720a5df306","00000000-0000-4000-8000-a5d4d74d1373","00000000-0000-4000-8000-eae513ad15d4","00000000-0000-4000-8000-b4eca7c9e374","00000000-0000-4000-8000-74e153e394bb","00000000-0000-4000-8000-f5c84e28340e","00000000-0000-4000-8000-c458cb197a97","00000000-0000-4000-8000-cf2a2d576e54","00000000-0000-4000-8000-4e5e3c00eb2c","00000000-0000-4000-8000-21ba04940abe","00000000-0000-4000-8000-ecb1138a6c24","00000000-0000-4000-8000-e81494fbe527","00000000-0000-4000-8000-954f9be12a9c","00000000-0000-4000-8000-0de010ea809a","00000000-0000-4000-8000-9693f3d4bcfc","00000000-0000-4000-8000-50529cebbf95","00000000-0000-4000-8000-10ecbaa8ad7e","00000000-0000-4000-8000-289a5c4e7396","00000000-0000-4000-8000-56ba2ecbf887","00000000-0000-4000-8000-95dac70077d2","00000000-0000-4000-8000-9077f10608bf"]),_(v));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){m(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var j=["m32"],w=[u.b.PRIVACY_POLICY];function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;return t.includes(e)}var C=Object.freeze({LEFT:"left",CENTER:"center",RIGHT:"right"}),A={props:{adProvider:n.a.string,uniqueId:n.a.string.isRequired,triggerPosition:n.a.oneOfType([n.a.string,n.a.objectOf(n.a.string)]).def({mobile:C.LEFT,desktop:C.LEFT}),hidePpidTrigger:n.a.bool.def(!1)},data:()=>({isPanelExpanded:!1,serverResponse:"",isWaiting:!1,hasError:!1}),created(){this.closeIcon=o.a,this.ppidTriggerPosition=C},computed:S(S({},Object(i.c)({currentUser:b.hb,languageSettings:b.vb,siteSettings:b.Jc})),{},{currentLanguage(){var e=this.languageSettings.language.toLowerCase();return"fr-ca"===e?e:e.substring(0,2)},isAllowedAdProvider(){return E(this.adProvider)},isBlockedClientSite(){return P.includes(this.siteSettings.site_uuid)},isGuestUser(){return!Object(g.H)(this.currentUser)},isPersonalizedAdsEnabled:{get(){return this.getPersonalizedAdsSetting()},set:e=>e},tabIndex(){return this.isPanelExpanded?0:-1},expandingContentId(){return"vf-optOut_".concat(this.uniqueId,"_expand")},alignTrigger(){if("string"==typeof this.triggerPosition){var e=C[this.triggerPosition.toUpperCase()]||C.LEFT;return{mobile:e,desktop:e}}return{mobile:this.triggerPosition.mobile||C.LEFT,desktop:this.triggerPosition.desktop||C.LEFT}},policyCopy(){var e={},t="privacy_policy.privacy_message_text";return this.isLanguageLoaded&&(e={preAnchor:this.$i18n("".concat(t,".pre_anchor")),postAnchor:this.$i18n("".concat(t,".post_anchor")),anchor:{text:this.$i18n("".concat(t,".anchor.text")),url:this.$i18n("".concat(t,".anchor.url"))}}),e},hasServerResponse(){return this.serverResponse.length>0}}),setup(e,t){var a=t.root,i=Object(h.a)(a.$store,w);return{isLanguageLoaded:Object(r.a)((function(){return i.areLanguagesLoaded.value}))}},methods:{hasTriggerClass(e){return Object.keys(C).includes(this.alignTrigger[e].toUpperCase())},clearStatuses(){this.serverResponse="",this.hasError=!1,this.isWaiting=!1},handleTogglePanel(){var e=this,t=!this.isPanelExpanded;this.isPanelExpanded=t,this.$emit("toggle-privacy-settings",t),!1===t&&setTimeout((function(){e.clearStatuses()}),500)},handleTogglePpidSettings(e){var t=this;this.clearStatuses(),this.setLocalStoragePpidSettings(e),this.isGuestUser||this.$store.dispatch(f.Ad,{uuid:this.currentUser.uuid,updates:{[p.b]:e}}).then((function(t){return Boolean(t[p.b])===!e?Promise.reject({response:{data:{http_status:409,error:"[vf] PPID setting not saved!"}}}):Promise.resolve(t)})).catch((function(e){t.hasError=!0,t.serverResponse=t.$i18n("privacy_policy.privacy_error_message")})),this.hasError||(this.serverResponse=e?this.$i18n("privacy_policy.privacy_ads_on_text"):this.$i18n("privacy_policy.privacy_ads_off_pending_text")),this.isWaiting=!1,this.isPersonalizedAdsEnabled=e},getPersonalizedAdsSetting(){var e;return this.isGuestUser?e=this.getLocalStoragePpidSettings():!0===(e=Object(g.M)(this.currentUser))&&!1===this.getLocalStoragePpidSettings()&&(e=!1,this.handleTogglePpidSettings(!1)),e},getLocalStoragePpidSettings(){var e;try{var t=JSON.parse(localStorage.getItem("_vf_personalized_ads_setting"));e=!t.hasOwnProperty("enablePersonalizedAds")||t.enablePersonalizedAds}catch(t){e=!0,this.setLocalStoragePpidSettings(e)}return e},setLocalStoragePpidSettings(e){localStorage.setItem("_vf_personalized_ads_setting",JSON.stringify({enablePersonalizedAds:e})),localStorage.setItem("vf.analytics.adOptOut",!e)}},components:{roundIconButton:c.a,vfButton:s.a,vfToggleSlider:d.a,vfSpinningLoader:l.a}},I=a(56),T=Object(I.a)(A,(function(){var e,t=this,a=t.$createElement,r=t._self._c||a;return t.isAllowedAdProvider&&t.isLanguageLoaded&&!t.hidePpidTrigger&&!t.isBlockedClientSite?r("div",{staticClass:"vf-opt-out-personal",class:(e={"vf-opt-out-personal--expanded":t.isPanelExpanded,"vf-opt-out-personal--hasError":t.hasError},e["--ppid-"+t.alignTrigger.mobile]=t.hasTriggerClass("mobile"),e["--ppid-"+t.alignTrigger.desktop+"-desktop"]=t.hasTriggerClass("desktop"),e)},[r("vf-button",{ref:"btnPrivacy",staticClass:"vf-opt-out-personal__trigger vf-grey vf-has-own-outline",attrs:{"aria-controls":t.expandingContentId,"aria-expanded":t.isPanelExpanded},on:{click:t.handleTogglePanel}},[r("span",{staticClass:"vf-opt-out-personal__dropdown-tail"},[t._v("\n            "+t._s(t.$i18n("privacy_policy.privacy_open_button_label"))+"\n        ")])]),t._v(" "),r("div",{staticClass:"vf-opt-out-personal__dropdown",class:"vf-opt-out-personal__dropdown--"+t.currentLanguage,attrs:{id:t.expandingContentId,"aria-hidden":!t.isPanelExpanded}},[r("div",{staticClass:"vf-opt-out-personal__padding-wrap"},[r("p",{staticClass:"vf-opt-out-personal__copy"},[t._v("\n                "+t._s(t.policyCopy.preAnchor)+"\n                "),r("a",{attrs:{href:t.policyCopy.anchor.url,tabindex:t.tabIndex},domProps:{textContent:t._s(t.policyCopy.anchor.text)}}),t._v(t._s(t.policyCopy.postAnchor)+"\n                ")]),t._v(" "),r("div",{staticClass:"vf-opt-out-personal__controls"},[r("vf-toggle-slider",{staticClass:"vf-opt-out-personal__toggle-slider",attrs:{name:"ppid_opt_out",description:t.$i18n("privacy_policy.privacy_toggle_label"),"tab-index":t.tabIndex,"default-checked":t.isPersonalizedAdsEnabled,"is-disabled":t.isWaiting},on:{toggle:t.handleTogglePpidSettings}}),t._v(" "),t.isWaiting||t.hasServerResponse?r("p",{staticClass:"vf-opt-out-personal__response",attrs:{role:"status","aria-live":"polite"}},[t._v("\n                    "+t._s(t.serverResponse)+"\n                    "),t.isWaiting?r("vf-spinning-loader",{attrs:{"aria-busy":"true",role:"img",alt:t.$i18n("aria.loading_data"),size:"small"}}):t._e()],1):t._e()],1),t._v(" "),r("round-icon-button",{staticClass:"vf-opt-out-personal__btnClose vf-has-own-outline",attrs:{"aria-label":t.$i18n("privacy_policy.privacy_close_button_label"),tabindex:t.tabIndex,icon:t.closeIcon},on:{click:function(e){t.handleTogglePanel(e),t.$refs.btnPrivacy.$el.focus()}}})],1)])],1):t._e()}),[],!1,null,null,null);t.b=T.exports}}]);
//# sourceMappingURL=default~comments_js~conversation_starter_js~liveblog_js~standalone_ad_js~trending_articles_js.1ceea49ef178024c7626.js.map