(window._vfP=window._vfP||[]).push([[168],{693:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=function(){},s=function(t){return"$".concat(t,"_inListener")},a=function(t){return"$".concat(t,"_outListener")},r=function(t){return"$".concat(t,"_tid")},o=function(t){var e=t.inEvent,n=t.outEvent,o=t.activeClass,u=t.defaultCallback,c=void 0===u?i:u,l=t.outTimeout,d=void 0===l?50:l;return{inserted(t,i){var u=i.name,l=i.value,h=void 0===l?c:l,v=i.arg,f=void 0===v?o:v;t[s(u)]=function(){clearTimeout(t[r(u)]),t.classList.add(f),h(!0)},t.addEventListener(e,t[s(u)],{passive:!0}),t[a(u)]=function(){clearTimeout(t[r(u)]),t[r(u)]=setTimeout((function(){t.classList.remove(f),h(!1)}),d)},t.addEventListener(n,t[a(u)],{passive:!0})},unbind(t,i){var o=i.name;clearTimeout(t[r(o)]),delete t[r(o)],t.removeEventListener(e,t[s(o)]),delete t[s(o)],t.removeEventListener(n,t[a(o)]),delete t[a(o)]}}}},738:function(t,e){t.exports='<path fill="currentColor" fill-rule="evenodd" d="M50 3c7 0 13 3 18 7 4 5 7 11 8 18l5 28c2 7 5 10 9 12l3 3c1 1 2 2 2 5 0 2-2 5-5 5H10c-3 0-5-3-5-5 0-3 1-4 2-5l3-3c4-2 7-5 9-12l5-28c1-7 4-13 8-18 5-4 11-7 18-7zM36 83h28v1c0 8-6 14-14 14s-14-6-14-14v-1z"></path>\n'},842:function(t,e,n){"use strict";n.r(e);n(3),n(168);var i=n(0),s=n(2),a=n(406),r=n(1),o=n(185),u=n(652),c=n(653),l=n(844),d=n(738),h=n.n(d),v=n(641),f=Object(v.c)("bell_icon",h.a),E=n(640),N=n(6),g=N.d.LIVEBLOG,L=N.d.TRAY_TRIGGER,p=N.d.COMMENTS,C={components:{roundCountBadge:l.a,vfBellIcon:f,vfButton:E.a},directives:{hovered:c.a,innerFocus:u.a},props:{floating:{type:String,default:"false"},parentComponent:{type:String,default:"",validator:t=>-1!==[g,L,p].indexOf(t)}},data:()=>({dataVfId:-1,hidden:!1}),computed:{countBadgeSize(){return this.isFloating?a.a.SMALL:a.a.TINY},isFloating(){return"true"===this.floating},isLoggedIn(){return this.$store.getters[i.Sb]},currentUserUuid(){return this.$store.getters[i.jb]},count(){var t=this.$store.state.notifications.broadcasts.guest_user;return this.isLoggedIn||""===t?this.$store.getters[i.pc]:0},ariaCount(){return this.$i18n("aria.new_notifications",{num:this.count.toString()})},ariaLabel(){return this.$i18n("aria.open_tray")},classes(){return{"vf-tray-trigger":!0,"vf-offscreen-text":this.hidden,floating:this.isFloating,"vf-tray-trigger--floating":this.isFloating}},countClasses(){return{"vf-tray-count":!0,"vf-tray-count--floating":this.isFloating,"vf-tray-count--has-plus":this.count>9}}},created(){this.MAXIMUM_BEFORE_TRUNCATION=9},mounted(){var t=this;window.vf.context.init(o.a.NOTIFICATIONS),this.$publish(r.b.CHANNEL,r.b.EVENTS.BELL_LOAD,{widget_type:this.parentComponent}),this.$publish(r.I.CHANNEL,r.I.EVENTS.LOADED,this),this.$subscribe(r.I.CHANNEL,r.I.EVENTS.HIDE,(function(){t.hidden=t.isFloating})),this.$subscribe(r.I.CHANNEL,r.I.EVENTS.UNHIDE,(function(){setTimeout((function(){t.hidden=!1}),250)}));var e=window.localStorage.getItem("_vf_notification_queue_last_seen_".concat(this.currentUserUuid));this.isLoggedIn||null===e||this.$store.commit(s.fc,e)},methods:{toggle(){this.$publish(r.C.CHANNEL,r.C.EVENTS.TOGGLE,this.$el),this.$publish(r.I.CHANNEL,r.I.EVENTS.CLICKED),this.parentComponent===L?this.$publish(r.b.CHANNEL,r.b.EVENTS.TRAY_TRIGGER_CLICK,{floating:this.isFloating}):this.parentComponent===p?this.$publish(r.b.CHANNEL,r.b.EVENTS.CONVERSATION_BELL_CLICK):this.parentComponent===g&&this.$publish(r.b.CHANNEL,r.b.EVENTS.LIVEBLOG_BELL_CLICK)},trayIntent(){this.$publish(r.C.CHANNEL,r.C.EVENTS.OPEN_INTENT)}}},I=n(56),b=Object(I.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-button",{directives:[{name:"hovered",rawName:"v-hovered",value:t.trayIntent,expression:"trayIntent"},{name:"inner-focus",rawName:"v-inner-focus",value:t.trayIntent,expression:"trayIntent"}],class:t.classes,attrs:{"aria-label":t.ariaLabel,"data-vf-id":t.dataVfId},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggle(e)}}},[n("round-count-badge",{directives:[{name:"show",rawName:"v-show",value:t.count>0,expression:"count > 0"}],class:t.countClasses,attrs:{count:t.count,max:t.MAXIMUM_BEFORE_TRUNCATION,"aria-label":t.ariaCount,size:t.countBadgeSize}}),t._v(" "),n("vf-bell-icon",{staticClass:"vf-icon-medium"})],1)}),[],!1,null,"d5125bc6",null);e.default=b.exports}}]);
//# sourceMappingURL=tray-trigger.5d41a0353baabc97414a.js.map