!function(){"use strict";function t(t,e){for(var s=0;s<e.length;s++){const i=e[s];if("string"!=typeof i&&!Array.isArray(i))for(const e in i)if("default"!==e&&!(e in t)){const s=Object.getOwnPropertyDescriptor(i,e);s&&Object.defineProperty(t,e,s.get?s:{enumerable:!0,get:()=>i[e]})}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const e="https://news.google.com",s="1.0.19",i="https://news.google.com/swg/js/v1";class n{constructor(){}resized(){}}async function r(t,e,s,i){const n=await t.acceptResult();if(n.origin!=e||s&&!n.originVerified||i&&!n.secureChannel)throw new Error("channel mismatch");return n.data}function o(t,e,s,i){const n=t.createElement(e);return function(t,e={}){for(const[s,i]of Object.entries(e))t.setAttribute(s,i)}(n,s),i&&(n.textContent=i),n}function a(t,e){var s;const i=o(t.getWin().document,"style",{type:"text/css"});return i.textContent=e,null==(s=t.getHead())||s.appendChild(i),i}function h(t){let e=t;do{if(e.nextSibling)return!0}while(e=e.parentNode);return!1}function l(t){return"AbortError"===(null==t?void 0:t.name)}function c(t){const e=new Error("AbortError: "+t);return e.name="AbortError",e}class u{static throwAsync(t){setTimeout((()=>{throw t}))}}const d={frameborder:"0",scrolling:"no"};class p extends n{constructor(t,e,s,i,n=!1,r=!1){super(),this.t=t,this.o=e,this.h=s,this.l=i,this.u=n,this.p=r,this.m=null,this.g=this.t.document,this._=o(this.g,"iframe",d),this.T=new Promise((t=>{this.I=t}))}getElement(){return this._}async init(t){const e=await this.o.openIframe(this._,this.h,this.l);return this.C(e,t)}shouldFadeBody(){return this.u}hasLoadingIndicator(){return this.p}C(t,e){return this.m=t,this.I(t),this.m.onResizeRequest((t=>{e.resizeView(this,t)})),this.m.whenReady()}S(){return this.T}async on(t,e){(await this.S()).on(t,e)}async execute(t){(await this.S()).execute(t)}async acceptResult(){return(await this.S()).acceptResult()}async acceptResultAndVerify(t,e,s){return r(await this.S(),t,e,s)}async whenComplete(){await this.acceptResult()}async onCancel(t){try{await this.acceptResult()}catch(e){throw l(e)&&t(),e}}resized(){this.m&&this.m.resized()}}var m=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.IMPRESSION_PAYWALL=1]="IMPRESSION_PAYWALL",t[t.IMPRESSION_AD=2]="IMPRESSION_AD",t[t.IMPRESSION_OFFERS=3]="IMPRESSION_OFFERS",t[t.IMPRESSION_SUBSCRIBE_BUTTON=4]="IMPRESSION_SUBSCRIBE_BUTTON",t[t.IMPRESSION_SMARTBOX=5]="IMPRESSION_SMARTBOX",t[t.IMPRESSION_SWG_BUTTON=6]="IMPRESSION_SWG_BUTTON",t[t.IMPRESSION_CLICK_TO_SHOW_OFFERS=7]="IMPRESSION_CLICK_TO_SHOW_OFFERS",t[t.IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED=8]="IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED",t[t.IMPRESSION_SUBSCRIPTION_COMPLETE=9]="IMPRESSION_SUBSCRIPTION_COMPLETE",t[t.IMPRESSION_ACCOUNT_CHANGED=10]="IMPRESSION_ACCOUNT_CHANGED",t[t.IMPRESSION_PAGE_LOAD=11]="IMPRESSION_PAGE_LOAD",t[t.IMPRESSION_LINK=12]="IMPRESSION_LINK",t[t.IMPRESSION_SAVE_SUBSCR_TO_GOOGLE=13]="IMPRESSION_SAVE_SUBSCR_TO_GOOGLE",t[t.IMPRESSION_GOOGLE_UPDATED=14]="IMPRESSION_GOOGLE_UPDATED",t[t.IMPRESSION_SHOW_OFFERS_SMARTBOX=15]="IMPRESSION_SHOW_OFFERS_SMARTBOX",t[t.IMPRESSION_SHOW_OFFERS_SWG_BUTTON=16]="IMPRESSION_SHOW_OFFERS_SWG_BUTTON",t[t.IMPRESSION_SELECT_OFFER_SMARTBOX=17]="IMPRESSION_SELECT_OFFER_SMARTBOX",t[t.IMPRESSION_SELECT_OFFER_SWG_BUTTON=18]="IMPRESSION_SELECT_OFFER_SWG_BUTTON",t[t.IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON=19]="IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON",t[t.IMPRESSION_SELECT_CONTRIBUTION_SWG_BUTTON=20]="IMPRESSION_SELECT_CONTRIBUTION_SWG_BUTTON",t[t.IMPRESSION_METER_TOAST=21]="IMPRESSION_METER_TOAST",t[t.IMPRESSION_REGWALL=22]="IMPRESSION_REGWALL",t[t.IMPRESSION_SHOWCASE_REGWALL=23]="IMPRESSION_SHOWCASE_REGWALL",t[t.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT=24]="IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT",t[t.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT=25]="IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT",t[t.IMPRESSION_CONTRIBUTION_OFFERS=26]="IMPRESSION_CONTRIBUTION_OFFERS",t[t.IMPRESSION_TWG_COUNTER=27]="IMPRESSION_TWG_COUNTER",t[t.IMPRESSION_TWG_SITE_SUPPORTER_WALL=28]="IMPRESSION_TWG_SITE_SUPPORTER_WALL",t[t.IMPRESSION_TWG_PUBLICATION=29]="IMPRESSION_TWG_PUBLICATION",t[t.IMPRESSION_TWG_STATIC_BUTTON=30]="IMPRESSION_TWG_STATIC_BUTTON",t[t.IMPRESSION_TWG_DYNAMIC_BUTTON=31]="IMPRESSION_TWG_DYNAMIC_BUTTON",t[t.IMPRESSION_TWG_STICKER_SELECTION_SCREEN=32]="IMPRESSION_TWG_STICKER_SELECTION_SCREEN",t[t.IMPRESSION_TWG_PUBLICATION_NOT_SET_UP=33]="IMPRESSION_TWG_PUBLICATION_NOT_SET_UP",t[t.IMPRESSION_REGWALL_OPT_IN=34]="IMPRESSION_REGWALL_OPT_IN",t[t.IMPRESSION_NEWSLETTER_OPT_IN=35]="IMPRESSION_NEWSLETTER_OPT_IN",t[t.IMPRESSION_SUBSCRIPTION_OFFERS_ERROR=36]="IMPRESSION_SUBSCRIPTION_OFFERS_ERROR",t[t.IMPRESSION_CONTRIBUTION_OFFERS_ERROR=37]="IMPRESSION_CONTRIBUTION_OFFERS_ERROR",t[t.IMPRESSION_TWG_SHORTENED_STICKER_FLOW=38]="IMPRESSION_TWG_SHORTENED_STICKER_FLOW",t[t.IMPRESSION_SUBSCRIPTION_LINKING_LOADING=39]="IMPRESSION_SUBSCRIPTION_LINKING_LOADING",t[t.IMPRESSION_SUBSCRIPTION_LINKING_COMPLETE=40]="IMPRESSION_SUBSCRIPTION_LINKING_COMPLETE",t[t.IMPRESSION_SUBSCRIPTION_LINKING_ERROR=41]="IMPRESSION_SUBSCRIPTION_LINKING_ERROR",t[t.IMPRESSION_SURVEY=42]="IMPRESSION_SURVEY",t[t.IMPRESSION_REGWALL_ERROR=43]="IMPRESSION_REGWALL_ERROR",t[t.IMPRESSION_NEWSLETTER_ERROR=44]="IMPRESSION_NEWSLETTER_ERROR",t[t.IMPRESSION_SURVEY_ERROR=45]="IMPRESSION_SURVEY_ERROR",t[t.IMPRESSION_METER_TOAST_ERROR=46]="IMPRESSION_METER_TOAST_ERROR",t[t.IMPRESSION_MINI_PROMPT=47]="IMPRESSION_MINI_PROMPT",t[t.IMPRESSION_MINI_PROMPT_ERROR=48]="IMPRESSION_MINI_PROMPT_ERROR",t[t.ACTION_SUBSCRIBE=1e3]="ACTION_SUBSCRIBE",t[t.ACTION_PAYMENT_COMPLETE=1001]="ACTION_PAYMENT_COMPLETE",t[t.ACTION_ACCOUNT_CREATED=1002]="ACTION_ACCOUNT_CREATED",t[t.ACTION_ACCOUNT_ACKNOWLEDGED=1003]="ACTION_ACCOUNT_ACKNOWLEDGED",t[t.ACTION_SUBSCRIPTIONS_LANDING_PAGE=1004]="ACTION_SUBSCRIPTIONS_LANDING_PAGE",t[t.ACTION_PAYMENT_FLOW_STARTED=1005]="ACTION_PAYMENT_FLOW_STARTED",t[t.ACTION_OFFER_SELECTED=1006]="ACTION_OFFER_SELECTED",t[t.ACTION_SWG_BUTTON_CLICK=1007]="ACTION_SWG_BUTTON_CLICK",t[t.ACTION_VIEW_OFFERS=1008]="ACTION_VIEW_OFFERS",t[t.ACTION_ALREADY_SUBSCRIBED=1009]="ACTION_ALREADY_SUBSCRIBED",t[t.ACTION_NEW_DEFERRED_ACCOUNT=1010]="ACTION_NEW_DEFERRED_ACCOUNT",t[t.ACTION_LINK_CONTINUE=1011]="ACTION_LINK_CONTINUE",t[t.ACTION_LINK_CANCEL=1012]="ACTION_LINK_CANCEL",t[t.ACTION_GOOGLE_UPDATED_CLOSE=1013]="ACTION_GOOGLE_UPDATED_CLOSE",t[t.ACTION_USER_CANCELED_PAYFLOW=1014]="ACTION_USER_CANCELED_PAYFLOW",t[t.ACTION_SAVE_SUBSCR_TO_GOOGLE_CONTINUE=1015]="ACTION_SAVE_SUBSCR_TO_GOOGLE_CONTINUE",t[t.ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL=1016]="ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL",t[t.ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK=1017]="ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK",t[t.ACTION_SWG_BUTTON_SELECT_OFFER_CLICK=1018]="ACTION_SWG_BUTTON_SELECT_OFFER_CLICK",t[t.ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK=1019]="ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK",t[t.ACTION_SWG_BUTTON_SELECT_CONTRIBUTION_CLICK=1020]="ACTION_SWG_BUTTON_SELECT_CONTRIBUTION_CLICK",t[t.ACTION_USER_CONSENT_DEFERRED_ACCOUNT=1021]="ACTION_USER_CONSENT_DEFERRED_ACCOUNT",t[t.ACTION_USER_DENY_DEFERRED_ACCOUNT=1022]="ACTION_USER_DENY_DEFERRED_ACCOUNT",t[t.ACTION_DEFERRED_ACCOUNT_REDIRECT=1023]="ACTION_DEFERRED_ACCOUNT_REDIRECT",t[t.ACTION_GET_ENTITLEMENTS=1024]="ACTION_GET_ENTITLEMENTS",t[t.ACTION_METER_TOAST_SUBSCRIBE_CLICK=1025]="ACTION_METER_TOAST_SUBSCRIBE_CLICK",t[t.ACTION_METER_TOAST_EXPANDED=1026]="ACTION_METER_TOAST_EXPANDED",t[t.ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION=1027]="ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION",t[t.ACTION_METER_TOAST_CLOSED_BY_SWIPE_DOWN=1028]="ACTION_METER_TOAST_CLOSED_BY_SWIPE_DOWN",t[t.ACTION_METER_TOAST_CLOSED_BY_X_CLICKED=1029]="ACTION_METER_TOAST_CLOSED_BY_X_CLICKED",t[t.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK=1030]="ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK",t[t.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK=1031]="ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK",t[t.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE=1032]="ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE",t[t.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE=1033]="ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE",t[t.ACTION_CONTRIBUTION_OFFER_SELECTED=1034]="ACTION_CONTRIBUTION_OFFER_SELECTED",t[t.ACTION_SHOWCASE_REGWALL_GSI_CLICK=1035]="ACTION_SHOWCASE_REGWALL_GSI_CLICK",t[t.ACTION_SHOWCASE_REGWALL_EXISTING_ACCOUNT_CLICK=1036]="ACTION_SHOWCASE_REGWALL_EXISTING_ACCOUNT_CLICK",t[t.ACTION_SUBSCRIPTION_OFFERS_CLOSED=1037]="ACTION_SUBSCRIPTION_OFFERS_CLOSED",t[t.ACTION_CONTRIBUTION_OFFERS_CLOSED=1038]="ACTION_CONTRIBUTION_OFFERS_CLOSED",t[t.ACTION_TWG_STATIC_CTA_CLICK=1039]="ACTION_TWG_STATIC_CTA_CLICK",t[t.ACTION_TWG_DYNAMIC_CTA_CLICK=1040]="ACTION_TWG_DYNAMIC_CTA_CLICK",t[t.ACTION_TWG_SITE_LEVEL_SUPPORTER_WALL_CTA_CLICK=1041]="ACTION_TWG_SITE_LEVEL_SUPPORTER_WALL_CTA_CLICK",t[t.ACTION_TWG_DIALOG_SUPPORTER_WALL_CTA_CLICK=1042]="ACTION_TWG_DIALOG_SUPPORTER_WALL_CTA_CLICK",t[t.ACTION_TWG_COUNTER_CLICK=1043]="ACTION_TWG_COUNTER_CLICK",t[t.ACTION_TWG_SITE_SUPPORTER_WALL_ALL_THANKS_CLICK=1044]="ACTION_TWG_SITE_SUPPORTER_WALL_ALL_THANKS_CLICK",t[t.ACTION_TWG_PAID_STICKER_SELECTED_SCREEN_CLOSE_CLICK=1045]="ACTION_TWG_PAID_STICKER_SELECTED_SCREEN_CLOSE_CLICK",t[t.ACTION_TWG_PAID_STICKER_SELECTION_CLICK=1046]="ACTION_TWG_PAID_STICKER_SELECTION_CLICK",t[t.ACTION_TWG_FREE_STICKER_SELECTION_CLICK=1047]="ACTION_TWG_FREE_STICKER_SELECTION_CLICK",t[t.ACTION_TWG_MINI_SUPPORTER_WALL_CLICK=1048]="ACTION_TWG_MINI_SUPPORTER_WALL_CLICK",t[t.ACTION_TWG_CREATOR_BENEFIT_CLICK=1049]="ACTION_TWG_CREATOR_BENEFIT_CLICK",t[t.ACTION_TWG_FREE_TRANSACTION_START_NEXT_BUTTON_CLICK=1050]="ACTION_TWG_FREE_TRANSACTION_START_NEXT_BUTTON_CLICK",t[t.ACTION_TWG_PAID_TRANSACTION_START_NEXT_BUTTON_CLICK=1051]="ACTION_TWG_PAID_TRANSACTION_START_NEXT_BUTTON_CLICK",t[t.ACTION_TWG_STICKER_SELECTION_SCREEN_CLOSE_CLICK=1052]="ACTION_TWG_STICKER_SELECTION_SCREEN_CLOSE_CLICK",t[t.ACTION_TWG_ARTICLE_LEVEL_SUPPORTER_WALL_CTA_CLICK=1053]="ACTION_TWG_ARTICLE_LEVEL_SUPPORTER_WALL_CTA_CLICK",t[t.ACTION_REGWALL_OPT_IN_BUTTON_CLICK=1054]="ACTION_REGWALL_OPT_IN_BUTTON_CLICK",t[t.ACTION_REGWALL_ALREADY_OPTED_IN_CLICK=1055]="ACTION_REGWALL_ALREADY_OPTED_IN_CLICK",t[t.ACTION_NEWSLETTER_OPT_IN_BUTTON_CLICK=1056]="ACTION_NEWSLETTER_OPT_IN_BUTTON_CLICK",t[t.ACTION_NEWSLETTER_ALREADY_OPTED_IN_CLICK=1057]="ACTION_NEWSLETTER_ALREADY_OPTED_IN_CLICK",t[t.ACTION_REGWALL_OPT_IN_CLOSE=1058]="ACTION_REGWALL_OPT_IN_CLOSE",t[t.ACTION_NEWSLETTER_OPT_IN_CLOSE=1059]="ACTION_NEWSLETTER_OPT_IN_CLOSE",t[t.ACTION_SHOWCASE_REGWALL_SIWG_CLICK=1060]="ACTION_SHOWCASE_REGWALL_SIWG_CLICK",t[t.ACTION_TWG_CHROME_APP_MENU_ENTRY_POINT_CLICK=1061]="ACTION_TWG_CHROME_APP_MENU_ENTRY_POINT_CLICK",t[t.ACTION_TWG_DISCOVER_FEED_MENU_ENTRY_POINT_CLICK=1062]="ACTION_TWG_DISCOVER_FEED_MENU_ENTRY_POINT_CLICK",t[t.ACTION_SHOWCASE_REGWALL_3P_BUTTON_CLICK=1063]="ACTION_SHOWCASE_REGWALL_3P_BUTTON_CLICK",t[t.ACTION_SUBSCRIPTION_OFFERS_RETRY=1064]="ACTION_SUBSCRIPTION_OFFERS_RETRY",t[t.ACTION_CONTRIBUTION_OFFERS_RETRY=1065]="ACTION_CONTRIBUTION_OFFERS_RETRY",t[t.ACTION_TWG_SHORTENED_STICKER_FLOW_STICKER_SELECTION_CLICK=1066]="ACTION_TWG_SHORTENED_STICKER_FLOW_STICKER_SELECTION_CLICK",t[t.ACTION_INITIATE_UPDATED_SUBSCRIPTION_LINKING=1067]="ACTION_INITIATE_UPDATED_SUBSCRIPTION_LINKING",t[t.ACTION_SURVEY_SUBMIT_CLICK=1068]="ACTION_SURVEY_SUBMIT_CLICK",t[t.ACTION_SURVEY_CLOSED=1069]="ACTION_SURVEY_CLOSED",t[t.ACTION_SURVEY_DATA_TRANSFER=1070]="ACTION_SURVEY_DATA_TRANSFER",t[t.ACTION_REGWALL_PAGE_REFRESH=1071]="ACTION_REGWALL_PAGE_REFRESH",t[t.ACTION_NEWSLETTER_PAGE_REFRESH=1072]="ACTION_NEWSLETTER_PAGE_REFRESH",t[t.ACTION_SURVEY_PAGE_REFRESH=1073]="ACTION_SURVEY_PAGE_REFRESH",t[t.ACTION_METER_TOAST_PAGE_REFRESH=1074]="ACTION_METER_TOAST_PAGE_REFRESH",t[t.ACTION_MINI_PROMPT_INTERACTION=1075]="ACTION_MINI_PROMPT_INTERACTION",t[t.ACTION_SURVEY_PREVIOUS_BUTTON_CLICK=1076]="ACTION_SURVEY_PREVIOUS_BUTTON_CLICK",t[t.ACTION_SURVEY_NEXT_BUTTON_CLICK=1077]="ACTION_SURVEY_NEXT_BUTTON_CLICK",t[t.EVENT_PAYMENT_FAILED=2e3]="EVENT_PAYMENT_FAILED",t[t.EVENT_REGWALL_OPT_IN_FAILED=2001]="EVENT_REGWALL_OPT_IN_FAILED",t[t.EVENT_NEWSLETTER_OPT_IN_FAILED=2002]="EVENT_NEWSLETTER_OPT_IN_FAILED",t[t.EVENT_REGWALL_ALREADY_OPT_IN=2003]="EVENT_REGWALL_ALREADY_OPT_IN",t[t.EVENT_NEWSLETTER_ALREADY_OPT_IN=2004]="EVENT_NEWSLETTER_ALREADY_OPT_IN",t[t.EVENT_SUBSCRIPTION_LINKING_FAILED=2005]="EVENT_SUBSCRIPTION_LINKING_FAILED",t[t.EVENT_SURVEY_ALREADY_SUBMITTED=2006]="EVENT_SURVEY_ALREADY_SUBMITTED",t[t.EVENT_SURVEY_COMPLETION_RECORD_FAILED=2007]="EVENT_SURVEY_COMPLETION_RECORD_FAILED",t[t.EVENT_SURVEY_DATA_TRANSFER_FAILED=2008]="EVENT_SURVEY_DATA_TRANSFER_FAILED",t[t.EVENT_CUSTOM=3e3]="EVENT_CUSTOM",t[t.EVENT_CONFIRM_TX_ID=3001]="EVENT_CONFIRM_TX_ID",t[t.EVENT_CHANGED_TX_ID=3002]="EVENT_CHANGED_TX_ID",t[t.EVENT_GPAY_NO_TX_ID=3003]="EVENT_GPAY_NO_TX_ID",t[t.EVENT_GPAY_CANNOT_CONFIRM_TX_ID=3004]="EVENT_GPAY_CANNOT_CONFIRM_TX_ID",t[t.EVENT_GOOGLE_UPDATED=3005]="EVENT_GOOGLE_UPDATED",t[t.EVENT_NEW_TX_ID=3006]="EVENT_NEW_TX_ID",t[t.EVENT_UNLOCKED_BY_SUBSCRIPTION=3007]="EVENT_UNLOCKED_BY_SUBSCRIPTION",t[t.EVENT_UNLOCKED_BY_METER=3008]="EVENT_UNLOCKED_BY_METER",t[t.EVENT_NO_ENTITLEMENTS=3009]="EVENT_NO_ENTITLEMENTS",t[t.EVENT_HAS_METERING_ENTITLEMENTS=3010]="EVENT_HAS_METERING_ENTITLEMENTS",t[t.EVENT_OFFERED_METER=3011]="EVENT_OFFERED_METER",t[t.EVENT_UNLOCKED_FREE_PAGE=3012]="EVENT_UNLOCKED_FREE_PAGE",t[t.EVENT_INELIGIBLE_PAYWALL=3013]="EVENT_INELIGIBLE_PAYWALL",t[t.EVENT_UNLOCKED_FOR_CRAWLER=3014]="EVENT_UNLOCKED_FOR_CRAWLER",t[t.EVENT_TWG_COUNTER_VIEW=3015]="EVENT_TWG_COUNTER_VIEW",t[t.EVENT_TWG_SITE_SUPPORTER_WALL_VIEW=3016]="EVENT_TWG_SITE_SUPPORTER_WALL_VIEW",t[t.EVENT_TWG_STATIC_BUTTON_VIEW=3017]="EVENT_TWG_STATIC_BUTTON_VIEW",t[t.EVENT_TWG_DYNAMIC_BUTTON_VIEW=3018]="EVENT_TWG_DYNAMIC_BUTTON_VIEW",t[t.EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PRIVATE=3019]="EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PRIVATE",t[t.EVENT_TWG_POST_TRANSACTION_SETTING_PRIVATE=3020]="EVENT_TWG_POST_TRANSACTION_SETTING_PRIVATE",t[t.EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PUBLIC=3021]="EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PUBLIC",t[t.EVENT_TWG_POST_TRANSACTION_SETTING_PUBLIC=3022]="EVENT_TWG_POST_TRANSACTION_SETTING_PUBLIC",t[t.EVENT_REGWALL_OPTED_IN=3023]="EVENT_REGWALL_OPTED_IN",t[t.EVENT_NEWSLETTER_OPTED_IN=3024]="EVENT_NEWSLETTER_OPTED_IN",t[t.EVENT_SHOWCASE_METERING_INIT=3025]="EVENT_SHOWCASE_METERING_INIT",t[t.EVENT_DISABLE_MINIPROMPT_DESKTOP=3026]="EVENT_DISABLE_MINIPROMPT_DESKTOP",t[t.EVENT_SUBSCRIPTION_LINKING_SUCCESS=3027]="EVENT_SUBSCRIPTION_LINKING_SUCCESS",t[t.EVENT_SURVEY_SUBMITTED=3028]="EVENT_SURVEY_SUBMITTED",t[t.EVENT_LINK_ACCOUNT_SUCCESS=3029]="EVENT_LINK_ACCOUNT_SUCCESS",t[t.EVENT_SAVE_SUBSCRIPTION_SUCCESS=3030]="EVENT_SAVE_SUBSCRIPTION_SUCCESS",t[t.EVENT_SURVEY_DATA_TRANSFER_COMPLETE=3031]="EVENT_SURVEY_DATA_TRANSFER_COMPLETE",t[t.EVENT_SUBSCRIPTION_STATE=4e3]="EVENT_SUBSCRIPTION_STATE",t))(m||{}),g=(t=>(t[t.UNKNOWN_ENTITLEMENT_RESULT=0]="UNKNOWN_ENTITLEMENT_RESULT",t[t.UNLOCKED_SUBSCRIBER=1001]="UNLOCKED_SUBSCRIBER",t[t.UNLOCKED_FREE=1002]="UNLOCKED_FREE",t[t.UNLOCKED_METER=1003]="UNLOCKED_METER",t[t.LOCKED_REGWALL=2001]="LOCKED_REGWALL",t[t.LOCKED_PAYWALL=2002]="LOCKED_PAYWALL",t[t.INELIGIBLE_PAYWALL=2003]="INELIGIBLE_PAYWALL",t))(g||{}),f=(t=>(t[t.UNKNOWN_ENTITLEMENT_SOURCE=0]="UNKNOWN_ENTITLEMENT_SOURCE",t[t.GOOGLE_SUBSCRIBER_ENTITLEMENT=1001]="GOOGLE_SUBSCRIBER_ENTITLEMENT",t[t.GOOGLE_SHOWCASE_METERING_SERVICE=2001]="GOOGLE_SHOWCASE_METERING_SERVICE",t[t.SUBSCRIBE_WITH_GOOGLE_METERING_SERVICE=2002]="SUBSCRIBE_WITH_GOOGLE_METERING_SERVICE",t[t.PUBLISHER_ENTITLEMENT=3001]="PUBLISHER_ENTITLEMENT",t))(f||{}),w=(t=>(t[t.UNKNOWN_CLIENT=0]="UNKNOWN_CLIENT",t[t.SWG_CLIENT=1]="SWG_CLIENT",t[t.AMP_CLIENT=2]="AMP_CLIENT",t[t.PROPENSITY_CLIENT=3]="PROPENSITY_CLIENT",t[t.SWG_SERVER=4]="SWG_SERVER",t[t.PUBLISHER_CLIENT=5]="PUBLISHER_CLIENT",t[t.SHOWCASE_CLIENT=6]="SHOWCASE_CLIENT",t))(w||{});class E{constructor(t=[],e=!0){const s=e?1:0;this.O=null==t[s]?null:t[s]}getComplete(){return this.O}setComplete(t){this.O=t}toArray(t=!0){const e=[this.O];return t&&e.unshift(this.label()),e}label(){return"AccountCreationRequest"}}class _{constructor(t=[],e=!0){const s=e?1:0;this.R=null==t[s]?null:t[s],this.A=null==t[1+s]?null:t[1+s]}getSubscriberOrMember(){return this.R}setSubscriberOrMember(t){this.R=t}getLinkRequested(){return this.A}setLinkRequested(t){this.A=t}toArray(t=!0){const e=[this.R,this.A];return t&&e.unshift(this.label()),e}label(){return"AlreadySubscribedResponse"}}class b{constructor(t=[],e=!0){const s=e?1:0;this.N=null==t[s]?null:t[s],this.v=null==t[1+s]?null:t[1+s],this.P=null==t[2+s]?null:t[2+s],this.L=null==t[3+s]?null:t[3+s],this.k=null==t[4+s]?null:t[4+s],this.M=null==t[5+s]?null:t[5+s],this.U=null==t[6+s]?null:t[6+s],this.D=null==t[7+s]?null:t[7+s],this.G=t[8+s]||[],this.F=null==t[9+s]?null:t[9+s],this.W=null==t[10+s]?null:t[10+s],this.B=null==t[11+s]?null:new F(t[11+s],e),this.V=null==t[12+s]?null:t[12+s],this.j=null==t[13+s]?null:t[13+s]}getEmbedderOrigin(){return this.N}setEmbedderOrigin(t){this.N=t}getTransactionId(){return this.v}setTransactionId(t){this.v=t}getReferringOrigin(){return this.P}setReferringOrigin(t){this.P=t}getUtmSource(){return this.L}setUtmSource(t){this.L=t}getUtmCampaign(){return this.k}setUtmCampaign(t){this.k=t}getUtmMedium(){return this.M}setUtmMedium(t){this.M=t}getSku(){return this.U}setSku(t){this.U=t}getReadyToPay(){return this.D}setReadyToPay(t){this.D=t}getLabelList(){return this.G}setLabelList(t){this.G=t}getClientVersion(){return this.F}setClientVersion(t){this.F=t}getUrl(){return this.W}setUrl(t){this.W=t}getClientTimestamp(){return this.B}setClientTimestamp(t){this.B=t}getReaderSurfaceType(){return this.V}setReaderSurfaceType(t){this.V=t}getIntegrationVersion(){return this.j}setIntegrationVersion(t){this.j=t}toArray(t=!0){const e=[this.N,this.v,this.P,this.L,this.k,this.M,this.U,this.D,this.G,this.F,this.W,this.B?this.B.toArray(t):[],this.V,this.j];return t&&e.unshift(this.label()),e}label(){return"AnalyticsContext"}}class T{constructor(t=[],e=!0){const s=e?1:0;this.K=null==t[s]?null:t[s],this.Y=null==t[1+s]?null:t[1+s]}getEventOriginator(){return this.K}setEventOriginator(t){this.K=t}getIsFromUserAction(){return this.Y}setIsFromUserAction(t){this.Y=t}toArray(t=!0){const e=[this.K,this.Y];return t&&e.unshift(this.label()),e}label(){return"AnalyticsEventMeta"}}class y{constructor(t=[],e=!0){const s=e?1:0;this.$=null==t[s]?null:new b(t[s],e),this.q=null==t[1+s]?null:t[1+s],this.H=null==t[2+s]?null:new T(t[2+s],e),this.J=null==t[3+s]?null:new R(t[3+s],e)}getContext(){return this.$}setContext(t){this.$=t}getEvent(){return this.q}setEvent(t){this.q=t}getMeta(){return this.H}setMeta(t){this.H=t}getParams(){return this.J}setParams(t){this.J=t}toArray(t=!0){const e=[this.$?this.$.toArray(t):[],this.q,this.H?this.H.toArray(t):[],this.J?this.J.toArray(t):[]];return t&&e.unshift(this.label()),e}label(){return"AnalyticsRequest"}}class I{constructor(t=[],e=!0){const s=e?1:0;this.X=null==t[s]?null:t[s],this.Z=null==t[1+s]?null:t[1+s],this.tt=null==t[2+s]?null:t[2+s],this.et=null==t[3+s]?null:t[3+s]}getSwgUserToken(){return this.X}setSwgUserToken(t){this.X=t}getActionCompleted(){return this.Z}setActionCompleted(t){this.Z=t}getUserEmail(){return this.tt}setUserEmail(t){this.tt=t}getAlreadyCompleted(){return this.et}setAlreadyCompleted(t){this.et=t}toArray(t=!0){const e=[this.X,this.Z,this.tt,this.et];return t&&e.unshift(this.label()),e}label(){return"CompleteAudienceActionResponse"}}class C{constructor(t=[],e=!0){const s=e?1:0;this.st=null==t[s]?null:t[s],this.nt=null==t[1+s]?null:t[1+s]}getJwt(){return this.st}setJwt(t){this.st=t}getSource(){return this.nt}setSource(t){this.nt=t}toArray(t=!0){const e=[this.st,this.nt];return t&&e.unshift(this.label()),e}label(){return"EntitlementJwt"}}class S{constructor(t=[],e=!0){const s=e?1:0;this.rt=null==t[s]?null:new C(t[s],e),this.ot=null==t[1+s]?null:new F(t[1+s],e),this.ht=null==t[2+s]?null:t[2+s],this.lt=null==t[3+s]?null:t[3+s],this.ct=null==t[4+s]?null:t[4+s],this.ut=null==t[5+s]?null:t[5+s],this.dt=null==t[6+s]?null:new F(t[6+s],e)}getUsedEntitlement(){return this.rt}setUsedEntitlement(t){this.rt=t}getClientEventTime(){return this.ot}setClientEventTime(t){this.ot=t}getEntitlementSource(){return this.ht}setEntitlementSource(t){this.ht=t}getEntitlementResult(){return this.lt}setEntitlementResult(t){this.lt=t}getToken(){return this.ct}setToken(t){this.ct=t}getIsUserRegistered(){return this.ut}setIsUserRegistered(t){this.ut=t}getSubscriptionTimestamp(){return this.dt}setSubscriptionTimestamp(t){this.dt=t}toArray(t=!0){const e=[this.rt?this.rt.toArray(t):[],this.ot?this.ot.toArray(t):[],this.ht,this.lt,this.ct,this.ut,this.dt?this.dt.toArray(t):[]];return t&&e.unshift(this.label()),e}label(){return"EntitlementsRequest"}}class O{constructor(t=[],e=!0){const s=e?1:0;this.st=null==t[s]?null:t[s],this.X=null==t[1+s]?null:t[1+s]}getJwt(){return this.st}setJwt(t){this.st=t}getSwgUserToken(){return this.X}setSwgUserToken(t){this.X=t}toArray(t=!0){const e=[this.st,this.X];return t&&e.unshift(this.label()),e}label(){return"EntitlementsResponse"}}class R{constructor(t=[],e=!0){const s=e?1:0;this.gt=null==t[s]?null:t[s],this.ft=null==t[1+s]?null:t[1+s],this.wt=null==t[2+s]?null:t[2+s],this.U=null==t[3+s]?null:t[3+s],this.Et=null==t[4+s]?null:t[4+s],this.ut=null==t[5+s]?null:t[5+s],this._t=null==t[6+s]?null:t[6+s],this.dt=null==t[7+s]?null:new F(t[7+s],e)}getSmartboxMessage(){return this.gt}setSmartboxMessage(t){this.gt=t}getGpayTransactionId(){return this.ft}setGpayTransactionId(t){this.ft=t}getHadLogged(){return this.wt}setHadLogged(t){this.wt=t}getSku(){return this.U}setSku(t){this.U=t}getOldTransactionId(){return this.Et}setOldTransactionId(t){this.Et=t}getIsUserRegistered(){return this.ut}setIsUserRegistered(t){this.ut=t}getSubscriptionFlow(){return this._t}setSubscriptionFlow(t){this._t=t}getSubscriptionTimestamp(){return this.dt}setSubscriptionTimestamp(t){this.dt=t}toArray(t=!0){const e=[this.gt,this.ft,this.wt,this.U,this.Et,this.ut,this._t,this.dt?this.dt.toArray(t):[]];return t&&e.unshift(this.label()),e}label(){return"EventParams"}}class A{constructor(t=[],e=!0){const s=e?1:0;this.O=null==t[s]?null:t[s],this.bt=null==t[1+s]?null:t[1+s]}getComplete(){return this.O}setComplete(t){this.O=t}getError(){return this.bt}setError(t){this.bt=t}toArray(t=!0){const e=[this.O,this.bt];return t&&e.unshift(this.label()),e}label(){return"FinishedLoggingResponse"}}class N{constructor(t=[],e=!0){const s=e?1:0;this.Tt=null==t[s]?null:t[s],this.ct=null==t[1+s]?null:t[1+s]}getAuthCode(){return this.Tt}setAuthCode(t){this.Tt=t}getToken(){return this.ct}setToken(t){this.ct=t}toArray(t=!0){const e=[this.Tt,this.ct];return t&&e.unshift(this.label()),e}label(){return"LinkSaveTokenRequest"}}class v{constructor(t=[],e=!0){const s=e?1:0;this.yt=null==t[s]?null:t[s]}getRequested(){return this.yt}setRequested(t){this.yt=t}toArray(t=!0){const e=[this.yt];return t&&e.unshift(this.label()),e}label(){return"LinkingInfoResponse"}}class P{constructor(t=[],e=!0){const s=e?1:0;this.U=null==t[s]?null:t[s],this.It=null==t[1+s]?null:t[1+s],this.Ct=null==t[2+s]?null:t[2+s],this.St=null==t[3+s]?null:t[3+s],this.Ot=null==t[4+s]?null:t[4+s],this.Rt=null==t[5+s]?null:t[5+s],this.At=null==t[6+s]?null:t[6+s],this.Nt=null==t[7+s]?null:t[7+s]}getSku(){return this.U}setSku(t){this.U=t}getOldSku(){return this.It}setOldSku(t){this.It=t}getOneTime(){return this.Ct}setOneTime(t){this.Ct=t}getPlayOffer(){return this.St}setPlayOffer(t){this.St=t}getOldPlayOffer(){return this.Ot}setOldPlayOffer(t){this.Ot=t}getCustomMessage(){return this.Rt}setCustomMessage(t){this.Rt=t}getAnonymous(){return this.At}setAnonymous(t){this.At=t}getSharingPolicyEnabled(){return this.Nt}setSharingPolicyEnabled(t){this.Nt=t}toArray(t=!0){const e=[this.U,this.It,this.Ct,this.St,this.Ot,this.Rt,this.At,this.Nt];return t&&e.unshift(this.label()),e}label(){return"SkuSelectedResponse"}}class x{constructor(t=[],e=!0){const s=e?1:0;this.vt=null==t[s]?null:t[s]}getIsClicked(){return this.vt}setIsClicked(t){this.vt=t}toArray(t=!0){const e=[this.vt];return t&&e.unshift(this.label()),e}label(){return"SmartBoxMessage"}}let L=class{constructor(t=[],e=!0){const s=e?1:0;this.Pt=null==t[s]?null:t[s]}getSubscribe(){return this.Pt}setSubscribe(t){this.Pt=t}toArray(t=!0){const e=[this.Pt];return t&&e.unshift(this.label()),e}label(){return"SubscribeResponse"}};class k{constructor(t=[],e=!0){const s=e?1:0;this.xt=null==t[s]?null:t[s],this.Lt=null==t[1+s]?null:t[1+s]}getPublisherProvidedId(){return this.xt}setPublisherProvidedId(t){this.xt=t}getSuccess(){return this.Lt}setSuccess(t){this.Lt=t}toArray(t=!0){const e=[this.xt,this.Lt];return t&&e.unshift(this.label()),e}label(){return"SubscriptionLinkingCompleteResponse"}}class M{constructor(t=[],e=!0){const s=e?1:0;this.kt=null==t[s]?null:t[s],this.Mt=null==t[1+s]?null:t[1+s],this.Ut=null==t[2+s]?null:t[2+s],this.Dt=null==t[3+s]?null:t[3+s]}getAnswerId(){return this.kt}setAnswerId(t){this.kt=t}getAnswerText(){return this.Mt}setAnswerText(t){this.Mt=t}getAnswerCategory(){return this.Ut}setAnswerCategory(t){this.Ut=t}getPpsValue(){return this.Dt}setPpsValue(t){this.Dt=t}toArray(t=!0){const e=[this.kt,this.Mt,this.Ut,this.Dt];return t&&e.unshift(this.label()),e}label(){return"SurveyAnswer"}}class U{constructor(t=[],e=!0){const s=e?1:0;this.Gt=(t[s]||[]).map((t=>new G(t,e))),this.Ft=null==t[1+s]?null:t[1+s]}getSurveyQuestionsList(){return this.Gt}setSurveyQuestionsList(t){this.Gt=t}getStorePpsInLocalStorage(){return this.Ft}setStorePpsInLocalStorage(t){this.Ft=t}toArray(t=!0){const e=[this.Gt?this.Gt.map((e=>e.toArray(t))):[],this.Ft];return t&&e.unshift(this.label()),e}label(){return"SurveyDataTransferRequest"}}class D{constructor(t=[],e=!0){const s=e?1:0;this.Lt=null==t[s]?null:t[s]}getSuccess(){return this.Lt}setSuccess(t){this.Lt=t}toArray(t=!0){const e=[this.Lt];return t&&e.unshift(this.label()),e}label(){return"SurveyDataTransferResponse"}}class G{constructor(t=[],e=!0){const s=e?1:0;this.Wt=null==t[s]?null:t[s],this.Bt=null==t[1+s]?null:t[1+s],this.Vt=null==t[2+s]?null:t[2+s],this.jt=(t[3+s]||[]).map((t=>new M(t,e)))}getQuestionId(){return this.Wt}setQuestionId(t){this.Wt=t}getQuestionText(){return this.Bt}setQuestionText(t){this.Bt=t}getQuestionCategory(){return this.Vt}setQuestionCategory(t){this.Vt=t}getSurveyAnswersList(){return this.jt}setSurveyAnswersList(t){this.jt=t}toArray(t=!0){const e=[this.Wt,this.Bt,this.Vt,this.jt?this.jt.map((e=>e.toArray(t))):[]];return t&&e.unshift(this.label()),e}label(){return"SurveyQuestion"}}class F{constructor(t=[],e=!0){const s=e?1:0;this.seconds_=null==t[s]?null:t[s],this.nanos_=null==t[1+s]?null:t[1+s]}getSeconds(){return this.seconds_}setSeconds(t){this.seconds_=t}getNanos(){return this.nanos_}setNanos(t){this.nanos_=t}toArray(t=!0){const e=[this.seconds_,this.nanos_];return t&&e.unshift(this.label()),e}label(){return"Timestamp"}}class W{constructor(t=[],e=!0){const s=e?1:0;this.zt=null==t[s]?null:t[s]}getClose(){return this.zt}setClose(t){this.zt=t}toArray(t=!0){const e=[this.zt];return t&&e.unshift(this.label()),e}label(){return"ToastCloseRequest"}}class B{constructor(t=[],e=!0){const s=e?1:0;this.Kt=null==t[s]?null:t[s]}getNative(){return this.Kt}setNative(t){this.Kt=t}toArray(t=!0){const e=[this.Kt];return t&&e.unshift(this.label()),e}label(){return"ViewSubscriptionsResponse"}}const V={AccountCreationRequest:E,ActionRequest:class{constructor(t=[],e=!0){const s=e?1:0;this.Yt=null==t[s]?null:t[s]}getAction(){return this.Yt}setAction(t){this.Yt=t}toArray(t=!0){const e=[this.Yt];return t&&e.unshift(this.label()),e}label(){return"ActionRequest"}},AlreadySubscribedResponse:_,AnalyticsContext:b,AnalyticsEventMeta:T,AnalyticsRequest:y,AudienceActivityClientLogsRequest:class{constructor(t=[],e=!0){const s=e?1:0;this.q=null==t[s]?null:t[s]}getEvent(){return this.q}setEvent(t){this.q=t}toArray(t=!0){const e=[this.q];return t&&e.unshift(this.label()),e}label(){return"AudienceActivityClientLogsRequest"}},CompleteAudienceActionResponse:I,EntitlementJwt:C,EntitlementsRequest:S,EntitlementsResponse:O,EventParams:R,FinishedLoggingResponse:A,LinkSaveTokenRequest:N,LinkingInfoResponse:v,OpenDialogRequest:class{constructor(t=[],e=!0){const s=e?1:0;this.$t=null==t[s]?null:t[s]}getUrlPath(){return this.$t}setUrlPath(t){this.$t=t}toArray(t=!0){const e=[this.$t];return t&&e.unshift(this.label()),e}label(){return"OpenDialogRequest"}},SkuSelectedResponse:P,SmartBoxMessage:x,SubscribeResponse:L,SubscriptionLinkingCompleteResponse:k,SubscriptionLinkingResponse:class{constructor(t=[],e=!0){const s=e?1:0;this.xt=null==t[s]?null:t[s]}getPublisherProvidedId(){return this.xt}setPublisherProvidedId(t){this.xt=t}toArray(t=!0){const e=[this.xt];return t&&e.unshift(this.label()),e}label(){return"SubscriptionLinkingResponse"}},SurveyAnswer:M,SurveyDataTransferRequest:U,SurveyDataTransferResponse:D,SurveyQuestion:G,Timestamp:F,ToastCloseRequest:W,ViewSubscriptionsResponse:B},j="USER_TOKEN",z="READ_TIME",K="ents",Y="isreadytopay",$="subscribe.google.com:rk",q="toast";function H(...t){/swg.debug=1/.test(self.location.hash)&&(t.unshift("[Subscriptions]"),J(...t))}function J(...t){console.log(...t)}function X(...t){console.warn(...t)}function Q(t,e="Assertion failed",...s){if(t)return;const i=e.split("%s");let n=i.shift();for(const r of s){const t=i.shift();n+=Z(r)+t}throw new Error(n)}function Z(t){const e=t;return 1==(null==e?void 0:e.nodeType)?e.tagName.toLowerCase()+(e.id?"#"+e.id:""):String(t)}function tt(t){const e=new Uint8Array(t.length);for(let s=0;s<t.length;s++){const i=t.charCodeAt(s);Q(i<=255,"Characters must be in range [0,255]"),e[s]=i}return e}function et(t){const e=new Array(t.length);for(let s=0;s<t.length;s++)e[s]=String.fromCharCode(t[s]);return e.join("")}function st(t){if("undefined"!=typeof TextDecoder)return new TextDecoder("utf-8").decode(t);const e=et(new Uint8Array(t));return decodeURIComponent(escape(e))}function it(t){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(t):tt(unescape(encodeURIComponent(t)))}function nt(t){return tt(atob(t.replaceAll("-","+").replaceAll("_","/")))}function rt(t){const e=et(t);return btoa(e).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")}function ot(t,e){try{return JSON.parse(t)}catch(s){return void(e&&e(s))}}function at(t,e){const s=ot(t);return null==s?void 0:s[e]}class ht{constructor(){}decode(t){return this.qt(t).payload}qt(t){function e(){throw new Error(`Invalid token: "${t}"`)}const s=t.split(".");3!=s.length&&e();const i=nt(s[0]),n=nt(s[1]);return{header:ot(st(i),e),payload:ot(st(n),e),verifiable:`${s[0]}.${s[1]}`,sig:s[2]}}}var lt=(t=>(t.EVENT_SHOWCASE_METER_OFFERED="EVENT_SHOWCASE_METER_OFFERED",t.EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION="EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION",t.EVENT_SHOWCASE_UNLOCKED_BY_METER="EVENT_SHOWCASE_UNLOCKED_BY_METER",t.EVENT_SHOWCASE_UNLOCKED_FREE_PAGE="EVENT_SHOWCASE_UNLOCKED_FREE_PAGE",t.EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL="EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL",t.EVENT_SHOWCASE_INELIGIBLE_PAYWALL="EVENT_SHOWCASE_INELIGIBLE_PAYWALL",t.EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL="EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL",t))(lt||{}),ct=(t=>(t.SHOW_OFFERS="showOffers",t.SHOW_SUBSCRIBE_OPTION="showSubscribeOption",t.SHOW_ABBRV_OFFER="showAbbrvOffer",t.SHOW_CONTRIBUTION_OPTIONS="showContributionOptions",t.SUBSCRIBE="subscribe",t.CONTRIBUTE="contribute",t.COMPLETE_DEFERRED_ACCOUNT_CREATION="completeDeferredAccountCreation",t.LINK_ACCOUNT="linkAccount",t.SHOW_LOGIN_PROMPT="showLoginPrompt",t.SHOW_LOGIN_NOTIFICATION="showLoginNotification",t.SHOW_METER_TOAST="showMeterToast",t))(ct||{}),ut=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.IMPRESSIONS=1]="IMPRESSIONS",t))(ut||{}),dt=(t=>(t.AUTO="auto",t.REDIRECT="redirect",t))(dt||{}),pt=(t=>(t.SUBSCRIPTION="SUBSCRIPTION",t.UI_CONTRIBUTION="UI_CONTRIBUTION",t.VIRTUAL_GIFT="VIRTUAL_GIFT",t))(pt||{});class mt{constructor(t,e,s,i,n,r,o=null,a=null,h=null,l=null){this.raw=t,this.purchaseData=e,this.userData=s,this.entitlements=i,this.productType=n,this.Ht=r,this.oldSku=o,this.swgUserToken=a,this.paymentRecurrence=h,this.requestMetadata=l}clone(){return new mt(this.raw,this.purchaseData,this.userData,this.entitlements,this.productType,this.Ht,this.oldSku,this.swgUserToken)}json(){return{purchaseData:this.purchaseData.json(),userData:this.userData?this.userData.json():null,entitlements:this.entitlements?this.entitlements.json():null,oldSku:this.oldSku,productType:this.productType,swgUserToken:this.swgUserToken}}complete(){return this.Ht()}}class gt{constructor(t,e){this.raw=t,this.signature=e,this.data=t}clone(){return new gt(this.raw,this.signature)}json(){return{data:this.raw,signature:this.signature}}}class ft{constructor(t,e){this.idToken=t,this.data=e,this.id=e.sub,this.email=e.email,this.emailVerified=e.email_verified,this.name=e.name,this.givenName=e.given_name,this.familyName=e.family_name,this.pictureUrl=e.picture}clone(){return new ft(this.idToken,this.data)}json(){return{id:this.id,email:this.email,emailVerified:this.emailVerified,name:this.name,givenName:this.givenName,familyName:this.familyName,pictureUrl:this.pictureUrl}}}const wt=self.document.createElement("a"),Et={};function _t(t){const e=Et[t];if(e)return e;const s=function(t,e){t.href=e;const s={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:t.protocol+"//"+t.host};return t.origin&&"null"!==t.origin?s.origin=t.origin:"data:"!==s.protocol&&s.host||(s.origin=s.href),s}(wt,t);return Et[t]=s}function bt(t){return t?(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce(((t,e)=>{const s=e.split("=");try{const e=decodeURIComponent(s[0]||""),i=decodeURIComponent(s[1]||"");e&&(t[e]=i)}catch(i){X(`SwG could not parse a URL query param: ${s[0]}`)}return t}),{}):{}}function Tt(t,e,s){const i=t.indexOf("?"),n=t.indexOf("#");let r="";return-1!=n&&(r=t.substring(n),t=t.substring(0,n)),-1==i?t+="?":i<t.length-1&&(t+="&"),(t+=encodeURIComponent(e)+"="+encodeURIComponent(s))+r}function yt(t){return JSON.stringify(t.toArray(!1))}function It(t){const e=t.getRootNode(),s=e.querySelector("link[rel='canonical']");return(null==s?void 0:s.href)||e.location.origin+e.location.pathname}const Ct=_t(self.window.location.href);_t(self.document.referrer);const St={zero:"0",nocache:"1",hr1:"3600000",hr12:"43200000"},Ot={default:{frontEnd:e,payEnv:"PRODUCTION",playEnv:"PROD",feCache:"nocache"},prod:{frontEnd:"https://news.google.com",payEnv:"PRODUCTION",playEnv:"PROD",feCache:"nocache"},autopush:{frontEnd:"https://subscribe-autopush.sandbox.google.com",payEnv:"PRODUCTION",playEnv:"AUTOPUSH",feCache:"nocache"},qual:{frontEnd:"https://subscribe-qual.sandbox.google.com",payEnv:"SANDBOX",playEnv:"STAGING",feCache:"nocache"}};function Rt(){const t=bt(self.location.hash)["swg.mode"];return t&&Ot[t]?Ot[t]:Ot.default}function At(){return _t(Rt().frontEnd).origin}function Nt(t){const e=bt(self.location.hash)["swg.experiments"];return void 0!==e&&(t=Tt(t,"e",e)),`${Rt().frontEnd}/swg/_/api/v1`+t}function vt(t){return"https://pubads.g.doubleclick.net"+t}function Pt(t,e={},s=""){const i=s?`swg/${s}`:"swg";t=xt(`${Rt().frontEnd}/${i}/ui/v1${t}`);const n=bt(self.location.hash),r=n["swg.boqjsmode"];void 0!==r&&(t=Tt(t,"jsmode",r));const o=n["swg.experiments"];void 0!==o&&(t=Tt(t,"e",o));for(const a in e)t=Tt(t,a,e[a]);return t}function xt(t){return Tt(t,"_",function(t){const e=Number(St[t]||1);if(0===e)return"_";const s=Date.now();return String(e<=1?s:Math.floor(s/e))}(Rt().feCache))}function Lt(t){return Object.assign(t,{_client:`SwG ${s}`})}const kt={IMMEDIATE_WITH_TIME_PRORATION:1};function Mt(t,e=null){return new R([,,,,t,,,e])}class Ut{constructor(t,e,s=pt.SUBSCRIPTION){this.Jt=t,this.Xt=e,this.Qt=s,this.Zt=t.payClient(),this.te=t.pageConfig(),this.ee=t.analytics(),this.ie=t.eventManager(),this.ne=t.clientConfigManager()}async start(){const t=await this.ne.getClientConfig();this.re(t.paySwgVersion)}re(t){const e={skuId:this.Xt.skuId,publicationId:this.te.getPublicationId()};if(t&&(e.swgVersion=t),this.Xt.oldSku){e.oldSku=this.Xt.oldSku;const t=this.Xt.replaceSkuProrationMode;e.replaceSkuProrationMode=t?kt[t]:kt.IMMEDIATE_WITH_TIME_PRORATION,this.ee.setSku(e.oldSku)}this.Xt.oneTime&&(e.paymentRecurrence=2),this.Xt.metadata&&(e.metadata=this.Xt.metadata);const s=this.Qt==pt.UI_CONTRIBUTION?ct.CONTRIBUTE:ct.SUBSCRIBE;this.Jt.callbacks().triggerFlowStarted(s,this.Xt),this.ie.logSwgEvent(m.ACTION_PAYMENT_FLOW_STARTED,!0,Mt(e.skuId)),Gt.waitingForPayClient=!0,this.Zt.start({apiVersion:1,allowedPaymentMethods:["CARD"],environment:Rt().payEnv,playEnvironment:Rt().playEnv,swg:e,i:{startTimeMs:Date.now(),productType:this.Qt}},{forceRedirect:this.Jt.config().windowOpenMode==dt.REDIRECT,forceDisableNative:"2"==t||"3"==t})}}const Dt=class{constructor(t){this.Jt=t,this.oe=null,this.ae=null,this.U=null,this.t=t.win(),this.o=t.activities(),this.he=t.dialogManager(),this.ie=t.eventManager(),this.ne=t.clientConfigManager()}static configurePending(t){const e=t.eventManager();t.payClient().onResponse((async s=>{t.entitlementsManager().blockNextNotification();const i=new Dt(t),n=async function(t,e,s){const i=!Gt.waitingForPayClient;Gt.waitingForPayClient=!1;const n=await e;let r,o=m.UNKNOWN;if("object"==typeof n&&n.googleTransactionId){const e=t.analytics().getTransactionId(),s=n.googleTransactionId;i?(t.analytics().setTransactionId(s),o=m.EVENT_GPAY_CANNOT_CONFIRM_TX_ID):e===s?o=m.EVENT_CONFIRM_TX_ID:(r=new R,r.setGpayTransactionId(s),o=m.EVENT_CHANGED_TX_ID)}else r=new R,r.setHadLogged(!i),o=m.EVENT_GPAY_NO_TX_ID;return t.eventManager().logSwgEvent(o,!0,r),function(t,e,s){var i;let n=null,r=null,o=pt.SUBSCRIPTION,a=null,h=null,l=null;if(e)if("string"==typeof e)r=e;else{const t=e;if(t.swgCallbackData?n=t.swgCallbackData:t.integratorClientCallbackData&&(r=t.integratorClientCallbackData),e.paymentRequest){const t=e.paymentRequest.swg||{};a=t.oldSku,h=t.paymentRecurrence,l=t.metadata,o=(null==(i=e.paymentRequest.i)?void 0:i.productType)||pt.SUBSCRIPTION}else e.productType&&(o=e.productType)}if(r&&!n&&(r=atob(r),r)&&(n=JSON.parse(r).swgCallbackData),!n)throw new Error("unexpected payment response");return r=JSON.stringify(n),new mt(r,function(t){const e=t.purchaseData,s=t.purchaseDataSignature;return new gt(e,s)}(n),function(t){const e=t.idToken;if(!e)return null;const s=(new ht).decode(e);return new ft(e,s)}(n),function(t,e){return e.signedEntitlements?t.entitlementsManager().parseEntitlements(e):null}(t,n),o,s,a,n.swgUserToken,h,l)}(t,n,s)}(t,s,i.complete.bind(i));t.callbacks().triggerPaymentResponse(n);try{const s=await n,r=Ft(s.purchaseData);t.analytics().setSku(r||""),e.logSwgEvent(m.ACTION_PAYMENT_COMPLETE,!0,Mt(r||"",s.productType==pt.UI_CONTRIBUTION?ct.CONTRIBUTE:ct.SUBSCRIBE)),i.start(s)}catch(r){const e=r;if(!l(e))throw t.eventManager().logSwgEvent(m.EVENT_PAYMENT_FAILED,!1),t.jserror().error("Pay failed",e),e;{const s=e.productType==pt.UI_CONTRIBUTION?ct.CONTRIBUTE:ct.SUBSCRIBE;t.callbacks().triggerFlowCanceled(s),t.eventManager().logSwgEvent(m.ACTION_USER_CANCELED_PAYFLOW,!0)}}}))}async start(t){var e;this.U=Ft(t.purchaseData),this.ie.logSwgEvent(m.IMPRESSION_ACCOUNT_CHANGED,!0,Mt(this.U||"")),this.Jt.entitlementsManager().reset(!0);const s={publicationId:this.Jt.pageConfig().getPublicationId(),productType:t.productType,isSubscriptionUpdate:!!t.oldSku,isOneTime:!!t.paymentRecurrence};t.userData&&t.entitlements?(s.idToken=t.userData.idToken,this.Jt.entitlementsManager().pushNextEntitlements(t.entitlements.raw),t.swgUserToken&&this.Jt.storage().set(j,t.swgUserToken,!0)):s.loginHint=null==(e=t.userData)?void 0:e.email;const i={};if(s.productType===pt.VIRTUAL_GIFT){Object.assign(i,{productType:s.productType,publicationId:s.publicationId,offerId:this.U,origin:_t(this.t.location.href).origin,isPaid:!0,checkOrderStatus:!0});const e=t.requestMetadata;e&&(i.canonicalUrl=e.contentId,i.isAnonymous=e.anonymous,s.contentTitle=e.contentTitle),t.swgUserToken&&(s.swgUserToken=t.swgUserToken);const n=at(t.purchaseData.raw,"orderId")||null;n&&(s.orderId=n)}this.ne.shouldForceLangInIframes()&&(i.hl=this.ne.getLanguage());const n=Pt("/payconfirmiframe",i),r=await this.ne.getClientConfig();s.useUpdatedConfirmUi=r.useUpdatedOfferFlows,s.skipAccountCreationScreen=r.skipAccountCreationScreen,this.oe=new p(this.t,this.o,n,Lt(s),!0),this.oe.on(O,this.le.bind(this)),this.oe.acceptResult().then((()=>{this.he.completeView(this.oe)})),this.ae=this.he.openView(this.oe),this.ae.then((()=>{this.Jt.callbacks().triggerPayConfirmOpened(this.oe)}))}le(t){const e=t.getJwt();e&&this.Jt.entitlementsManager().pushNextEntitlements(e)}async complete(){this.ie.logSwgEvent(m.ACTION_ACCOUNT_CREATED,!0,Mt(this.U||""));const t=Date.now().toString();this.Jt.storage().set(z,t,!1),this.Jt.entitlementsManager().unblockNextNotification();const e=await this.ne.getClientConfig();if(await this.ae,!e.skipAccountCreationScreen){const t=new E;t.setComplete(!0),this.oe.execute(t)}try{await this.oe.acceptResult()}catch(s){}e.skipAccountCreationScreen||this.ie.logSwgEvent(m.ACTION_ACCOUNT_ACKNOWLEDGED,!0,Mt(this.U||"")),this.Jt.entitlementsManager().setToastShown(!0)}};let Gt=Dt;function Ft(t){return at(t.raw,"productId")||null}Gt.waitingForPayClient=!1;class Wt{constructor(t,e){var s;this.Jt=t,this.t=t.win(),this.o=t.activities(),this.he=t.dialogManager(),this.ie=t.eventManager(),this.ne=t.clientConfigManager(),this.oe=null;const i=null!=(s=null==e?void 0:e.isClosable)&&s,n=t.activities().addDefaultArguments({showNative:t.callbacks().hasSubscribeRequestCallback(),productType:pt.SUBSCRIPTION,list:e&&e.list||"default",skus:e&&e.skus||null,isClosable:i});if(e&&e.oldSku){n.oldSku=e.oldSku,Q(n.skus,"Need a sku list if old sku is provided!");let t=n.skus;const s=n.oldSku;t=t.filter((t=>t!==s)),Q(t.length>0,"Sku list only contained offer user already has"),n.skus=t}if(n.skus&&1===n.skus.length){const t=n.skus[0],e=n.oldSku;if(e){const s=new P;return s.setSku(t),s.setOldSku(e),void this.ce(s)}}this.ue=n.skus||["*"],this.pe=this.ne.getClientConfig(),this.me=this.ge(n)}async ge(t){const e=await this.pe;return this.fe(e)?new p(this.t,this.o,this.we(e,this.Jt.pageConfig()),t,!0):null}ce(t){const e=t.getSku();if(e){const s={skuId:e},i=t.getOldSku();i&&(s.oldSku=i,this.Jt.analytics().setSku(i)),this.ie.logSwgEvent(m.ACTION_OFFER_SELECTED,!0,function(t){return new R([,,,,t])}(e)),new Ut(this.Jt,s).start()}}Ee(t){t.getSubscriberOrMember()&&(this.ie.logSwgEvent(m.ACTION_ALREADY_SUBSCRIBED,!0),this.Jt.callbacks().triggerLoginRequest({linkRequested:!!t.getLinkRequested()}))}_e(t){t.getNative()&&this.Jt.callbacks().triggerSubscribeRequest()}async start(){if(this.oe=await this.me,!this.oe)return;this.Jt.callbacks().triggerFlowStarted(ct.SHOW_OFFERS,{skus:this.ue,source:"SwG"}),this.oe.onCancel((()=>{this.Jt.callbacks().triggerFlowCanceled(ct.SHOW_OFFERS)})),this.oe.on(P,this.ce.bind(this)),this.oe.on(_,this.Ee.bind(this)),this.oe.on(B,this._e.bind(this));const t=await this.pe;return this.he.openView(this.oe,!1,this.be(t,this.ne.shouldAllowScroll()))}fe(t){var e;return!1!==(null==(e=t.uiPredicates)?void 0:e.canDisplayAutoPrompt)}be(t,e){return t.useUpdatedOfferFlows?{desktopConfig:{isCenterPositioned:!0,supportsWideScreen:!0},shouldDisableBodyScrolling:!e}:{}}we(t,e){var s;if(!t.useUpdatedOfferFlows){const t=bt(this.t.location.hash)["swg.newoffercard"];return Pt("/offersiframe",t?{useNewOfferCard:t}:{})}const i={publicationId:e.getPublicationId()};return this.ne.shouldForceLangInIframes()&&(i.hl=this.ne.getLanguage()),(null==(s=t.uiPredicates)?void 0:s.purchaseUnavailableRegion)&&(i.purchaseUnavailableRegion="true"),Pt("/subscriptionoffersiframe",i)}showNoEntitlementFoundToast(){this.oe&&this.oe.execute(new O)}}class Bt{constructor(t,e){this.Jt=t,this.Te=e,this.o=t.activities(),this.he=t.dialogManager(),this.ie=t.eventManager(),this.oe=new p(t.win(),this.o,Pt("/optionsiframe"),Lt({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),list:e&&e.list||"default",skus:e&&e.skus||null,isClosable:!0}),!1)}start(){return this.Jt.callbacks().triggerFlowStarted(ct.SHOW_SUBSCRIBE_OPTION),this.oe.onCancel((()=>{this.Jt.callbacks().triggerFlowCanceled(ct.SHOW_SUBSCRIBE_OPTION)})),this.oe.on(L,this.ye.bind(this)),this.oe.acceptResult().then((t=>{const e=t.data,s=new L;e.subscribe&&s.setSubscribe(!0),this.ye(s)}),(t=>{throw this.he.completeView(this.oe),t})),this.ie.logSwgEvent(m.IMPRESSION_CLICK_TO_SHOW_OFFERS),this.he.openView(this.oe)}ye(t){if(t.getSubscribe()){const t=this.Te||{};null==t.isClosable&&(t.isClosable=!0),this.ie.logSwgEvent(m.ACTION_VIEW_OFFERS,!0),new Wt(this.Jt,t).start()}}}class Vt{constructor(t,e={}){this.Jt=t,this.Te=e,this.t=t.win(),this.o=t.activities(),this.he=t.dialogManager(),this.ie=t.eventManager(),this.oe=new p(this.t,this.o,Pt("/abbrvofferiframe"),Lt({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),showNative:t.callbacks().hasSubscribeRequestCallback(),list:e&&e.list||"default",skus:e&&e.skus||null,isClosable:!0}),!1)}Ee(t){t.getSubscriberOrMember()&&(this.ie.logSwgEvent(m.ACTION_ALREADY_SUBSCRIBED,!0),this.Jt.callbacks().triggerLoginRequest({linkRequested:!!t.getLinkRequested()}))}start(){return this.Jt.callbacks().triggerFlowStarted(ct.SHOW_ABBRV_OFFER),this.oe.onCancel((()=>{this.Jt.callbacks().triggerFlowCanceled(ct.SHOW_ABBRV_OFFER)})),this.oe.on(_,this.Ee.bind(this)),this.oe.acceptResult().then((t=>{if(t.data.viewOffers){const t=this.Te||{};return null==t.isClosable&&(t.isClosable=!0),this.ie.logSwgEvent(m.ACTION_VIEW_OFFERS,!0),void new Wt(this.Jt,t).start()}if(t.data.native)return this.Jt.callbacks().triggerSubscribeRequest(),void this.he.completeView(this.oe)})),this.ie.logSwgEvent(m.IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED),this.he.openView(this.oe)}}function jt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zt(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var s=function t(){if(this instanceof t){var s=[null];s.push.apply(s,arguments);var i=Function.bind.apply(e,s);return new i}return e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var i=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(s,e,i.get?i:{enumerable:!0,get:function(){return t[e]}})})),s}
/**
   * @license
   * Copyright 2017 The Web Activities Authors. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */const Kt={IFRAME:"iframe",POPUP:"popup",REDIRECT:"redirect"},Yt={OK:"ok",CANCELED:"canceled",FAILED:"failed"};class $t{constructor(t,e,s,i,n,r){this.code=t,this.data=t==Yt.OK?e:null,this.mode=s,this.origin=i,this.originVerified=n,this.secureChannel=r,this.ok=t==Yt.OK,this.error=t==Yt.FAILED?new Error(String(e)||""):null}}const qt="AbortError";let Ht;function Jt(t){return function(t){if(t.origin)return t.origin;const e=t.protocol;let s=t.host;return"https:"==e&&s.indexOf(":443")==s.length-4?s=s.replace(":443",""):"http:"==e&&s.indexOf(":80")==s.length-3&&(s=s.replace(":80","")),e+"//"+s}(function(t){return Ht||(Ht=document.createElement("a")),Ht.href=t,Ht}(t))}function Xt(t,e){const s="AbortError"+(e?": "+e:"");let i=null;if("function"==typeof t.DOMException){const e=t.DOMException;try{i=new e(s,qt)}catch(n){}}return i||(i=new Error(s),i.name=qt,i.code=20),i}function Qt(t,e,s){if(e.ok)s(e);else{const i=e.error||Xt(t);i.activityResult=e,s(Promise.reject(i))}}function Zt(t){const e=t.navigator;return/Trident|MSIE|IEMobile/i.test(e&&e.userAgent)}function te(t){const e=t.navigator;return/Edge/i.test(e&&e.userAgent)}const ee="__ACTIVITIES__";class se{constructor(t,e,s,i){this.t=t,this.Ie=e,this.Ce=s,this.Se=i,this.Oe=null,this.Re=!1,this.m=null,this.Ae=null,this.Ne=null,this.ve=null,this.Pe=this.xe.bind(this)}connect(t){if(this.Ae)throw new Error("already connected");this.Ae=t,this.t.addEventListener("message",this.Pe)}disconnect(){if(this.Ae&&(this.Ae=null,this.m&&(ie(this.m),this.m=null),this.t.removeEventListener("message",this.Pe),this.ve)){for(const t in this.ve){const e=this.ve[t];e.port1&&ie(e.port1),e.port2&&ie(e.port2)}this.ve=null}}isConnected(){return null!=this.Ce}getTarget(){const t=this.Le();if(!t)throw new Error("not connected");return t}Le(){return this.Ae&&!this.Oe&&("function"==typeof this.Ie?this.Oe=this.Ie():this.Oe=this.Ie),this.Oe}getTargetOrigin(){if(null==this.Ce)throw new Error("not connected");return this.Ce}sendConnectCommand(){const t=Zt(this.t)||te(this.t);this.sendCommand("connect",{acceptsChannel:t})}sendStartCommand(t){let e=null;this.Re&&"function"==typeof this.t.MessageChannel&&(e=new this.t.MessageChannel),e?(this.sendCommand("start",t,[e.port2]),this.ke(e.port1)):this.sendCommand("start",t)}sendCommand(t,e,s){const i={sentinel:ee,cmd:t,payload:e||null};if(this.m)this.m.postMessage(i,s||void 0);else{const e=this.getTarget(),n="connect"==t?null!=this.Ce?this.Ce:"*":this.getTargetOrigin();e.postMessage(i,n,s||void 0)}}customMessage(t){this.sendCommand("msg",t)}onCustomMessage(t){this.Ne=t}startChannel(t){const e=t||"",s=this.Me(e);if(!s.port1){const t=new this.t.MessageChannel;s.port1=t.port1,s.port2=t.port2,s.resolver(s.port1)}return s.port2&&(this.sendCommand("cnset",{name:e},[s.port2]),s.port2=null),s.promise}askChannel(t){const e=t||"",s=this.Me(e);return s.port1||this.sendCommand("cnget",{name:e}),s.promise}Ue(t,e){const s=this.Me(t);s.port1=e,s.resolver(e)}Me(t){this.ve||(this.ve={});let e=this.ve[t];if(!e){let s;const i=new Promise((t=>{s=t}));e={port1:null,port2:null,resolver:s,promise:i},this.ve[t]=e}return e}ke(t){this.m&&ie(this.m),this.m=t,this.m.onmessage=t=>{const e=t.data,s=e&&e.cmd,i=e&&e.payload||null;s&&this.De(s,i,t)}}xe(t){if(this.Se&&this.Le()!=t.source)return;const e=t.data;if(!e||e.sentinel!=ee)return;const s=e.cmd;if(this.m&&"connect"!=s&&"start"!=s)return;const i=t.origin,n=e.payload||null;null==this.Ce&&"start"==s&&(this.Ce=i),null==this.Ce&&t.source&&this.Le()==t.source&&(this.Ce=i),i==this.Ce&&this.De(s,n,t)}De(t,e,s){if("connect"==t)this.m&&(ie(this.m),this.m=null),this.Re=e&&e.acceptsChannel||!1,this.Ae(t,e);else if("start"==t){const i=s.ports&&s.ports[0];i&&this.ke(i),this.Ae(t,e)}else if("msg"==t)null!=this.Ne&&null!=e&&this.Ne(e);else if("cnget"==t){const t=e.name;this.startChannel(t)}else if("cnset"==t){const t=e.name,i=s.ports[0];this.Ue(t,i)}else this.Ae(t,e)}}function ie(t){try{t.close()}catch(e){}}let ne=class{constructor(t,e,s){this._=t,this.W=e,this.l=s||null,this.t=this._.ownerDocument.defaultView,this.Ce=Jt(e),this.Ge=!1,this.Fe=null,this.We=new Promise((t=>{this.Fe=t})),this.Be=null,this.ae=new Promise((t=>{this.Be=t})),this.Ve=null,this.je=new Promise((t=>{this.Ve=t})),this.ze=null,this.Ke=null,this.Ye=new se(this.t,(()=>this._.contentWindow),this.Ce,!0)}getMode(){return Kt.IFRAME}connect(){if(!function(t){if("isConnected"in t)return t.isConnected;const e=t.ownerDocument&&t.ownerDocument.documentElement;return e&&e.contains(t)||!1}(this._))throw new Error("iframe must be in DOM");return this.Ye.connect(this.De.bind(this)),this._.src=this.W,this.We}disconnect(){this.Ge=!1,this.Ye.disconnect()}acceptResult(){return this.je}getTargetWin(){return this._.contentWindow||null}message(t){this.Ye.customMessage(t)}onMessage(t){this.Ye.onCustomMessage(t)}messageChannel(t){return this.Ye.askChannel(t)}whenReady(){return this.ae}onResizeRequest(t){this.ze=t,Promise.resolve().then((()=>{null!=this.Ke&&t(this.Ke)}))}resized(){if(!this.Ge)return;const t=this._.offsetHeight;this.Ye.sendCommand("resized",{height:t})}De(t,e){if("connect"==t)this.Ge=!0,this.Ye.sendStartCommand(this.l),this.Fe();else if("result"==t){if(this.Ve){const t=e.code,s=t==Yt.FAILED?new Error(e.data||""):e.data,i=new $t(t,s,Kt.IFRAME,this.Ye.getTargetOrigin(),!0,!0);Qt(this.t,i,this.Ve),this.Ve=null,this.Ye.sendCommand("close"),this.disconnect()}}else"ready"==t?this.Be&&(this.Be(),this.Be=null):"resize"==t&&(this.Ke=e.height,this.ze&&this.ze(this.Ke))}};class re{constructor(t,e,s,i,n,r){if(!i||"_blank"!=i&&"_top"!=i&&"_"==i[0])throw new Error('The only allowed targets are "_blank", "_top" and name targets');this.t=t,this.$e=e,this.W=s,this.qe=i,this.l=n||null,this.Te=r||{},this.Fe=null,this.We=new Promise((t=>{this.Fe=t})),this.Ve=null,this.je=new Promise((t=>{this.Ve=t})),this.He=null,this.Je=null,this.Ye=null}getMode(){return"_top"==this.qe?Kt.REDIRECT:Kt.POPUP}open(){return this.Xe()}whenConnected(){return this.We}disconnect(){if(this.Je&&(this.t.clearInterval(this.Je),this.Je=null),this.Ye&&(this.Ye.disconnect(),this.Ye=null),this.He){try{this.He.close()}catch(t){}this.He=null}this.Ve=null}getTargetWin(){return this.He}acceptResult(){return this.je}message(t){this.Ye.customMessage(t)}onMessage(t){this.Ye.onCustomMessage(t)}messageChannel(t){return this.Ye.askChannel(t)}Xe(){const t=this.Qe();let e,s=this.W;if(!this.Te.skipRequestInUrl){const t=this.Te.returnUrl||function(t){const e=t.indexOf("#");return-1==e?t:t.substring(0,e)}(this.t.location.href);s=function(t,e,s){return t+(-1==t.indexOf("#")?"#":"&")+encodeURIComponent("__WA__")+"="+encodeURIComponent(s)}(s,0,function(t){const e={requestId:t.requestId,returnUrl:t.returnUrl,args:t.args};return void 0!==t.origin&&(e.origin=t.origin),void 0!==t.originVerified&&(e.originVerified=t.originVerified),JSON.stringify(e)}({requestId:this.$e,returnUrl:t,args:this.l}))}let i=this.qe;"_top"!=i&&Zt(this.t)&&(i="_top");try{e=this.t.open(s,i,t)}catch(n){}if(!e&&"_top"!=i&&!this.Te.disableRedirectFallback){i="_top";try{e=this.t.open(s,i)}catch(n){}}return e?(this.He=e,"_top"!=i&&this.Ze()):this.ts(new Error("failed to open window")),this.je.catch((()=>{}))}Qe(){const t=this.t.screen,e=t.availWidth||t.width,s=t.availHeight||t.height,i=this.ss(),n=te(this.t),r=i&&this.t.outerWidth>this.t.innerWidth?Math.min(100,this.t.outerWidth-this.t.innerWidth):n?100:0,o=i&&this.t.outerHeight>this.t.innerHeight?Math.min(100,this.t.outerHeight-this.t.innerHeight):n?100:0,a=Math.max(e-r,.5*e),h=Math.max(s-o,.5*s);let l=Math.floor(Math.min(600,.9*a)),c=Math.floor(Math.min(600,.9*h));this.Te.width&&(l=Math.min(this.Te.width,a)),this.Te.height&&(c=Math.min(this.Te.height,h));const u=Math.floor((t.width-l)/2),d=Math.floor((t.height-c)/2),p={height:c,width:l,resizable:"yes",scrollbars:"yes"};n||(p.left=u,p.top=d);let m="";for(const g in p)m&&(m+=","),m+=`${g}=${p[g]}`;return m}ss(){return this.t==this.t.top}Ze(){this.Je=this.t.setInterval((()=>{this.ns(!0)}),500),this.Ye=new se(this.t,this.He,null,!0),this.Ye.connect(this.De.bind(this))}ns(t){this.He&&!this.He.closed||(this.Je&&(this.t.clearInterval(this.Je),this.Je=null),this.t.setTimeout((()=>{try{this.rs(Yt.CANCELED,null)}catch(t){this.ts(t)}}),t?3e3:0))}ts(t){this.Ve&&this.Ve(Promise.reject(t)),this.disconnect()}rs(t,e){if(this.Ve){const s=this.Ye.isConnected(),i=new $t(t,e,Kt.POPUP,s?this.Ye.getTargetOrigin():Jt(this.W),s,s);Qt(this.t,i,this.Ve),this.Ve=null}this.Ye&&this.Ye.sendCommand("close"),this.disconnect()}De(t,e){if("connect"==t)this.Ye.sendStartCommand(this.l),this.Fe();else if("result"==t){const t=e.code,s=t==Yt.FAILED?new Error(e.data||""):e.data;this.rs(t,s)}else"check"==t&&this.t.setTimeout((()=>this.ns()),200)}}class oe{constructor(t,e,s,i,n){this.t=t,this.os=e,this.hs=s,this.Ce=i,this.ls=n}getMode(){return Kt.REDIRECT}acceptResult(){const t=new $t(this.os,this.hs,Kt.REDIRECT,this.Ce,this.ls,!1);return new Promise((e=>{Qt(this.t,t,e)}))}}var ae={ActivityPorts:class{constructor(t){this.version="1.24",this.t=t,this.us=t.location.hash,this.ds={},this.ps={},this.gs=null,this.fs=new Promise((t=>{this.gs=t}))}openIframe(t,e,s){const i=new ne(t,e,s);return i.connect().then((()=>i))}open(t,e,s,i,n){return{targetWin:this.ws(t,e,s,i,n).getTargetWin()}}openWithMessaging(t,e,s,i,n){const r=this.ws(t,e,s,i,n);return r.whenConnected().then((()=>r))}onResult(t,e){let s=this.ds[t];s||(s=[],this.ds[t]=s),s.push(e);const i=this.Es(t);i&&this._s(i,e)}onRedirectError(t){this.fs.then(t)}ws(t,e,s,i,n){const r=new re(this.t,t,e,s,i,n);return r.open().then((()=>{this.bs(t,r)})),r}Es(t){let e=this.ps[t];if(!e&&this.us){try{e=function(t,e,s){const i="__WA_RES__",n=(r=i,(o=e,o?(/^[?#]/.test(o)?o.slice(1):o).split("&").reduce(((t,e)=>{const s=e.split("="),i=decodeURIComponent(s[0]||""),n=decodeURIComponent(s[1]||"");return i&&(t[i]=n),t}),{}):{})[r]);var r,o;if(!n)return null;const a=JSON.parse(n);if(!a||a.requestId!=s)return null;const h=function(t,e){if(!t)return t;const s=encodeURIComponent(e)+"=";let i=-1;do{if(i=t.indexOf(s,i),-1!=i){const e=i>0?t.substring(i-1,i):"";if(""==e||"?"==e||"#"==e||"&"==e){let e=t.indexOf("&",i+1);-1==e&&(e=t.length),t=t.substring(0,i)+t.substring(e+1)}else i++}}while(-1!=i&&i<t.length);return t}(t.location.hash,i)||"";if(h!=t.location.hash&&t.history&&t.history.replaceState)try{t.history.replaceState(t.history.state,"",h)}catch(p){}const l=a.code,c=a.data,u=a.origin,d=t.document.referrer&&Jt(t.document.referrer);return new oe(t,l,c,u,u==d)}(this.t,this.us,t)}catch(s){!function(t){setTimeout((()=>{throw t}))}(s),this.gs(s)}e&&(this.ps[t]=e)}return e}_s(t,e){Promise.resolve().then((()=>{e(t)}))}bs(t,e){const s=this.ds[t];s&&s.forEach((t=>{this._s(e,t)})),this.ps[t]=e}},ActivityIframePort:ne,ActivityMessagingPort:class{getTargetWin(){}message(t){}onMessage(t){}messageChannel(t){}},ActivityMode:Kt,ActivityOpenOptions:void 0,ActivityPort:class{getMode(){}acceptResult(){}},ActivityRequest:void 0,ActivityResult:$t,ActivityResultCode:Yt,ActivityWindowPort:re,createAbortError:Xt,isAbortError:function(t){return!(!t||"object"!=typeof t)&&t.name===qt}};const he=t({__proto__:null,default:jt(ae)},[ae]);class le{constructor(t){this.m=t}acceptResult(){return this.m.acceptResult()}}var ce=(t=>(t[t.PROCESS_EVENT=0]="PROCESS_EVENT",t[t.CANCEL_EVENT=1]="CANCEL_EVENT",t))(ce||{});function ue(t){return"[object Object]"===Object.prototype.toString.call(t)}function de(t,e){return Object.values(t).includes(e)}function pe(t){return"function"==typeof t}function me(t){return"boolean"==typeof t}function ge(t,e){return"Event has an invalid "+t+"("+e+")"}class fe{constructor(t){this.Ts=t,this.ys=[],this.Is=[],this.lastAction=null}static isPublisherEvent(t){return t.eventOriginator===w.PROPENSITY_CLIENT||t.eventOriginator===w.PUBLISHER_CLIENT}registerEventListener(t){if(!pe(t))throw new Error("Event manager listeners must be a function");this.ys.push(t)}registerEventFilterer(t){if(!pe(t))throw new Error("Event manager filterers must be a function");this.Is.push(t)}logEvent(t,e){!function(t){if(!ue(t))throw new Error("Event must be a valid object");if(!de(m,t.eventType))throw new Error(ge("eventType",t.eventType));if(!de(w,t.eventOriginator))throw new Error(ge("eventOriginator",t.eventOriginator));if(!ue(t.additionalParameters)&&null!=t.additionalParameters)throw new Error(ge("additionalParameters",t.additionalParameters));if(null!=t.isFromUserAction&&!me(t.isFromUserAction))throw new Error(ge("isFromUserAction",t.isFromUserAction))}(t),this.lastAction=this.xe(t,e)}async xe(t,e){await this.Ts;for(const i of this.Is)try{if(i(t)===ce.CANCEL_EVENT)return}catch(s){J(s)}for(const i of this.ys)try{i(t,e)}catch(s){J(s)}}logSwgEvent(t,e=!1,s=null){this.logEvent({eventType:t,eventOriginator:w.SWG_CLIENT,isFromUserAction:e,additionalParameters:s})}getReadyPromise(){return this.Ts}}let we=null;function Ee(t){if(!we){we={};let s="replace-subscription,update-google-transaction-id,smartbox,pay-client-redirect,disable-desktop-miniprompt,logging-audience-activity,use_article_endpoint_classic:10";try{const e=bt(t.location.hash)["swg.experiments"];e&&(s+=","+e)}catch(e){u.throwAsync(e)}for(let i of s.split(","))if(i=i.trim(),i)try{_e(t,we,i)}catch(e){u.throwAsync(e)}}return we}function _e(t,e,s){let i,n,r=!1;const o=s.indexOf(":");if(-1==o?(i=s,n=100,r=!1):(i=s.substring(0,o).trim(),"c"==(s=s.substring(o+1)).substring(s.length-1)&&(r=!0,s=s.substring(0,s.length-1)),n=parseInt(s,10)),isNaN(n))throw new Error("invalid fraction");let a;if(n>99)a=!0;else if(n<1)a=!1;else if(t.sessionStorage){r=r&&n<=20;try{const e="subscribe.google.com:e:"+i+":"+n+(r?"c":"");let s="e"==(h=t.sessionStorage.getItem(e))?"e":"c"==h?"c":null;!s&&100*Math.random()<=n*(r?2:1)&&(s=!r||Math.random()<=.5?"e":"c",t.sessionStorage.setItem(e,s)),a=!!s,"c"==s&&(i="c-"+i)}catch(l){a=!1,u.throwAsync(l)}}else a=!1;var h;e[i]=a}function be(t,e){return Ee(t)[e]||!1}function Te(t){const e=Ee(t),s=[];for(const i in e)e[i]&&s.push(i);return s}const ye="0123456789ABCDEF",Ie={"align-content":"normal",animation:"none","align-items":"normal","align-self":"auto","alignment-baseline":"auto","backface-visibility":"hidden","background-clip":"border-box","background-image":"none","baseline-shift":"0","block-size":"auto",border:"none","border-collapse":"separate",bottom:"0","box-sizing":"border-box","break-after":"auto","break-before":"auto","break-inside":"auto","buffered-rendering":"auto","caption-side":"top","caret-color":"rgb(51, 51, 51)",clear:"none",color:"rgb(51, 51, 51)","color-rendering":"auto","column-count":"auto","column-fill":"balance","column-gap":"normal","column-rule-color":"rgb(51, 51, 51)","column-rule-style":"none","column-rule-width":"0","column-span":"none","column-width":"auto",contain:"none","counter-increment":"none","counter-reset":"none",cursor:"auto",direction:"inherit",display:"block","empty-cells":"show",filter:"none",flex:"none","flex-flow":"row nowrap",float:"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1",font:"none","font-size":"medium","font-family":"",height:"auto",hyphens:"manual","image-rendering":"auto","inline-size":"",isolation:"auto","justify-content":"normal","justify-items":"normal","justify-self":"auto","letter-spacing":"normal","lighting-color":"rgb(255, 255, 255)","line-break":"auto","line-height":"normal","margin-bottom":"0",mask:"none","max-block-size":"none","max-height":"none","max-inline-size":"none","max-width":"none","min-block-size":"none","min-height":"0","min-inline-size":"0","min-width":"0","mix-blend-mode":"normal","object-fit":"fill","offset-distance":"none","offset-path":"none","offset-rotate":"auto 0deg",opacity:"1",order:"0",orphans:"2",outline:"none","overflow-anchor":"auto","overflow-wrap":"normal",overflow:"visible",padding:"0",page:"",perspective:"none","pointer-events":"auto",position:"static",quotes:"",resize:"none",right:"0","scroll-behavior":"auto","tab-size":"8","table-layout":"auto","text-align":"start","text-align-last":"auto","text-anchor":"start","text-combine-upright":"none","text-decoration":"none","text-indent":"0","text-orientation":"mixed","text-overflow":"clip","text-rendering":"auto","text-shadow":"none","text-size-adjust":"auto","text-transform":"none","text-underline-position":"auto",top:"auto","touch-action":"auto",transform:"none",transition:"none 0s ease 0s","unicode-bidi":"normal","user-select":"auto","vector-effect":"none","vertical-align":"baseline",visibility:"visible","white-space":"normal",widows:"2","word-break":"normal","word-spacing":"0","word-wrap":"normal","writing-mode":"horizontal-tb",zoom:"1","z-index":"auto"};function Ce(t,e){for(const[s,i]of Object.entries(e))t.style.setProperty(s,i.toString(),"important")}function Se(t,e,s){t.style.setProperty(e,s)}function Oe(t){return new F([Math.floor(t/1e3),t%1e3*1e6],!1)}const Re={opacity:"0",position:"absolute",top:"-10px",left:"-10px",height:"1px",width:"1px"},Ae="AnalyticsService timed out waiting for a response";function Ne(t){const e=new A;return e.setComplete(!1),e.setError(t),e}class ve{constructor(t){var e;this.Jt=t,this.$=new b,this.Cs=!1,this.Ss=!1,this.Os=null,this.Rs=[],this.T=null,this.As=null,this.Ns=!1,this.vs=null,this.Ps=0,this.lastAction=null,this.g=t.doc(),this.o=t.activities(),this._=o(this.g.getWin().document,"iframe",{}),Ce(this._,Re),null==(e=this.g.getBody())||e.appendChild(this.getElement()),this.xs(),this.ie=t.eventManager(),this.ie.registerEventListener(this.Ls.bind(this))}ks(){return Oe(Date.now())}setReadyForLogging(){this.Ns=!0;for(const t of this.Rs)this.Ls(t)}setTransactionId(t){const e=this.$.getTransactionId();if(this.$.setTransactionId(t),null!=e&&e!=t){const t=m.EVENT_NEW_TX_ID,s=new R;s.setOldTransactionId(e),this.ie.logSwgEvent(t,!0,s)}}getTransactionId(){return this.$.getTransactionId()}getSku(){return this.$.getSku()}setSku(t){this.$.setSku(t)}setUrl(t){this.$.setUrl(t)}addLabels(t){if(t&&t.length>0){const e=[].concat(this.$.getLabelList());for(const s of t)-1==e.indexOf(s)&&e.push(s);this.$.setLabelList(e)}}getElement(){return this._}Ms(){return this.g.getWin().location.search}Us(){return this.g.getWin().document.referrer}xs(){const t=this.$;t.setTransactionId(function(){let t=function(){const t=Date.now().toString(16);return t.substring(t.length-8).toUpperCase()}()+"-",e=0;const s=function(t,e){const s=new Uint8Array(23);self.crypto.getRandomValues(s);for(let i=s.length-1;i>-1;i--)s[i]=s[i]%16;return s}();for(let n=9;n<36;n++)switch(n){case 13:case 18:case 23:t+="-";break;case 14:t+="4";break;case 19:t+=(i=s[e++],ye[3&i|8]);break;default:t+=ye[s[e++]]}var i;return t}()+".swg"),t.setReferringOrigin(_t(this.Us()).origin),t.setClientVersion(`SwG ${s}`),t.setUrl(It(this.g));const e=bt(this.Ms()),i=e.utm_campaign,n=e.utm_medium,r=e.utm_source;i&&t.setUtmCampaign(i),n&&t.setUtmMedium(n),r&&t.setUtmSource(r)}start(){return this.T||(this.addLabels(Te(this.g.getWin())),this.T=this.preparePort()),this.T}async preparePort(){let t;try{t=await this.o.openIframe(this._,Pt("/serviceiframe"),null,!0)}catch(e){return this.Ss=!0,this.Ds(Ne("Could not connect ["+e+"]")),null}return t.on(A,this.Ds.bind(this)),await t.whenReady(),this.addLabels(Te(this.g.getWin())),t}setReadyToPay(t){this.$.setReadyToPay(t)}close(){var t;null==(t=this.g.getBody())||t.removeChild(this.getElement())}getContext(){return this.$}Gs(t){const e=new T;e.setEventOriginator(t.eventOriginator),e.setIsFromUserAction(!!t.isFromUserAction),this.$.setClientTimestamp(this.ks());const s=new y;return s.setEvent(t.eventType),s.setContext(this.$),s.setMeta(e),t.additionalParameters instanceof R&&s.setParams(t.additionalParameters),s}Fs(){return!0===this.Jt.config().enableSwgAnalytics}Ls(t){t.eventType!==m.EVENT_SUBSCRIPTION_STATE&&t.eventOriginator!==w.SHOWCASE_CLIENT&&(fe.isPublisherEvent(t)&&!this.Fs()||(this.Ns?(this.Ps++,this.lastAction=this.Ws(t)):this.Rs.push(t)))}async Ws(t){const e=await this.start(),s=this.Gs(t);null==e||e.execute(s)}Ds(t){const e=(null==t?void 0:t.getComplete())||!1,s=(null==t?void 0:t.getError())||"Unknown logging Error",i=s===Ae;e||J("Error when logging: "+s),this.Ps--,i||(this.Cs=!0),null!==this.Os&&(0===this.Ps||this.Ss||i)&&(null!==this.vs&&(clearTimeout(this.vs),this.vs=null),this.Os(e),this.As=null,this.Os=null)}getLoggingPromise(){return 0===this.Ps||this.Ss?Promise.resolve(!0):(null===this.As&&(this.As=new Promise((t=>{this.Os=t})),this.vs=self.setTimeout((()=>{this.vs=null,this.Ds(Ne(Ae))}),this.Cs?200:500)),this.As)}}const Pe={en:"Subscribe with Google",ar:"Google اشترك مع",de:"Abonnieren mit Google","en-au":"Subscribe with Google","en-ca":"Subscribe with Google","en-gb":"Subscribe with Google","en-us":"Subscribe with Google",es:"Suscríbete con Google","es-419":"Suscríbete con Google","es-latam":"Suscríbete con Google","es-latn":"Suscríbete con Google",fr:"S'abonner avec Google","fr-ca":"S'abonner avec Google",hi:"Google के ज़रिये सदस्यता",id:"Berlangganan dengan Google",it:"Abbonati con Google",ja:"Google で購読",ko:"Google 을 통한구독",ms:"Langgan dengan Google",nl:"Abonneren via Google",no:"Abonner med Google",pl:"Subskrybuj z Google",pt:"Subscrever com o Google","pt-br":"Assine com o Google",ru:"Подпиcка через Google",sv:"Prenumerera med Google",th:"สมัครฟาน Google",tr:"Google ile Abone Ol",uk:"Підписатися через Google","zh-cn":"通过 Google 订阅","zh-hk":"透過 Google 訂閱","zh-tw":"透過 Google 訂閱"},xe={en:"Contribute with Google",ar:"المساهمة باستخدام Google",de:"Mit Google beitragen","en-au":"Contribute with Google","en-ca":"Contribute with Google","en-gb":"Contribute with Google","en-us":"Contribute with Google",es:"\tContribuye con Google","es-419":"Contribuir con Google","es-latam":"Contribuir con Google","es-latn":"Contribuye con Google",fr:"Contribuer avec Google","fr-ca":"Contribuer avec Google",hi:"Google खाते की मदद से योगदान करें",id:"Berkontribusi dengan Google",it:"Contribuisci con Google",ja:"Google で寄付",ko:"Google을 통해 참여하기",ms:"Sumbangkan dengan Google",nl:"Bijdragen met Google",no:"Bidra med Google",pl:"Wesprzyj publikację przez Google",pt:"Contribuir utilizando o Google","pt-br":"Contribua usando o Google",ru:"Внести средства через Google",sv:"Bidra med Google",th:"มีส่วนร่วมผ่าน Google",tr:"Google ile Katkıda Bulun",uk:"Зробити внесок через Google","zh-cn":"通过 Google 捐赠","zh-hk":"透過 Google 提供內容","zh-tw":"透過 Google 捐款"},Le={en:"You have signed up before.",ar:"سبق أن اشتركت في النشرة الإخبارية.",de:"Du hast dich bereits angemeldet.","en-au":"You have signed up before.","en-ca":"You have signed up before.","en-gb":"You have signed up before.","en-us":"You have signed up before.",es:"Ya te has registrado anteriormente.","es-419":"Ya te registraste antes.",fr:"Vous vous êtes déjà inscrit.","fr-ca":"Vous vous êtes inscrit auparavant.",hi:"न्यूज़लेटर के लिए पहले ही साइन अप किया जा चुका है.",id:"Anda telah mendaftar sebelumnya.",it:"Hai già effettuato l'iscrizione.",ja:"すでに登録されています。",ko:"이전에 가입한 사용자입니다.",ms:"Anda sudah mendaftar sebelum ini.",nl:"Je hebt je al eerder aangemeld.",no:"Du er allerede registrert.",pl:"Już wcześniej się zarejestrowałeś(-aś).",pt:"Já se inscreveu anteriormente.","pt-br":"Você se inscreveu anteriormente.",ru:"Вы уже зарегистрированы.",sv:"Du har redan registrerat dig.",th:"คุณสมัครรับข้อมูลมาก่อนแล้ว",tr:"Daha önce kaydolmuştunuz.",uk:"Ви вже зареєструвалися.","zh-cn":"您之前已注册。","zh-hk":"您之前已訂閱。","zh-tw":"你已經訂閱了。"},ke={en:"Registration failed. Try registering again.",ar:"تعذَّرت عملية التسجيل. يُرجى إعادة المحاولة.",de:"Registrierung fehlgeschlagen. Versuche es noch einmal.","en-au":"Registration failed. Try registering again.","en-ca":"Registration failed. Try registering again.","en-gb":"Registration failed. Try registering again.","en-us":"Registration failed. Try registering again.",es:"No se ha podido completar el registro. Prueba a registrarte de nuevo.","es-419":"No se pudo completar el registro. Vuelve a intentarlo.",fr:"Échec de l'enregistrement. Réessayez.","fr-ca":"Échec de l'inscription. Essayez de vous inscrire à nouveau.",hi:"रजिस्ट्रेशन नहीं हो सका. फिर से रजिस्टर करने की कोशिश करें.",id:"Pendaftaran gagal. Coba daftar lagi.",it:"Registrazione non riuscita. Prova a registrarti di nuovo.",ja:"登録できませんでした。もう一度お試しください。",ko:"등록에 실패했습니다. 다시 등록해 보세요.",ms:"Pendaftaran gagal. Cuba mendaftar lagi.",nl:"Registratie mislukt. Probeer opnieuw te registreren.",no:"Registreringen mislyktes. Prøv å registrere deg på nytt.",pl:"Rejestracja się nie udała. Spróbuj jeszcze raz się zarejestrować.",pt:"Falha no registo. Tente registar-se novamente.","pt-br":"Não foi possível fazer o registro. Tente novamente.",ru:"Ошибка регистрации. Повторите попытку.",sv:"Registreringen misslyckades. Försök att registrera dig igen.",th:"ลงทะเบียนไม่สำเร็จ ลองลงทะเบียนอีกครั้ง",tr:"Kayıt işlemi başarısız oldu. Tekrar kaydolmayı deneyin.",uk:"Помилка реєстрації. Повторіть спробу.","zh-cn":"注册失败。请尝试重新注册。","zh-hk":"註冊失敗。請嘗試重新註冊。","zh-tw":"註冊失敗，請再試一次。"},Me={en:"Signup failed. Try signing up again.",ar:"تعذَّرت عملية الاشتراك. يُرجى إعادة المحاولة.",de:"Anmeldung fehlgeschlagen. Versuche es noch einmal.","en-au":"Sign-up failed. Try signing up again.","en-ca":"Sign-up failed. Try signing up again.","en-gb":"Sign-up failed. Try signing up again.","en-us":"Sign-up failed. Try signing up again.",es:"No se ha podido completar la suscripción. Prueba a suscribirte de nuevo.","es-419":"Se produjo un error de registro. Vuelve a intentarlo.",fr:"Échec de l'inscription. Réessayez.","fr-ca":"Échec de l'inscription. Essayez de vous inscrire à nouveau.",hi:"साइन अप नहीं किया जा सका. फिर से साइन अप करने की कोशिश करें.",id:"Pendaftaran gagal. Coba daftar lagi.",it:"Iscrizione non riuscita. Prova a iscriverti di nuovo.",ja:"登録できませんでした。もう一度お試しください。",ko:"가입에 실패했습니다. 다시 가입해 보세요.",ms:"Daftar gagal. Cuba daftar lagi.",nl:"Aanmelding mislukt. Probeer opnieuw aan te melden.",no:"Registreringen mislyktes. Prøv å registrere deg på nytt.",pl:"Rejestracja się nie udała. Spróbuj jeszcze raz się zarejestrować.",pt:"Falha na inscrição. Tente inscrever-se novamente.","pt-br":"Não foi possível se inscrever. Tente novamente.",ru:"Не удалось зарегистрироваться. Повторите попытку.",sv:"Registreringen misslyckades. Försök att registrera dig igen.",th:"ลงชื่อสมัครใช้ไม่สำเร็จ ลองลงชื่อสมัครใช้อีกครั้ง",tr:"Kaydolma işlemi başarısız oldu. Tekrar kaydolmayı deneyin.",uk:"Помилка реєстрації. Повторіть спробу.","zh-cn":"注册失败。请尝试重新注册。","zh-hk":"申請失敗。請嘗試重新申請。","zh-tw":"訂閱失敗，請再試一次。"},Ue={en:'Created an account with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',ar:'تم إنشاء حساب باستخدام <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>.',de:'Konto bei <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> wurde erstellt',"en-au":'Created an account with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"en-ca":'Created an account with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"en-gb":'Created an account with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"en-us":'Created an account with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',es:'Has creado una cuenta con <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"es-419":'Se creó una cuenta con <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',fr:'A créé un compte avec <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"fr-ca":'Un compte a été créé avec l\'adresse <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',hi:'<ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> का इस्तेमाल करके, एक खाता बनाया गया',id:'Membuat akun dengan <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',it:'È stato creato un account con l\'indirizzo <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',ja:'<ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> でアカウントを作成しました',ko:'<ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>(으)로 계정을 만들었습니다.',ms:'Membuat akaun dengan <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',nl:'Account gemaakt met <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',no:'Du har opprettet en konto med <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',pl:'Utworzono konto za pomocą adresu <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',pt:'Criou uma conta com <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"pt-br":'Conta criada com o e-mail <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',ru:'Вы зарегистрировали аккаунт на адрес <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>.',sv:'Du skapade ett konto med <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',th:'สร้างบัญชีด้วย <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',tr:'<ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> ile bir hesap oluşturun',uk:'Обліковий запис створено за допомогою електронної адреси <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"zh-cn":'已使用 <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> 创建帐号',"zh-hk":'已使用 <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> 建立帳戶',"zh-tw":'已使用 <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> 建立帳戶'},De={en:'Signed up with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> for the newsletter',ar:'تم الاشتراك في النشرة الإخبارية باستخدام <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>.',de:'Du hast dich für den Newsletter von <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> angemeldet',"en-au":'Signed up with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> for the newsletter',"en-ca":'Signed up with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> for the newsletter',"en-gb":'Signed up with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> for the newsletter',"en-us":'Signed up with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> for the newsletter',es:'Te has suscrito a la newsletter con <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"es-419":'Te registraste con <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> para recibir el boletín informativo',fr:'S\'est abonné à la newsletter avec <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"fr-ca":"Vous êtes inscrit au bulletin d'information avec l'adresse <ph name=\"EMAIL\"><ex>user@gmail.com</ex>%s</ph>",hi:'न्यूज़लेटर पाने के लिए, <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> से साइन अप किया गया',id:'Mendaftar dengan <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> untuk mendapatkan newsletter',it:'Iscrizione alla newsletter con l\'indirizzo <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> effettuata',ja:'<ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> でニュースレターを登録しました',ko:'<ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>(으)로 뉴스레터에 가입했습니다.',ms:'Mendaftar dengan <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> untuk surat berita',nl:'Aangemeld met <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> voor de nieuwsbrief',no:'Du har registrert deg for nyhetsbrevet med <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',pl:'Zapisano się na newsletter za pomocą adresu <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',pt:'Inscreveu-se com <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> no boletim informativo',"pt-br":'Inscrição na newsletter feita com o e-mail <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',ru:'Вы подписались на новостную рассылку, используя аккаунт <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>.',sv:'Du registrerade dig för nyhetsbrevet med <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',th:'ลงชื่อเข้าใช้ด้วย <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> สำหรับจดหมายข่าว',tr:'Bülten için <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> ile kaydoldunuz',uk:'Ви підписалися на інформаційні листи на електронну адресу <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"zh-cn":'已使用 <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> 订阅简报',"zh-hk":'已使用 <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> 註冊通訊',"zh-tw":'已使用 <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> 訂閱電子報'},Ge={frameborder:"0",scrolling:"no"};var Fe=(t=>(t.LIGHT="light",t.DARK="dark",t))(Fe||{});class We{constructor(t,e,s,i){this.Jt=t,this.Bs=e,this.Te=s,this.Vs=i,this.h=Pt("/smartboxiframe"),this.o=t.activities(),this._=o(t.win().document,"iframe",Ge);const n={publicationId:this.Jt.pageConfig().getPublicationId(),theme:this.Te&&this.Te.theme||"light",lang:this.Te&&this.Te.lang||"en"},r=this.Te&&this.Te.messageTextColor;r&&(n.messageTextColor=r),this.l=Lt(n)}js(t){var e;t&&t.getIsClicked()&&(null==(e=this.Vs)||e.call(this))}start(){Ce(this._,{opacity:"1",position:"absolute",top:"0",bottom:"0",left:"0",height:"100%",right:"0",width:"100%"}),this.Bs.appendChild(this._);const t=this.o.addDefaultArguments(this.l);return this.o.openIframe(this._,this.h,t).then((t=>{t.on(x,this.js.bind(this))})),this._}}function Be(t,e){const s=t.en;if("object"!=typeof t||!e)return s;let i="string"==typeof e?e:(n=e).lang?n.lang:(null==(o=null==(r=null==n?void 0:n.ownerDocument)?void 0:r.documentElement)?void 0:o.lang)?n.ownerDocument.documentElement.lang:"en";var n,r,o;i=i.toLowerCase(),i=i.replace(/_/g,"-");const a=i.split("-");for(;a.length;){const e=a.join("-");if(e in t)return t[e];a.pop()}return s}const Ve='<div class="swg-button-v2-icon-$theme$"></div>$textContent$';class je{constructor(t,e){this.g=t,this.zs=e}init(){const t=this.g.getHead();if(!t)return;const e=`${i}/swg-button.css`;t.querySelector(`link[href="${e}"]`)||t.appendChild(o(this.g.getWin().document,"link",{rel:"stylesheet",type:"text/css",href:e}))}create(t,e){const s=o(this.g.getWin().document,"button",{});return this.attach(s,t,e)}attach(t,e,s){const i=this.Ks(t,m.ACTION_SWG_BUTTON_CLICK,e,s).options,n=i.theme;return t.classList.add(`swg-button-${n}`),t.setAttribute("role","button"),i.lang&&t.setAttribute("lang",i.lang),t.setAttribute("title",Be(Pe,t)),this.Ys(m.IMPRESSION_SWG_BUTTON),t}attachSubscribeButton(t,e,s){const i=this.Ks(t,m.ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK,e,s).options,n=i.theme;return t.classList.add(`swg-button-v2-${n}`),t.setAttribute("role","button"),i.lang&&t.setAttribute("lang",i.lang),i.enable||t.setAttribute("disabled","disabled"),t.innerHTML=Ve.replace("$theme$",n).replace("$textContent$",Be(Pe,t)),this.Ys(m.IMPRESSION_SHOW_OFFERS_SWG_BUTTON),t}attachContributeButton(t,e,s){const i=this.Ks(t,m.ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK,e,s).options,n=i.theme;return t.classList.add(`swg-button-v2-${n}`),t.setAttribute("role","button"),i.lang&&t.setAttribute("lang",i.lang),i.enable||t.setAttribute("disabled","disabled"),t.innerHTML=Ve.replace("$theme$",n).replace("$textContent$",Be(xe,t)),this.Ys(m.IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON),t}attachButtonsWithAttribute(t,e,s,i){for(const n of e){const e=Array.from(this.g.getRootNode().querySelectorAll(`[${t}="${n}"]`));for(const t of e)"subscription"===n?this.attachSubscribeButton(t,s,i[n]):"contribution"===n&&this.attachContributeButton(t,s,i[n])}}async Ys(t,e){(await this.zs).eventManager().logSwgEvent(t,e)}$s(t){const e=t&&"function"!=typeof t?t:{theme:Fe.LIGHT},s=e.theme;return s!==Fe.LIGHT&&s!==Fe.DARK&&(e.theme=Fe.LIGHT),e}qs(t,e){return("function"==typeof t?t:null)||e}Ks(t,e,s,i){const n=this.$s(s),r=this.qs(s,i),o=t=>{this.Ys(e,!0),"function"==typeof r&&r(t)};return t.addEventListener("click",o),{options:n,clickFun:o}}attachSmartButton(t,e,s,i){const n=this.Ks(e,m.ACTION_SWG_BUTTON_CLICK,s,i);return e.classList.add("swg-smart-button"),new We(t,e,n.options,n.clickFun).start()}}class ze{constructor(){this.Hs={},this.ps={},this.Js=null}setOnEntitlementsResponse(t){this.Xs(1,t)}triggerEntitlementsResponse(t){return this.Qs(1,t.then((t=>t.clone())))}hasEntitlementsResponsePending(){return!!this.ps[1]}setOnLoginRequest(t){this.Xs(4,t)}triggerLoginRequest(t){return this.Qs(4,t)}setOnLinkProgress(t){this.Xs(5,t)}triggerLinkProgress(){return this.Qs(5,!0)}resetLinkProgress(){this.Zs(5)}setOnLinkComplete(t){this.Xs(6,t)}triggerLinkComplete(){return this.Qs(6,!0)}hasLinkCompletePending(){return!!this.ps[6]}setOnPayConfirmOpened(t){this.Xs(9,t)}triggerPayConfirmOpened(t){return this.Qs(9,t)}setOnSubscribeRequest(t){this.Xs(2,t)}triggerSubscribeRequest(){return this.Qs(2,!0)}hasSubscribeRequestCallback(){return!!this.Hs[2]}setOnOffersFlowRequest(t){this.Xs(10,t)}triggerOffersFlowRequest(){return this.Qs(10,!0)}hasOffersFlowRequestCallback(){return!!this.Hs[10]}setOnSubscribeResponse(t){X("[swg.js:setOnSubscribeResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'"),this.Xs(3,t)}setOnContributionResponse(t){X("[swg.js:setOnContributionResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'"),this.Xs(3,t)}setOnPaymentResponse(t){this.Xs(3,t)}triggerPaymentResponse(t){return this.Js=t.then((t=>{this.Qs(3,Promise.resolve(t.clone()))}),(t=>{if(!l(t))throw t})),!!this.Hs[3]}hasPaymentResponsePending(){return!!this.ps[3]}setOnFlowStarted(t){this.Xs(7,t)}triggerFlowStarted(t,e={}){return this.Qs(7,{flow:t,data:e})}setOnFlowCanceled(t){this.Xs(8,t)}triggerFlowCanceled(t,e={}){return this.Qs(8,{flow:t,data:e})}Xs(t,e){this.Hs[t]&&X("[swg.js]: You have registered multiple callbacks for the same response."),this.Hs[t]=e,t in this.ps&&this.ti(t,e,this.ps[t])}Qs(t,e){this.ps[t]=e;const s=this.Hs[t];return s&&this.ti(t,s,e),!!s}Zs(t){t in this.ps&&delete this.ps[t]}async ti(t,e,s){await 0,e(s),this.Zs(t)}}class Ke{constructor(t,e){this.displayName=t,this.avatarUrl=e}}class Ye{constructor({displayDelaySeconds:t,numImpressionsBetweenPrompts:e,dismissalBackOffSeconds:s,maxDismissalsPerWeek:i,maxDismissalsResultingHideSeconds:n,impressionBackOffSeconds:r,maxImpressions:o,maxImpressionsResultingHideSeconds:a}){this.clientDisplayTrigger=new $e(t,e),this.explicitDismissalConfig=new qe(s,i,n),this.impressionConfig=new He(r,o,a)}}class $e{constructor(t,e){this.displayDelaySeconds=t,this.numImpressionsBetweenPrompts=e}}class qe{constructor(t,e,s){this.backOffSeconds=t,this.maxDismissalsPerWeek=e,this.maxDismissalsResultingHideSeconds=s}}class He{constructor(t,e,s){this.backOffSeconds=t,this.maxImpressions=e,this.maxImpressionsResultingHideSeconds=s}}class Je{constructor({attributionParams:t,autoPromptConfig:e,paySwgVersion:s,uiPredicates:i,useUpdatedOfferFlows:n,skipAccountCreationScreen:r}){this.autoPromptConfig=e,this.paySwgVersion=s,this.useUpdatedOfferFlows=n||!1,this.skipAccountCreationScreen=r||!1,this.uiPredicates=i,this.attributionParams=t}}class Xe{constructor(t,e,s){this.canDisplayAutoPrompt=t,this.canDisplayButton=e,this.purchaseUnavailableRegion=s}}var Qe=(t=>(t.NONE="none",t.CONTRIBUTION="contribution",t.CONTRIBUTION_LARGE="contribution_large",t.SUBSCRIPTION="subscription",t.SUBSCRIPTION_LARGE="subscription_large",t))(Qe||{}),Ze=(t=>(t.LIGHT="light",t.DARK="dark",t))(Ze||{});class ts{constructor(t,e,s,i={}){this.Jt=t,this.ei=e,this.si=s,this.ii=i,this.ni=null,this.ri=new Je({skipAccountCreationScreen:i.skipAccountCreationScreen})}fetchClientConfig(t){if(!this.ei)throw new Error("fetchClientConfig requires publicationId");return this.ni||(t=t||Promise.resolve(),this.ni=t.then((()=>this.oi()))),this.ni}getClientConfig(){return this.ni||Promise.resolve(this.ri)}async getAutoPromptConfig(){this.ni||this.fetchClientConfig();const t=await this.ni;return null==t?void 0:t.autoPromptConfig}getLanguage(){return this.ii.lang||"en"}getTheme(){const t=self.matchMedia("(prefers-color-scheme: dark)").matches?Ze.DARK:Ze.LIGHT;return this.ii.theme||t}shouldAllowScroll(){return!!this.ii.allowScroll}shouldForceLangInIframes(){return!!this.ii.forceLangInIframes&&!!this.ii.lang}async shouldEnableButton(){var t;if(this.ii.disableButton)return Promise.resolve(!1);this.ni||this.fetchClientConfig();const e=await this.ni;return null==(t=null==e?void 0:e.uiPredicates)?void 0:t.canDisplayButton}async oi(){const t=await this.Jt.entitlementsManager().getArticle();if(t)return this.ai(t.clientConfig);const e=Nt("/publication/"+encodeURIComponent(this.ei)+"/clientconfiguration"),s=await this.si.fetchCredentialedJson(e);return this.ai(s)}ai(t){var e,s,i,n,r,o,a;const h=t.paySwgVersion,l=t.autoPromptConfig;let c;l&&(c=new Ye({displayDelaySeconds:null==(e=l.clientDisplayTrigger)?void 0:e.displayDelaySeconds,dismissalBackOffSeconds:null==(s=l.explicitDismissalConfig)?void 0:s.backOffSeconds,maxDismissalsPerWeek:null==(i=l.explicitDismissalConfig)?void 0:i.maxDismissalsPerWeek,maxDismissalsResultingHideSeconds:null==(n=l.explicitDismissalConfig)?void 0:n.maxDismissalsResultingHideSeconds,impressionBackOffSeconds:null==(r=l.impressionConfig)?void 0:r.backOffSeconds,maxImpressions:null==(o=l.impressionConfig)?void 0:o.maxImpressions,maxImpressionsResultingHideSeconds:null==(a=l.impressionConfig)?void 0:a.maxImpressionsResultingHideSeconds}));const u=t.uiPredicates;let d;u&&(d=new Xe(u.canDisplayAutoPrompt,u.canDisplayButton,u.purchaseUnavailableRegion));const p=t.attributionParams;let m;return p&&(m=new Ke(p.displayName,p.avatarUrl)),new Je({autoPromptConfig:c,paySwgVersion:h,useUpdatedOfferFlows:t.useUpdatedOfferFlows,skipAccountCreationScreen:this.ii.skipAccountCreationScreen,uiPredicates:d,attributionParams:m})}}class es{constructor(t,e){this.Jt=t,this.Te=e,this.t=t.win(),this.ne=t.clientConfigManager(),this.o=t.activities(),this.he=t.dialogManager(),this.me=this.li()}async li(){var t,e,s,i;const n=null==(e=null==(t=this.Te)?void 0:t.isClosable)||e,r=await this.ne.getClientConfig();return this.fe(r)?new p(this.t,this.o,this.we(r,this.Jt.pageConfig()),Lt({productId:this.Jt.pageConfig().getProductId(),publicationId:this.Jt.pageConfig().getPublicationId(),productType:pt.UI_CONTRIBUTION,list:(null==(s=this.Te)?void 0:s.list)||"default",skus:(null==(i=this.Te)?void 0:i.skus)||null,isClosable:n,supportsEventManager:!0}),!0):null}Ee(t){t.getSubscriberOrMember()&&this.Jt.callbacks().triggerLoginRequest({linkRequested:!!t.getLinkRequested()})}ce(t){const e=t.getSku(),s=t.getOneTime();if(e){const t={skuId:e};s&&(t.oneTime=s),new Ut(this.Jt,t,pt.UI_CONTRIBUTION).start()}}async start(){const t=await this.me;if(!t)return Promise.resolve();this.Jt.callbacks().triggerFlowStarted(ct.SHOW_CONTRIBUTION_OPTIONS),t.onCancel((()=>{this.Jt.callbacks().triggerFlowCanceled(ct.SHOW_CONTRIBUTION_OPTIONS)})),t.on(_,this.Ee.bind(this)),t.on(P,this.ce.bind(this));const e=await this.ne.getClientConfig();return this.he.openView(t,!1,this.be(e,this.ne.shouldAllowScroll()))}be(t,e){return t.useUpdatedOfferFlows&&!e?{shouldDisableBodyScrolling:!0}:{}}fe(t){var e;return!1!==(null==(e=t.uiPredicates)?void 0:e.canDisplayAutoPrompt)}we(t,e){return t.useUpdatedOfferFlows?this.ne.shouldForceLangInIframes()?Pt("/contributionoffersiframe",{hl:this.ne.getLanguage(),publicationId:e.getPublicationId()}):Pt("/contributionoffersiframe",{publicationId:e.getPublicationId()}):Pt("/contributionsiframe")}async showNoEntitlementFoundToast(){(await this.me).execute(new O)}}class ss{constructor(t,e,s,i){this.entitlements=t,this.userData=e,this.purchaseDataList=s,this.Ht=i,this.purchaseData=s[0]}clone(){return new ss(this.entitlements,this.userData,this.purchaseDataList,this.Ht)}json(){return{entitlements:this.entitlements.json(),userData:this.userData.json(),purchaseDataList:this.purchaseDataList.map((t=>t.json())),purchaseData:this.purchaseData.json()}}complete(){return this.Ht()}}class is{constructor(t,e){this.Jt=t,this.oe=null,this.openPromise=null,this.t=t.win(),this.o=t.activities(),this.he=t.dialogManager(),this.Te=Object.assign({entitlements:null,consent:!0},e||{})}async start(){const t=this.Te.entitlements;if(!t||!t.getEntitlementForSource("google"))throw new Error('No entitlements with "google" source');this.Jt.callbacks().triggerFlowStarted(ct.COMPLETE_DEFERRED_ACCOUNT_CREATION),this.oe=new p(this.t,this.o,Pt("/recoveriframe"),Lt({publicationId:this.Jt.pageConfig().getPublicationId(),productId:this.Jt.pageConfig().getProductId(),entitlements:t.raw||null,consent:this.Te.consent}),!0),this.openPromise=this.he.openView(this.oe);try{const t=await this.oe.acceptResult();return this.ci(t.data)}catch(e){throw l(e)?this.Jt.callbacks().triggerFlowCanceled(ct.COMPLETE_DEFERRED_ACCOUNT_CREATION):this.he.completeView(this.oe),e}}ci(t){this.Jt.entitlementsManager().blockNextNotification();const e=t.entitlements,s=t.idToken,i=t.productType,n=this.Jt.entitlementsManager().parseEntitlements({signedEntitlements:e}),r=new ft(s,(new ht).decode(s)),o=t.purchaseDataList?t.purchaseDataList.map((t=>new gt(t.data,t.signature))):[new gt(t.purchaseData.data,t.purchaseData.signature)],a=new Gt(this.Jt),h=a.complete.bind(a),l=new ss(n,r,o,h);this.Jt.eventManager().logSwgEvent(m.ACTION_NEW_DEFERRED_ACCOUNT,!0);const c=Promise.resolve.bind(Promise);return a.start(new mt("",o[0],r,n,i,c)),l}}function ns(t){const e=function(t){return t.readyState}(t);return"loading"!==e&&"uninitialized"!==e}class rs{constructor(t){const e="document"in t;this.t=e?t:t.defaultView,this.g=e?t.document:t}getWin(){return this.t}getRootNode(){return this.g}getRootElement(){return this.g.documentElement}getHead(){return this.g.head}getBody(){return this.g.body}isReady(){return ns(this.g)}async whenReady(){var t;await(t=this.g,new Promise((e=>{!function(t,e){!function(t,e,s){if(e(t))return void s(t);let i=!1;const n=()=>{e(t)&&!i&&(s(t),i=!0,t.removeEventListener("readystatechange",n))};t.addEventListener("readystatechange",n)}(t,ns,e)}(t,e)})))}}function os(t){return"nodeType"in t||"document"in t?new rs(t):t}const as={frameborder:"0",scrolling:"no",src:"about:blank"};class hs{constructor(t,e){const s=Object.assign({},as,e);this._=o(t,"iframe",s),Ce(this._,Ie),this.ui=new Promise((t=>{this._.onload=()=>{t()}}))}whenReady(){return this.ui}getElement(){return this._}getDocument(){var t;const e=this.getElement().contentDocument||(null==(t=this.getElement().contentWindow)?void 0:t.document);if(!e)throw new Error("not loaded");return e}getBody(){return this.getDocument().body}isConnected(){return this.getElement().isConnected}}async function ls(t,e,s,i){const n=t.ownerDocument.defaultView,r=t.style.transition||"";await new Promise((r=>{n.setTimeout((()=>{n.setTimeout(r,s);const o=`${s}ms ${i}`;Ce(t,Object.assign({transition:`transform ${o}, opacity ${o}`},e))}))})),Ce(t,{transition:r})}let cs=class{constructor(t,e){this.g=t,this.di=this.g.getWin().document.createElement("swg-popup-background"),Ce(this.di,{"z-index":e.toString(),display:"none","pointer-events":"none",position:"fixed",top:"0",right:"0",bottom:"0",left:"0","background-color":"rgba(32, 33, 36, .6)"})}getElement(){return this.di}isAttached(){return!!this.di.parentNode}attach(){var t;null==(t=this.g.getBody())||t.appendChild(this.di)}destroy(){var t;null==(t=this.g.getBody())||t.removeChild(this.di)}show(t){if(Ce(this.di,{display:"block",opacity:t?"0":"1"}),t)return ls(this.di,{opacity:"1"},300,"ease-out")}async hide(t=!0){t&&await ls(this.di,{opacity:"0"},300,"ease-out"),Ce(this.di,{display:"none"})}};class us{constructor(t,e={}){if(this.g=t,this.pi=o(this.g,"swg-loading-container",{}),e.additionalClasses)for(const s of e.additionalClasses)this.pi.classList.add(s);this.mi=o(this.g,"swg-loading",{}),this.pi.appendChild(this.mi),this.pi.style.setProperty("display","none","important"),this.gi()}getElement(){return this.pi}show(){this.pi.style.removeProperty("display")}hide(){this.pi.style.setProperty("display","none","important")}gi(){const t=this.mi,e=o(this.g,"swg-loading-animate",{});t.appendChild(e);const s=o(this.g,"swg-loading-image",{});e.appendChild(s)}}const ds=String.raw,ps=ds`
  body {
    padding: 0;
    margin: 0;
  }

  swg-container,
  swg-loading,
  swg-loading-animate,
  swg-loading-image {
    display: block;
  }

  swg-loading-container {
    width: 100% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    min-height: 148px !important;
    height: 100% !important;
    bottom: 0 !important;
    margin-top: 5px !important;
    z-index: 2147483647 !important;
  }

  /**
  * Since the desktop view has the parent iframe (.swg-dialog) transparent,
  * this style adds the background with borders to the loading indicator.
  */
  @media (min-width: 630px), (min-height: 630px) {
    swg-loading-container {
      width: 560px !important;
      margin-left: auto !important;
      margin-right: auto !important;
      border-top-left-radius: 8px !important;
      border-top-right-radius: 8px !important;
      background-color: rgba(255, 255, 255, 1) !important;
      box-shadow: rgba(60, 64, 67, 0.3) 0 1px 1px,
        rgba(60, 64, 67, 0.15) 0 1px 4px 1px !important;
    }

    swg-loading-container.centered-on-desktop {
      height: 120px !important;
      min-height: 120px !important;
      border-radius: 8px !important;
    }
  }

  swg-loading {
    z-index: 2147483647 !important;
    width: 36px;
    height: 36px;
    overflow: hidden;
    animation: mspin-rotate 1568.63ms infinite linear;
  }

  swg-loading-animate {
    animation: mspin-revrot 5332ms infinite steps(4);
  }

  swg-loading-image {
    background-image: url('${i}/loader.svg');
    background-size: 100%;
    width: 11664px;
    height: 36px;
    animation: swg-loading-film 5332ms infinite steps(324);
  }

  @keyframes swg-loading-film {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-11664px);
    }
  }

  @keyframes mspin-rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  @keyframes mspin-revrot {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(-360deg);
    }
  }
`,ms=ds`
  /** Common styles across all window sizes. */
  .swg-dialog,
  .swg-toast {
    box-sizing: border-box;
    background-color: rgba(255, 255, 255, 1) !important;
  }

  .swg-toast {
    position: fixed !important;
    bottom: 0 !important;
    max-height: 46px !important;
    z-index: 2147483647 !important;
    border: none !important;
  }

  /**
  * Wide desktop screen support, when width is >= 871px and height is >= 641px.
  */
  @media (min-width: 871px) and (min-height: 641px) {
    .swg-dialog.swg-wide-dialog {
      width: 870px !important;
      left: -435px !important;
    }
  }

  /** Tablet/Medium screen support, when width OR height is <= 640px. */
  @media (max-width: 640px), (max-height: 640px) {
    .swg-dialog,
    .swg-toast {
      width: 480px !important;
      left: -240px !important;
      margin-left: calc(100vw - 100vw / 2) !important;
      border-top-left-radius: 8px !important;
      border-top-right-radius: 8px !important;
      box-shadow: rgba(60, 64, 67, 0.3) 0 1px 1px,
        rgba(60, 64, 67, 0.15) 0 1px 4px 1px !important;
    }
  }

  /** Desktop/Large screen support, when width AND height are >= 641px. */
  @media (min-width: 641px) and (min-height: 641px) {
    .swg-dialog {
      width: 630px !important;
      left: -315px !important;
      margin-left: calc(100vw - 100vw / 2) !important;
      background-color: transparent !important;
      border: none !important;
    }

    .swg-toast {
      border-radius: 4px !important;
      bottom: 8px !important;
      box-shadow: 0 3px 1px -2px rgb(0 0 0 / 20%), 0 2px 2px 0 rgb(0 0 0 / 14%),
        0 1px 5px 0 rgb(0 0 0 / 12%) !important;
      left: 8px !important;
    }
  }

  /** Phone/Small screen support, when width is <= 480px. */
  @media (max-width: 480px) {
    .swg-dialog,
    .swg-toast {
      width: 100% !important;
      left: 0 !important;
      right: 0 !important;
      margin-left: 0 !important;
    }
  }

  /**
  * Class applied to content page to disable scrolling.
  */
  html > body.swg-disable-scroll {
    height: 100vh !important;
    overflow: hidden !important;
    position: fixed;
    width: 100% !important;
  }

  html > body.swg-disable-scroll * {
    overflow: hidden !important;
  }
`,gs=2147483647,fs={"min-height":"50px",border:"none",display:"block",position:"fixed","z-index":gs,"box-sizing":"border-box"},ws={position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:"0",height:"0","max-height":"100%","max-width":"100%","min-height":"100%","min-width":"100%",width:"0"};class Es{constructor(t,e={},s={},i={}){this.g=t;const n=i.desktopConfig||{},r="swg-dialog "+(n.supportsWideScreen?"swg-wide-dialog":""),o=i.iframeCssClassOverride||r;this._=new hs(t.getWin().document,{class:o}),this.fi=new cs(t,gs-1);const a=Object.assign({},fs,e);Ce(this._.getElement(),a),function(t,e){for(const[s,i]of Object.entries(e))Se(t,s,i)}(this._.getElement(),s),this.wi=null,this.Ei=null,this._i=null,this.bi=null,this.Ti=0,this.yi=!1,this.Ii=null,this.Ci=void 0!==i.maxAllowedHeightRatio?i.maxAllowedHeightRatio:.9,this.Si=!!n.isCenterPositioned,this.Oi=!!i.shouldDisableBodyScrolling,this.Ri=this.g.getWin().matchMedia("(min-width: 641px)"),this.Ai=null}async open(t=!1){var e;const s=this._;if(s.isConnected())throw new Error("already opened");return null==(e=this.g.getBody())||e.appendChild(s.getElement()),this.fi.attach(),t?(Ce(s.getElement(),{visibility:"hidden",opacity:"0"}),this.yi=t):this.Ni(),await s.whenReady(),this.vi(),this}vi(){const t=this._.getBody(),e=this._.getDocument();a(os(e),ps);const s=[];this.isPositionCenterOnDesktop()&&s.push("centered-on-desktop"),this.wi=new us(e,{additionalClasses:s}),t.appendChild(this.wi.getElement()),this.Ei=o(e,"swg-container",{}),t.appendChild(this.Ei),this.Pi(),this.Si&&(this.Ai=()=>{this.Pi()},this.Ri.addListener(this.Ai))}async close(t=!0){var e,s;let i;if(t){const t=this.xi()?{opacity:"0"}:{transform:"translateY(100%)"};i=this.Li((()=>(this.fi.hide(!0),ls(this.getElement(),t,300,"ease-out"))))}else i=Promise.resolve();null==(e=this.g.getBody())||e.classList.remove("swg-disable-scroll"),await i;const n=this._.getElement();null==(s=n.parentNode)||s.removeChild(n),this.ki(),this.fi.destroy(),this.Ai&&this.Ri.removeListener(this.Ai)}getContainer(){if(!this.Ei)throw new Error("not opened yet");return this.Ei}getIframe(){return this._}getElement(){return this._.getElement()}getLoadingView(){return this.wi}getMaxAllowedHeightRatio(){return this.Ci}isPositionCenterOnDesktop(){return this.Si}Mi(){var t;this._i&&this._i.hasLoadingIndicator()?this.Ii=this._i:(this.getContainer().textContent="",null==(t=this.wi)||t.show())}Ui(){var t,e;this.Ii?((e=this.Ii.getElement()).parentElement&&e.parentElement.removeChild(e),this.Ii=null):null==(t=this.wi)||t.hide()}getCurrentView(){return this._i}async openView(t){var e;Ce(t.getElement(),ws),this.Mi(),this._i=t,this.getContainer().appendChild(t.getElement()),this.Oi&&(null==(e=this.g.getBody())||e.classList.add("swg-disable-scroll")),t.shouldFadeBody()&&!this.yi&&this.fi.show(!0),await t.init(this),Ce(t.getElement(),{opacity:"1"}),this.yi&&(t.shouldFadeBody()&&this.fi.show(!0),this.Ni()),this.Ui()}Ni(){this.Li((async()=>{Ce(this.getElement(),{transform:"translateY(100%)",opactiy:"1",visibility:"visible"}),await ls(this.getElement(),{transform:this.Di(),opacity:"1",visibility:"visible"},300,"ease-out"),this.getElement().focus()})),this.yi=!1}async resizeView(t,e,s=!0){if(this._i!=t)return null;const i=this.Gi(e),n=++this.Ti,r=()=>n!==this.Ti;let o;if(s){const t=this.getElement().offsetHeight;o=i>=t?this.Li((()=>{if(r())return Promise.resolve();const e={height:`${i}px`};return this.xi()||(e.transform=`translateY(${i-t}px)`),Ce(this.getElement(),e),requestAnimationFrame((()=>{ls(this.getElement(),{transform:this.Di()},300,"ease-out")})),Promise.resolve()})):this.Li((async()=>{const e=r()?Promise.resolve():ls(this.getElement(),{transform:this.xi()?this.Di():`translateY(${t-i}px)`},300,"ease-out");await e,r()||Ce(this.getElement(),{height:`${i}px`,transform:this.Di()})}))}else Ce(this.getElement(),{height:`${i}px`}),o=Promise.resolve();await o,r()||(this.Fi(e),t.resized())}async Li(t){await this.bi;try{await t()}catch(e){}this.bi=null}Gi(t){return Math.min(t,this.g.getWin().innerHeight*this.Ci)}Fi(t){if(this.xi())return void this.ki();const e=t+20;Ce(this.g.getRootElement(),{"padding-bottom":`${e}px`})}ki(){this.g.getRootElement().style.removeProperty("padding-bottom")}Pi(){Ce(this.getElement(),this.Wi())}xi(){return this.Si&&this.Ri.matches}Wi(){return this.xi()?{top:"50%",bottom:"0",transform:this.Di()}:{top:"auto",bottom:"0",transform:this.Di()}}Di(){return this.xi()?"translateY(-50%)":"translateY(0px)"}}class _s{constructor(t){this.g=t,this.Bi=null,this.Vi=null,this.ji=new cs(t,2147483647),this.zi=null,this.ji.getElement().addEventListener("click",(()=>{if(this.zi)try{this.zi.focus()}catch(t){}}))}openDialog(t=!1,e={}){return this.Vi||(this.Bi=new Es(this.g,{},{},e),this.Vi=this.Bi.open(t)),this.Vi}async openView(t,e=!1,s={}){return this.handleCancellations(t),(await this.openDialog(e,s)).openView(t)}async handleCancellations(t){try{await t.whenComplete()}catch(e){throw l(e)&&this.completeView(t),e}}completeView(t){setTimeout((()=>{this.Bi&&this.Bi.getCurrentView()===t&&this.zt()}),100)}completeAll(){this.Bi&&this.zt(),this.ji.isAttached()&&this.ji.destroy()}getDialog(){return this.Bi}zt(){var t;null==(t=this.Bi)||t.close(),this.Bi=null,this.Vi=null}popupOpened(t){this.zi=t||null,this.ji.isAttached()||this.ji.attach(),this.ji.show(!0)}popupClosed(){this.zi=null;try{this.ji.hide()}catch(t){}}}var bs=(t=>(t.UNKNOWN="unknown",t.NON_SUBSCRIBER="non_subscriber",t.SUBSCRIBER="subscriber",t.PAST_SUBSCRIBER="past_subscriber",t))(bs||{}),Ts=(t=>(t.IMPRESSION_PAYWALL="paywall",t.IMPRESSION_AD="ad_shown",t.IMPRESSION_OFFERS="offers_shown",t.ACTION_SUBSCRIPTIONS_LANDING_PAGE="subscriptions_landing_page",t.ACTION_OFFER_SELECTED="offer_selected",t.ACTION_PAYMENT_FLOW_STARTED="payment_flow_start",t.ACTION_PAYMENT_COMPLETED="payment_complete",t.EVENT_CUSTOM="custom",t))(Ts||{});const ys={[Ts.IMPRESSION_PAYWALL]:m.IMPRESSION_PAYWALL,[Ts.IMPRESSION_AD]:m.IMPRESSION_AD,[Ts.IMPRESSION_OFFERS]:m.IMPRESSION_OFFERS,[Ts.ACTION_SUBSCRIPTIONS_LANDING_PAGE]:m.ACTION_SUBSCRIPTIONS_LANDING_PAGE,[Ts.ACTION_OFFER_SELECTED]:m.ACTION_OFFER_SELECTED,[Ts.ACTION_PAYMENT_FLOW_STARTED]:m.ACTION_PAYMENT_FLOW_STARTED,[Ts.ACTION_PAYMENT_COMPLETED]:m.ACTION_PAYMENT_COMPLETE,[Ts.EVENT_CUSTOM]:m.EVENT_CUSTOM},Is={[m.UNKNOWN]:null,[m.IMPRESSION_PAYWALL]:Ts.IMPRESSION_PAYWALL,[m.IMPRESSION_AD]:Ts.IMPRESSION_AD,[m.IMPRESSION_OFFERS]:Ts.IMPRESSION_OFFERS,[m.IMPRESSION_SUBSCRIBE_BUTTON]:null,[m.IMPRESSION_SMARTBOX]:null,[m.ACTION_SUBSCRIBE]:null,[m.ACTION_PAYMENT_COMPLETE]:Ts.ACTION_PAYMENT_COMPLETED,[m.ACTION_ACCOUNT_CREATED]:null,[m.ACTION_ACCOUNT_ACKNOWLEDGED]:null,[m.ACTION_SUBSCRIPTIONS_LANDING_PAGE]:Ts.ACTION_SUBSCRIPTIONS_LANDING_PAGE,[m.ACTION_PAYMENT_FLOW_STARTED]:Ts.ACTION_PAYMENT_FLOW_STARTED,[m.ACTION_OFFER_SELECTED]:Ts.ACTION_OFFER_SELECTED,[m.EVENT_PAYMENT_FAILED]:null,[m.EVENT_CUSTOM]:Ts.EVENT_CUSTOM},Cs={[lt.EVENT_SHOWCASE_METER_OFFERED]:[m.EVENT_HAS_METERING_ENTITLEMENTS,m.EVENT_OFFERED_METER],[lt.EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION]:[m.EVENT_UNLOCKED_BY_SUBSCRIPTION],[lt.EVENT_SHOWCASE_UNLOCKED_BY_METER]:[m.EVENT_HAS_METERING_ENTITLEMENTS,m.EVENT_UNLOCKED_BY_METER],[lt.EVENT_SHOWCASE_UNLOCKED_FREE_PAGE]:[m.EVENT_UNLOCKED_FREE_PAGE],[lt.EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL]:[m.EVENT_NO_ENTITLEMENTS,m.IMPRESSION_REGWALL,m.IMPRESSION_SHOWCASE_REGWALL],[lt.EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL]:[m.EVENT_NO_ENTITLEMENTS,m.IMPRESSION_PAYWALL],[lt.EVENT_SHOWCASE_INELIGIBLE_PAYWALL]:[m.EVENT_INELIGIBLE_PAYWALL,m.EVENT_NO_ENTITLEMENTS]},Ss={[m.IMPRESSION_REGWALL]:g.LOCKED_REGWALL,[m.EVENT_UNLOCKED_BY_METER]:g.UNLOCKED_METER,[m.EVENT_UNLOCKED_BY_SUBSCRIPTION]:g.UNLOCKED_SUBSCRIBER,[m.EVENT_UNLOCKED_FREE_PAGE]:g.UNLOCKED_FREE,[m.IMPRESSION_PAYWALL]:g.LOCKED_PAYWALL,[m.EVENT_INELIGIBLE_PAYWALL]:g.INELIGIBLE_PAYWALL};function Os(t,e,s,i){return{eventCategory:t,eventAction:e,eventLabel:s,nonInteraction:i}}const Rs={[m.IMPRESSION_OFFERS]:Os("NTG paywall","paywall modal impression","",!0),[m.IMPRESSION_CONTRIBUTION_OFFERS]:Os("NTG membership","offer impressions","",!0),[m.ACTION_OFFER_SELECTED]:Os("NTG paywall","click","",!1),[m.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK]:Os("NTG subscription","marketing modal click","",!1),[m.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT]:Os("NTG subscription","marketing modal impression","",!0),[m.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK]:Os("NTG membership","marketing modal click","",!1),[m.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT]:Os("NTG membership","membership modal impression","",!0),[m.IMPRESSION_NEWSLETTER_OPT_IN]:Os("NTG newsletter","newsletter modal impression","",!0),[m.EVENT_NEWSLETTER_OPTED_IN]:Os("NTG newsletter","newsletter signup","success",!1),[m.IMPRESSION_REGWALL_OPT_IN]:Os("NTG account","registration modal impression","",!0),[m.EVENT_REGWALL_OPTED_IN]:Os("NTG account","registration","success",!1),[m.ACTION_SURVEY_DATA_TRANSFER]:Os("","survey submission","",!1)},As={[m.ACTION_PAYMENT_COMPLETE]:Os("NTG subscription","submit","success",!1)},Ns={[m.ACTION_PAYMENT_COMPLETE]:Os("NTG membership","submit","success",!1)};function vs(t){return ys[t]}class Ps{constructor(t){this.Jt=t,this.ie=t.eventManager()}start(){this.ie.registerEventListener(this.Ls.bind(this))}Ls(t,e){var s,i,n;const r=Ps.isGaEligible(this.Jt),o=Ps.isGtagEligible(this.Jt),a=Ps.isGtmEligible(this.Jt);if(!(r||o||a))return;const{ga:h,gtag:l,dataLayer:c}=this.Jt.win(),u=(null==(s=t.additionalParameters)?void 0:s.subscriptionFlow)||(null==(n=null==(i=t.additionalParameters)?void 0:i.getSubscriptionFlow)?void 0:n.call(i))||"";let d=function(t,e){if(!t)return;let s;return e===ct.SUBSCRIBE?s=As[t]:e===ct.CONTRIBUTE&&(s=Ns[t]),s||Rs[t]}(t.eventType,u);if(!d)return;const p=(null==e?void 0:e.googleAnalyticsParameters)||{};if(d={...d,eventCategory:p.event_category||d.eventCategory,eventLabel:p.event_label||d.eventLabel},r&&h("send","event",d),o){const t={event_category:d.eventCategory,event_label:d.eventLabel,non_interaction:d.nonInteraction,...p};l("event",d.eventAction,t)}a&&c.push({event:d.eventAction,event_category:d.eventCategory,event_label:d.eventLabel,non_interaction:d.nonInteraction,...p})}static isGaEligible(t){return pe(t.win().ga)}static isGtagEligible(t){return pe(t.win().gtag)}static isGtmEligible(t){var e;return pe(null==(e=t.win().dataLayer)?void 0:e.push)}}const xs={height:"0"},Ls={frameborder:"0",scrolling:"no",class:"swg-toast"};class ks{constructor(t,e,s={}){this.h=e,this.l=s,this.bi=null,this.g=t.doc(),this.o=t.activities(),this._=o(this.g.getWin().document,"iframe",Ls),Ce(this._,xs)}getElement(){return this._}open(){var t;return null==(t=this.g.getBody())||t.appendChild(this._),this.Ki()}async Ki(){const t=await this.o.openIframe(this._,this.h,this.l);await t.whenReady(),function(t,e){for(const s of["height"])Se(t,s,"")}(this._),this.bi=this.Li({callback:()=>(Ce(this._,{transform:"translateY(100%)",opacity:"1",visibility:"visible"}),ls(this._,{transform:"translateY(0)",opacity:"1",visibility:"visible"},400,"ease-out"))}),this.g.getWin().setTimeout((()=>{this.close()}),8e3)}async Li({callback:t}){await this.bi;try{await t()}catch(e){}}close(){return this.bi=this.Li({callback:()=>(this.g.getWin().setTimeout((()=>{var t;null==(t=this.g.getBody())||t.removeChild(this._)}),500),ls(this._,{transform:"translateY(100%)",opacity:"1",visibility:"visible"},400,"ease-out"))}),this.bi}}const Ms={TYPE_REGISTRATION_WALL:"/regwalliframe",TYPE_NEWSLETTER_SIGNUP:"/newsletteriframe",TYPE_REWARDED_SURVEY:"/surveyiframe"},Us={[Qe.SUBSCRIPTION]:pt.SUBSCRIPTION,[Qe.SUBSCRIPTION_LARGE]:pt.SUBSCRIPTION,[Qe.CONTRIBUTION]:pt.UI_CONTRIBUTION,[Qe.CONTRIBUTION_LARGE]:pt.UI_CONTRIBUTION},Ds=pt.SUBSCRIPTION,Gs=/<ph name="EMAIL".+?\/ph>/g;class Fs{constructor(t,e){this.Jt=t,this.J=e,this.Qt=e.autoPromptType?Us[e.autoPromptType]:Ds,this.he=t.dialogManager(),this.Yi=t.entitlementsManager(),this.ne=t.clientConfigManager(),this.$i=t.storage(),this.oe=new p(t.win(),t.activities(),Pt(Ms[e.action],{origin:_t(t.win().location.href).origin,configurationId:this.J.configurationId||"",hl:this.ne.getLanguage(),isClosable:(!!e.isClosable).toString()}),Lt({supportsEventManager:!0,productType:this.Qt,windowHeight:t.win().innerHeight}),!0)}start(){this.oe.on(I,(t=>this.qi(t))),this.oe.on(U,(t=>this.Hi(t))),this.oe.on(_,this.Ee.bind(this));const{onCancel:t}=this.J;return t&&this.oe.onCancel(t),this.he.openView(this.oe,!1,{shouldDisableBodyScrolling:!0})}qi(t){var e;this.he.completeView(this.oe),this.Yi.clear();const s=t.getSwgUserToken();s&&this.Jt.storage().set(j,s,!0),t.getActionCompleted()?this.Ji(null!=(e=t.getUserEmail())?e:""):t.getAlreadyCompleted()?this.Xi():this.Qi();const i=Date.now().toString();this.Jt.storage().set(z,i,!1),this.Yi.getEntitlements()}Ji(t){const e=this.ne.getLanguage();let s="";switch(this.J.action){case"TYPE_REGISTRATION_WALL":s=Be(Ue,e).replace(Gs,t);break;case"TYPE_NEWSLETTER_SIGNUP":s=Be(De,e).replace(Gs,t);break;default:return}new ks(this.Jt,Pt("/toastiframe",{flavor:"custom",customText:s})).open()}Xi(){let t;switch(this.J.action){case"TYPE_REGISTRATION_WALL":t={flavor:"basic"};break;case"TYPE_NEWSLETTER_SIGNUP":const e=this.ne.getLanguage();t={flavor:"custom",customText:Be(Le,e)};break;default:return}new ks(this.Jt,Pt("/toastiframe",t)).open()}Qi(){const t=this.ne.getLanguage();let e="";switch(this.J.action){case"TYPE_REGISTRATION_WALL":e=Be(ke,t);break;case"TYPE_NEWSLETTER_SIGNUP":e=Be(Me,t);break;default:return}new ks(this.Jt,Pt("/toastiframe",{flavor:"custom",customText:e})).open()}Ee(t){t.getSubscriberOrMember()&&this.Jt.callbacks().triggerLoginRequest({linkRequested:!1})}async Hi(t){const e=await this.attemptSurveyDataTransfer(t);e?this.Jt.eventManager().logSwgEvent(m.EVENT_SURVEY_DATA_TRANSFER_COMPLETE,!0):(this.Jt.eventManager().logSwgEvent(m.EVENT_SURVEY_DATA_TRANSFER_FAILED,!1),this.$i.storeEvent("surveydatatransferfailed"));const s=new D;t.getStorePpsInLocalStorage()&&await this.storePpsValuesFromSurveyAnswers(t),s.setSuccess(e),this.oe.execute(s)}async attemptSurveyDataTransfer(t){const{onResult:e}=this.J;if(e)try{return await e(t)}catch(s){return X(`[swg.js] Exception in publisher provided logging callback: ${s}`),!1}return this.logSurveyDataToGoogleAnalytics(t)}async storePpsValuesFromSurveyAnswers(t){var e,s;const i="ppstaxonomies",n=t.getSurveyQuestionsList().flatMap((t=>t.getSurveyAnswersList())).map((t=>null==t?void 0:t.getPpsValue())).filter((t=>null!==t)),r=await this.$i.get(i,!0);let o=[];try{const t=null==(s=null==(e=JSON.parse(r))?void 0:e[1])?void 0:s.values;o=Array.isArray(t)?t:[]}catch(h){}const a={[1]:{values:Array.from(new Set(n.concat(o)))}};await Promise.resolve(this.$i.set(i,JSON.stringify(a),!0))}logSurveyDataToGoogleAnalytics(t){var e;return!(!Ps.isGaEligible(this.Jt)&&!Ps.isGtagEligible(this.Jt)||(null==(e=t.getSurveyQuestionsList())||e.map((t=>{const e=t.getSurveyAnswersList()[0],s={eventType:m.ACTION_SURVEY_DATA_TRANSFER,eventOriginator:w.SWG_CLIENT,isFromUserAction:!0,additionalParameters:null},i={googleAnalyticsParameters:{event_category:t.getQuestionCategory()||"",survey_question:t.getQuestionText()||"",survey_answer_category:e.getAnswerCategory()||"",event_label:e.getAnswerText()||""}};this.Jt.eventManager().logEvent(s,i)})),0))}showNoEntitlementFoundToast(){this.oe.execute(new O)}}const Ws="google:metering";class Bs{constructor(t,e,s,i,n,r,o=!1,a=null){this.service=t,this.raw=e,this.entitlements=s,this.Zi=i,this.sn=n,this.nn=r,this.decryptedDocumentKey=a,this.isReadyToPay=!!o}clone(){return new Bs(this.service,this.raw,this.entitlements.map((t=>t.clone())),this.Zi,this.sn,this.nn,this.isReadyToPay,this.decryptedDocumentKey)}json(){return{service:this.service,entitlements:this.entitlements.map((t=>t.json())),isReadyToPay:this.isReadyToPay}}enablesThisWithCacheableEntitlements(){return!!this.getEntitlementForThis()&&!this.enablesThisWithGoogleMetering()&&!this.enablesThisWithGoogleDevMode()}enablesThisWithGoogleMetering(){const t=this.getEntitlementForThis();return!!t&&t.source===Ws}enablesThisWithGoogleDevMode(){const t=this.getEntitlementForThis();if(!t)return!1;const e="google"===t.source&&-1!==t.subscriptionToken.indexOf("GOOGLE_DEV_MODE_ORDER"),s="GOOGLE_DEV_MODE_TOKEN"===t.subscriptionToken;return e||s}enablesThis(t){return this.enables(this.Zi,t)}enablesAny(t){for(let e=0;e<this.entitlements.length;e++)if(this.entitlements[e].products.length>0&&(!t||t==this.entitlements[e].source))return!0;return!1}enables(t,e){return!!t&&!!this.getEntitlementFor(t,e)}getEntitlementForThis(t){return this.getEntitlementFor(this.Zi,t)}getEntitlementFor(t,e){if(!t)return X("SwG needs this article to define a product ID (e.g. example.com:premium). Articles can define a product ID using JSON+LD. SwG can check entitlements after this article defines a product ID."),null;const s=this.entitlements.filter((s=>s.enables(t)&&(!e||e===s.source))),i=s.find((({source:t})=>t!==Ws)),n=s.find((({source:t})=>t===Ws));return i||n||null}getEntitlementForSource(t){if(this.entitlements.length>0)for(let e=0;e<this.entitlements.length;e++)if(this.entitlements[e].subscriptionToken&&t==this.entitlements[e].source)return this.entitlements[e];return null}ack(){this.sn(this)}consume(t){this.nn(this,t)}}class Vs{constructor(t,e,s,i,n){this.source=t,this.products=e,this.subscriptionToken=s,this.subscriptionTokenContents=i,this.subscriptionTimestamp=n}clone(){return new Vs(this.source,this.products.slice(0),this.subscriptionToken,this.subscriptionTokenContents,this.subscriptionTimestamp)}json(){return{source:this.source,products:this.products,subscriptionToken:this.subscriptionToken}}enables(t){if(!t)return!1;const e=t.indexOf(":");if(-1!=e){const s=t.substring(0,e+1);if(s+"*"==t&&this.products.filter((t=>t.substring(0,e+1)==s)).length>=1)return H("enabled with wildcard productId"),!0;if(this.products.includes(s+"*"))return H("enabled with wildcard entitlement"),!0}return this.products.includes(t)}static parseFromJson(t,e){t||(t={});const s=t.source||"",i=t.products||[],n=t.subscriptionToken||"";let r;try{r=n?e.decode(n):null}catch(h){r=null}const o=t.subscriptionTimestamp;let a;try{const t=o.seconds_,e=o.nanos_;a=new F([t,e],!1)}catch(h){a=null}return new Vs(s,i,n,r,a)}static parseListFromJson(t,e){return(Array.isArray(t)?t:[t]).map((t=>Vs.parseFromJson(t,e)))}getSku(){if("google"!==this.source)return null;const t=at(this.subscriptionToken,"productId")||null;return t||X("Unable to retrieve SKU from SwG subscription token"),t}}var js=(t=>(t[t.LICENSED_BY_GOOGLE=1]="LICENSED_BY_GOOGLE",t[t.METERED_BY_GOOGLE=2]="METERED_BY_GOOGLE",t))(js||{});const zs="rgba(60, 64, 67, 0.3) 0px -2px 5px, rgba(60, 64, 67, 0.15) 0px -5px 5px",Ks="anonymous_user",Ys={[js.LICENSED_BY_GOOGLE]:"/metertoastiframe",[js.METERED_BY_GOOGLE]:"/meteriframe"};class $s{constructor(t,{meterClientType:e=js.LICENSED_BY_GOOGLE,meterClientUserAttribute:s=Ks}={}){this.Jt=t,this.rn=null,this.an=!1,this.hn=null,this.ln=()=>{},this.t=t.win(),this.o=t.activities(),this.he=t.dialogManager(),this.cn=e,this.un=s}async start(){const t={isClosable:!0,hasSubscriptionCallback:this.Jt.callbacks().hasSubscribeRequestCallback()};this.cn===js.METERED_BY_GOOGLE&&(t.meterType=this.un===Ks?"UNKNOWN":"KNOWN");const e=this.o.addDefaultArguments(t),s=Ys[this.cn],i={origin:_t(this.t.location.href).origin};this.Jt.clientConfigManager().shouldForceLangInIframes()&&(i.hl=this.Jt.clientConfigManager().getLanguage());const n=new p(this.t,this.o,Pt(s,i),e,!1);this.ln=()=>{const t=new W;t.setClose(!0),n.execute(t),this.removeCloseEventListener(),this.Jt.eventManager().logSwgEvent(m.ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION,!0),this.rn&&!this.an&&(this.an=!0,this.rn())},this.Jt.callbacks().triggerFlowStarted(ct.SHOW_METER_TOAST),n.on(B,this.dn.bind(this)),this.Jt.callbacks().hasSubscribeRequestCallback()||this.Jt.callbacks().hasOffersFlowRequestCallback()||X("[swg.js]: `setOnNativeSubscribeRequest` has not been set before starting the metering flow, so users will not be able to subscribe from the metering dialog directly. Please call `setOnNativeSubscribeRequest` with a subscription flow callback before starting metering."),this.he.handleCancellations(n).catch((t=>{if(this.rn&&!this.an&&(this.an=!0,this.rn()),!l(t))throw console.error("[swg.js]: Error occurred during meter toast handling: "+t),t}));const r=await this.he.openDialog();if(this.mn(),this.gn(),await r.openView(n),this.t.addEventListener("click",this.ln),this.t.addEventListener("touchstart",this.ln),this.t.addEventListener("mousedown",this.ln),this.fn())Se(this.t.document.body,"overflow","hidden");else{let t,e;this.hn=()=>{t=t||this.t.pageYOffset,this.t.clearTimeout(e),e=this.t.setTimeout((()=>{Math.abs(this.t.pageYOffset-t)>100&&this.ln()}),100)},this.t.addEventListener("scroll",this.hn)}this.Jt.eventManager().logSwgEvent(m.IMPRESSION_METER_TOAST),this.Jt.eventManager().logSwgEvent(m.EVENT_OFFERED_METER)}setOnConsumeCallback(t){this.rn=t}removeCloseEventListener(){this.t.removeEventListener("click",this.ln),this.t.removeEventListener("touchstart",this.ln),this.t.removeEventListener("mousedown",this.ln),this.fn()?Se(this.t.document.body,"overflow","visible"):this.hn&&this.t.removeEventListener("scroll",this.hn)}mn(){const t=this.t.matchMedia("(max-width: 640px), (max-height: 640px)"),e=this.he.getDialog().getElement();t.matches&&Ce(e,{"box-shadow":zs}),t.addListener((t=>{t.matches?Ce(e,{"box-shadow":zs}):Ce(e,{"box-shadow":""})}))}gn(){this.t.matchMedia("(min-width: 640px) and (min-height: 640px)").matches&&Ce(this.he.getDialog().getLoadingView().getElement(),{width:"420px",margin:"auto"})}dn(t){this.removeCloseEventListener(),this.an=!0,t.getNative()?this.Jt.callbacks().triggerSubscribeRequest():this.Jt.callbacks().triggerOffersFlowRequest()}fn(){return!!this.t.navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i)}}function qs(t,e=!1){const s=bt(t);return!(!(s.gaa_at&&s.gaa_n&&s.gaa_sig&&s.gaa_ts)||!e&&"na"===s.gaa_at||parseInt(s.gaa_ts,16)<Date.now()/1e3)}class Hs{constructor(t,e){this.Jt=e,this.type=t.type,this.configurationId=t.configurationId}show(t){return new Fs(this.Jt,{isClosable:t.isClosable,action:this.type,configurationId:this.configurationId,onResult:t.onResult}).start()}}class Js{constructor(t,e,s,i,n,r){this.t=t,this.te=e,this.si=s,this.Jt=i,this.wn=n,this.En=r,this._n=null,this.bn=!1,this.Tn=!1,this.yn=!1,this.In=null,this.Cn=0,this.ni=null,this.entitlementsPostPromise=null,this.ei=this.te.getPublicationId(),this.Sn=new ht,this.On=n?"encodedEntitlementsParams":"encodedParams",this.Yt=n?"/article":"/entitlements",this.$i=i.storage(),this.ee=i.analytics(),this.Rn=i.config(),this.Jt.eventManager().registerEventListener(this.An.bind(this))}reset(t=!1){this.ni=null,this.Cn=Math.max(this.Cn,t?3:0),t&&(this.$i.remove(K),this.$i.remove(Y))}clear(){this.ni=null,this.Cn=0,this.unblockNextNotification(),this.$i.remove(K),this.$i.remove(q),this.$i.remove(Y)}async getEntitlements(t){"string"==typeof t&&(Date.now()>1600289016959&&X("[swg.js:getEntitlements]: If present, the first param of getEntitlements() should be an object of type GetEntitlementsParamsExternalDef."),t={encryption:{encryptedDocumentKey:t}}),this.ni||(this.ni=this.Nn(t));const e=await this.ni;return null!=e.isReadyToPay&&this.ee.setReadyToPay(e.isReadyToPay),e}pushNextEntitlements(t,e){const s=this.vn(t,!0,e);return!(!s||!s.enablesThis()||(this.$i.set(K,t),0))}Pn(){return bt(this.t.location.search).gaa_n}xn(t){var e;if(!t||t.source!==Ws)return;let s,i;if((null==(e=t.subscriptionTokenContents)?void 0:e.metering.clientType)===js.METERED_BY_GOOGLE)i=f.SUBSCRIBE_WITH_GOOGLE_METERING_SERVICE;else{if(!qs(this.t.location.search))return;i=f.GOOGLE_SHOWCASE_METERING_SERVICE,s=this.Pn()}this.Jt.eventManager().logSwgEvent(m.EVENT_UNLOCKED_BY_METER,!1);const n=new C;n.setSource(t.source),n.setJwt(t.subscriptionToken),this.entitlementsPostPromise=this.Ln(n,g.UNLOCKED_METER,i,s)}An(t){var e,s,i,n;if(!qs(this.t.location.search,!0))return;const r=function(t){return Ss[t]}(t.eventType);if(!r)return;let o=null;switch(t.eventOriginator){case w.SHOWCASE_CLIENT:o=f.PUBLISHER_ENTITLEMENT;break;case w.SWG_CLIENT:if(r==g.UNLOCKED_METER)return;o=f.GOOGLE_SUBSCRIBER_ENTITLEMENT;break;default:return}const a=this.Pn(),h=null==(s=null==(e=null==t?void 0:t.additionalParameters)?void 0:e.getIsUserRegistered)?void 0:s.call(e),l=null==(n=null==(i=null==t?void 0:t.additionalParameters)?void 0:i.getSubscriptionTimestamp)?void 0:n.call(i);this.entitlementsPostPromise=this.Ln(new C,r,o,a,h,l)}async Ln(t,e,s,i="",n=null,r=null){const o=new S;o.setUsedEntitlement(t),o.setClientEventTime(Oe(Date.now())),o.setEntitlementResult(e),o.setEntitlementSource(s),o.setToken(i),"boolean"==typeof n&&o.setIsUserRegistered(n),r&&o.setSubscriptionTimestamp(r);let a="/publication/"+encodeURIComponent(this.ei)+this.Yt;if(a=Xs(this.t.location,a),!this.In){const t={metering:{resource:{hashedCanonicalUrl:await this.kn()}}};this.In=rt(it(JSON.stringify(t)))}const h=await this.$i.get(j,!0);h&&(a=Tt(a,"sut",h)),a=Tt(a,this.On,this.In),await this.si.sendPost(Nt(a),o)}async kn(){return async function(t){var e;const s=null==(e=self.crypto)?void 0:e.subtle;if(!s){const t="Swgjs only works on secure (HTTPS or localhost) pages.";return X(t),Promise.reject(t)}return function(t){const e=[],s=new DataView(t);for(let i=0;i<s.byteLength;i+=4){const t=s.getUint32(i).toString(16);e.push(("00000000"+t).slice(-"00000000".length))}return e.join("")}(await s.digest("SHA-512",it(t)))}(It(this.Jt.doc()))}async Nn(t){const e=await this.Mn(t);return this.Un(e),e}async Mn(t){const e=await this.$i.get(K),s=await this.$i.get(Y),i=!(!t||!t.encryption);if(e&&!i){const t=this.vn(e,!0,function(t){switch(t){case"true":return!0;case"false":return!1;default:return}}(s));if(t&&t.enablesThis())return this.Cn=0,t}const n=await this.Dn(t);return n&&n.enablesThisWithCacheableEntitlements()&&n.raw&&this.$i.set(K,n.raw),n}async getArticle(){return this.wn&&this.ni?(await this.ni,this._n):null}async getExperimentConfigFlags(){const t=await this.getArticle();return this.parseArticleExperimentConfigFlags(t)}parseArticleExperimentConfigFlags(t){if(t){const e=t.experimentConfig;if(null!=e){const t=e.experimentFlags;if(null!=t)return t}}return[]}Dn(t){let e=this.Cn;this.Cn=0;const s=async()=>{e--;const i=await this.oi(t);return i.enablesThis()||e<=0?i:new Promise((t=>{this.t.setTimeout((()=>{t(s())}),550)}))};return s()}setToastShown(t){this.$i.set(q,t?"1":"0")}blockNextNotification(){this.bn=!0}blockNextToast(){this.Tn=!0}unblockNextNotification(){this.bn=!1}enableMeteredByGoogle(){this.yn=!0}parseEntitlements(t){const e=t.isReadyToPay;null==e?this.$i.remove(Y):this.$i.set(Y,String(e));const s=t.signedEntitlements,i=t.decryptedDocumentKey,n=t.swgUserToken;if(n&&this.Gn(n),s){const t=this.vn(s,!1,e,i);if(t)return t}else{const s=t.entitlements;if(s)return this.Fn("",s,e,i)}return this.Fn("",[],e)}Gn(t){t&&this.$i.set(j,t,!0)}vn(t,e,s,i){try{const n=this.Sn.decode(t);if(e){const t=Date.now(),e=n.exp;if(1e3*parseFloat(e)<t)return null}const r=n.entitlements;return r&&this.Fn(t,r,s,i)||null}catch(n){this.t.setTimeout((()=>{throw n}))}return null}Fn(t,e,s,i){return new Bs("subscribe.google.com",t,Vs.parseListFromJson(e,this.Sn),this.te.getProductId(),this.Wn.bind(this),this.Bn.bind(this),s,i)}Un(t){const e=this.bn;this.bn=!1;const s=this.Tn;if(this.Tn=!1,e)return;this.Jt.callbacks().triggerEntitlementsResponse(Promise.resolve(t)),this.En&&t.enablesThisWithGoogleMetering()&&t.consume();const i=t.getEntitlementForThis();i?s||this.Vn(i):this.Jt.eventManager().logSwgEvent(m.EVENT_NO_ENTITLEMENTS,!1)}async Vn(t){if(t.source===Ws)return this.Jt.eventManager().logSwgEvent(m.EVENT_HAS_METERING_ENTITLEMENTS,!1),Promise.resolve();const e=new R;e.setIsUserRegistered(!0),t.subscriptionTimestamp&&e.setSubscriptionTimestamp(t.subscriptionTimestamp);const s="privileged"===t.source?m.EVENT_UNLOCKED_FOR_CRAWLER:m.EVENT_UNLOCKED_BY_SUBSCRIPTION;if(this.Jt.eventManager().logSwgEvent(s,!1,e),"1"===await this.$i.get(q))return;const i=t.source||Ws;return new ks(this.Jt,Pt("/toastiframe"),Lt({publicationId:this.ei,source:i})).open()}Wn(t){t.getEntitlementForThis()&&this.setToastShown(!0)}Bn(t,e){var s;if(t.enablesThisWithGoogleMetering()){const i=t.getEntitlementForThis(),n=()=>{e&&e(),this.xn(i)},r=i.subscriptionTokenContents;if(!r)return n();if(!0===(null==(s=r.metering)?void 0:s.showToast)){const t=new $s(this.Jt,{meterClientType:r.metering.clientType,meterClientUserAttribute:r.metering.clientUserAttribute});return t.setOnConsumeCallback(n),t.start()}return n()}}async oi(t){var e;const s=await this.$i.get(j,!0),i=await this.$i.get(z,!1);let n="/publication/"+encodeURIComponent(this.ei)+this.Yt;if(n=Xs(this.t.location,n),(null==t?void 0:t.encryption)&&(n=Tt(n,"crypt",t.encryption.encryptedDocumentKey)),s&&(n=Tt(n,"sut",s)),this.Rn.publisherProvidedId?n=Tt(n,"ppid",this.Rn.publisherProvidedId):(null==t?void 0:t.publisherProvidedId)&&"string"==typeof t.publisherProvidedId&&t.publisherProvidedId.length>0&&(n=Tt(n,"ppid",t.publisherProvidedId)),i){const t=parseInt(i,10);if(t){const e=Math.floor((Date.now()-t)/1e3);e>=0&&(n=Tt(n,"interaction_age",e.toString()))}}const r=await this.kn();let o=this.yn?{metering:{clientTypes:[js.METERED_BY_GOOGLE],owner:this.ei,resource:{hashedCanonicalUrl:r}}}:void 0;if(this.ei&&(null==(e=null==t?void 0:t.metering)?void 0:e.state)&&qs(this.t.location.search)){const e=t.metering.state.id;if("string"==typeof e&&e.length>0){let s=function({attributes:t,category:e}){if(!t)return;const s=Object.keys(t);for(const i of s){const s=`${e}_${i}`,n=Number(t[i].timestamp),r=n>Date.now()/1e3*2;n&&!r||X(`SwG Entitlements: Please specify a Unix timestamp, in seconds, for the "${i}" ${e} attribute. The timestamp you passed (${t[i].timestamp}) looks invalid.`),o.metering.state.attributes.push({name:s,timestamp:n})}};o={metering:{clientTypes:[js.LICENSED_BY_GOOGLE],owner:this.ei,resource:{hashedCanonicalUrl:r},state:{id:e,attributes:[]},token:this.Pn()}},s({attributes:t.metering.state.standardAttributes,category:"standard"}),s({attributes:t.metering.state.customAttributes,category:"custom"})}else X("SwG Entitlements: Please specify a metering state ID string, ideally a hash to avoid PII.")}o&&(this.In=rt(it(JSON.stringify(o))),n=Tt(n,this.On,this.In)),n=Nt(n),this.Jt.eventManager().logSwgEvent(m.ACTION_GET_ENTITLEMENTS,!1);const a=await this.si.fetchCredentialedJson(n);let h=a;this.wn&&(this._n=a,h=this._n.entitlements);const l=a.errorMessages;if(Number(null==l?void 0:l.length)>0)for(const c of l)X("SwG Entitlements: "+c);return this.parseEntitlements(h)}async getAvailableInterventions(){var t,e;const s=await this.getArticle();return s?(null==(e=null==(t=s.audienceActions)?void 0:t.actions)?void 0:e.map((t=>new Hs(t,this.Jt))))||[]:(X("[swg.js:getAvailableInterventions] Article is null. Make sure you have enabled it in the client ready callback with: `subscriptions.configure({enableArticleEndpoint: true})`"),null)}}function Xs(t,e){const s=bt(t.hash)["swg.deventitlement"];return void 0===s?e:Tt(e,"devEnt",s)}var Qs=(t=>(t.LOGGING_AUDIENCE_ACTIVITY="logging-audience-activity",t.DISABLE_DESKTOP_MINIPROMPT="disable-desktop-miniprompt",t.SURVEY_TRIGGERING_PRIORITY="survey_triggering_priority_experiment",t.SECOND_PROMPT_DELAY="second_prompt_delay_experiment",t.USE_ARTICLE_ENDPOINT_CLASSIC="use_article_endpoint_classic",t))(Qs||{});const Zs=/^(\)\]\}'\n)/;class ti{constructor(t){this.t=t}async fetchCredentialedJson(t){const e=await this.fetch(t,{method:"GET",headers:{Accept:"text/plain, application/json"},credentials:"include"}),s=(await e.text()).replace(Zs,"");return JSON.parse(s)}async sendPost(t,e){const s={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},credentials:"include",body:"f.req="+yt(e)},i=await this.fetch(t,s);if(!i)return{};const n=await i.text();try{const t=n.replace(Zs,"");return JSON.parse(t)}catch(r){return u.throwAsync(r),{}}}async fetch(t,e){try{return await this.t.fetch(t,e)}catch(s){const e=_t(t).origin;throw new Error(`XHR Failed fetching (${e}/...): (Note: a CORS error above may indicate that this publisher or domain is not configured in Publisher Center. The CORS error happens because 4xx responses do not set CORS headers.)\n\n`+s)}}sendBeacon(t,e){const s=new Blob(["f.req="+yt(e)],{type:"application/x-www-form-urlencoded;charset=UTF-8"});navigator.sendBeacon(t,s)}}class ei{constructor(t){this.g=t}async error(...t){await 0;const s=function(t){let e=null,s="";for(const i of t)i instanceof Error&&!e?e=si(i):(s&&(s+=" "),s+=i);return e?s&&(e.message=s+": "+e.message):e=new Error(s),e}(t);s.reported||(this.g.getWin().document.createElement("img").src=`${e}/_/SubscribewithgoogleClientUi/jserror?error=`+encodeURIComponent(String(s))+"&script="+encodeURIComponent(`${e}/swg/js/v1/swg.js`)+"&line="+(s.lineNumber||1)+"&trace="+encodeURIComponent(s.stack||""),s.reported=!0)}}function si(t){const e=Object.getOwnPropertyDescriptor(t,"message");if(e&&e.writable)return t;const{lineNumber:s,message:i,reported:n,stack:r}=t,o=new Error(i);return o.lineNumber=s,o.stack=r,o.reported=n,o}const ii="swg-link";class ni{constructor(t){this.Jt=t,this.o=t.activities(),this.te=t.pageConfig(),this.he=t.dialogManager()}start(t={}){this.Jt.callbacks().triggerFlowStarted(ct.LINK_ACCOUNT);const e=this.Jt.config().windowOpenMode==dt.REDIRECT,s=t.ampReaderId?Lt({publicationId:this.te.getPublicationId(),ampReaderId:t.ampReaderId}):Lt({publicationId:this.te.getPublicationId()}),i=this.o.open(ii,Pt("/linkbackstart"),e?"_top":"_blank",s,{});return this.Jt.eventManager().logSwgEvent(m.IMPRESSION_LINK),this.he.popupOpened(i&&i.targetWin),Promise.resolve()}}class ri{static configurePending(t){t.activities().onResult(ii,(async function(e){t.entitlementsManager().blockNextNotification(),t.callbacks().triggerLinkProgress(),t.dialogManager().popupClosed();try{const s=await r(e,At(),!1,!1);t.eventManager().logSwgEvent(m.ACTION_LINK_CONTINUE,!0),t.eventManager().logSwgEvent(m.EVENT_LINK_ACCOUNT_SUCCESS),new ri(t,s).start()}catch(s){t.entitlementsManager().unblockNextNotification(),l(s)?(t.eventManager().logSwgEvent(m.ACTION_LINK_CANCEL,!0),t.callbacks().triggerFlowCanceled(ct.LINK_ACCOUNT)):t.eventManager().logSwgEvent(m.ACTION_LINK_CONTINUE,!0)}}))}constructor(t,e){this.Jt=t,this.t=t.win(),this.o=t.activities(),this.he=t.dialogManager(),this.Yi=t.entitlementsManager(),this.Hs=t.callbacks(),this.oe=null,this.jn=e||{},this.zn=null,this.Kn=new Promise((t=>{this.zn=t}))}async start(){if(this.jn.saveAndRefresh)return this.O(this.jn,this.jn.linked),Promise.resolve();const t=this.jn.index||"0";return this.oe=new p(this.t,this.o,Pt("/linkconfirmiframe",{},"u/"+t),Lt({productId:this.Jt.pageConfig().getProductId(),publicationId:this.Jt.pageConfig().getPublicationId()}),!0),this.Yn(),this.Jt.eventManager().logSwgEvent(m.EVENT_GOOGLE_UPDATED,!0),this.Jt.eventManager().logSwgEvent(m.IMPRESSION_GOOGLE_UPDATED,!0),this.he.openView(this.oe)}async Yn(){try{const t=await this.oe.acceptResultAndVerify(At(),!0,!0);this.O(t,!!t.success)}catch(t){this.t.setTimeout((()=>{throw t}))}this.he.completeView(this.oe)}O(t,e){this.Jt.eventManager().logSwgEvent(m.ACTION_GOOGLE_UPDATED_CLOSE,!0);const s=t.swgUserToken;s&&this.Jt.storage().set(j,s,!0),this.Hs.triggerLinkComplete(),this.Hs.resetLinkProgress(),this.Yi.setToastShown(!0),this.Yi.unblockNextNotification(),this.Yi.reset(e),t&&t.entitlements&&this.Yi.pushNextEntitlements(t.entitlements),this.zn()}whenComplete(){return this.Kn}}class oi{constructor(t,e){this.t=t.win(),this.Jt=t,this.o=t.activities(),this.he=t.dialogManager(),this.Vs=e,this.$n=null,this.Vi=null,this.oe=null}getRequestPromise(){return this.$n}O(){this.he.completeView(this.oe)}async qn(t){if(this.O(),!t.linked)throw c("not linked");this.he.popupClosed(),this.Jt.callbacks().triggerFlowStarted(ct.LINK_ACCOUNT),this.Jt.eventManager().logSwgEvent(m.EVENT_SAVE_SUBSCRIPTION_SUCCESS);const e=new ri(this.Jt,t);return await e.start(),this.Jt.callbacks().triggerLinkProgress(),await e.whenComplete(),!0}async Hn(t){if(t&&t.getRequested())try{const t=await this.Vs(),e=new N;if(null==t?void 0:t.token){if(t.authCode)throw new Error("Both authCode and token are available");e.setToken(t.token)}else{if(!(null==t?void 0:t.authCode))throw new Error("Neither token or authCode is available");e.setAuthCode(t.authCode)}return this.oe.execute(e),t}catch(e){throw this.O(),e}}async start(){const t=this.o.addDefaultArguments({isClosable:!0});this.oe=new p(this.t,this.o,Pt("/linksaveiframe"),t,!1,!0),this.oe.on(v,(t=>{this.$n=this.Hn(t)})),this.Vi=this.he.openView(this.oe,!0),this.Jt.eventManager().logSwgEvent(m.IMPRESSION_SAVE_SUBSCR_TO_GOOGLE);try{const t=await this.oe.acceptResultAndVerify(At(),!0,!0);return await this.qn(t)}catch(e){if(this.O(),l(e))return this.Jt.eventManager().logSwgEvent(m.ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL,!0),this.Jt.callbacks().triggerFlowCanceled(ct.LINK_ACCOUNT),!1;throw e}}}class ai{constructor(t){this.ie=t.eventManager()}sendSubscriptionState(t,e){if(!de(bs,t))throw new Error("Invalid subscription state provided");if((bs.SUBSCRIBER==t||bs.PAST_SUBSCRIBER==t)&&!e)throw new Error("Entitlements must be provided for users with active or expired subscriptions");if(e&&!ue(e))throw new Error("Entitlements must be an Object");let s=null;e&&(s=JSON.stringify(e)),this.ie.logEvent({eventType:m.EVENT_SUBSCRIPTION_STATE,eventOriginator:w.PUBLISHER_CLIENT,isFromUserAction:null,additionalParameters:{state:t,productsOrSkus:s}})}sendEvent(t){let e=null;if(!de(Ts,t.name)||!vs(t.name))throw new Error("Invalid user event provided("+t.name+")");if(t.data){if(!ue(t.data))throw new Error("Event data must be an Object("+t.data+")");e=Object.assign({},e,t.data)}if(me(t.active))e||(e={}),Object.assign(e,{is_active:t.active});else if(null!=t.active)throw new Error("Event active must be a boolean");this.ie.logEvent({eventType:vs(t.name),eventOriginator:w.PUBLISHER_CLIENT,isFromUserAction:t.active,additionalParameters:e})}}class hi{constructor(t){this.Jt=t,this.openViewPromise=null,this.t=t.win(),this.o=t.activities(),this.he=t.dialogManager(),this.oe=new p(this.t,this.o,Pt("/loginiframe"),Lt({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),userConsent:!1}),!0)}async start(){this.Jt.callbacks().triggerFlowStarted(ct.SHOW_LOGIN_NOTIFICATION),this.openViewPromise=this.he.openView(this.oe);try{await this.oe.acceptResult()}catch(t){throw this.he.completeView(this.oe),t}this.he.completeView(this.oe)}}class li{constructor(t){this.Jt=t,this.openViewPromise=null,this.t=t.win(),this.o=t.activities(),this.he=t.dialogManager(),this.oe=new p(this.t,this.o,Pt("/loginiframe"),Lt({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),userConsent:!0}),!0)}async start(){this.Jt.callbacks().triggerFlowStarted(ct.SHOW_LOGIN_PROMPT),this.openViewPromise=this.he.openView(this.oe);try{await this.oe.acceptResult()}catch(t){throw l(t)?this.Jt.callbacks().triggerFlowCanceled(ct.SHOW_LOGIN_PROMPT):this.he.completeView(this.oe),t}this.he.completeView(this.oe)}}class ci{constructor(t,e){this.Rn=t,this.si=e}getOffers(t=this.Rn.getProductId()){if(!t)throw new Error("getOffers requires productId in config or arguments");return this.oi(t)}async oi(t){const e=Nt("/publication/"+encodeURIComponent(this.Rn.getPublicationId())+"/offers?label="+encodeURIComponent(t));return(await this.si.fetchCredentialedJson(e)).offers||[]}}class ui{constructor(t,e){let s,i,n;const r=t.indexOf(":");-1!=r?(i=t,s=i.substring(0,r),n=i.substring(r+1)):(s=t,i=null,n=null),this.ei=s,this.Jn=i,this.G=n,this.Xn=e}getPublicationId(){return this.ei}getProductId(){return this.Jn}getLabel(){return this.G}isLocked(){return this.Xn}}const di="__SWG-SEEN__",pi="subscriptions-control",mi=["CreativeWork","Article","NewsArticle","Blog","Comment","Course","HowTo","Message","Review","WebPage"],gi=new RegExp(mi.join("|"));class fi{constructor(t){this.Qn=null,this.Zn=null,this.g=os(t),this.er=new Promise(((t,e)=>{this.Qn=t,this.Zn=e})),this.ir=new Ei(this.g),this.nr=new _i(this.g),this.rr=new bi(this.g)}resolveConfig(){return Promise.resolve().then(this.check.bind(this)),this.g.whenReady().then(this.check.bind(this)),this.er}check(){if(!this.Qn||!this.Zn)return null;const t=this.ir.check()||this.nr.check()||this.rr.check();return t?(this.Qn(t),this.Qn=null,this.Zn=null):this.g.isReady()&&(this.Zn("No config could be discovered in the page"),this.Qn=null,this.Zn=null),H(t),t}}class wi{checkValue(t,e){return!("string"!=typeof t&&!Array.isArray(t))&&this.lr(this.cr(t),e)}checkSpaceDelimitedList(t,e){const s=t.split(/\s+/);return this.lr(s,e)}lr(t,e){for(let s of t)if(s=s.replace(/^http:\/\/schema.org\//i,""),e.includes(s))return!0;return!1}cr(t){return Array.isArray(t)?t:[t]}}class Ei{constructor(t){this.g=t}check(){if(!this.g.getBody())return null;const t=Ti(this.g.getRootNode(),"subscriptions-product-id");if(!t)return null;const e=Ti(this.g.getRootNode(),"subscriptions-accessible-for-free"),s=!(!e||"false"!==e.toLowerCase());return new ui(t,s)}}class _i{constructor(t){this.g=t,this.ur=new wi}check(){if(!this.g.getBody())return null;const t=this.g.isReady(),e=Array.from(this.g.getRootNode().querySelectorAll('script[type="application/ld+json"]'));for(let s=0;s<e.length;s++){const i=e[s];if(i[di]||!i.textContent||!t&&!h(i))continue;if(i[di]=!0,!gi.test(i.textContent))continue;const n=this.dr(i);if(n)return n}return null}dr(t){let e=ot(t.textContent);if(!e)return null;Array.isArray(e)||(e=[e]);let s=e;for(let i=0;i<s.length;i++){const t=s[i];if(t["@graph"]&&Array.isArray(t["@graph"])&&(s=s.concat(t["@graph"])),!this.ur.checkValue(t["@type"],mi))continue;let e=null;const n=this.pr(t,"isPartOf");if(n)for(let s=0;s<n.length&&(e=this.mr(n[s]),!e);s++);if(!e)continue;const r=this.gr(this.wr(t,"isAccessibleForFree"),!0);return new ui(e,!r)}return null}gr(t,e){if("boolean"==typeof t)return t;if("string"==typeof t){const e=t.toLowerCase();if("false"===e)return!1;if("true"===e)return!0}return e}mr(t){return this.ur.checkValue(t["@type"],["Product"])?this.wr(t,"productID"):null}pr(t,e){const s=t[e];return null==s||""===s?null:Array.isArray(s)?s:[s]}wr(t,e){const s=this.pr(t,e),i=s&&s[0];return null==i||""===i?null:i}}class bi{constructor(t){this.g=t,this.Er=null,this.Jn=null,this.ur=new wi}_r(t){const e=t.querySelectorAll("[itemprop='isAccessibleForFree']");for(let s=0;e[s];s++){const t=e[s],i=t.getAttribute("content")||t.textContent;if(i&&this.br(t,"alreadySeenForAccessInfo")){let t=null;return"true"===i.toLowerCase()?t=!0:"false"===i.toLowerCase()&&(t=!1),t}}return null}br(t,e){for(let s=t;s&&!s[e];s=s.parentNode)if(s[e]=!0,s.hasAttribute&&s.hasAttribute("itemscope")&&s.hasAttribute("itemtype")){const t=s.getAttribute("itemtype");return this.ur.checkSpaceDelimitedList(t,mi)}return!1}mr(t){const e=t.querySelectorAll('[itemprop="productID"]');for(let s=0;e[s];s++){const t=e[s],i=t.getAttribute("content")||t.textContent,n=t.closest("[itemtype][itemscope]");if(!(n.getAttribute("itemtype").indexOf("http://schema.org/Product")<=-1)&&this.br(n.parentElement,"alreadySeenForProductInfo"))return i}return null}Tr(){let t=null;return null!=this.Er?t=!this.Er:this.g.isReady()&&(t=!1),null!=this.Jn&&null!=t?new ui(this.Jn,t):null}dr(){const t=Array.prototype.slice.call(this.g.getRootNode().querySelectorAll("[itemscope][itemtype]")).filter((t=>this.ur.checkSpaceDelimitedList(t.getAttribute("itemtype"),mi)));for(const e of t){null==this.Er&&(this.Er=this._r(e)),this.Jn||(this.Jn=this.mr(e));const t=this.Tr();if(t)return t}return null}check(){return this.g.getBody()?this.dr():null}}function Ti(t,e){const s=t.querySelector(`meta[name="${e}"]`);return s?s.getAttribute("content"):null}const yi=zt(he),Ii={Environment:{LOCAL:"LOCAL",PREPROD:"PREPROD",PRODUCTION:"PRODUCTION",SANDBOX:"SANDBOX",TEST:"TEST",TIN:"TIN"},PaymentMethod:{CARD:"CARD",TOKENIZED_CARD:"TOKENIZED_CARD",UPI:"UPI"},AuthMethod:{CRYPTOGRAM_3DS:"CRYPTOGRAM_3DS",PAN_ONLY:"PAN_ONLY"},ResponseStatus:{CANCELED:"CANCELED",DEVELOPER_ERROR:"DEVELOPER_ERROR"},TotalPriceStatus:{ESTIMATED:"ESTIMATED",FINAL:"FINAL",NOT_CURRENTLY_KNOWN:"NOT_CURRENTLY_KNOWN"},ButtonType:{SHORT:"short",LONG:"long"},ButtonColor:{DEFAULT:"default",BLACK:"black",WHITE:"white"},Id:{POPUP_WINDOW_CONTAINER:"popup-window-container"},STORAGE_KEY_PREFIX:"google.payments.api.storage"};
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */Ii.IS_READY_TO_PAY_RESULT_KEY=Ii.STORAGE_KEY_PREFIX+".isreadytopay.result",Ii.UPI_CAN_MAKE_PAYMENT_CACHE_KEY=Ii.STORAGE_KEY_PREFIX+".upi.canMakePaymentCache",Ii.CLASS_PREFIX="google-payments-",Ii.IFRAME_ACTIVE_CONTAINER_CLASS=`${Ii.CLASS_PREFIX}activeContainer`,Ii.IFRAME_CONTAINER_CLASS=`${Ii.CLASS_PREFIX}dialogContainer`,Ii.IFRAME_STYLE_CENTER_CLASS=`${Ii.CLASS_PREFIX}dialogCenter`,Ii.IFRAME_STYLE_CLASS=`${Ii.CLASS_PREFIX}dialog`,Ii.IFRAME_STYLE=`\n.${Ii.IFRAME_STYLE_CLASS} {\n    animation: none 0s ease 0s 1 normal none running;\n    background: none 0 0 / auto repeat scroll padding-box border-box #fff;\n    background-blend-mode: normal;\n    border: 0 none #333;\n    border-radius: 8px 8px 0 0;\n    border-collapse: separate;\n    bottom: 0;\n    box-shadow: #808080 0 3px 0 0, #808080 0 0 22px;\n    box-sizing: border-box;\n    letter-spacing: normal;\n    max-height: 100%;\n    overflow: visible;\n    position: fixed;\n    width: 100%;\n    z-index: 2147483647;\n    -webkit-appearance: none;\n    left: 0;\n}\n@media (min-width: 480px) {\n  .${Ii.IFRAME_STYLE_CLASS} {\n    width: 480px !important;\n    left: -240px !important;\n    margin-left: calc(100vw - 100vw / 2) !important;\n  }\n}\n.${Ii.IFRAME_CONTAINER_CLASS} {\n  background-color: rgba(0,0,0,0.26);\n  bottom: 0;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  right: 0;\n}\n.iframeContainer {\n  -webkit-overflow-scrolling: touch;\n}\n`,Ii.IFRAME_STYLE_CENTER=`\n.${Ii.IFRAME_STYLE_CENTER_CLASS} {\n  animation: none 0s ease 0s 1 normal none running;\n  background-blend-mode: normal;\n  background: none 0 0 / auto repeat scroll padding-box border-box #fff;\n  border-collapse: separate;\n  border-radius: 8px;\n  border: 0px none #333;\n  bottom: auto;\n  box-shadow: #808080 0 0 22px;\n  box-sizing: border-box;\n  left: -240px;\n  letter-spacing: normal;\n  margin-left: calc(100vw - 100vw / 2) !important;\n  max-height: 90%;\n  overflow: visible;\n  position: absolute;\n  top: 100%;\n  transform: scale(0.8);\n  width: 480px;\n  z-index: 2147483647;\n  -webkit-appearance: none;\n}\n@media (min-height: 667px) {\n  .${Ii.IFRAME_STYLE_CENTER_CLASS} {\n    max-height: 600px;\n  }\n}\n.${Ii.IFRAME_ACTIVE_CONTAINER_CLASS} {\n  top: 50%;\n  transform: scale(1.0) translateY(-50%);\n}\n`,Ii.GPAY_BUTTON_WITH_CARD_INFO_IMAGE="background-image: url(https://pay.google.com/gp/p/generate_gpay_btn_img);",Ii.BUTTON_LOCALE_TO_MIN_WIDTH={en:152,bg:163,cs:192,de:183,es:183,fr:183,hr:157,id:186,ja:148,ko:137,ms:186,nl:167,pl:182,pt:193,ru:206,sk:157,sl:211,sr:146,tr:161,uk:207,zh:156},Ii.GPAY_GRAYPANE="gpay-graypane",Ii.GPAY_BUTTON_CLASS="gpay-button",Ii.BUTTON_STYLE=`\n.${Ii.GPAY_BUTTON_CLASS} {\n  background-origin: content-box;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  border: 0px;\n  border-radius: 4px;\n  box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 1px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n  cursor: pointer;\n  height: 40px;\n  min-height: 40px;\n  padding: 11px 24px;\n}\n\n.${Ii.GPAY_BUTTON_CLASS}.black {\n  background-color: #000;\n  box-shadow: none;\n  padding: 12px 24px 10px;\n}\n\n.${Ii.GPAY_BUTTON_CLASS}.white {\n  background-color: #fff;\n}\n\n.${Ii.GPAY_BUTTON_CLASS}.short {\n  min-width: 90px;\n  width: 160px;\n}\n\n.${Ii.GPAY_BUTTON_CLASS}.black.short {\n  background-image: url(https://www.gstatic.com/instantbuy/svg/dark_gpay.svg);\n}\n\n.${Ii.GPAY_BUTTON_CLASS}.white.short {\n  background-image: url(https://www.gstatic.com/instantbuy/svg/light_gpay.svg);\n}\n\n.${Ii.GPAY_BUTTON_CLASS}.black.active {\n  background-color: #5f6368;\n}\n\n.${Ii.GPAY_BUTTON_CLASS}.black.hover {\n  background-color: #3c4043;\n}\n\n.${Ii.GPAY_BUTTON_CLASS}.white.active {\n  background-color: #fff;\n}\n\n.${Ii.GPAY_BUTTON_CLASS}.white.focus {\n  box-shadow: #e8e8e8 0 1px 1px 0, #e8e8e8 0 1px 3px;\n}\n\n.${Ii.GPAY_BUTTON_CLASS}.white.hover {\n  background-color: #f8f8f8;\n}\n`,Ii.GPAY_BUTTON_WITH_OFFER_ICON_ADDITIONAL_STYLE="position: relative;",Ii.GPAY_OFFER_ICON_CLASS="gpay-offer-icon",Ii.GPAY_OFFER_ICON_SVG='<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="gpay-offer-icon"><defs><path d="M19.41,9.58 L10.41,0.58 C10.05,0.22 9.55,0 9,0 L2,0 C0.9,0 0,0.9 0,2 L0,9 C0,9.55 0.22,10.05 0.59,10.42 L9.59,19.42 C9.95,19.78 10.45,20 11,20 C11.55,20 12.05,19.78 12.41,19.41 L19.41,12.41 C19.78,12.05 20,11.55 20,11 C20,10.45 19.77,9.94 19.41,9.58 Z" id="path-1"></path></defs><g id="buttons_10.05" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Artboard" transform="translate(-40.000000, -43.000000)"><g id="Group-3" transform="translate(40.000000, 43.000000)"><g id="Group-2-Copy-2"><g id="Group-Copy"><g id="ic_loyalty_24px"><mask id="mask-2" fill="white"><use xlink:href="#path-1"></use></mask><use id="gpay-Shape" fill="#FF6100" fill-rule="nonzero" xlink:href="#path-1"></use><path d="M3.5,5 C2.67,5 2,4.33 2,3.5 C2,2.67 2.67,2 3.5,2 C4.33,2 5,2.67 5,3.5 C5,4.33 4.33,5 3.5,5 Z" id="Path" fill="#FFFFFF" fill-rule="nonzero" mask="url(#mask-2)"></path></g></g></g><g id="Group-13-Copy-7" transform="translate(6.000000, 6.000000)" fill="#FFFFFF" fill-rule="nonzero"><g id="Group-13-Copy-2"><path d="M2.15217391,4.55172414 C0.963561082,4.55172414 1.99840144e-14,3.53278598 1.99840144e-14,2.27586207 C1.99840144e-14,1.01893816 0.963561082,6.30606678e-14 2.15217391,6.30606678e-14 C3.34078674,6.30606678e-14 4.30434783,1.01893816 4.30434783,2.27586207 C4.30434783,3.53278598 3.34078674,4.55172414 2.15217391,4.55172414 Z M2.15217391,3.31034483 C2.69245247,3.31034483 3.13043478,2.84719112 3.13043478,2.27586207 C3.13043478,1.70453302 2.69245247,1.24137931 2.15217391,1.24137931 C1.61189535,1.24137931 1.17391304,1.70453302 1.17391304,2.27586207 C1.17391304,2.84719112 1.61189535,3.31034483 2.15217391,3.31034483 Z" id="Combined-Shape"></path><path d="M6.84782609,9 C5.65921326,9 4.69565217,7.98106184 4.69565217,6.72413793 C4.69565217,5.46721402 5.65921326,4.44827586 6.84782609,4.44827586 C8.03643892,4.44827586 9,5.46721402 9,6.72413793 C9,7.98106184 8.03643892,9 6.84782609,9 Z M6.84782609,7.75862069 C7.38810465,7.75862069 7.82608696,7.29546698 7.82608696,6.72413793 C7.82608696,6.15280888 7.38810465,5.68965517 6.84782609,5.68965517 C6.30754753,5.68965517 5.86956522,6.15280888 5.86956522,6.72413793 C5.86956522,7.29546698 6.30754753,7.75862069 6.84782609,7.75862069 Z" id="Combined-Shape"></path><polygon id="Rectangle" transform="translate(4.497720, 4.541938) rotate(34.000000) translate(-4.497720, -4.541938) " points="3.77901778 -0.202295978 4.9740273 -0.171019161 5.21642263 9.28617278 4.02141311 9.25489596"></polygon></g></g></g></g></g></svg>',Ii.GPAY_OFFER_ICON_STYLE=`\n.${Ii.GPAY_OFFER_ICON_CLASS} {\n  position: absolute;\n  right: -5px;\n  top: -5px;\n}\n\n#ic_loyalty_24px use.hover {\n  fill: #FC853B;\n}\n`,Ii.GPAY_OFFER_DESCRIPTION_CLASS="gpay-offer-description",Ii.GPAY_OFFER_DESCRIPTION_STYLE=`\n@import url(//fonts.googleapis.com/css?family=Google+Sans:500);\n.${Ii.GPAY_OFFER_DESCRIPTION_CLASS} {\n  text-align: center;\n  font: 10px 'Google Sans';\n  margin-top: 2px;\n  margin-bottom: 0px;\n}\n\n.${Ii.GPAY_OFFER_DESCRIPTION_CLASS}.gpay-btn-clicked {\n  color: #3C4043;\n}\n\n.${Ii.GPAY_OFFER_DESCRIPTION_CLASS}.short {\n  min-width: 90px;\n  width: 160px;\n}\n\n.${Ii.GPAY_OFFER_DESCRIPTION_CLASS}.long {\n  min-width: 152px;\n  width: 240px;\n}\n`,Ii.GPAY_BUTTON_CARD_INFO_CLASS="gpay-card-info-btn",Ii.GPAY_BUTTON_CARD_INFO_BUTTON_STYLE=`\n  .${Ii.GPAY_BUTTON_CARD_INFO_CLASS} {\n    background-origin: content-box;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    border: 0px;\n    border-radius: 4px;\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 1px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n    cursor: pointer;\n    height: 40px;\n    min-height: 40px;\n    padding: 11px 24px;\n    background-color: #000;\n    box-shadow: none;\n    padding: 9px 24px 10px;\n    min-width: 190px;\n    width: 240px;\n  }\n\n  .${Ii.GPAY_BUTTON_CARD_INFO_CLASS}.active {\n    background-color: #5f6368;\n  }\n\n  .${Ii.GPAY_BUTTON_CARD_INFO_CLASS}.hover {\n    background-color: #3c4043;\n  }\n  `,Ii.TRUSTED_DOMAIN=".google.com";
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
class Ci{constructor(t){this.yr=t}postMessage(t,e){this.yr.postMessage(t,e)}}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */let Si=null,Oi=null,Ri=null,Ai=null,Ni=Date.now(),vi=null,Pi=!1,xi=[];class Li{static load(){if(Si)return;const t=window.gpayInitParams||{};Ri=t.environment||Ii.Environment.PRODUCTION,Si=document.createElement("iframe"),Si.src=Li.Ir(window.location.origin,t.merchantInfo&&t.merchantInfo.merchantId),Li.postMessage({eventType:15,clientLatencyStartMs:Date.now()}),Si.height="0",Si.width="0",Si.style.display="none",Si.style.visibility="hidden",Si.onload=function(){Li.postMessage({eventType:17,clientLatencyStartMs:Date.now()}),Li.iframeLoaded()},document.body?Li.Cr():document.addEventListener("DOMContentLoaded",(()=>Li.Cr()))}static Cr(){document.body.appendChild(Si),Oi=new Ci(Si.contentWindow)}static sendAndWaitForResponse(t,e,s,i){Li.Sr((function t(e){e.data[s]&&(i(e),Li.Or(t))}));const n=Object.assign({eventType:e},t);Li.postMessage(n)}static Sr(t){window.addEventListener("message",t)}static Or(t){window.removeEventListener("message",t)}static postMessage(t){if(!Pi)return void xi.push(t);const e=Object.assign({buyFlowActivityMode:vi,googleTransactionId:Ai,originTimeMs:Ni},t);Oi.postMessage(e,Li.Rr())}static setBuyFlowActivityMode(t){vi=t}static setGoogleTransactionId(t){Ai=t}static setOriginTimeMs(t){Ni=t}static setPostMessageService(t){Oi=t}static reset(){Si=null,xi.length=0,Pi=!1,vi=null}static setIframeLoaded(t){Pi=t}static iframeLoaded(){Pi=!0,xi.forEach((function(t){Li.postMessage(t)})),xi.length=0}static getBuffer(){return xi}static injectIframeForTesting(){Li.reset(),Si=document.createElement("p"),Li.iframeLoaded()}static Rr(){let t="https://pay";return Ri==Ii.Environment.SANDBOX?t+=".sandbox":Ri==Ii.Environment.PREPROD&&(t+="-preprod.sandbox"),t+".google.com"}static Ir(t,e){return`https://pay${Ri==Ii.Environment.PREPROD?"-preprod.sandbox":Ri==Ii.Environment.SANDBOX?".sandbox":""}.google.com/gp/p/ui/payframe?origin=${t}&mid=%{merchantId}`}}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */class ki{constructor(t){this.Ar=t,this.Vs=null}onResult(t){this.Vs=t}isReadyToPay(t){const e=this.Nr(t);return new Promise(((s,i)=>{e.canMakePayment().then((e=>{window.sessionStorage.setItem(Ii.IS_READY_TO_PAY_RESULT_KEY,e.toString());const i={result:e};t.apiVersion>=2&&t.existingPaymentMethodRequired&&(i.paymentMethodPresent=e),s(i)})).catch((function(t){window.sessionStorage.getItem(Ii.IS_READY_TO_PAY_RESULT_KEY)?s({result:"true"==window.sessionStorage.getItem(Ii.IS_READY_TO_PAY_RESULT_KEY)}):s({result:!1})}))}))}prefetchPaymentData(t){this.Nr(t,this.Ar,t.transactionInfo.currencyCode,t.transactionInfo.totalPrice)}loadPaymentData(t){this.vr(t)}Nr(t,e,s,i){let n={};return t&&(n=JSON.parse(JSON.stringify(t))),n.apiVersion||(n.apiVersion=1),n.swg&&(n.allowedPaymentMethods=[Ii.PaymentMethod.CARD]),e&&e==Ii.Environment.TEST&&(n.environment=e),new PaymentRequest([{supportedMethods:["https://google.com/pay"],data:n}],{total:{label:"Estimated Total Price",amount:{currency:s||"USD",value:i||"0"}}})}vr(t){const e=t.transactionInfo&&t.transactionInfo.currencyCode||void 0,s=t.transactionInfo&&t.transactionInfo.totalPrice||void 0,i=this.Nr(t,this.Ar,e,s);this.Vs(i.show().then((t=>(t.complete("success"),t.details))).catch((function(t){throw t.statusCode=Ii.ResponseStatus.CANCELED,t})))}}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */class Mi{constructor(t){this.g=t,this.Pr=t.createElement(Ii.GPAY_GRAYPANE),Ui(this.Pr,{"z-index":2147483647,display:"none",position:"fixed",top:0,right:0,bottom:0,left:0,"background-color":"rgba(32, 33, 36, .6)"}),this.Lr=null,this.Pr.addEventListener("click",(()=>{if(this.Lr)try{this.Lr.focus()}catch(t){}}))}show(t){return this.Lr=t||null,this.g.body.appendChild(this.Pr),Ui(this.Pr,{display:"block",opacity:0}),Di(this.Pr,{opacity:1},300,"ease-out")}hide(){if(this.Lr=null,this.Pr.parentElement)return Di(this.Pr,{opacity:0},300,"ease-out").then((()=>{Ui(this.Pr,{display:"none"}),this.g.body.removeChild(this.Pr)}))}}function Ui(t,e){for(const s in e)t.style.setProperty(s,e[s].toString(),"important")}function Di(t,e,s,i){const n=t.ownerDocument.defaultView,r=t.style.transition||"";return new Promise((r=>{n.setTimeout((()=>{n.setTimeout(r,s);const o=`${s}ms ${i}`;Ui(t,Object.assign({transition:`transform ${o}, opacity ${o}`},e))}))})).then((()=>{Ui(t,Object.assign({transition:r},e))}))}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Gi(){if(-1!=window.navigator.userAgent.indexOf("OPR/"))return!1;const t=window.navigator.userAgent.match(/Android/i),e=window.navigator.userAgent.match(/Chrome\/([0-9]+)\./i);return null!=t&&"PaymentRequest"in window&&"Google Inc."==window.navigator.vendor&&null!=e&&Number(e[1])>=59}function Fi(t){if(t.apiVersion>=2){const e=Yi(t);if(e&&1==e.length&&e[0]==Ii.AuthMethod.CRYPTOGRAM_3DS)return!0}return 1==t.allowedPaymentMethods.length&&t.allowedPaymentMethods[0]==Ii.PaymentMethod.TOKENIZED_CARD}function Wi(t,e){if(t.apiVersion>=2){const s=Yi(t);return!(!s||!s.includes(e))}return!1}function Bi(){return window.location.hostname.endsWith(Ii.TRUSTED_DOMAIN)||void 0===window.isSecureContext||window.isSecureContext?null:"Google Pay APIs should be called in secure context!"}function Vi(t){return Object.values(Ii.PaymentMethod).includes(t)}function ji(t){return Object.values(Ii.AuthMethod).includes(t)}function zi(t){if(!t)return"paymentDataRequest must be set!";if(t.swg)return(e=t.swg)?e.skuId&&e.publicationId?null:"Both skuId and publicationId must be provided":"Swg parameters must be provided";var e;if(!t.transactionInfo)return"transactionInfo must be set!";if(!t.transactionInfo.currencyCode)return"currencyCode in transactionInfo must be set!";if(!t.transactionInfo.totalPriceStatus||!Object.values(Ii.TotalPriceStatus).includes(t.transactionInfo.totalPriceStatus))return"totalPriceStatus in transactionInfo must be set to one of NOT_CURRENTLY_KNOWN, ESTIMATED or FINAL!";if("NOT_CURRENTLY_KNOWN"!==t.transactionInfo.totalPriceStatus&&!t.transactionInfo.totalPrice)return"totalPrice in transactionInfo must be set when totalPriceStatus is ESTIMATED or FINAL!";const s=Ki(t);if(s){if(!s.parameters)return"parameters must be set in allowedPaymentMethod!";var i=s.parameters;if(!i.payeeVpa)return"payeeVpa in allowedPaymentMethod parameters must be set!";if(!i.payeeName)return"payeeName in allowedPaymentMethod parameters must be set!";if(!i.referenceUrl)return"referenceUrl in allowedPaymentMethod parameters must be set!";if(!i.mcc)return"mcc in allowedPaymentMethod parameters must be set!";if(!i.transactionReferenceId)return"transactionReferenceId in allowedPaymentMethod parameters must be set!";if("INR"!==t.transactionInfo.currencyCode)return"currencyCode in transactionInfo must be set to INR!";if("FINAL"!==t.transactionInfo.totalPriceStatus)return"totalPriceStatus in transactionInfo must be set to FINAL!";if(!t.transactionInfo.transactionNote)return"transactionNote in transactionInfo must be set!"}return null}function Ki(t){return!Gi()||t.apiVersion<2||!t.allowedPaymentMethods?null:$i(t,Ii.PaymentMethod.UPI)}function Yi(t){if(t.allowedPaymentMethods){const e=$i(t,Ii.PaymentMethod.CARD);if(e&&e.parameters)return e.parameters.allowedAuthMethods}return null}function $i(t,e){for(var s=0;s<t.allowedPaymentMethods.length;s++){const i=t.allowedPaymentMethods[s];if(i.type==e)return i}return null}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
const{ActivityPort:qi,ActivityPorts:Hi,ActivityIframePort:Ji}=yi,Xi="GPAY",Qi="Safari";class Zi{constructor(t,e,s,i,n){this.Ar=t,this.activities=i||new Hi(window),this.fi=new Mi(window.document),this.Vs=null,this.kr=null,this.Mr=!1,this.m=null,this.Ur=null,this.Dr=e,this.Gr=n||null,this.Fr=null}onResult(t){this.Vs||(this.Vs=t,this.activities.onResult(Xi,this.Wr.bind(this)))}Wr(t){this.fi.hide(),this.Vs(t.acceptResult().then((t=>{if(t.origin!=this.Br())throw new Error("channel mismatch");const e=t.data;if(e.redirectEncryptedCallbackData)return Li.setBuyFlowActivityMode(3),this.Vr(e.redirectEncryptedCallbackData).then((t=>{const s=Object.assign({},e);return delete s.redirectEncryptedCallbackData,Object.assign(s,t)}));if(!t.originVerified||!t.secureChannel)throw new Error("channel mismatch");return e}),(t=>{const e=t.message;let s=t.message;try{s=JSON.parse(e.substring("Error: ".length))}catch(i){}return s.statusCode&&-1==["DEVELOPER_ERROR","MERCHANT_ACCOUNT_ERROR"].indexOf(s.statusCode)&&(s={statusCode:"CANCELED"}),"AbortError"==s&&(s={statusCode:"CANCELED"}),Promise.reject(s)})))}Vr(t){return new Promise(((e,s)=>{const i=this.jr(),n=new XMLHttpRequest;n.open("POST",i,!0),"withCredentials"in n&&(n.withCredentials=!0),n.onreadystatechange=()=>{if(!(n.readyState<2)){if(n.status<100||n.status>599)return n.onreadystatechange=null,void s(new Error(`Unknown HTTP status ${n.status}`));if(4==n.readyState)try{e(JSON.parse(n.responseText))}catch(t){s(t)}}},n.onerror=()=>{s(new Error("Network failure"))},n.onabort=()=>{s(new Error("Request aborted"))},n.send(t)}))}isReadyToPay(t){return new Promise(((e,s)=>{if(Fi(t))return void e({result:!1});const i=window.navigator.userAgent;if(i.indexOf("GSA/")>0&&i.indexOf(Qi)>0)return void e({result:!1});if(i.indexOf("FxiOS")>0)return void e({result:!1});const n=i.indexOf("Chrome")>0||i.indexOf("Firefox")>0||i.indexOf(Qi)>0;n&&t.apiVersion>=2&&t.existingPaymentMethodRequired?(t.environment=this.Ar,Li.sendAndWaitForResponse(t,6,"isReadyToPayResponse",(s=>{const i={result:n};t.existingPaymentMethodRequired&&(i.paymentMethodPresent="READY_TO_PAY"==s.data.isReadyToPayResponse),e(i)}))):e({result:n})}))}prefetchPaymentData(t){}loadPaymentData(t){t.swg||t.apiVersion||(t.apiVersion=1),t.environment=this.Ar,Li.setBuyFlowActivityMode(t.forceRedirect?3:2);const e=this.activities.open(Xi,this.zr(),this.Kr(t),t,{width:600,height:600});this.fi.show(e&&e.targetWin)}Kr(t){return t.forceRedirect?"_top":"gp-js-popup"}Br(){if(this.Ar==Ii.Environment.LOCAL)return"";let t;return t=this.Ar==Ii.Environment.PREPROD?"pay-preprod.sandbox":this.Ar==Ii.Environment.SANDBOX?"pay.sandbox":"pay","https://"+t+".google.com"}Yr(){return this.Br()+"/gp/p"}jr(){let t=this.Yr()+"/apis/buyflow/process";return this.Gr&&(t+="?rk="+encodeURIComponent(this.Gr)),t}zr(){return this.Ar==Ii.Environment.TIN?"/ui/pay":this.Yr()+"/ui/pay"}getIframeUrl(t,e){let s=`https://pay.google.com/gp/p/ui/pay?origin=${e}`;return t!=Ii.Environment.SANDBOX&&t!=Ii.Environment.PREPROD||(s=`https://pay'+  (environment == Constants.Environment.PREPROD ? '-preprod' : '')+  '.sandbox.google.com/gp/p/ui/pay?origin=${e}`),s}$r(t,e){this.qr(e,"all 250ms ease 0s"),e.height="0px",setTimeout((()=>{t.parentNode&&t.parentNode.removeChild(t)}),250)}Hr(t){const e=function(t){const e=document.createElement("div");e.classList.add(Ii.IFRAME_CONTAINER_CLASS);const s=document.createElement("div");s.classList.add("iframeContainer");const i=document.createElement("iframe");return i.classList.add(t),i.setAttribute("frameborder","0"),i.setAttribute("scrolling","no"),s.appendChild(i),e.appendChild(s),document.body.appendChild(e),{container:e,iframe:i}}(this.Jr(t)?Ii.IFRAME_STYLE_CENTER_CLASS:Ii.IFRAME_STYLE_CLASS),s=e.iframe,i=e.container;return i.addEventListener("click",this.Xr.bind(this,e)),i.style.display="none",s.style.display="none",s.height="0px",this.qr(s,"all 250ms ease 0s"),this.Mr=!1,e}Qr(t){this.Zr(t)}Xr(t){t.container.parentNode&&history.back()}Zr(t){t.container.parentNode&&(this.Ur(Promise.reject({errorCode:"CANCELED"})),this.$r(t.container,t.iframe),this.m&&this.m.disconnect())}Jr(t){return null}eo(t,e,s){t.style.display="block",e.style.display="block",setTimeout((()=>{e.height="280px",this.Jr(s)&&e.classList.add(Ii.IFRAME_ACTIVE_CONTAINER_CLASS),setTimeout((()=>{this.Mr=!0,this.Fr&&(this.qr(e,this.Fr.transition),e.height=this.Fr.height,this.Fr=null)}),250)}),1)}qr(t,e){t.style.setProperty("transition",e),t.style.setProperty("-webkit-transition",e)}so(t,e,s){let i;s.swg||s.apiVersion||(s.apiVersion=1),s.environment=this.Ar;const n=this.getIframeUrl(this.Ar,window.location.origin);return this.activities.openIframe(e,n,s).then((t=>(this.m=t,t.onMessage((t=>{"resize"===t.type&&this.Mr?(i||(i=Date.now()),Date.now()<i+250?this.qr(e,t.transition+", height 250ms"):this.qr(e,t.transition),e.height=t.height):this.Fr={height:t.height,transition:t.transition}})),t.acceptResult()))).then((s=>(this.$r(t,e),history.back(),s.data)),(s=>(this.$r(t,e),history.back(),Promise.reject(s))))}}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */class tn{constructor(){}isUpiRequest(t){return!!Ki(t)}isReadyToPay(t){if(Ki(t))return t.existingPaymentMethodRequired?Promise.resolve({result:!0,paymentMethodPresent:!0}):Promise.resolve({result:!0});throw new Error("No Upi payment method found in handler")}loadPaymentData(t,e,s){const i=e.parameters,n=t.transactionInfo,r=[{supportedMethods:["https://tez.google.com/pay"],data:{pa:i.payeeVpa,pn:i.payeeName,tr:i.transactionReferenceId,url:i.referenceUrl,mc:i.mcc,tn:n.transactionNote}}];i.transactionId&&(r[0].data.tid=i.transactionId);const o={total:{label:"Total",amount:{currency:n.currencyCode,value:n.totalPrice}},displayItems:[{label:"Original Amount",amount:{currency:n.currencyCode,value:n.totalPrice}}]};let a=new PaymentRequest(r,o);s(this.io(a).then((t=>t?this.ro(a):this.oo())).then((s=>this.ao(s,t,e))).catch((t=>(t.statusCode=Ii.ResponseStatus.CANCELED,Promise.reject(t)))))}ro(t){return t.show().then((t=>(t.complete("success"),t.details)))}io(t){const e=window.sessionStorage.getItem(Ii.UPI_CAN_MAKE_PAYMENT_CACHE_KEY);return e?Promise.resolve("true"===e):t.canMakePayment?t.canMakePayment().then((t=>(t&&window.sessionStorage.setItem(Ii.UPI_CAN_MAKE_PAYMENT_CACHE_KEY,t.toString()),t))):Promise.resolve(!0)}oo(){return window.location.replace("https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.paisa.user"),Promise.reject({errorMessage:"Cannot redirect to Tez page in Google Play."})}ao(t,e,s){const i=JSON.parse(t.tezResponse);if("FAILURE"===i.Status){let t;switch(i.responseCode){case"ZM":t={errorCode:3,errorMessage:"Payment failure due to invalid MPIN."};break;case"Z9":t={errorCode:3,errorMessage:"Payment failure due to insufficient funds."};break;case"91":t={errorCode:1,errorMessage:"Payment failure due to transaction timeout or connection issue."};break;default:t={errorMessage:"Payment cancelled."}}return Promise.reject(t)}const n={paymentMethodType:"UPI",payeeVpa:s.parameters.payeeVpa,status:i.Status,transactionReferenceId:s.parameters.transactionReferenceId,transactionId:s.parameters.transactionId?s.parameters.transactionId:i.txnId,transactionInfo:e.transactionInfo};let r={apiVersion:e.apiVersion,apiVersionMinor:e.apiVersionMinor,paymentMethodData:{type:s.type,tokenizationData:{type:"DIRECT",token:{protocolVersion:"ECv1",signature:"",signedMessage:n}}}};return Promise.resolve(r)}}
/** @license
  Math.uuid.js (v1.4)
  http://www.broofa.com
  mailto:robert@broofa.com
  Copyright (c) 2010 Robert Kieffer
  Dual licensed under the MIT and GPL licenses.
  */class en{}var sn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");en.uuid=function(t,e){var s,i,n=sn,r=[];if(e=e||n.length,t)for(s=0;s<t;s++)r[s]=n[0|Math.random()*e];else for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",s=0;s<36;s++)r[s]||(i=0|16*Math.random(),r[s]=n[19==s?3&i|8:i]);return r.join("")},en.uuidFast=function(){for(var t,e=sn,s=new Array(36),i=0,n=0;n<36;n++)8==n||13==n||18==n||23==n?s[n]="-":14==n?s[n]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),t=15&i,i>>=4,s[n]=e[19==n?3&t|8:t]);return s.join("")},en.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))};
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
const nn=["actions.google.com","amp-actions.sandbox.google.com","amp-actions-staging.sandbox.google.com","amp-actions-autopush.sandbox.google.com","payments.developers.google.com","payments.google.com"];class rn{constructor(t,e,s,i){
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
var n;this.ho=e,function(t){if(t.environment&&!Object.values(Ii.Environment).includes(t.environment))throw new Error("Parameter environment in PaymentOptions can optionally be set to PRODUCTION, otherwise it defaults to TEST. "+t.environment)}(t),this.lo=null,this.Ar=t.environment||Ii.Environment.TEST,rn.Dr||(rn.Dr=this.co()&&t.i&&t.i.googleTransactionId?t.i.googleTransactionId:(n=this.Ar,en.uuidFast()+"."+n)),this.uo=t,this.do=new Zi(this.Ar,rn.Dr,s,i,t.i&&t.i.redirectKey),this.po=5;const r=Gi();this.mo=r&&!s?new ki(this.Ar):this.do,this.fo=new tn,this.do.onResult(this.wo.bind(this)),this.mo.onResult(this.wo.bind(this)),Li.load(),r&&Li.setBuyFlowActivityMode(4),Li.setGoogleTransactionId(rn.Dr),Li.postMessage({eventType:9,clientLatencyStartMs:Date.now()}),window.addEventListener("message",(t=>this.Eo(t)))}isReadyToPay(t){t&&(t=Object.assign({},this.uo,t));const e=Date.now(),s=Bi()||function(t){if(!t)return"isReadyToPayRequest must be set!";if(t.apiVersion>=2){if(!("apiVersionMinor"in t))return"apiVersionMinor must be set!";if(!t.allowedPaymentMethods||!Array.isArray(t.allowedPaymentMethods)||0==t.allowedPaymentMethods.length)return"for v2 allowedPaymentMethods must be set to an array containing a list of accepted payment methods";for(var e=0;e<t.allowedPaymentMethods.length;e++){let n=t.allowedPaymentMethods[e];if(n.type==Ii.PaymentMethod.CARD){if(!n.parameters)return"Field parameters must be setup in each allowedPaymentMethod";var s=n.parameters.allowedCardNetworks;if(!s||!Array.isArray(s)||0==s.length)return"allowedCardNetworks must be setup in parameters for type CARD";var i=n.parameters.allowedAuthMethods;if(!i||!Array.isArray(i)||0==i.length||!i.every(ji))return"allowedAuthMethods must be setup in parameters for type 'CARD'  and must contain 'CRYPTOGRAM_3DS' and/or 'PAN_ONLY'"}}return null}return t.allowedPaymentMethods&&Array.isArray(t.allowedPaymentMethods)&&0!=t.allowedPaymentMethods.length&&t.allowedPaymentMethods.every(Vi)?null:"allowedPaymentMethods must be set to an array containing 'CARD' and/or 'TOKENIZED_CARD'!"}(t);if(s)return new Promise(((t,e)=>{rn._o("isReadyToPay",s),Li.postMessage({eventType:0,error:2}),e({statusCode:Ii.ResponseStatus.DEVELOPER_ERROR,statusMessage:s})}));const i=this.bo(t);return i.then((t=>(Li.postMessage({eventType:0,clientLatencyStartMs:e,isReadyToPayApiResponse:t}),t))),i}bo(t){if(this.fo.isUpiRequest(t))return this.fo.isReadyToPay(t);if(Gi()&&!on(t)){if(t.apiVersion>=2)return this.To(t);{const e=this.do.isReadyToPay(t),s=this.mo.isReadyToPay(t);return Fi(t)?s:s.then((()=>e))}}return this.do.isReadyToPay(t)}To(t){let e=Promise.resolve({result:!1});t.existingPaymentMethodRequired&&(e=Promise.resolve({result:!1,paymentMethodPresent:!1}));let s=e;if(Wi(t,Ii.AuthMethod.CRYPTOGRAM_3DS)){const e=JSON.parse(JSON.stringify(t));for(let t=0;t<e.allowedPaymentMethods.length;t++)e.allowedPaymentMethods[t].type==Ii.PaymentMethod.CARD&&(e.allowedPaymentMethods[t].parameters.allowedAuthMethods=[Ii.AuthMethod.CRYPTOGRAM_3DS]);s=this.mo.isReadyToPay(e)}let i=e;return Wi(t,Ii.AuthMethod.PAN_ONLY)&&(i=this.do.isReadyToPay(t)),s.then((t=>1==(t&&t.result)?t:i))}prefetchPaymentData(t){const e=Bi()||zi(t);e?rn._o("prefetchPaymentData",e):(this.yo(t),Gi()&&!on(t)?this.mo.prefetchPaymentData(t):this.do.prefetchPaymentData(t))}loadPaymentData(t){Li.postMessage({eventType:5});const e=Bi()||zi(t);if(this.po=t&&t.swg?6:5,e)return void this.ho(new Promise(((t,s)=>{Li.postMessage({eventType:1,error:2,buyFlowMode:this.po}),rn._o("loadPaymentData",e),s({statusCode:Ii.ResponseStatus.DEVELOPER_ERROR,statusMessage:e})})));const s=Ki(t);s?this.fo.loadPaymentData(t,s,this.wo.bind(this)):(this.lo=Date.now(),this.yo(t),on(t)?this.do.loadPaymentData(t):this.mo.loadPaymentData(t))}static _o(t,e){console.error("DEVELOPER_ERROR in "+t+" : "+e)}createButton(t={}){const e=Date.now();return Li.postMessage({eventType:2,clientLatencyStartMs:e}),null}Eo(t){this.co()&&"logPaymentData"===t.data.name&&Li.postMessage(t.data.data)}co(){return-1!=nn.indexOf(window.location.hostname)}wo(t){t.then((t=>{Li.postMessage({eventType:1,clientLatencyStartMs:this.lo,buyFlowMode:this.po})})).catch((t=>{t.errorCode?Li.postMessage({eventType:1,error:t.errorCode,buyFlowMode:this.po}):Li.postMessage({eventType:1,error:6,buyFlowMode:this.po})})),this.ho(t)}yo(t){const e={startTimeMs:Date.now(),googleTransactionId:rn.Dr};return t.i=t.i?Object.assign(e,t.i):e,t}}function on(t){return!0===(t.i&&t.i.disableNative)}class an{constructor(t){this.g=t}preconnect(t){this.Io(t,"preconnect")}prefetch(t){this.Io(t,"preconnect prefetch")}Io(t,e){const s=o(this.g,"link",{rel:e,href:t});this.g.head.appendChild(s)}}const hn={PRODUCTION:"https://pay.google.com",SANDBOX:"https://pay.sandbox.google.com"};class ln{constructor(t){this.Co=null,this.jn=null,this.So=null,this.Oo=null,this.t=t.win(),this.o=t.activities(),this.Ro=t.analytics(),this.Ao=new cn(this.t),this.No=new an(this.t.document),this.vo()&&(this.preconnect(this.No),this.Po()),this.Ao.prepare(),this.ie=t.eventManager()}xo(t,e,s){return rn.Dr=e,new rn(t,s,!1,this.o.getOriginalWebActivityPorts())}preconnect(t){t.prefetch(xt(hn[Rt().payEnv]+"/gp/p/ui/pay")),t.prefetch("https://payments.google.com/payments/v4/js/integrator.js?ss=md"),t.prefetch("https://clients2.google.com/gr/gr_full_2.0.6.js")}Po(){this.Co=this.xo({environment:Rt().payEnv,i:{redirectKey:this.Ao.restoreKey()}},this.Ro.getTransactionId(),this.Lo.bind(this))}vo(){const t=this.t.location.hash,e=/redirectEncryptedCallbackData/.test(t),s=/swgRequest/.test(t);return e&&s}getType(){return"PAYJS"}start(t,e={}){let s;this.Oo=t,this.Co||(this.preconnect(this.No),this.Po()),e.forceRedirect&&(t.forceRedirect=!0),un(t,"disableNative",e.forceDisableNative||this.t!=this.Mo());const i=new Promise((t=>{s=t}));return this.Ao.useVerifier((async i=>{i&&un(t,"redirectVerifier",i),e.forceRedirect&&(await this.ie.getReadyPromise(),await this.Ro.getLoggingPromise()),this.Co.loadPaymentData(t),s(!0)})),i}async onResponse(t){this.So=t,this.jn&&(await 0,t(this.Uo(this.jn,this.Oo)))}Lo(t){this.jn=t,this.So&&this.So(this.Uo(this.jn,this.Oo))}async Uo(t,e){try{const s=await t;return e&&(s.paymentRequest=e),s}catch(s){const t=s;if("object"==typeof t&&"CANCELED"===t.statusCode){const t=c("Cancelled");throw t.productType=e?e.i.productType:null,t}throw t}}Mo(){return this.t.top}}class cn{constructor(t){this.t=t,this.Do=null,this.Go=null,this.Do=null,this.Go=null}prepare(){return this.Fo((()=>{}))}useVerifier(t){this.Fo((e=>{if(e)try{this.t.localStorage.setItem($,e.key)}catch(s){e=null}t(e&&e.verifier||null)}))}restoreKey(){try{return this.t.localStorage&&this.t.localStorage.getItem($)||null}catch(t){return null}}async Fo(t){this.Do||(this.Wo()?(this.Do=this.Bo(),this.Go=await this.Do):(this.Do=Promise.resolve(null),this.Go=null)),t(this.Go)}Wo(){let t;try{t=!!this.t.localStorage}catch(s){return!1}const e=this.t.crypto;return!!(t&&e&&e.subtle&&e.subtle.digest)}async Bo(){const t=this.t.crypto;try{const e=new Uint8Array(16);t.getRandomValues(e);const s=btoa(et(e)),i=await t.subtle.digest({name:"SHA-384"},tt(s));return{key:s,verifier:btoa(et(new Uint8Array(i)))}}catch(e){return null}}}function un(t,e,s){t.i=Object.assign(t.i||{},{[e]:s})}var dn=(t=>(t.GENERAL="general",t.PAYWALL="paywall",t))(dn||{});class pn{constructor(t,e,s){this.t=t,this.Jt=e,this.si=s,this.Vo=null,this.jo=1,this.ei=this.Jt.pageConfig().getPublicationId(),this.Jt.eventManager().registerEventListener(this.Ls.bind(this))}zo(){return this.t.document.cookie}Ko(){if(!this.Vo){const t=this.zo().match("(^|;)\\s*__gads\\s*=\\s*([^;]+)");this.Vo=t&&encodeURIComponent(t.pop())}return this.Vo}Yo(t){t=Tt(t,"u_tz","240"),t=Tt(t,"v",String(this.jo));const e=this.Ko();return e&&(t=Tt(t,"cookie",e)),Tt(t,"cdm",this.t.location.hostname)}sendSubscriptionState(t,e){let s=vt("/subopt/data");return s=Tt(s,"states",this.ei+":"+t),e&&(s=Tt(s,"extrainfo",e)),this.si.fetch(this.Yo(s),{method:"GET",credentials:"include"})}$o(t,e){let s=vt("/subopt/data");return s=Tt(s,"events",this.ei+":"+t),e&&(s=Tt(s,"extrainfo",e)),this.si.fetch(this.Yo(s),{method:"GET",credentials:"include"})}Ls(t){if(t.eventOriginator===w.SHOWCASE_CLIENT)return;if(!this.Jt.config().enablePropensity&&t.eventOriginator!==w.PROPENSITY_CLIENT)return;let e=t.additionalParameters;if(t.eventType===m.EVENT_SUBSCRIPTION_STATE)return void this.sendSubscriptionState(e.state,e.productsOrSkus);const s=(i=t.eventType)&&Is[i]||null;var i;null!=s&&(e instanceof R&&(e=void 0),me(t.isFromUserAction)&&(ue(e)||(e={}),e.is_active=t.isFromUserAction),this.$o(s,JSON.stringify(e)))}qo(t){if(!t.header)return{header:{ok:!1},body:{error:"No valid response"}};if(t.header.ok){let e=null;const s=t.scores,i=[];for(let t=0;t<s.length;t++){const n=s[t];let r;if(n.score){const t={value:n.score,bucketed:2==n.score_type};r={product:n.product,score:t}}else r={product:n.product,error:n.error_message};i.push(r),e={header:{ok:!0},body:{scores:i}}}return e}return{header:{ok:!1},body:{error:t.error}}}async getPropensity(t,e){const s=vt("/subopt/pts?products=")+this.ei+"&type="+e+"&ref="+t,i=await this.si.fetch(this.Yo(s),{method:"GET",credentials:"include"}),n=await i.json();return this.qo(n)}}class mn{constructor(t,e,s){this.t=t,this.Ho=new pn(t,e,s),this.ie=e.eventManager()}sendSubscriptionState(t,e){if(!Object.values(bs).includes(t))throw new Error("Invalid subscription state provided");if((bs.SUBSCRIBER==t||bs.PAST_SUBSCRIBER==t)&&!e)throw new Error("Entitlements must be provided for users with active or expired subscriptions");if(e&&!ue(e))throw new Error("Entitlements must be an Object");let s=null;e&&(s=JSON.stringify(e)),this.Ho.sendSubscriptionState(t,s)}getPropensity(t){if(t&&!Object.values(dn).includes(t))throw new Error("Invalid propensity type requested");return t||(t=dn.GENERAL),this.Ho.getPropensity(this.t.document.referrer,t)}sendEvent(t){const e=vs(t.name);let s=null;if(!de(Ts,t.name)||!e)throw new Error("Invalid user event provided("+t.name+")");if(t.data){if(!ue(t.data))throw new Error("Event data must be an Object("+t.data+")");s={},Object.assign(s,t.data)}if(me(t.active))s||(s={}),Object.assign(s,{is_active:t.active});else if(null!=t.active)throw new Error("Event active must be a boolean");this.ie.logEvent({eventType:e,eventOriginator:w.PROPENSITY_CLIENT,isFromUserAction:t.active,additionalParameters:s})}}class gn{constructor(t){this.t=t,this.Jo={}}get(t,e=!1){return this.Jo[t]||(this.Jo[t]=new Promise((s=>{const i=e?this.t.localStorage:this.t.sessionStorage;if(i)try{s(i.getItem(fn(t)))}catch(n){s(null)}else s(null)}))),this.Jo[t]}set(t,e,s=!1){return this.Jo[t]=Promise.resolve(e),new Promise((i=>{const n=s?this.t.localStorage:this.t.sessionStorage;if(n)try{n.setItem(fn(t),e)}catch(r){}i()}))}remove(t,e=!1){return delete this.Jo[t],new Promise((s=>{const i=e?this.t.localStorage:this.t.sessionStorage;if(i)try{i.removeItem(fn(t))}catch(n){}s()}))}async storeEvent(t){const e=await this.getEvent(t);e.push(Date.now());const s=this.Xo(e);this.set(t,s,!0)}async getEvent(t){const e=await this.get(t,!0);return this.Qo(this.Zo(e))}Zo(t){return null===t?[]:t.split(",").map((t=>parseInt(t,10)))}Xo(t){return t.join(",")}Qo(t){const e=Date.now();let s=t.length;for(let i=0;i<t.length;i++)if(e-t[i]<=6048e5){s=i;break}return t.slice(s)}}function fn(t){return"subscribe.google.com:"+t}class wn{constructor(t){this.ta=()=>{},this.o=t.activities(),this.t=t.win(),this.te=t.pageConfig(),this.he=t.dialogManager()}async start(t){const{publisherProvidedId:e}=t;if(!e)throw new Error("Missing required field: publisherProvidedId");const s=Lt({publicationId:this.te.getPublicationId()}),i=new p(this.t,this.o,Pt("/linksaveiframe",{subscriptionLinking:"true",ppid:e}),s,!1);i.on(k,(t=>{var e;this.ta({publisherProvidedId:t.getPublisherProvidedId(),success:null!=(e=t.getSuccess())&&e})}));const n=new Promise((t=>{this.ta=t}));return await this.he.openView(i,!1,{desktopConfig:{isCenterPositioned:!1}}),n}}class En{constructor(t,e){this.ea=e,this.openViewPromise=null,this.t=t.win(),this.o=t.activities(),this.he=t.dialogManager(),this.ea||(this.ea=Promise.reject("No account promise provided")),this.oe=new p(this.t,this.o,Pt("/waitforsubscriptionlookupiframe"),Lt({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId()}),!0,!0)}async start(){this.openViewPromise=this.he.openView(this.oe);try{const t=await this.ea;return this.he.completeView(this.oe),t}catch(t){throw this.he.completeView(this.oe),t}}}const _n="SWG",bn="SUBSCRIPTIONS";class Tn{constructor(t){this.t=t,this.g=os(t),this.ui=Promise.resolve(),this.sa=null,this.Rn={useArticleEndpoint:be(t,Qs.USE_ARTICLE_ENDPOINT_CLASSIC)},this.ia=!1,this.na=null,this.zs=new Promise((t=>{this.na=t})),this.ra=null,this.oa=new je(this.g,this.zs),this.oa.init()}whenReady(){return this.ui}async aa(t){if(!t)return this.zs;if(this.ia)return this.ra&&this.ra.check(),this.zs;this.ia=!0;const e=await this.ha(),s=new yn(this.g,e,{configPromise:this.zs,useArticleEndpoint:this.Rn.useArticleEndpoint||!1},this.Rn);return this.na(s),s}async ha(){if(this.sa)return new ui(this.sa,!1);this.ra=new fi(this.g);try{const t=await this.ra.resolveConfig();return this.ra=null,t}catch(t){throw this.ra=null,t}}startSubscriptionsFlowIfNeeded(){const t=function(t){const e=Ti(t,pi);if(e)return e;const s=t.querySelector(`script[${pi}]`);return s?s.getAttribute(pi):null}(this.t.document);return H(t,"mode"),"manual"==t?null:this.start()}init(t){Q(!this.ia,"already configured"),this.sa=t,this.aa(!0).then((t=>{t.analytics().setReadyForLogging(),t.analytics().start()}))}async configure(t){return Object.assign(this.Rn,t),(await this.aa(!1)).configure(t)}async start(){return(await this.aa(!0)).start()}async reset(){return(await this.aa(!0)).reset()}async clear(){return(await this.aa(!0)).clear()}async getEntitlements(t){return(await this.aa(!0)).getEntitlements(t)}async setOnEntitlementsResponse(t){return(await this.aa(!1)).setOnEntitlementsResponse(t)}async getOffers(t){return(await this.aa(!0)).getOffers(t)}async showOffers(t){return(await this.aa(!0)).showOffers(t)}async showUpdateOffers(t){return(await this.aa(!0)).showUpdateOffers(t)}async showSubscribeOption(t){return(await this.aa(!0)).showSubscribeOption(t)}async showAbbrvOffer(t){return(await this.aa(!0)).showAbbrvOffer(t)}async showContributionOptions(t){return(await this.aa(!0)).showContributionOptions(t)}async waitForSubscriptionLookup(t){return(await this.aa(!0)).waitForSubscriptionLookup(t)}async setOnNativeSubscribeRequest(t){return(await this.aa(!1)).setOnNativeSubscribeRequest(t)}async setOnSubscribeResponse(t){return(await this.aa(!1)).setOnSubscribeResponse(t)}async subscribe(t){return(await this.aa(!0)).subscribe(t)}async updateSubscription(t){return(await this.aa(!0)).updateSubscription(t)}async setOnContributionResponse(t){return(await this.aa(!1)).setOnContributionResponse(t)}async setOnPaymentResponse(t){return(await this.aa(!1)).setOnPaymentResponse(t)}async contribute(t){return(await this.aa(!0)).contribute(t)}async completeDeferredAccountCreation(t){return(await this.aa(!0)).completeDeferredAccountCreation(t)}async setOnLoginRequest(t){return(await this.aa(!1)).setOnLoginRequest(t)}async triggerLoginRequest(t){return(await this.aa(!1)).triggerLoginRequest(t)}async setOnLinkComplete(t){return(await this.aa(!1)).setOnLinkComplete(t)}async linkAccount(t={}){return(await this.aa(!0)).linkAccount(t)}async setOnFlowStarted(t){return(await this.aa(!1)).setOnFlowStarted(t)}async setOnFlowCanceled(t){return(await this.aa(!1)).setOnFlowCanceled(t)}async saveSubscription(t){return(await this.aa(!0)).saveSubscription(t)}async showLoginPrompt(){return(await this.aa(!0)).showLoginPrompt()}async showLoginNotification(){return(await this.aa(!0)).showLoginNotification()}createButton(t,e){return this.oa.create(t,e)}async attachSmartButton(t,e,s){return(await this.aa(!0)).attachSmartButton(t,e,s)}attachButton(t,e,s){return this.oa.attach(t,e,s)}async getPropensityModule(){return(await this.aa(!0)).getPropensityModule()}async getLogger(){return(await this.aa(!0)).getLogger()}async getEventManager(){return(await this.aa(!0)).getEventManager()}async setShowcaseEntitlement(t){return(await this.aa(!0)).setShowcaseEntitlement(t)}async consumeShowcaseEntitlementJwt(t,e){return(await this.aa(!0)).consumeShowcaseEntitlementJwt(t,e)}showBestAudienceAction(){X("Not implemented yet")}async setPublisherProvidedId(t){return(await this.aa(!0)).setPublisherProvidedId(t)}async linkSubscription(t){return(await this.aa(!0)).linkSubscription(t)}}class yn{constructor(t,e,n,r,o){(n=n||{}).configPromise=n.configPromise||Promise.resolve(),this.ie=new fe(n.configPromise),this.g=os(t),this.t=this.g.getWin(),this.Rn={windowOpenMode:"auto",analyticsMode:0,enableSwgAnalytics:!1,enablePropensity:!1},r&&this.la(r),this.te=e,this.ca=this.g.whenReady(),this.ua=new ei(this.g),this.si=n.fetcher||new ti(this.t),this.$i=new gn(this.t),this.he=new _s(this.g),this.Hs=new ze,this.da=null,this.ma=null,this.xt=void 0,n.enableGoogleAnalytics&&(this.fa=new Ps(this),this.fa.start()),this.o=new class{constructor(t){this.Jt=t,this.o=new ae.ActivityPorts(t.win())}addDefaultArguments(t){const e=this.Jt,i=e.pageConfig(),n=e.analytics().getContext();return Object.assign({analyticsContext:n.toArray(),publicationId:i.getPublicationId(),productId:i.getProductId(),_client:`SwG ${s}`,supportsEventManager:!0},t||{})}async wa(t,e,s){const i=new class{constructor(t,e,s,i){this.Jt=s,this.Ea=new ae.ActivityIframePort(t,e,i),this._a={}}whenReady(){return this.Ea.whenReady()}async connect(){await this.Ea.connect(),this.Ea.onMessage((t=>{const e=null==t?void 0:t.RESPONSE;if(!e)return;const s=this._a[e[0]];if(s){const t=function(t){const e=t?t[0]:null;if(e){const s=V[e];if(s)return new s(t)}throw new Error(`Deserialization failed for ${t}`)}(e);s(t)}})),this.Jt&&this.Jt.eventManager()&&this.on(y,(t=>{var e;this.Jt.eventManager().logEvent({eventType:t.getEvent(),eventOriginator:w.SWG_SERVER,isFromUserAction:null==(e=t.getMeta())?void 0:e.getIsFromUserAction(),additionalParameters:t.getParams()})}))}disconnect(){this.Ea.disconnect()}getMode(){return this.Ea.getMode()}acceptResult(){return this.Ea.acceptResult()}onResizeRequest(t){return this.Ea.onResizeRequest(t)}execute(t){this.Ea.message({REQUEST:t.toArray()})}on(t,e){let s=null;try{s=t.prototype.label()}catch(i){s=null}if(!s)throw new Error("Invalid data type");if(this._a[s])throw new Error("Invalid type or duplicate callback for "+s);this._a[s]=e}resized(){this.Ea.resized()}}(t,e,this.Jt,s);return await i.connect(),i}async openIframe(t,e,s,i=!1){i&&(s=this.addDefaultArguments(s));const n=await this.Jt.storage().get(j,!0),r=new URL(e).searchParams;n&&!r.has("sut")&&(e=Tt(e,"sut",n));const o=this.Jt.pageConfig().getPublicationId();return o&&!r.has("publicationId")&&(e=Tt(e,"publicationId",o)),this.wa(t,e,s)}open(t,e,s,i,n,r=!1){return r&&(i=this.addDefaultArguments(i)),this.o.open(t,e,s,i,n)}onResult(t,e){this.o.onResult(t,(t=>{e(new le(t))}))}onRedirectError(t){this.o.onRedirectError(t)}getOriginalWebActivityPorts(){return this.o}}(this),this.ee=new ve(this),this.Zt=new ln(this),this.ba=new ai(this),this.Yi=new Js(this.t,this.te,this.si,this,n.useArticleEndpoint||!1,n.enableDefaultMeteringHandler||!1),this.ne=new ts(this,e.getPublicationId(),this.si,o),this.Ta=new mn(this.t,this,this.si),this.ie.logSwgEvent(m.IMPRESSION_PAGE_LOAD,!1),this.ya=new ci(this.te,this.si),this.oa=new je(this.g,Promise.resolve(this));const h=new an(this.t.document);h.prefetch(`${i}/loader.svg`),h.preconnect("https://www.gstatic.com/"),h.preconnect("https://www.google.com/"),ri.configurePending(this),Gt.configurePending(this),a(this.g,ms),this.o.onRedirectError((t=>{this.ee.addLabels(["redirect"]),this.ie.logSwgEvent(m.EVENT_PAYMENT_FAILED,!1),this.ua.error("Redirect error",t)}))}doc(){return this.g}win(){return this.t}pageConfig(){return this.te}jserror(){return this.ua}activities(){return this.o}payClient(){return this.Zt}dialogManager(){return this.he}entitlementsManager(){return this.Yi}callbacks(){return this.Hs}storage(){return this.$i}clientConfigManager(){return this.ne}analytics(){return this.ee}init(){}configure(t){this.la(t)}la(t){let e="";for(const i in t){const n=t[i];switch(i){case"windowOpenMode":n!=dt.AUTO&&n!=dt.REDIRECT&&(e="Unknown windowOpenMode: "+n);break;case"experiments":for(const t of n)s=t,Ee(this.t)[s]=!0;this.analytics()&&this.analytics().addLabels(n);break;case"analyticsMode":n!=ut.DEFAULT&&n!=ut.IMPRESSIONS&&(e="Unknown analytics mode: "+n);break;case"enableSwgAnalytics":me(n)||(e="enableSwgAnalytics must be a boolean, type: "+typeof n);break;case"enablePropensity":me(n)||(e="enablePropensity must be a boolean, type: "+typeof n);break;case"skipAccountCreationScreen":me(n)||(e="skipAccountCreationScreen must be a boolean, type: "+typeof n);break;case"publisherProvidedId":null==n||"string"==typeof n&&""!=n||(e="publisherProvidedId must be a string, value: "+n);break;case"useArticleEndpoint":me(n)||(e="useArticleEndpoint must be a boolean, type: "+typeof n);break;default:e="Unknown config property: "+i}}var s;Q(!e,e||void 0),Object.assign(this.Rn,t)}config(){return this.Rn}reset(){this.Yi.reset(),this.closeDialog()}clear(){this.Yi.clear(),this.closeDialog()}closeDialog(){this.he.completeAll()}start(){if(!this.te.getProductId()||!this.te.isLocked())return Promise.resolve();this.getEntitlements()}async getEntitlements(t){(null==t?void 0:t.publisherProvidedId)&&(t.publisherProvidedId=this.xt);const e=await this.Yi.getEntitlements(t);if(this.ee.setReadyForLogging(),this.ee.start(),e)try{const t=e.entitlements.map((t=>t.getSku()||"unknown subscriptionToken"));t.length>0&&this.ee.setSku(t.join(","))}catch(s){}return e.clone()}setOnEntitlementsResponse(t){this.Hs.setOnEntitlementsResponse(t)}getOffers(t){return this.ya.getOffers(t&&t.productId)}async showOffers(t){return await this.ca,Q(!t||!t.oldSku,"The showOffers() method cannot be used to update a subscription. Use the showUpdateOffers() method instead."),this.da=new Wt(this,t),this.da.start()}async showUpdateOffers(t){return await this.ca,Q(!!t&&!!t.oldSku,"The showUpdateOffers() method cannot be used for new subscribers. Use the showOffers() method instead."),new Wt(this,t).start()}async showSubscribeOption(t){return await this.ca,new Bt(this,t).start()}async showAbbrvOffer(t){return await this.ca,new Vt(this,t).start()}async showContributionOptions(t){return await this.ca,this.ma=new es(this,t),this.ma.start()}getLastContributionsFlow(){return this.ma}async waitForSubscriptionLookup(t){return await this.ca,new En(this,t).start()}setOnLoginRequest(t){this.Hs.setOnLoginRequest(t)}triggerLoginRequest(t){this.Hs.triggerLoginRequest(t)}setOnLinkComplete(t){this.Hs.setOnLinkComplete(t)}async linkAccount(t={}){return await this.ca,new ni(this).start(t)}async saveSubscription(t){return await this.ca,new oi(this,t).start()}async showLoginPrompt(){return await this.ca,new li(this).start()}async showLoginNotification(){return await this.ca,new hi(this).start()}setOnNativeSubscribeRequest(t){this.Hs.setOnSubscribeRequest(t)}setOnSubscribeResponse(t){this.Hs.setOnSubscribeResponse(t)}setOnPaymentResponse(t){this.Hs.setOnPaymentResponse(t)}async subscribe(t){return Q("string"==typeof t,"The subscribe() method can only take a sku as its parameter; for subscription updates please use the updateSubscription() method"),await this.ca,new Ut(this,{skuId:t}).start()}async updateSubscription(t){return Q(!!t&&t.oldSku,"The updateSubscription() method should be used for subscription updates; for new subscriptions please use the subscribe() method"),await this.ca,new Ut(this,t).start()}setOnContributionResponse(t){this.Hs.setOnContributionResponse(t)}async contribute(t){const e="string"==typeof t?{skuId:t}:t;return await this.ca,new Ut(this,e,pt.UI_CONTRIBUTION).start()}async completeDeferredAccountCreation(t){return await this.ca,new is(this,t||null).start()}setOnFlowStarted(t){this.Hs.setOnFlowStarted(t)}setOnFlowCanceled(t){this.Hs.setOnFlowCanceled(t)}createButton(t,e){return this.oa.create(t,e)}attachButton(t,e,s){this.oa.attach(t,e,s)}attachSmartButton(t,e,s){this.oa.attachSmartButton(this,t,e,s)}getPropensityModule(){return Promise.resolve(this.Ta)}eventManager(){return this.ie}getLastOffersFlow(){return this.da}getEventManager(){return Promise.resolve(this.ie)}getLogger(){return Promise.resolve(this.ba)}setShowcaseEntitlement(t){if(!t||!function(t=Ct){return"https"===t.protocol||"https:"===t.protocol}(this.win().location)||!qs(this.win().location.search,!0))return Promise.resolve();const e=(s=t.entitlement,Cs[s]||[]||[]);var s;const i=new R;i.setIsUserRegistered(t.isUserRegistered),t.subscriptionTimestamp&&i.setSubscriptionTimestamp(Oe(function(t){let e;return e=t>=1e14||t<=-1e14?Math.floor(t/1e3):t>=1e11||t<=-3e10?t:Math.floor(1e3*t),e}(t.subscriptionTimestamp)));for(let n=0;n<e.length;n++)this.eventManager().logEvent({eventType:e[n],eventOriginator:w.SHOWCASE_CLIENT,isFromUserAction:!1,additionalParameters:i});return Promise.resolve()}consumeShowcaseEntitlementJwt(t,e){this.entitlementsManager().parseEntitlements({signedEntitlements:t}).consume(e)}showBestAudienceAction(){X("Not implemented yet")}setPublisherProvidedId(t){this.xt=t}async linkSubscription(t){return await this.ca,new wn(this).start(t)}}J(`Subscriptions Runtime: ${s}`),function(t){if(t[_n]&&!Array.isArray(t[_n]))return;const e=new Tn(t),s=function(t){return{init:t.init.bind(t),configure:t.configure.bind(t),start:t.start.bind(t),reset:t.reset.bind(t),clear:t.clear.bind(t),getEntitlements:t.getEntitlements.bind(t),linkAccount:t.linkAccount.bind(t),showLoginPrompt:t.showLoginPrompt.bind(t),showLoginNotification:t.showLoginNotification.bind(t),getOffers:t.getOffers.bind(t),showOffers:t.showOffers.bind(t),showUpdateOffers:t.showUpdateOffers.bind(t),showAbbrvOffer:t.showAbbrvOffer.bind(t),showSubscribeOption:t.showSubscribeOption.bind(t),showContributionOptions:t.showContributionOptions.bind(t),waitForSubscriptionLookup:t.waitForSubscriptionLookup.bind(t),subscribe:t.subscribe.bind(t),updateSubscription:t.updateSubscription.bind(t),contribute:t.contribute.bind(t),completeDeferredAccountCreation:t.completeDeferredAccountCreation.bind(t),setOnEntitlementsResponse:t.setOnEntitlementsResponse.bind(t),setOnLoginRequest:t.setOnLoginRequest.bind(t),triggerLoginRequest:t.triggerLoginRequest.bind(t),setOnLinkComplete:t.setOnLinkComplete.bind(t),setOnNativeSubscribeRequest:t.setOnNativeSubscribeRequest.bind(t),setOnPaymentResponse:t.setOnPaymentResponse.bind(t),setOnSubscribeResponse:t.setOnSubscribeResponse.bind(t),setOnContributionResponse:t.setOnContributionResponse.bind(t),setOnFlowStarted:t.setOnFlowStarted.bind(t),setOnFlowCanceled:t.setOnFlowCanceled.bind(t),saveSubscription:t.saveSubscription.bind(t),createButton:t.createButton.bind(t),attachButton:t.attachButton.bind(t),attachSmartButton:t.attachSmartButton.bind(t),getPropensityModule:t.getPropensityModule.bind(t),getLogger:t.getLogger.bind(t),getEventManager:t.getEventManager.bind(t),setShowcaseEntitlement:t.setShowcaseEntitlement.bind(t),consumeShowcaseEntitlementJwt:t.consumeShowcaseEntitlementJwt.bind(t),showBestAudienceAction:t.showBestAudienceAction.bind(t),setPublisherProvidedId:t.setPublisherProvidedId.bind(t),linkSubscription:t.linkSubscription.bind(t)}}(e);async function i(t){t&&(await e.whenReady(),t(s))}const n=[].concat(t[_n],t[bn]);for(const r of n)i(r);t[_n]=t[bn]={push:i},e.startSubscriptionsFlowIfNeeded()}(self)}();
//# sourceMappingURL=swg.js.map
