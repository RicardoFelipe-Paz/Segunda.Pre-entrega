!function(){"use strict";(e=>{var i,n;null!==(i=(n=window.marfeel.config).experiences)&&void 0!==i||(n.experiences={}),Object.assign(window.marfeel.config.experiences,{preflight:e})})({"active":false,"preflight":{"compass":{},"inline":{}}})}();
var e,t,r,n,i={181:function(e,t){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if("object"==typeof e&&null!==e){if("function"==typeof Object.getPrototypeOf){var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return"[object Object]"===Object.prototype.toString.call(e)}return!1},s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return Object.keys(t).forEach((function(r){Array.isArray(e[r])&&Array.isArray(t[r])?e[r]=s.options.mergeArrays?Array.from(new Set(e[r].concat(t[r]))):t[r]:o(e[r])&&o(t[r])?e[r]=s(e[r],t[r]):e[r]=t[r]})),e}),{})},a={mergeArrays:!0};s.options=a,s.withOptions=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];s.options=r({mergeArrays:!0},e);var c=s.apply(void 0,i([],n(t),!1));return s.options=a,c},t.default=s},795:(e,t,r)=>{function n(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,c,"next",e)}function c(e){n(s,i,o,a,c,"throw",e)}a(void 0)}))}}r.d(t,{Z:()=>i})},666:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(850);function i(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},850:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(522);function i(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==(0,n.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,n.Z)(t)?t:String(t)}},522:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:()=>n})}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return i[e].call(r.exports,r,r.exports,s),r.exports}s.m=i,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var i=Object.create(null);s.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&n&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,s.d(i,o),i},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,r)=>(s.f[r](e,t),t)),[])),s.u=e=>({360:"d31ef6f2918eede5697b",513:"406ca262f66ac066b3a5",913:"fb190cee75a95a102399"}[e]+".js"),s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},n="@marfeel/marfeel-sdk:",s.l=(e,t,i,o)=>{if(r[e])r[e].push(t);else{var a,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==n+i){a=d;break}}a||(c=!0,(a=document.createElement("script")).type="module",a.charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",n+i),a.src=e),r[e]=[t];var p=(t,n)=>{a.onerror=a.onload=null,clearTimeout(h);var i=r[e];if(delete r[e],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),c&&document.head.appendChild(a)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="https://sdk.mrf.io/statics/",(()=>{var e={179:0};s.f.j=(t,r)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=i);var o=s.p+s.u(t),a=new Error;s.l(o,(r=>{if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,n[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,i,[o,a,c]=r,u=0;if(o.some((t=>0!==e[t]))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);c&&c(s)}for(t&&t(r);u<o.length;u++)i=o[u],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunk_marfeel_marfeel_sdk=self.webpackChunk_marfeel_marfeel_sdk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),s.nc=void 0,(()=>{var e=function(){try{var e;if(-1!==location.hash.indexOf("mrfdebug")||null!==(e=window.localStorage)&&void 0!==e&&e.getItem("mrfdebug")){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];console.log("[piano js-callbacks]",...r)}}catch(e){}};window.tp=window.tp||[],e("start",window.tp),Array.isArray(window.tp)?(e("piano handlers pushed"),window.tp.push(["addHandler","showOffer",function(t){e('"showOffer" handler called'),window.marfeel=window.marfeel||{},window.marfeel.cmd=window.marfeel.cmd||[],window.marfeel.cmd.push(["synchronizer",function(r){e("resolve piano-offer"),r.resolve("piano-offer",t)}])}]),window.tp.push(["addHandler","checkoutComplete",function(t){e('"checkoutComplete" handler called'),window.marfeel=window.marfeel||{},window.marfeel.cmd=window.marfeel.cmd||[],window.marfeel.cmd.push(["synchronizer",function(r){e("resolve piano-subscription"),r.resolve("piano-subscription",t)}])}])):e("piano handlers cant be pushed");var t=s(795),r=s(666);const n=class{constructor(e){(0,r.Z)(this,"dependency",void 0),(0,r.Z)(this,"buffer",[]),this.dependency=e}get(e){this.dependency?e(this.dependency):this.buffer.push(e)}resolve(e){this.dependency=e,this.buffer.splice(0).forEach((t=>{try{t(e)}catch(e){console.error(e)}}))}};var i=[];function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=new class{constructor(e){var t=this;(0,r.Z)(this,"dependenciesContainer",new class{constructor(){(0,r.Z)(this,"dependencies",{})}get(e,t){var r="string"==typeof e?[e]:e,i=new Array(e.length),o=e.length;o?r.forEach(((e,r)=>{this.dependencies[e]||(this.dependencies[e]=new n),this.dependencies[e].get((e=>{i[r]=e,0==--o&&t(...i)}))})):t(...i)}register(e,t){this.dependencies[e]?this.dependencies[e].resolve(t):this.dependencies[e]=new n(t)}}),(0,r.Z)(this,"config",void 0),this.config=e.config;var o=e=>e.forEach((e=>this.getSDKs(...e)));o(e.cmd.splice(0)),e.cmd.push=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o(t),0},e.registerSDK=function(){return t.registerSDK(...arguments)},function(e){window.addEventListener("message",(t=>{if((!(a=t.origin)||"null"===a||a===window.location.origin||i.includes(a))&&(s=t.data)&&"__MRF_SDK__"===s.app){var{sdkName:r,methodName:n,args:o}=t.data;e.cmd.push([r,e=>{e[n].apply(e,o)}])}var s,a}))}(e)}registerSDK(e,r,n){var i=this;return(0,t.Z)((function*(){i.dependenciesContainer.get(r,(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n(i.config,r).then((t=>{i.dependenciesContainer.register(e,new t(i.config,...r))})).catch((()=>{}))}))}))()}addConfig(e){var r=this;return(0,t.Z)((function*(){r.config=a(a({},r.config),e)}))()}getSDKs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.slice(0,t.length-1),i=t[t.length-1];this.dependenciesContainer.get(n,i)}}(window.marfeel),u=function(){return c.registerSDK(...arguments)};function l(){return l=(0,t.Z)((function*(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=r.map((e=>e()));(yield Promise.all(i)).some((e=>e))&&(e=>{s.e(913).then(s.bind(s,913)).then((t=>{var{default:r,saveActiveOverlay:n}=t;new r(e),n()}))})(e)})),l.apply(this,arguments)}function d(){var e,t;return window.marfeel=null!==(e=window.marfeel)&&void 0!==e?e:{},window.marfeel.cmd=null!==(t=window.marfeel.cmd)&&void 0!==t?t:[],window.marfeel.cmd}var p="marfeel-sdk-store";function h(e){return e.update=Date.now(),t=p,r=btoa(JSON.stringify(e)),new Promise((e=>{d().push(["consent",n=>{try{if(n.getConsent("cookies"))return window.localStorage.setItem(t,r),e(!0)}catch(e){}return e(!1)}])}));var t,r}function f(){return m.apply(this,arguments)}function m(){return(m=(0,t.Z)((function*(){var e,t,r=yield(e=p,new Promise((t=>{d().push(["consent",r=>{try{if(r.getConsent("cookies"))return t(window.localStorage.getItem(e))}catch(e){}return t(null)}])})));return r?JSON.parse(atob(r)):(h(t={creation:Date.now(),update:Date.now(),entries:{}}),t)}))).apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return(g=(0,t.Z)((function*(e){return(yield f()).entries[e]}))).apply(this,arguments)}function y(e,t){return b.apply(this,arguments)}function b(){return(b=(0,t.Z)((function*(e,t){var r=yield f();return r.entries[e]=t,h(r)}))).apply(this,arguments)}const w=e=>{void 0!==document.addEventListener&&void 0!==document.hidden&&document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&e()})),window.addEventListener("pagehide",(()=>{e()}),{capture:!0})},O=e=>{void 0!==document.addEventListener&&void 0!==document.hidden&&document.addEventListener("visibilitychange",(()=>{"hidden"!==document.visibilityState&&e()})),window.addEventListener("pageshow",(()=>{e()}),{capture:!0})},k=/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)&&((e=window.navigator.userAgent)=>{const t=function(e,t){const r=(e||window.navigator.userAgent).match(/version\/(\d+(\.\d+)?)/i);return r&&r.length>1&&r[1]||""}(e),r=parseInt(t.split(".")[0],10);return!isNaN(r)&&r})()<13,P=(()=>{try{return"keepalive"in new Request("https://www.google.com/")}catch(e){return!1}})(),j=void 0!==window.navigator.sendBeacon,S=(e,t,r,n,i=!0)=>{const o=new XMLHttpRequest;o.open("POST",e,i),n&&o.setRequestHeader("Content-Type",n),o.withCredentials=!0,o.onreadystatechange=()=>{4===o.readyState&&200===o.status&&r&&r(o.responseText)},o.send(t)},E=(e,t,{needsXHR:r,contentType:n,sync:i,keepalive:o=!0}={needsXHR:!1,sync:!1},s)=>{r||k?S(e,t,s,n):o&&P?((e,t,r)=>{let n=t;return r&&(n=new Blob([t],{type:r})),fetch(e,{method:"POST",body:n,keepalive:!0})})(e,t,n).catch((()=>{})):j?((e,t,r)=>{let n=t;r&&(n=new Blob([t],{type:r})),window.navigator.sendBeacon(e,n)})(e,t,n):S(e,t,s,n,!i)},C={childList:!0,subtree:!0};let T;const D=[],A=e=>{D.forEach((t=>{t(e)}))};function I(e){return new MutationObserver((t=>{t.forEach((t=>{"childList"===t.type&&e(t.target)}))}))}const _=(e,t=document.body)=>{const r=t===document.body;if(e){const i=((e,t)=>{let r;return function(...t){clearTimeout(r),r=setTimeout((()=>{e(...t)}),400)}})(e);"undefined"!=typeof MutationObserver&&(r?(n=()=>{i(document.body)},D.push(n),T||(T=I(A),T.observe(document.body,C))):I(i).observe(t,C))}var n};let x={};const R=e=>"fbia"===e?window.ia_document.shareURL:window.location.href,N=e=>"fbia"===e?window.ia_document.referrer:document.referrer,V=RegExp("^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])");function L(e,{cache:t=!0,readonly:r=!0}={}){try{if(!r)return new URL(e,document.baseURI);if(!x[e]){const{host:r,hostname:n,pathname:i,port:o,protocol:s,search:a,hash:c,href:u,origin:l}=new URL(e,document.baseURI),d={host:r,hostname:n,pathname:i,port:o,protocol:s,search:a,hash:c,href:u,origin:l};if(!t)return d;x[e]=d}return Object.assign({},x[e])}catch(e){return console.log(e),{}}}const M=e=>L(e).href;var U,Z=new Uint8Array(16);function q(){if(!U&&!(U="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return U(Z)}var F=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function z(e){return"string"==typeof e&&F.test(e)}for(var K=[],H=0;H<256;++H)K.push((H+256).toString(16).substr(1));function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(K[e[t+0]]+K[e[t+1]]+K[e[t+2]]+K[e[t+3]]+"-"+K[e[t+4]]+K[e[t+5]]+"-"+K[e[t+6]]+K[e[t+7]]+"-"+K[e[t+8]]+K[e[t+9]]+"-"+K[e[t+10]]+K[e[t+11]]+K[e[t+12]]+K[e[t+13]]+K[e[t+14]]+K[e[t+15]]).toLowerCase();if(!z(r))throw TypeError("Stringified UUID is invalid");return r}function G(e,t,r){var n=(e=e||{}).random||(e.rng||q)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return J(n)}function B(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function W(e,t){return e<<t|e>>>32-t}var X=function(e,t,r){function n(e,t,r,n){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof t&&(t=function(e){if(!z(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}(t)),16!==t.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var i=new Uint8Array(16+e.length);if(i.set(t),i.set(e,t.length),(i=function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),c=0;c<s;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];a[c]=u}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<s;++d){for(var p=new Uint32Array(80),h=0;h<16;++h)p[h]=a[d][h];for(var f=16;f<80;++f)p[f]=W(p[f-3]^p[f-8]^p[f-14]^p[f-16],1);for(var m=r[0],v=r[1],g=r[2],y=r[3],b=r[4],w=0;w<80;++w){var O=Math.floor(w/20),k=W(m,5)+B(O,v,g,y)+b+t[O]+p[w]>>>0;b=y,y=g,g=W(v,30)>>>0,v=m,m=k}r[0]=r[0]+m>>>0,r[1]=r[1]+v>>>0,r[2]=r[2]+g>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}(i))[6]=15&i[6]|80,i[8]=63&i[8]|128,r){n=n||0;for(var o=0;o<16;++o)r[n+o]=i[o];return r}return J(i)}try{n.name="v5"}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}();const $=e=>!!e&&z(e),Y=()=>{try{return G()}catch(e){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},Q=e=>(()=>{const e=document.querySelector('meta[property="mrf:canonical"][content]'),t=null==e?void 0:e.getAttribute("content");return!!t&&M(t)||null})()||(()=>{const e=document.querySelector('link[rel="canonical"][href]'),t=null==e?void 0:e.getAttribute("href");return!!t&&M(t)||null})()||(e=>{if("fbia"===e){const e=document.createElement("a");return e.href=window.ia_document.shareURL,e.origin+e.pathname}return window.location.origin+window.location.pathname})(e),ee={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},te={},re=(()=>{try{const e="__test_session_storage__";return window.sessionStorage.setItem(e,e),window.sessionStorage.removeItem(e),!0}catch(e){return!1}})(),ne=(e,t)=>{try{re?window.sessionStorage.setItem(e,t):te[e]=t}catch(e){}},ie=e=>{try{return re?window.sessionStorage.getItem(e):te[e]}catch(e){return null}},oe=(e,t)=>{const r=JSON.stringify(t);ne(e,r)};let se,ae=!0;const ce={getConsent:()=>ae,isInitiated:()=>!0,setConsent:(e,t)=>{var r;ae=!0===(r=t)||"true"===r,ne("__nrCookieConsent",ae),se&&se()},onChange:e=>{se=e}};function ue(e){return e||!1===e}function le(e,t){return(void 0!==e[t]||null===e[t])&&e[t]}function de(e=new Date){return Math.floor(e.getTime()/1e3)}const pe=e=>{const t=document.cookie.indexOf(e+"="),r=t+e.length+1;if(!t&&e!==document.cookie.substring(0,e.length))return null;if(-1===t)return null;let n=document.cookie.indexOf(";",r);return-1===n&&(n=document.cookie.length),unescape(document.cookie.substring(r,n))},he=(e,t,r,n,i)=>{const o=i?[i,".".concat(i)]:[""],s=new Date;s.setTime(s.getTime());const a="https:"===window.location.protocol;o.forEach((i=>{document.cookie=e+"="+escape(t)+(r?";expires="+r:"")+(n?";path="+n:"")+(i?";domain="+i:"")+(a?";secure":"")}))},fe={score:"-1"},me="".concat("https://compassdynamicpaywall.mrf.io","/score/"),ve="".concat("https://compassdynamicpaywall.mrf.io","/predict/"),ge=({accountId:e,userId:t,siteUserId:r,totalPageviews:n,sessionDuration:i})=>{const o=new URLSearchParams(window.location.search),s=o.get("utm_medium"),a=o.get("utm_source"),c=["ac=".concat(e),"url=".concat(encodeURIComponent(window.location.href)),"u=".concat(t),"pp=".concat(document.referrer)];return r&&c.push("sui=".concat(r)),s&&c.push("utm_medium=".concat(s)),a&&c.push("utm_source=".concat(a)),n&&c.push("tp=".concat(n)),i&&c.push("sd=".concat(i)),c.join("&")};let ye;const be={rfv:"-1"},we=(e,t)=>{const r={rfv:e,ts:new Date};return ne("".concat("compass_rfv","_").concat(t),JSON.stringify(r)),e},Oe=(e,t,r)=>{const n=new FormData;return n.append("u",t),n.append("ac",e),n.append("sui",r||""),n},ke=e=>{const{ts:t,rfv:r}=(e=>{const t=ie("".concat("compass_rfv","_").concat(e));let r={ts:null,rfv:null};if(t)try{r=JSON.parse(t)}catch(e){}return r})(e);return(e=>{if(!e)return!0;const t=new Date(e);return t.setMinutes(t.getMinutes()+30),t<new Date})(t)?null:r},Pe={},je=(()=>{try{const e="__test_local_storage__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}})(),Se=(e,t)=>{try{je?window.localStorage.setItem(e,t):Pe[e]=t}catch(e){}},Ee=["data-mrf-recirculation","data-dtm-region","dtm-region"],Ce=(e="")=>{const t=e?" ".concat(e):e;return Ee.map((e=>"[".concat(e,"]").concat(t))).join(",")},Te=e=>e&&e.split("?")[0].split("#")[0],De=()=>[...document.body.querySelectorAll(Ce())].filter((e=>e.shadowRoot)),Ae=e=>null!==e.getAttribute("data-mrf-layout")?e.querySelector("[".concat("data-mrf-layout-anchor","]")):e,Ie=(e,t="")=>{const r=Ae(e);if(!r)return null;if(r!==e)return Ie(r,t);const n=t?e.getAttribute(t):e.mrfLink||e.getAttribute("href")||e.getAttribute("data-mrf-uri"),i=L(n);if("null"===i.origin)return null;const o=null!==n?i.href:n;return(e=>!!e&&L(e).host===window.location.host)(o)?o&&Te(o):o};function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const xe=()=>(e=>{const t=(e=>{try{return je?window.localStorage.getItem(e):Pe[e]}catch(e){return null}})("___m_rec");if(t)try{return JSON.parse(t)}catch(e){}return null})(),Re=(e,t)=>{if(je){const n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},xe()||{});n[t]=e,Se("___m_rec",JSON.stringify(n))}},Ne=e=>e.hasAttribute("cmp-ltrk"),Ve=e=>e.getAttribute("cmp-ltrk-idx"),Le=(e,t,r)=>{e.setAttribute("cmp-ltrk",t),e.setAttribute("cmp-ltrk-idx","".concat(r))},Me=e=>"[".concat("cmp-ltrk",'="').concat(e,'"]'),Ue=(e,t,r)=>{const n=e.map((e=>((e,t="all")=>{const r=(...e)=>{const r=[...e],n=r.pop();if(r.some((e=>!Boolean(e))))return;const i="missing"===t?":not([".concat(n,"])"):"",o=r.join(" ");return Ce("".concat(o).concat(i))};return{element:r(e.element,"data-mrf-layout"),anchor:r(e.element,e.anchor,"data-mrf-layout-anchor"),img:r(e.element,e.img,"data-mrf-layout-img"),title:r(e.element,e.title,"data-mrf-layout-title")}})(e,"missing")[t])).filter(Boolean).join(",");n&&Array.from(document.querySelectorAll(n)).forEach((e=>e.setAttribute(r,"")))},Ze=e=>{const t={};return e.reduce(((e,r)=>{const{el:n}=r,i=(e=>{try{const t=Ve(e);if(t)return parseInt(t,10)}catch(e){}})(n);return void 0!==i&&t[i]||(e.push(r),t[i]=!0),e}),[])},qe=({el:e},t)=>{const r={url:Ie(e,t)},n=Ve(e);return n&&(r.p=n),e.getAttribute("data-mrf-experiment")&&(r.tv=e.getAttribute("data-mrf-experiment")),r},Fe=(e,t)=>e.map(((e,r)=>{const n=qe(e,t);return parseInt(n.p,10)===r&&delete n.p,n.tv||n.p?n:n.url}));let ze;const Ke={};class He{constructor(){this.timer=null}callOnTimer(e,t){this.timer=setTimeout((()=>{e()}),t)}cleanAndCallTimer(e,t){this.cleanTimer(),this.timer=setTimeout((()=>{e()}),t)}cleanTimer(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)}}class Je{constructor(){this.store={}}push(e,t){this.store[e]?this.store[e].push(t):this.store[e]=[t]}clear(e){delete this.store[e]}contains(e,t){var r;return null===(r=this.store[e])||void 0===r?void 0:r.includes(t)}forEach(e){return Object.entries(this.store).forEach(e)}}const Ge=new He,Be=new Je,We=new Je,Xe=e=>{const t=[];Be.forEach((([e,r])=>{t.push({module:e,links:r}),Be.clear(e)})),Object.keys(t).length>0&&e("impression",t)},$e=(e,t)=>{e.forEach((({links:e,urlAttr:r,name:n})=>{n&&e.forEach((e=>{const i=qe(e,r);((e,t,r=!1)=>{const n="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype?Promise.resolve():s.e(360).then(s.t.bind(s,360,23));e.setAttribute("mrfObservableId",Y()),Ke[e.getAttribute("mrfObservableId")]=t,n.then((()=>{ze=ze||new IntersectionObserver((e=>{e.filter((e=>e.isIntersecting)).forEach((({target:e})=>{const t=e.getAttribute("mrfObservableId");var n;t?(null===(n=Ke[t])||void 0===n||n.call(Ke,e),r||(ze.unobserve(e),delete Ke[t])):ze.unobserve(e)}))})),ze.observe(e)}))})(e.el,(()=>{((e,t)=>{We.contains(e,t.p)||(Be.push(e,t),We.push(e,t.p))})(n,i),Ge.cleanAndCallTimer((()=>Xe(t)),1e3)}))}))})),Xe(t)};function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const et=(e,t)=>{e.forEach((({name:e,links:r,urlAttr:n})=>{r.forEach((r=>{r.el.addEventListener("click",(i=>{const o=Ie(r.el,n);var s,a;s=r.el,!i.__mrfTracked&&!0!==(null===(a=Ae(s))||void 0===a?void 0:a.__mrfTracked)&&o&&(((e,t)=>{const r=Ae(e);t.__mrfTracked=!0,r&&(r.__mrfTracked=!0)})(r.el,i),Re(e||"",o),t("click",[{module:e,links:Fe([r],n)}],!1))}))}))}))},tt=(e=(()=>!0),t=document.body,r)=>{const n=r?"a":Ee.map((e=>"[".concat(e,"] a[href], a[href][").concat(e,"], [").concat(e,"] article[data-mrf-uri], [").concat(e,"] [").concat("data-mrf-layout","]"))).join(","),i=Array.from(t.querySelectorAll(n)).reduce(((t,n)=>{const i=(o=n)&&o.closest(Ce())||r;var o;const s=(a=i,null===(c=Ee.reduce(((e,t)=>e||(null==a?void 0:a.getAttribute(t))),void 0))||void 0===c?void 0:c.replace(/"/g,'\\"'));var a,c;const u=(null==i?void 0:i.getAttribute("data-mrf-recirculation-url-attribute"))||"";u||(n.mrfLink=n.getAttribute("href"));const l=Ie(n,u);if(!s||!l||!e(s,n))return t;const d=t[s]||{links:[]};return Qe(Qe({},t),{},{[s]:Qe(Qe({},d),{},{links:[...d.links,{el:n,root:i}],urlAttr:u})})}),{});return(e=>{const t=De();Object.entries(e).forEach((([e,{links:r,urlAttr:n}])=>{const i=(e=>Number(e.map((e=>e.getAttribute("cmp-ltrk-idx"))).filter(Boolean).map(parseInt).reduce(((e,t)=>isNaN(e)||e<t?t:e),NaN)))(((e,t)=>{const r=t.filter((t=>{return r=e,n=t,Ee.some((e=>{var t;return(null===(t=n.getAttribute(e))||void 0===t?void 0:t.toLowerCase())===r.toLowerCase()}));var r,n})).reduce(((t,r)=>{var n;return[...t,...(null===(n=r.shadowRoot)||void 0===n?void 0:n.querySelectorAll(Me(e)))||[]]}),[]);return[...document.querySelectorAll(Me(e)),...r]})(e,t));let o=isNaN(i)?0:i+1;r.forEach((t=>{const{el:i,root:s}=t,a=Ie(i,n);if(Ne(i)||!a)return;Le(i,e,o);const c=r.filter((({el:e,root:t})=>e!==i&&t===s&&!Ne(e)&&Ie(e,n)===a));c.length&&(c.forEach((({el:t})=>Le(t,e,o))),(e=>{["data-mrf-experiment"].forEach((t=>{const r=e.find((({el:e})=>e.hasAttribute("data-mrf-experiment")));if(r){const n=r.el.getAttribute("data-mrf-experiment");e.forEach((({el:e})=>{e.getAttribute("data-mrf-experiment")!==n&&e.setAttribute(t,n||"")}))}}))})([...c,t])),o++}))}))})(i),Object.entries(i).map((([e,t])=>({name:e,links:t.links,urlAttr:t.urlAttr})))};function rt(e=(()=>{}),t,r={}){const{parentNode:n,layouts:i=[]}=r;(e=>{e.length&&(Ue(e,"element","data-mrf-layout"),Ue(e,"anchor","data-mrf-layout-anchor"),Ue(e,"img","data-mrf-layout-img"),Ue(e,"title","data-mrf-layout-title"))})(i);const o=tt(((e,t)=>!Ne(t)),t,n);((e,t)=>{const r=e.map((({name:e,links:t,urlAttr:r})=>({module:e,links:Fe(t,r)})));r.length&&t("elegible",r)})((e=>e.map((({links:e,name:t,urlAttr:r})=>({name:t,urlAttr:r,links:Ze(e)}))))(o),e),$e(o,e),et(o,e)}function nt(e,t,r){rt(e,t,r),_((t=>{rt(e,t,r)}),t)}const it=async()=>{document&&"loading"===document.readyState&&await new Promise((e=>{document.addEventListener("DOMContentLoaded",e)}))},ot=(e,t)=>{e&&t&&Re("fc:".concat(e),t)},st=e=>{let t=!1;return e.forEach((e=>{const r="selector"in e?e.selector:"[".concat(e.attr,"]"),n="name"in e?()=>e.name:t=>t.getAttribute(e.attr),i=document.querySelectorAll(r),o=e.urlAttribute;Array.from(i).forEach(((e,r)=>{var i;(i=e)instanceof HTMLElement&&!i.dataset.mrfRecirculation&&!i.closest("[data-mrf-experience]")&&(e.dataset.mrfRecirculation=n(e),o&&(e.dataset.mrfRecirculationUrlAttribute=o),t=!0)}))})),t},at=document.documentElement,ct=[{qs:".mrf-current .mrf-detailsBody",max:999},{qs:".mrf-current .mrf-sectionPart",max:999},{qs:".mrf-article-body",max:999},{qs:"article",max:1}];let ut,lt=0;const dt=e=>{let t;try{e&&(ut=ct.reduce(((e,t)=>{if(e)return e;const r=document.querySelectorAll(t.qs);return r&&r.length<=t.max?(e=>{const t=[];return e.forEach((e=>(e=>{const t=e.getBoundingClientRect();if(!t.width&&!t.height)return!1;const r=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,i=t.top<=r&&t.top+t.height>=0,o=t.left<=n&&t.left+t.width>=0;return i&&o})(e)&&t.push(e))),t.length>0?t.sort(((e,t)=>t.offsetTop-e.offsetTop))[0]:null})(r):null}),null),lt=0);const r=(e=>{const t=(()=>{const e=document.body;return at.scrollTop||!!e&&e.scrollTop||0})();return e?t-ut.offsetTop:t})(ut),n=(e=>{const t=document.body;return e?e.offsetHeight:at.scrollHeight||!!t&&t.scrollHeight||0})(ut);t=r/(n-at.clientHeight)*100,t>lt?lt=t:t=lt}catch(e){}return isNaN(t)?50:t>100?100:t<0?0:t},pt=(e,t)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{e.getEntries().map((e=>t(e,r)))}));return r.observe({type:e,buffered:!0}),r}}catch(e){}};class ht{constructor(){this.cls=0,this.lcp=0,this.fid=0,this.fcp=0,this.wv=0,this.tbt=0,this.lcpOffender=null,this.clsOffender=null,this.setTbt();const e=this.setLCP(),t=this.setFCP(),r=this.setCLS(),n=this.setFID();this.wv=e||t||r||n?1:0}setTbt(){return!!pt("longtask",(e=>{this.tbt+=e.duration-50}))}setLCP(){return!!pt("largest-contentful-paint",(e=>{this.lcp=e.renderTime||e.loadTime,this.lcp>2500&&e.element&&(this.lcpOffender=e.element.tagName+"."+e.element.className)}))}setFCP(){return!!pt("paint",((e,t)=>{"first-contentful-paint"===e.name&&(this.fcp=e.startTime,t&&t.disconnect())}))}setCLS(){let e=0,t=0,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return!!pt("layout-shift",(i=>{var o,s;if(!i.hadRecentInput&&i.value&&((i.startTime-r>5e3||i.startTime-n>1e3)&&(r=i.startTime,e=0),n=i.startTime,e+=i.value,this.cls=Math.max(this.cls,e),this.cls>.1&&i.value>t&&null!==(o=i.sources)&&void 0!==o&&null!==(s=o[0])&&void 0!==s&&s.node)){const e=i.sources[0].node;t=i.value,this.clsOffender=e.tagName+"."+e.className}}))}setFID(){return!!pt("first-input",((e,t)=>{this.fid=e.processingStart-e.startTime,t&&t.disconnect()}))}}function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const vt=new He;let gt={10:15e3,150:25e3};const yt=()=>{vt.cleanTimer()},bt=(e,t)=>{vt.callOnTimer(t,e)},{userIdPromise:wt,resolveFinalUserId:Ot}=(()=>{let e=()=>{};return{userIdPromise:new Promise((t=>{e=t})),resolveFinalUserId:e}})();class kt{constructor(e){this.compassTracker=e}getUserId(){return{userIdPromise:wt,actualUserId:this.compassTracker.permanentCookie.userId}}processIngestResponse(e){e&&($(e.uid)&&(this.compassTracker.permanentCookie.userId=e.uid,this.compassTracker.markAsModified("permanent")),$(e.sid)&&(this.compassTracker.temporalCookie.sessionId=e.sid,this.compassTracker.markAsModified("temporal")),this.compassTracker.saveCookies()),$(this.compassTracker.permanentCookie.userId)&&Ot(this.compassTracker.permanentCookie.userId)}}const Pt={web:0,fbia:2,iosapp:3,androidapp:4,flowcards:5,pressreader:6,app:7,applenews:8},jt=e=>{if(isNaN(e)){const t=e.toLowerCase().replace(/ /g,"");if(void 0!==Pt[t])return Pt[t]}else if(e<9)return e;return null};let St=[];const Et=(e,t)=>{const r=[e,t];let n=!0;for(let t=0;t<St.length;t+=1)St[t][0]===e&&(St[t]=r,n=!1);n&&St.push(r)};let Ct=null;const Tt=()=>Ct=null,Dt=e=>{const t=e.parentElement;t&&(t.addEventListener("mouseenter",(()=>(e=>{Ct=e})(e))),t.addEventListener("mouseleave",Tt))},At=(e,t,r)=>{const n=Array.from(e).filter((e=>!e.hasAttribute("cmp-cnvtrk")));for(const e of n)e.addEventListener(t,(()=>{const t=e.dataset.mrfConversion;t&&r(t)})),e.setAttribute("cmp-cnvtrk","true")},It=e=>{const t=document.querySelectorAll("iframe[data-mrf-conversion]"),r=document.querySelectorAll("form[data-mrf-conversion]"),n=document.querySelectorAll("button[data-mrf-conversion], a[data-mrf-conversion]");At(r,"submit",e),At(n,"click",e),(e=>{const t=Array.from(e).filter((e=>!e.hasAttribute("cmp-cnvtrk")));for(const e of t)Dt(e),e.setAttribute("cmp-cnvtrk","true")})(t)},_t=e=>{_((()=>{It(e)})),It(e)};var xt;function Rt(e){return e.update=Date.now(),function(e,t){try{return window.localStorage.setItem("marfeel-sdk-store",t),!0}catch(e){return!1}}(0,btoa(JSON.stringify(e)))}function Nt(){return void 0===xt&&(xt=function(){var e=function(e){try{return window.localStorage.getItem("marfeel-sdk-store")}catch(e){return null}}();if(e)return JSON.parse(atob(e));var t={creation:Date.now(),update:Date.now(),entries:{}};return Rt(t),t}()),xt}const Vt="compass-conversions-counter-entry",Lt=e=>{let t=(null!=e?e:"").toString();return!t.startsWith("/")&&t.includes("/")&&(t="/".concat(t)),t.split("/").map((e=>e.split(",").shift())).join("/")};class Mt{constructor(){this.newAds=[],this.newAdUnitPaths=[],this.visibilityChangedSlots=[]}setInterstitialSlot(e){this.interstitialSlot=e}trackAdEvent(e,t){const r=this.mustBeTracked(e,t);if(r){const r=t.getAdUnitPath(),n=t.getResponseInformation()&&t.getResponseInformation().lineItemId;this.trackAdRenderedInternal(n||r,r),"slotVisibilityChanged"===e&&this.visibilityChangedSlots.push(t)}return r}trackAdEventLegacy(e,t,r){return"slotRenderEnded"===e&&(this.trackAdRenderedInternal(t||r,r),!0)}trackAdRenderedInternal(e,t){this.newAds.push(Lt(e)),t&&this.newAdUnitPaths.push(Lt(t))}getAds(){return this.newAds.splice(0)}getAdUnits(){return this.newAdUnitPaths.splice(0)}mustBeTracked(e,t){let r=!1;return"slotRenderEnded"===e&&(r=t!==this.interstitialSlot),"slotVisibilityChanged"===e&&(r=t===this.interstitialSlot&&!this.visibilityChangedSlots.includes(t)),r}}function Ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const qt=(e,t)=>{((e,t)=>{const r={requests:{ads:e},triggers:{renderEnd:{on:"ad-render-end",request:"ads",selector:"body",extraUrlParams:Zt(Zt({},t),{},{l:"${totalEngagedTime}",sc:dt(!1),a:"-1",ps:"${navTiming(navigationStart)}",n:"${timestamp}",ads:"$IF(${adSlot}, ${adSlot}, -1)amp",ampFirst:"true"})}},transport:{beacon:!0,xhrpost:!0,image:!1}},n=()=>{document.body.appendChild((e=>{const t=document.createElement("amp-analytics"),r=document.createElement("script");return r.type="application/json",r.innerText=JSON.stringify(e),t.appendChild(r),t})(r))};"loading"===document.readyState?window.addEventListener("load",(()=>n())):n()})(e,t)};class Ft{constructor(){this.events={}}on(e,t){void 0===this.events[e]&&(this.events[e]={listeners:[]}),this.events[e].listeners.push(t)}remove(e,t){this.events[e].listeners=this.events[e].listeners.filter((e=>e.toString()!==t.toString()))}dispatch(e,t){this.events[e]&&this.events[e].listeners.forEach((e=>{e(t)}))}}function zt(e,t){try{const r=[...t],n=r.shift();let i;if(Array.isArray(e)){const r=e.map((e=>zt(e,t))).filter(Boolean);i=r.length&&r[0]}else i=e[n];return 0===r.length?i?null==i?void 0:i.toString():null:zt(i,r)}catch(e){return null}}function Kt(e,t){for(const r of e){const e=zt(r,t);if(e)return e}return null}const Ht=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\.\d+)?(Z|[+-]\d{2}:\d{2})$/;function Jt(e){let t;return t=Ht.test(e)?new Date(e):new Date(e+"Z"),t.getTime()}const Gt={jsonLD:Object.freeze({__proto__:null,extract:function({attributePath:e}){try{const t=document.querySelectorAll('script[type="application/ld+json"]');return t&&e?function(e,t){var r;for(const n of e){const e=n.textContent?((null===(r=n.textContent)||void 0===r?void 0:r.trim())||"").replace(/\n|\t/g,""):"{}",i=JSON.parse(`${e}`);if(Array.isArray(i))return Kt(i,t);const o=zt(i,t);if(o)return o}return null}(t,e):null}catch(e){return null}}}),querySelector:Object.freeze({__proto__:null,extract:function({queries:e}){if(!e)return null;const t=e.reduce(((e,{query:t,attribute:r})=>(document.querySelectorAll(t).forEach((t=>{r?e.push(t.getAttribute(r)||null):t.textContent&&e.push(t.textContent)})),e)),[]).filter((e=>null!==e));return 1===t.length||t.length>1&&t.every((e=>e===t[0]||Jt(e)===Jt(t[0])))?t[0]:null}})},Bt=e=>{for(const t of e){const e=Gt[t.type].extract(t);if(e)return e}return null},Wt=[{type:"jsonLD",attributePath:["dateModified"]},{type:"querySelector",queries:[{query:'meta[property="article:modified_time"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'meta[itemprop="dateModified"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'time[itemprop="dateModified"]',attribute:"datetime"}]},{type:"querySelector",queries:[{query:'time[itemprop="dateModified"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'[itemprop="dateModified"]'}]}];var Xt=Object.freeze({__proto__:null,extract:()=>Bt(Wt)});const $t=[{type:"jsonLD",attributePath:["datePublished"]},{type:"querySelector",queries:[{query:'[itemtype="http://schema.org/NewsArticle"] time[itemprop="datePublished"]',attribute:"datetime"}]},{type:"querySelector",queries:[{query:'meta[property="article:published_time"]',attribute:"content"},{query:':not([itemprop="image"]) > meta[itemprop="datePublished"]',attribute:"content"},{query:'time[itemprop="datePublished"]',attribute:"datetime"},{query:'time[itemprop="datePublished"]',attribute:"content"},{query:'[itemprop="datePublished"]'},{query:'meta[name="cXenseParse:recs:publishtime"]',attribute:"content"}]}];var Yt=Object.freeze({__proto__:null,extract:()=>Bt($t)});const Qt=[{type:"jsonLD",attributePath:["offers","lowPrice"]},{type:"jsonLD",attributePath:["offers","price"]},{type:"querySelector",queries:[{query:'[itemprop="offers"] [itemprop="price"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'meta[property="product:price:amount"]',attribute:"content"}]}];var er=Object.freeze({__proto__:null,extract:()=>Bt(Qt)});const tr=[{type:"jsonLD",attributePath:["offers","availability"]},{type:"querySelector",queries:[{query:'[itemprop="offers"] link[itemprop="availability"]',attribute:"href"},{query:'[itemprop="offers"] [itemprop="availability"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'meta[property="product:availability"]',attribute:"content"}]}],rr={},nr={updateTime:Xt,publishTime:Yt,availability:Object.freeze({__proto__:null,extract:()=>Bt(tr)}),price:er},ir=(e,t)=>{if(!rr[e]||t){const t=nr[e];rr[e]=t.extract()}return rr[e]},or=(e,t=!1)=>{try{if(t){const t=pe(e);return JSON.parse(t)||{}}return(e=>{const t=ie(e);if(t)try{return JSON.parse(t)}catch(e){}return null})(e)||{}}catch(e){return{}}};function sr(e,t){let r=0;return e.active&&(r=5),Math.min(t-e.time,r)}class ar{constructor(){this.totalEngagedTime=0,this.prevEvent=void 0}pushEvent(e){this.prevEvent&&this.prevEvent.time<e.time&&(this.totalEngagedTime+=sr(this.prevEvent,e.time)),this.prevEvent=e}getTotalEngagedTime(e){let t=0;return void 0!==this.prevEvent&&(t=this.totalEngagedTime+sr(this.prevEvent,e)),t}}const cr=["mousedown","mouseup","mousemove","keydown","keyup","scroll","MRF_MULTIMEDIA_ENGAGED"],ur=["mouseleave"];class lr{constructor(){this.startTime=Date.now(),this.listeningActive=!1,this.listeningInactive=!1,this.acitvityHistory=new ar,this.listenToEvents(),"visible"===document.visibilityState&&this.eventTriggered(!0)}listenToEvents(){cr.forEach((e=>{document.addEventListener(e,(()=>this.eventTriggered(!0)))})),ur.forEach((e=>{document.addEventListener(e,(()=>this.eventTriggered(!1)))})),w((()=>this.eventTriggered(!1))),O((()=>this.eventTriggered(!0)))}getTimeSinceStart(){const e=Date.now()-this.startTime;return e>0?e:0}eventTriggered(e){e&&this.listeningActive||!e&&this.listeningInactive||(this.listeningActive=e,this.listeningInactive=!e,this.handleEvent(e))}handleEvent(e){const t=Math.floor(this.getTimeSinceStart()/1e3);setTimeout((()=>{this.listeningActive=!1,this.listeningInactive=!1}),1e3),this.acitvityHistory.pushEvent({active:e,time:t})}getTotalEngagedTime(){const e=Math.floor(this.getTimeSinceStart()/1e3);return this.acitvityHistory.getTotalEngagedTime(e)}}function dr(e=[],t){let r=!1;e.forEach((({selector:e,name:t})=>{document.querySelectorAll(e).forEach((e=>{e.getAttribute("data-mrf-conversion")||(r=!0,e.setAttribute("data-mrf-conversion",t))}))})),r&&It(t)}function pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const hr=e=>[...new Set(e)];function fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const vr=class{constructor(e,t=ce,n=class{static wait(){return Promise.resolve(!0)}static resolve(){}}){this.trackerName=window.__mrfCompass?"__mrfCompass":"__newsroom_js",window[this.trackerName].data=window[this.trackerName].data||[],this.handleImmediateCallsToDataArray(),this.userIdManager=new kt(this),this.tracker=window[this.trackerName],this.tracker.lazy=this.tracker.lazy||!1,this.tracker.isAmpFirst=this.tracker.isAmpFirst||!1;const i=mr({lazy:!1,layouts:[],modules:[]},this.tracker.rm||{});var o;this.tracker.rm=((e,t=!1)=>{const n={},i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),o=Object.assign(new Promise(((e,t)=>Object.assign(n,{set:t=>{const r=t instanceof Function?t(i):t;e(Object.assign(i,r))}}))),n);return t&&o.set({}),o})(i,!i.lazy),this.tracker.usePerformanceEndpoint=this.tracker.usePerformanceEndpoint||!1,this.tracker.adsTrackingFromClient&&(this.nrGoogleTrackingActive=!0),this.adsTracker=new Mt,this.adsDelay=200,this.consentManager=t,this.setupConsent(this.tracker),this.synchronizer=n,this.dispatcher=new Ft,this.initializeCookies(),this.tracker.lazy||this.initialize(),w((()=>{(e=>{this.synchronizer.resolve("experimentationDisabled",!1)})(),this.synchronizer.wait("pageInitialized").then((()=>{this.setPageVar("lastEvent",!0),this.collectAndTrackPage()}))})),O((()=>{this.synchronizer.wait("pageInitialized").then((()=>{yt(),this.trackPage()}))})),o=()=>this.trackNewPage({rs:"back forward cache"}),window.addEventListener("pageshow",(e=>{e.persisted&&o()}),{capture:!0}),function(e,t,r){r?qt(e,t):window.customElements.whenDefined("amp-ad").then((()=>qt(e,t)))}(this.endpoint,this.getBasicConfig(),this.tracker.isAmpFirst),this.tracker.setFCSource=ot}setInterstitialSlot(e){this.adsTracker.setInterstitialSlot(e)}initializeCookies(){this.cookieDomain=this.tracker.cookieDomain||(e=>{const t=e.split(".").filter((e=>"www"!==e));if(t.length<2||V.test(e))return null;if(2===t.length)return t.join(".");const r=t.slice(-2),n=t.length-1;return(e=>{const t=e.length-1;return 2===e[t].length&&!!["avz","co","com","df","gob","gov","org","rt"].includes(e[t-1])})(r)&&r.unshift(t[n-2]),r.join(".")})(window.location.hostname);const e=this.consentManager.getConsent("cookies");this.temporalCookie=function(e){const t=le(e,"currentVisitStarted"),r=new Date;return r.setDate(r.getDate()-1),t&&t<de(r)?{}:e}(or("___nrbic",e)),this.permanentCookie=or("___nrbi",e)}initialize(e={}){this.engagementCalculator=new lr,this.performanceStartTime=performance.now();const{url:t,rs:r,initialPageVars:n}=((e,t)=>e?"string"==typeof e?{url:e}:e:{})(e),i=t?M(t):t;yt(),St=[],n&&Object.entries(n).forEach((([e,t])=>{this.setPageVar(e,t)})),window.googletag=window.googletag||{cmd:[]},void 0===this.nrGoogleTrackingActive&&(this.nrGoogleTrackingActive=!0,googletag.cmd.push((()=>{googletag.pubads().addEventListener("slotRenderEnded",(e=>{e.isEmpty||this.trackAdEvent("slotRenderEnded",e.slot)})),googletag.pubads().addEventListener("slotVisibilityChanged",(e=>{this.trackAdEvent("slotVisibilityChanged",e.slot)}))}))),this.temporalCookieModified=!1,this.permanentCookieModified=!1,this.pageId=null,this.isFirstPage=!0,this.recirculationSource=null,this.updateTime=null,this.publishTime=null,this.newAds=[],this.newAdUnitPaths=[],this.conversion=null,this.tick=0,this.accountId=this.tracker.accountId,this.endpoint=this.tracker.endpoint||"https://events.newsroom.bi/ingest.php",this.endpointDomain=(e=>{const t=document.createElement("a");return t.href=e,t.origin})(this.endpoint),this.currentPage=i||R(this.tracker.pageType),this.startPageTime=de(),this.pageId=Y(),this.url=i||R(this.tracker.pageType),this.canonical=i||Q(this.tracker.pageType),this.setFirstVisit(),this.setPreviousVisit(),this.setCurrentVisitStarted(),this.setTimesVisited(),this.setPagesViewed(),this.setLandingPage(i),this.setRecirculationSource(r),this.saveCookies(),this.webVitals=new ht,this.updateTime=ir("updateTime"),this.publishTime=ir("publishTime");const o=this.trackPage();return this.setRecirculationTracking(),(e=>{const t=e.trackConversion.bind(e);(e=>{window.addEventListener("blur",(()=>(e=>{Ct&&e(Ct)})(e)))})((e=>{var r;return e&&t(null==e||null===(r=e.dataset)||void 0===r?void 0:r.mrfConversion)})),document.readyState&&"complete"===document.readyState?_t(t):document.addEventListener("DOMContentLoaded",(()=>{_t(t)}))})(this),this.dispatcher.dispatch("pageInitialized",{url:this.canonical}),this.synchronizer.resolve("pageInitialized"),o}handleImmediateCallsToDataArray(){window[this.trackerName].data.oldPush=window[this.trackerName].data.push,window[this.trackerName].data.push=e=>{"getRFV"===e[0]?this.getRFV(e[1]):window[this.trackerName].data.oldPush(e)}}setFirstVisit(){let e=le(this.permanentCookie,"firstVisit");if(!1===e){e=de(),this.permanentCookie.firstVisit=e;const t=pe("compass_uid");this.permanentCookie.userId=t?$(t)?t:((e,t)=>{const r=X(`${e}`,"c0a334de-7622-4bd6-8bff-0b2b750cf2c6");return X(`${t}`,r)})(this.accountId,t):Y(),this.permanentCookie.userVars=[],this.markAsModified("permanent")}else this.permanentCookie.userVars=this.permanentCookie.userVars||[]}setPreviousVisit(){const e=le(this.temporalCookie,"previousVisit"),t=le(this.permanentCookie,"futurePreviousVisit");if(!1===e&&!1!==t)this.temporalCookie.previousVisit=t,this.permanentCookie.futurePreviousVisit=de(),this.markAsModified("temporal"),this.markAsModified("permanent");else if(!1===e&&!1===t){const e=de();this.temporalCookie.previousVisit=e,this.permanentCookie.futurePreviousVisit=e,this.markAsModified("temporal"),this.markAsModified("permanent")}}setCurrentVisitStarted(){let e=le(this.temporalCookie,"currentVisitStarted");!1===e?(e=de(),this.temporalCookie.currentVisitStarted=e,this.markAsModified("temporal"),this.temporalCookie.sessionId=Y(),this.temporalCookie.sessionVars=[]):this.isFirstPage=!1}setTimesVisited(){let e=le(this.permanentCookie,"timesVisited");!1!==le(this.temporalCookie,"visitedInThisSession")&&!1!==e||(e=!1===e||isNaN(parseInt(e,10))?1:e+1,this.permanentCookie.timesVisited=e,this.temporalCookie.visitedInThisSession=!0,this.markAsModified("permanent"),this.markAsModified("temporal"))}setPagesViewed(){let e=le(this.temporalCookie,"pagesViewed");e=!1===e||isNaN(parseInt(e,10))?1:e+1,this.temporalCookie.pagesViewed=e,this.markAsModified("temporal")}setLandingPage(e){!1===le(this.temporalCookie,"landingPage")&&(this.temporalCookie.landingPage=e||R(this.tracker.pageType),this.temporalCookie.referrer=N(this.tracker.pageType),this.markAsModified("temporal"))}getLandingPage(){var e;return null===(e=this.temporalCookie)||void 0===e?void 0:e.landingPage}setRecirculationSource(e){var t,r,n,i;if("back_forward"===(null===(t=performance)||void 0===t||null===(r=t.getEntriesByType)||void 0===r||null===(n=r.call(t,"navigation"))||void 0===n||null===(i=n[0])||void 0===i?void 0:i.type)&&"back forward cache"!==e)this.recirculationSource="back forward";else if(e)this.recirculationSource=e;else{const e=(e=>{const t=((e,t)=>L(e).search.substring(1).split("&").map((e=>e.split("="))).filter((([e])=>"utm_cmp_rs"===e)).map((([e,t])=>decodeURIComponent(t))).shift())(e);return t||(e=>{const t=Te(e),r=xe(),n=Q();return r&&(r[t]||r[n])})(e)})(this.currentPage);e&&(this.recirculationSource=e,(e=>{const t=Te(e),r=xe();r&&(delete r[t],Se("___m_rec",JSON.stringify(r)))})(this.currentPage),(e=>"refresh"===e)(e)&&(this.previousPage=this.canonical))}}saveCookies({force:e}={}){const t=this.consentManager.getConsent("cookies");if(this.temporalCookie&&(this.temporalCookieModified||e)&&(t&&he("___nrbic",JSON.stringify(this.temporalCookie),null,"/",this.cookieDomain),oe("___nrbic",this.temporalCookie)),this.permanentCookie&&(this.permanentCookieModified||e)){if(t){const e=new Date,{actualUserId:t}=this.userIdManager.getUserId();e.setMonth(e.getMonth()+6),he("___nrbi",JSON.stringify(this.permanentCookie),e.toGMTString(),"/",this.cookieDomain),he("compass_uid",t,e.toGMTString(),"/",this.cookieDomain)}oe("___nrbi",this.permanentCookie)}}markAsModified(e){this[e+"CookieModified"]=!0}getReferrer(){return this.previousPage?this.previousPage:N(this.tracker.pageType)}async track(e){return new Promise((t=>{const r=0===this.tick;E(this.endpoint,function(e){const t=[];return e.forEach(((e,r)=>{t.push(r+"="+encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return ee[e]})))})),t.join("&")}(e),{needsXHR:r,contentType:"application/x-www-form-urlencoded",keepalive:this.tracker.keepalive},(e=>{let r={};try{r=JSON.parse(e)}catch(e){}var n;this.userIdManager.processIngestResponse(r),r.strategy&&(n=r.strategy,gt=n.reduce(((e,t)=>mt(mt({},e),{},{[t.tick]:t.delay})),{})),r.ads&&(this.adsDelay=r.ads),t()})),r||t()}))}setUserType(e){this.permanentCookie.userType=e,this.markAsModified("permanent"),this.saveCookies()}getUserId(){return this.userIdManager.getUserId()}getSiteUserId(){return this.permanentCookie.siteUserId}getSessionReferrer(){return this.temporalCookie.referrer}getSessionId(){return this.temporalCookie.sessionId}getPageId(){return this.pageId}getRecirculationSource(){return this.recirculationSource}getFirstVisit(){return this.permanentCookie.firstVisit}getLastVisit(){return this.temporalCookie.previousVisit!==this.permanentCookie.futurePreviousVisit?this.temporalCookie.previousVisit:null}getPageType(){const e=this.tracker.pageType;return e&&jt(e)?jt(e):0}getUserType(){return function(e){if("number"==typeof e)return e;let t=parseInt(e||"",10);if(isNaN(t))switch(e){case"anonymous":t=1;break;case"logged":t=2;break;case"paid":t=3;break;default:t=0}return t}(this.permanentCookie.userType)}getTotalPageviews(){return this.temporalCookie.pagesViewed}getSessionDuration(){return de()-this.temporalCookie.currentVisitStarted}getEndpointDomain(){return this.endpointDomain}getUserVars(){return this.permanentCookie.userVars}getSessionVars(){return this.temporalCookie.sessionVars}getPageVars(){return St}getUrl(){return this.url}setEcommerceData(e){this.ecommerceData=e}getCanonical(){return this.canonical}setSiteUserId(e){this.permanentCookie.siteUserId=e,this.markAsModified("permanent"),this.saveCookies()}setCookies(e){this.consentManager.setConsent("cookies",e)}async getUserConsent(){return await async function(e,t){return e.isInitiated()?e.getConsent(t):await Promise.race([new Promise((e=>setTimeout((()=>e(!0)),5e3))),new Promise((t=>e.onChange((()=>t(!0))))),new Promise((e=>w((()=>e(!0)))))]).then((async()=>e.getConsent(t)))}(this.consentManager,"cookies")}trackAdEvent(e,t){this.adsTracker.trackAdEvent(e,t)&&-1!==this.adsDelay&&(yt(),bt(this.adsDelay,(()=>this.trackPage())))}trackAdRendered(e,t){this.adsTracker.trackAdEventLegacy("slotRenderEnded",e,t)&&-1!==this.adsDelay&&(yt(),bt(this.adsDelay,(()=>this.trackPage())))}setUserVar(e,t){const r=[e,t];let n=!0;for(let t=0;t<this.permanentCookie.userVars.length;t+=1)this.permanentCookie.userVars[t][0]===e&&(this.permanentCookie.userVars[t]=r,n=!1);n&&this.permanentCookie.userVars.push(r),this.markAsModified("permanent"),this.saveCookies()}setSessionVar(e,t){const r=[e,t];let n=!0;for(let t=0;t<this.temporalCookie.sessionVars.length;t+=1)this.temporalCookie.sessionVars[t][0]===e&&(this.temporalCookie.sessionVars[t]=r,n=!1);n&&this.temporalCookie.sessionVars.push(r),this.markAsModified("temporal"),this.saveCookies()}setPageVar(e,t){Et(e,t)}async trackConversion(e,t){this.conversion={conv:e,conv_i:t},(async e=>{const t=await(r=Vt,Promise.resolve(Nt().entries[r]))||{};var r;const n=t[e]||0;t[e]=n+1,await function(e,t){return Nt().entries[e]=t,Promise.resolve(Rt(Nt()))}(Vt,t)})(e),yt(),await this.trackPage()}async trackRecirculationEvent(e,t,r,n=!0){const i=await this.getTrackingCommonData(),o={t:e,m:t,ac:i.ac,url:i.url,c:i.c,ut:i.ut,fv:i.fv,lv:i.lv,r:i.r,lp:i.lp,pageType:0,sui:i.sui,u:i.u,uc:i.uc,n:de()};this.tracker.pageType&&"fbia"===this.tracker.pageType&&(o.pageType=2);const s=ke(this.accountId);if(s){const{rfv:e,v:t,f:r,r:n}=s;o.rfv=e,o.rfv_r=n,o.rfv_f=r,o.rfv_v=t}return E("".concat(this.getEndpointDomain(),"/recirculation.php"),JSON.stringify(o),{needsXHR:n}),o}getBasicConfig(){const{actualUserId:e}=this.getUserId();return{ac:this.accountId,co:this.cookieDomain,t:this.temporalCookie.currentVisitStarted,r:this.getSessionReferrer(),url:this.url,c:this.canonical,pp:this.getReferrer(),lp:this.getLandingPage(),p:this.pageId,u:e,s:this.getSessionId(),v:.2}}async getTrackingCommonData(){const{userIdPromise:e}=this.getUserId();return mr(mr({},this.getBasicConfig()),{},{u:await e,ua:window.navigator.userAgent,rs:this.getRecirculationSource(),sui:this.getSiteUserId()||"",ut:this.getUserType(),fv:this.getFirstVisit(),lv:this.getLastVisit(),uvar:this.getUserVars(),svar:this.getSessionVars(),pvar:this.getPageVars(),uc:await this.getUserConsent()})}async trackPageInternal(){var e;this.tick>0&&(this.performanceStartTime=performance.now());const t=new FormData,{pageNav:r,jsTime:n}=(e=>{if(void 0!==window.performance&&"function"==typeof window.performance.getEntriesByType){const t=window.performance.getEntriesByType("navigation")[0];return ye=ye||window.performance.now()-e,ye>0?{pageNav:t,jsTime:ye}:{}}return{}})(this.performanceStartTime);null!=n&&(t.append("pt",n),void 0!==r&&void 0!==r.domainLookupEnd&&(t.append("pdns",r.domainLookupEnd-r.domainLookupStart),t.append("pcon",r.connectEnd-r.connectStart),t.append("pfet",r.responseEnd-r.fetchStart),t.append("pnet",r.responseEnd-r.requestStart),t.append("pttf",r.responseStart-r.requestStart),t.append("pint",r.domInteractive),t.append("pdcl",r.domContentLoadedEventEnd),t.append("pdclf",r.duration))),t.append("wv",this.webVitals.wv),t.append("lcp",this.webVitals.lcp),t.append("fid",this.webVitals.fid),t.append("cls",this.webVitals.cls),t.append("fcp",this.webVitals.fcp),t.append("tbt",this.webVitals.tbt),this.webVitals.lcpOffender&&t.append("lcp_o",this.webVitals.lcpOffender),this.webVitals.clsOffender&&t.append("cls_o",this.webVitals.clsOffender),Object.entries(this.getBasicConfig()).forEach((([e,r])=>{t.append(e,r)})),t.append("a",this.tick),t.append("n",de());const i=de()-this.startPageTime;t.append("et","fbia"===(null===(e=this.tracker)||void 0===e?void 0:e.pageType)?i:this.engagementCalculator.getTotalEngagedTime()),t.append("l",i),t.append("ps",this.startPageTime),t.append("ut",this.getUserType()),t.append("sui",this.getSiteUserId()||""),t.append("sc",dt(0===this.tick)),t.append("fv",this.getFirstVisit()),t.append("lv",this.getLastVisit()),t.append("uvar",JSON.stringify(this.getUserVars())),t.append("svar",JSON.stringify(this.getSessionVars())),t.append("pvar",JSON.stringify(this.getPageVars())),this.ecommerceData&&t.append("stock",this.ecommerceData.stock),(this.publishTime||this.updateTime)&&(t.append("uti",this.updateTime),t.append("pti",this.publishTime)),t.append("ads",this.adsTracker.getAds());const o=this.adsTracker.getAdUnits();o.length>0&&t.append("aups",o);const{conv:s,conv_i:a}=this.conversion||{};if(s&&(t.append("conv",s),a&&t.append("conv_i",a),this.conversion=null),this.recirculationSource&&t.append("rs",this.getRecirculationSource()),t.append("uc",await this.getUserConsent()),this.consentManager.getConsent("personalization")){const e=ke(this.accountId);if(e){const{rfv:r,v:n,r:i,f:o}=e;t.append("rfv",r),t.append("rfv_v",n),t.append("rfv_r",i),t.append("rfv_f",o)}}return this.tracker.pageType&&t.append("pageType",jt(this.tracker.pageType)),await this.track(t),this.tick++,t}async collectAndTrackPage(){for(;window[this.trackerName].data.length>0;){const e=window[this.trackerName].data.shift();"userType"===e[0]?this.setUserType(e[1]):"userId"===e[0]?this.setSiteUserId(e[1]):"setCookies"===e[0]?this.setCookies(e[1]):"adRendered"===e[0]?this.adsTracker.trackAdEventLegacy("slotRenderEnded",e[1],e[2]):"userVar"===e[0]?this.setUserVar(e[1],e[2]):"sessionVar"===e[0]?this.setSessionVar(e[1],e[2]):"pageVar"===e[0]?this.setPageVar(e[1],e[2]):"trackConversion"===e[0]?this.trackConversion(e[1],e[2]):"getRFV"===e[0]&&this.getRFV(e[1])}return await this.trackPageInternal()}async trackPage(){(e=>{let t=-1;for(let e=0;e<St.length;e+=1)"lastEvent"===St[e][0]&&(t=e);-1!==t&&St.splice(t,1)})();let e=null;return 0!==this.tick&&"hidden"===document.visibilityState||(e=await this.collectAndTrackPage()),((e,t)=>{const r=Object.keys(gt).map((e=>parseInt(e,10))).sort(((e,t)=>e-t)).reduce(((t,r)=>null===t&&r>e?r:t),null);r&&vt.callOnTimer(t,gt[r])})(this.tick,(()=>this.trackPage())),e}getRFV(e){if(!this.consentManager.getConsent("personalization"))return e?e(be):be;const{userIdPromise:t,actualUserId:r}=this.getUserId();return e?t.then((t=>(async(e,t,r,n)=>{const i=ke(e);return i?(r(i),i):((e,t,r,n)=>new Promise((i=>{const o=Oe(e,t,n);E("https://compassdata.mrf.io/rfv.php",o,{needsXHR:!0},(t=>{const n=we(JSON.parse(t),e);r(n),i(n)}))})))(e,t,r,n)})(this.accountId,t,e,this.getSiteUserId()))):(console.error("Deprecated: please pass a callback to the function getRFV"),((e,t,r)=>ke(e)||((e,t,r)=>{const n=new XMLHttpRequest;return n.open("POST","https://compassdata.mrf.io/rfv.php",!1),n.send(Oe(e,t,r)),we(JSON.parse(n.responseText),e)})(e,t,r))(this.accountId,r,this.getSiteUserId()))}async trackNewPage(e){return this.tick>0&&(await this.trackPageInternal(),this.previousPage=""+this.canonical),x={},this.initialize(e)}on(e,t){this.dispatcher.on(e,t)}setupConsent(e){this.consentManager.onChange((()=>{this.consentManager.getConsent("cookies")&&this.saveCookies({force:!0})}).bind(this));const t=function(e={}){const{useCookies:t}=e;if(ue(t))return t;const r=ie("__nrCookieConsent");return ue(r)?r:null}(e);null!==t&&this.consentManager.setConsent("cookies",t)}async getPaywallScore(){const{actualUserId:e}=this.userIdManager.getUserId();return this.consentManager.getConsent("personalization")?(async e=>{const t="".concat(me,"?").concat(ge(e)),r=await window.fetch(t);if(!r.ok)throw new Error(r.status);const{score:n}=await r.json();return n})({accountId:this.accountId,userId:e,siteUserId:this.getSiteUserId()}):fe}async predict(){const{actualUserId:e}=this.userIdManager.getUserId(),t=await(async e=>{const t="".concat(ve,"?").concat(ge(e)),r=await fetch(t);if(!r.ok)throw new Error(r.status);return await r.json()})({accountId:this.accountId,userId:e,siteUserId:this.getSiteUserId(),totalPageviews:this.getTotalPageviews(),sessionDuration:this.getSessionDuration()});return t.probability&&Et("predict:probability",t.probability),t}async setRecirculationTracking(){return this.setRecirculationTrackingInternal(!0)}async setRecirculationTrackingInternal(e=!0){let t=!0;const r=Promise.race([this.synchronizer.wait("experimentation").then((e=>e?this.synchronizer.wait("headline"):Promise.resolve())),this.synchronizer.wait("experimentationFailed"),this.synchronizer.wait("experimentationDisabled").then((()=>(t=!1,Promise.resolve()))),new Promise((e=>setTimeout(e,3e3)))]),[{layouts:n}]=await Promise.all([this.tracker.rm,r]);await(async(e,t,r={})=>{(()=>{if(window.performance){if(window.performance.navigation&&1===window.performance.navigation.type)return!0;if("function"==typeof window.performance.getEntriesByType)return window.performance.getEntriesByType("navigation").map((e=>e.type)).includes("reload")}return!1})()&&Re("refresh",e),await it(),((e,{observeDomChanges:t=!0,layouts:r=[]}={})=>{const n=t?nt:rt;De().forEach((t=>t.shadowRoot&&n(e,t.shadowRoot,{parentNode:t,layouts:r}))),n(e,document.body,{layouts:r})})(t,r)})(R(this.tracker.pageType),((e,r,n=t)=>{this.trackRecirculationEvent(e,r.map((({module:e,links:t,position:r})=>({n:e,e:t,p:r}))),"",n)}),{observeDomChanges:e,layouts:n}),this.synchronizer.resolve("recirculationTracking")}setRecirculationConfig({modules:e=[],layouts:t=[]}={}){this.tracker.rm.set((({modules:r=[],layouts:n=[]})=>{const i={modules:hr([...r,...e]),layouts:hr([...n,...t])};return this.dispatcher.dispatch("recirculationConfigChanged",i),i})),(async(e,t=(()=>{}))=>{e.length&&(await it(),st(e),_((()=>{st(e)&&t()})),t())})(e,(()=>{this.setRecirculationTrackingInternal(!1)}))}getRecirculationConfig(){return this.tracker.rm}setRecirculationModules(e){this.setRecirculationConfig({modules:e})}setConversionButtons(e=[]){e&&e.length&&function(e=[],t){dr(e,t),_((()=>{dr(e,t)}))}(e,this.trackConversion.bind(this))}};function gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class br extends vr{constructor(e,t,r){window.__mrfCompass=yr(yr({data:[]},window.__mrfCompass||{}),e),super(e,t,r)}initialize(){}getEndpointDomain(){return"https://events.newsroom.bi"}getRFV(e){var r,n;null===(r=window)||void 0===r||null===(n=r.top)||void 0===n||n.marfeel.cmd.push(["compass",function(){var r=(0,t.Z)((function*(t){t.getRFV(e)}));return function(e){return r.apply(this,arguments)}}()])}getTrackingCommonData(){return(0,t.Z)((function*(){return new Promise((e=>{var r,n;null===(r=window)||void 0===r||null===(n=r.top)||void 0===n||n.marfeel.cmd.push(["compass",function(){var r=(0,t.Z)((function*(t){return e(yield t.getTrackingCommonData())}));return function(e){return r.apply(this,arguments)}}()])}))}))()}}function wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class kr extends vr{constructor(e,r,n){window.__mrfCompass=Or(Or({data:[],rm:{lazy:!0}},window.__mrfCompass||{}),e),super(e,r,n),function(e){l.apply(this,arguments)}(this,("activate-overlay",(0,t.Z)((function*(){return!!new URL(window.location.href).searchParams.get("activate-overlay")}))),("compass-overlay",(0,t.Z)((function*(){var e=yield v("compass-overlay");return e&&e.active}))))}}var Pr="flagConsentReady";function jr(e,t,r){e?t.getConsent("cookies")&&r.resolve(Pr):r.resolve(Pr)}function Sr(){return(Sr=(0,t.Z)((function*(e,t,r){return t.isInitiated()?jr(e.blockOnNoConsent,t,r):(t.onChange((()=>{t.isInitiated()&&jr(e.blockOnNoConsent,t,r)})),!e.blockOnNoConsent&&setTimeout((()=>r.resolve(Pr)),1e3)),r.wait(Pr)}))).apply(this,arguments)}u("compass",["consent","synchronizer"],function(){var e=(0,t.Z)((function*(e,t){var[r,n]=t;yield function(e,t,r){return Sr.apply(this,arguments)}(e,r,n);try{var i;if(window.top!==window.self&&(null===(i=window.top)||void 0===i?void 0:i.marfeel.config.accountId)===e.accountId)return Promise.resolve(br)}catch(e){}return Promise.resolve(kr)}));return function(t,r){return e.apply(this,arguments)}}());var Er=s(181),Cr=s.n(Er),Tr=function(e){return e.INLINE="inline",e.FLOWCARDS="flowcards",e.COMPASS="compass",e.AD_MANAGER="adManager",e.EXPERIMENTS="experiments",e.EXPERIMENTATION="experimentation",e.GOOGLE_OPTIMIZE="googleOptimize",e.PIANO="piano",e.GOAL_TRACKING="goalTracking",e.LOADER="loader",e.GENERIC_GOAL_TRACKING="genericGoalTracking",e.SITE_CONTEXT_SYNCHRONIZER="siteContextSynchronizer",e}({}),Dr=function(){var e=(0,t.Z)((function*(e){var t=encodeURIComponent(e.sessionReferrer||"");return"referrer=".concat(t)}));return function(t){return e.apply(this,arguments)}}(),Ar=function(){var e=(0,t.Z)((function*(e){var t,r=Object.assign({},e.targeting,(t=e.compassVars)?[...t.page,...t.user,...t.session].reduce(((e,t)=>{var[r,n]=t;return e[r]=n,e}),{}):{});return 0===Object.keys(r).length?"":Object.keys(r).filter((e=>void 0!==r[e])).map((e=>[e,encodeURIComponent(r[e])].join("="))).join("&")}));return function(t){return e.apply(this,arguments)}}(),Ir="mrfgeo=",_r=function(){var e=(0,t.Z)((function*(e){return"geo=".concat((e=>{if(e){var t=e.search.replace("?","").split("&").find((e=>e.startsWith(Ir)));if(t)return t.replace(Ir,"")}return null})(e.location)||"__INJECT_GEO__")}));return function(t){return e.apply(this,arguments)}}(),xr=function(){var e=(0,t.Z)((function*(e){return isNaN(e.siteId)?"":"site_id=".concat(e.siteId)}));return function(t){return e.apply(this,arguments)}}(),Rr=function(){var e=(0,t.Z)((function*(e){var t=e.userId;return t&&""!==t?"client_id=".concat(t):""}));return function(t){return e.apply(this,arguments)}}();function Nr(e,t){if("provider"!==e)return t}var Vr=function(){var e=(0,t.Z)((function*(e){var t,r;if(null===(t=e.externalExperiences)||void 0===t||null===(r=t[Tr.FLOWCARDS])||void 0===r||!r.length)return"";var n=e.externalExperiences[Tr.FLOWCARDS].map((e=>{var t=e;return"object"==typeof e.renderProps&&(t.renderProps=JSON.stringify(e.renderProps)),t})),i=encodeURIComponent(JSON.stringify(n,Nr));return"dynamic_flowcards=".concat(i)}));return function(t){return e.apply(this,arguments)}}(),Lr=function(){var e=(0,t.Z)((function*(e){var t=e.location;return t?t.search.replace("?","").split("&").filter((e=>e.startsWith("utm")||e.startsWith("usqp"))).join("&"):""}));return function(t){return e.apply(this,arguments)}}(),Mr=function(){var e=(0,t.Z)((function*(e){return isNaN(e.userType)?"":"user_type=".concat(e.userType)}));return function(t){return e.apply(this,arguments)}}(),Ur=function(){var e=(0,t.Z)((function*(e){var t=encodeURIComponent(e.recirculationSource||"");return"recirculation_source=".concat(t)}));return function(t){return e.apply(this,arguments)}}(),Zr=function(){var e=(0,t.Z)((function*(e){var t=encodeURIComponent(e.referrer||"");return"previous_page=".concat(t)}));return function(t){return e.apply(this,arguments)}}(),qr=function(){var e=(0,t.Z)((function*(e){return isNaN(e.sessionDuration)?"":"session_duration=".concat(e.sessionDuration)}));return function(t){return e.apply(this,arguments)}}(),Fr=function(){var e=(0,t.Z)((function*(e){return isNaN(e.totalPageViews)?"":"pageviews=".concat(e.totalPageViews)}));return function(t){return e.apply(this,arguments)}}(),zr=function(){var e=(0,t.Z)((function*(e){return isNaN(e.firstVisit)?"":"first_visit=".concat(e.firstVisit)}));return function(t){return e.apply(this,arguments)}}();function Kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jr="croupier-experiments-entry";function Gr(){return(Gr=(0,t.Z)((function*(e,t){if(0===e.length)return!1;var r=e.reduce(((e,r)=>{var n=r.name,i=r.group;return t.setSessionVar("".concat("mrfExperiment_").concat(n),i.toString()),Hr(Hr({},e),{},{[n]:i})}),{});return y(Jr,r)}))).apply(this,arguments)}function Br(){return(Br=(0,t.Z)((function*(){var e=yield v(Jr);return Object.entries(e||{}).map((e=>{var[t,r]=e;return{name:t,group:r}}))}))).apply(this,arguments)}var Wr=function(){var e=(0,t.Z)((function*(e,t){var r={handlerName:"experiments",handled:!1};return e.experiments&&(r.handled=yield function(e,t){return Gr.apply(this,arguments)}(e.experiments,t.compassSDK)),Promise.resolve(r)}));return function(t,r){return e.apply(this,arguments)}}(),Xr=function(){var e=(0,t.Z)((function*(){var e=yield function(){return Br.apply(this,arguments)}();return e.length>0?"experiments=".concat(e.map((e=>"".concat(e.name,",").concat(e.group))).join(",")):""}));return function(){return e.apply(this,arguments)}}(),$r=0,Yr=1,Qr=7,en=4,tn=7,rn=864e5;function nn(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()+en-(t.getUTCDay()||tn))),n=new Date(Date.UTC(r.getFullYear(),$r,Yr));return{week:Math.ceil(((r.getTime()-n.getTime())/rn+1)/Qr),year:r.getUTCFullYear()}}var on=function(e){return e.impression="impression",e.close="close",e}({});function sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cn,un,ln,dn="croupier-experiences-count-entry",pn=(e,t)=>{var r=an({total:{impression:0,close:0}},e||{}),n="w".concat(ln.week);return r[n]=r[n]||{impression:0,close:0},r[n][t]++,r},hn=(e,t)=>{var r=an({total:{impression:0,close:0}},e||{});return r.total[t]++,r[un.getMonth()]=((e,t)=>{var r=an({total:{impression:0,close:0}},e||{}),n=un.getDate();return r[n]=r[n]||{impression:0,close:0},r[n][t]++,r.total[t]++,r})(r[un.getMonth()],t),r};function fn(){return void 0===cn&&(un=new Date(Date.now()),ln=nn(un),cn=v(dn).then((e=>e||{}))),cn}function mn(e,t){return fn().then((r=>{r[e]=function(e,t){var r=an({total:{impression:0,close:0},last:{impression:0,close:0}},e||{});return r.total[t]++,r[un.getFullYear()]=hn(r[un.getFullYear()],t),r[ln.year]=pn(r[ln.year],t),r.last[t]=Number(Date.now()),r}(r[e],t),y(dn,r)}))}var vn=function(e){return e.lifetime="lifetime",e.month="month",e.week="week",e.day="day",e}(vn||{}),gn=function(e){return e.last="last",e}(gn||{}),yn=e=>{if(!e)return 0;var t=Date.now()-e;return Math.floor(t/1e3)},bn=(e,t,r)=>{var{impression:n,close:i}=r;n>0&&e.push(t,String(n)),i>0&&e.push("".concat("c_").concat(t),String(i))},wn=function(){var e=(0,t.Z)((function*(){return fn().then((e=>{var t=Object.entries(e).reduce(((e,t)=>{var[r,n]=t,i=[];if(!n||0===n.total.impression)return e;!function(e,t){bn(e,vn.lifetime,t.total)}(i,n);var o=new Date(Date.now()),s=nn(o),a=n[o.getFullYear()],c=n[s.year],u=null==a?void 0:a[o.getMonth()],l=null==u?void 0:u[o.getDate()];return function(e,t){t&&bn(e,vn.month,t.total)}(i,u),function(e,t,r){if(t){var n=t["w".concat(r.week)];n&&bn(e,vn.week,n)}}(i,c,s),function(e,t){t&&bn(e,vn.day,t)}(i,l),((e,t)=>{t.last&&bn(e,gn.last,{impression:yn(t.last.impression),close:yn(t.last.close)})})(i,n),e.concat(r,i.join("|"))}),[]);return t.length>0?"user_experiences=".concat(t.join(",")):""}))}));return function(){return e.apply(this,arguments)}}(),On="mrfexperiences=",kn={site_id:xr,client_id:Rr,user_type:Mr,canonical_url:e=>{var t,r=e.canonical||(null===(t=e.location)||void 0===t?void 0:t.href)||"",n=encodeURIComponent(r);return Promise.resolve("canonical_url=".concat(n))},referrer:Dr,recirculation_source:Ur,previous_page:Zr,targeting:Ar,geo:_r,dynamic_flowcards:Vr,utms:Lr,session_duration:qr,pageviews:Fr,experiments:Xr,first_visit:zr,user_experiences:wn,page_technology:function(){var e=(0,t.Z)((function*(e){var t=e.pageTechnology?e.pageTechnology:0;return"page_technology=".concat(t)}));return function(t){return e.apply(this,arguments)}}(),hubspot_utk:function(){var e=(0,t.Z)((function*(e){var t=/hubspotutk=(.+?)(?:;|$)/.exec(e.cookies||"");return t?"hubspot_utk=".concat(t[1]):""}));return function(t){return e.apply(this,arguments)}}(),conversions:function(){var e=(0,t.Z)((function*(){var e=yield v("compass-conversions-counter-entry");if(!e)return"";var t=Object.keys(e).map((t=>"".concat(encodeURIComponent(t),",").concat(e[t])));return"".concat("conversions","=").concat(t.join(","))}));return function(){return e.apply(this,arguments)}}(),debug_experiences:e=>{var t=(e=>{if(e){var t=e.hash.replace("#","").split("&").find((e=>e.startsWith(On)));if(t)return t.replace(On,"")}return null})(e.location);return Promise.resolve(t?"debug_experiences=".concat(t):"")},experience_id:function(){var e=(0,t.Z)((function*(e){var t=e.experienceId;return t&&""!==t?"id=".concat(t):""}));return function(t){return e.apply(this,arguments)}}()},Pn=function(){var e=(0,t.Z)((function*(e,t,r){var n=yield Promise.all((e=>{var t=Object.entries(kn);return e?(e.add("site_id"),e.add("page_technology"),t.filter((t=>{var[r]=t;return e.has(r)}))):t})(r).map((t=>{var[r,n]=t;return n(e)})));return"".concat(t,"?").concat(n.filter((e=>!!e)).join("&"))}));return function(t,r,n){return e.apply(this,arguments)}}();function jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function En(e){var t=e[Tr.FLOWCARDS];return t&&!t.actions?Sn(Sn({},e),{},{[Tr.FLOWCARDS]:Sn(Sn({},t),{},{actions:t.cards})}):e}var Cn=function(e){return e.POST_MESSAGE="postmessage",e.HTTP="http",e}({});function Tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var An=e=>e.reduce(((e,t)=>Dn(Dn({},e),{},{[t.origin]:t.goal})),{});function In(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xn,Rn=(e,t)=>{var r;if("object"==typeof e){r=e;for(var n=t.split("."),i=0;i<n.length;i++){var o,s,a,c,u;r=i===n.length-1&&"function"==typeof(null===(o=r)||void 0===o?void 0:o[n[i]])?null===(s=r)||void 0===s||null===(a=(c=s)[n[i]])||void 0===a?void 0:a.call(c):null===(u=r)||void 0===u?void 0:u[n[i]]}}return r},Nn=(e,t)=>void 0===t||e===t||"object"==typeof e&&"object"==typeof t&&Object.entries(t).map((t=>{var[r,n]=t;return Nn(e[r],n)})).every(Boolean),Vn=(e,t)=>{switch(t.type){case"composite":return Array.isArray(t.value)?t.value.map((t=>Vn(e,t))):Object.entries(t.value).reduce(((t,r)=>{var[n,i]=r;return _n(_n({},t),{},{[n]:Vn(e,i)})}),{});case"lookup":return t.value?Rn(e,t.value):e;default:return t.value}};function Ln(){return(Ln=(0,t.Z)((function*(e){var t=yield Pn(e,"https://experiences.mrf.io/recommenderexperience/render.json",new Set(["canonical_url","client_id","experience_id"])),r=yield fetch(t),n=yield r.json();return null==n?void 0:n.recommendation}))).apply(this,arguments)}!function(e){e.AMP_DOCUMENT="AMPDocument",e.WIDGET_PROVIDER="WidgetProvider",e.AD_SERVER_PROVIDER="AdServerProvider",e.TEXT_HTML="TextHTML",e.CONTAINER="Container"}(xn||(xn={}));var Mn=e=>e.type===xn.AMP_DOCUMENT,Un=e=>e.type===xn.TEXT_HTML;function Zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fn="mrf-sdk-hero-element-src",zn="mrf-sdk-hero-element-height",Kn=(e,t)=>{if(e.has(Fn)){var r={src:e.get(Fn)};return e.has(zn)&&(r.height=parseInt(e.get(zn),10)),qn(qn({},t),{},{heroElement:r})}return t};function Hn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gn="mrf-sdk-canonical-url",Bn=(e,t)=>{if(e.has(Gn)){var r={url:e.get(Gn)};return Jn(Jn({},t),{},{canonical:r})}return t},Wn=e=>e.includes("marfeelrecommenderexperienceengine.mrf.io");function Xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yn(){return(Yn=(0,t.Z)((function*(e){var{headers:t}=yield fetch(e.url);return function(e){var t=[Kn];return Wn(e.url)||t.push(Bn),t}(e).reduce(((e,r)=>r(t,e)),{})}))).apply(this,arguments)}function Qn(e){return ei.apply(this,arguments)}function ei(){return ei=(0,t.Z)((function*(e){return Object.entries(e).map(function(){var e=(0,t.Z)((function*(e){var t,r,[n,i]=e;return r=i.content,(Mn(r)||Un(r))&&(t=yield function(e){return Yn.apply(this,arguments)}(i.content)),[n,i,t]}));return function(t){return e.apply(this,arguments)}}()).reduce(function(){var e=(0,t.Z)((function*(e,t){var r,n=yield e,[i,o,s]=yield t;return s&&(r=function(e,t){return $n($n({},e),{},{features:$n($n({},e.features),t)})}(o,s)),n[i]=r||o,n}));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve({}))})),ei.apply(this,arguments)}function ti(e,t){return r=>{var n=r.detail;(null==n?void 0:n.owner)===t&&e({uri:n.uri})}}var ri=[];function ni(){return(ni=(0,t.Z)((function*(e,t){var r=ri.map((r=>r(e,t)));return Promise.all(r).then((()=>Promise.resolve()))}))).apply(this,arguments)}var ii=function(){var e=(0,t.Z)((function*(e,t,r){var n,{userIdPromise:i}=t.getUserId(),o=yield i;return function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Pn(e,"https://flowcards.mrf.io/json/experiences",t.length>0?new Set(t):void 0)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).then(fetch).then((e=>e.json())).then(En)}({pageTechnology:t.getPageType(),canonical:(null===(n=document.querySelector('link[rel="canonical"]'))||void 0===n?void 0:n.getAttribute("href"))||void 0,location:new URL(window.location.toString()),siteId:e.accountId,externalExperiences:e.experiences,targeting:e.targeting,userId:o,userType:t.getUserType(),firstVisit:t.getFirstVisit(),recirculationSource:t.getRecirculationSource(),referrer:t.getReferrer(),sessionDuration:t.getSessionDuration(),sessionReferrer:t.getSessionReferrer(),totalPageViews:t.getTotalPageviews(),cookies:document.cookie,compassVars:{user:t.getUserVars(),session:t.getSessionVars(),page:t.getPageVars()}},r)}));return function(t,r,n){return e.apply(this,arguments)}}();function oi(e,t){var r=document.createElement("script");return r.setAttribute("type","application/javascript"),r.setAttribute("src",e),t&&(r.id=t),r}function si(e){return(t,r)=>{var n=oi(t,r);n.setAttribute("type","module"),e.appendChild(n)}}function ai(e){return(t,r)=>{var n=oi(t,r);n.noModule=!0,n.async=!0,n.defer=!0,e.appendChild(n)}}function ci(e){return(t,r)=>{var n=oi(t,r);e.appendChild(n)}}function ui(e){return"marfeel-".concat(e)}function li(e){return function(e){return document.querySelector(ui(e))}(e)||function(e){return document.body.appendChild(document.createElement(ui(e)))}(e)}var di,pi=function(){var e=(0,t.Z)((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{onInteraction:r=!0,strategy:n="async"}=t;return(e=>{var t="string"!=typeof e?e.module:e;return!!document.querySelector('script[src="'.concat(t,'"]'))})(e)?Promise.resolve():(r?function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e4,r=["touchstart","click","scroll"];return new Promise((n=>{var i=()=>{r.forEach((e=>((e,t)=>{document.removeEventListener(e,t)})(e,i))),window.clearTimeout(e),n()};r.forEach((e=>((e,t)=>{document.addEventListener(e,t,{passive:!0})})(e,i))),e=window.setTimeout(i,t)}))}():Promise.resolve()).then((()=>{"sync"===n?"string"!=typeof e?(function(){si(document.head)(...arguments)}(e.module),function(){ai(document.head)(...arguments)}(e.nomodule)):function(){ci(document.head)(...arguments)}(e):"string"!=typeof e?(function(){si(document.body)(...arguments)}(e.module),function(){ai(document.body)(...arguments)}(e.nomodule)):function(){ci(document.body)(...arguments)}(e)}))}));return function(t){return e.apply(this,arguments)}}(),hi=function(){var e=(0,t.Z)((function*(e){var t,r=null===(t=e.experimentation)||void 0===t?void 0:t.actions,n={handlerName:Tr.EXPERIMENTATION,handled:!1};return r&&(yield Promise.all(Object.values(r).map((e=>{var{url:t}=e,r=new URL(t),n=r.searchParams.get("experimentType");if(null!==n&&document.querySelector('[src*="experimentType='.concat(n,'"]')))return Promise.resolve();var i=new URL(t);return r.searchParams.append("version","esnext"),i.searchParams.append("version","legacy"),pi({module:r.toString(),nomodule:i.toString()},{onInteraction:!1,strategy:"sync"})}))),n.handled=!0),Promise.resolve(n)}));return function(t){return e.apply(this,arguments)}}();var fi=function(){var e=(0,t.Z)((function*(){return new Promise((e=>{"complete"!==document.readyState?document.addEventListener("readystatechange",(()=>e())):e()}))}));return function(){return e.apply(this,arguments)}}();function mi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gi=function(){var e=(0,t.Z)((function*(e,t,r){var n=t[e]||{actions:{}},i=n.actions||{},o={handlerName:e,handled:!1};if(Object.keys(i).length>0){var s=vi(vi({},n),{},{actions:yield Qn(n.actions)});yield fi(),function(e,t){var r=document.createElement("script");r.setAttribute("type","application/json"),r.innerHTML=JSON.stringify(t);var n=li(e);n.innerHTML="",n.appendChild(r),n.setAttribute("initialization","inline")}(e,s),yield r(s),o.handled=!0}return o}));return function(t,r,n){return e.apply(this,arguments)}}();function yi(e){var t;return(null===(t=e.features.canonical)||void 0===t?void 0:t.url)||(Mn(e.content)||Un(e.content)?e.content.url:e.content.type===xn.WIDGET_PROVIDER||(e=>e.type===xn.AD_SERVER_PROVIDER)(e.content)?e.content.name:void 0)}function bi(e,t){return t.id||e}var wi,Oi,ki="//flowcards.mrf.io/statics/experience-web",Pi="".concat(ki,"/index.es2015.standalone.js"),ji="".concat(ki,"/index.es5.standalone.js"),Si=function(){var e=(0,t.Z)((function*(e,r){if(matchMedia("only screen and (min-width:800px)").matches)return{handlerName:Tr.FLOWCARDS,handled:!1};var{compassSDK:n}=r;return gi(Tr.FLOWCARDS,e,function(){var e=(0,t.Z)((function*(e){var t;!function(e,t){Object.entries(t.actions).map((e=>{var[t,r]=e;return[bi(t,r),yi(r)]})).forEach((t=>{var[r,n]=t;n&&e.trackRecirculationEvent("elegible",[{n:r,e:[n]}],"")}))}(n,e),yield pi({module:Pi,nomodule:ji}),t=li(Tr.FLOWCARDS),di=[],t.addEventListener("snappointchange",(e=>{var{snapPoint:t,cardId:r}=e.detail;(function(e){return"initial"===e||"active"===e})(t)&&!function(e){return di.indexOf(e)>-1}(r)&&function(e){di.push(e),mn(e,on.impression)}(r)}))}));return function(t){return e.apply(this,arguments)}}())}));return function(t,r){return e.apply(this,arguments)}}(),Ei=(e,t)=>e.includes(t),Ci="https://experiences.mrf.io/statics/inline-experiences",Ti="".concat(Ci,"/esnext/standalone.js"),Di="".concat(Ci,"/legacy/standalone.js"),Ai=function(){var e=(0,t.Z)((function*(e){return gi(Tr.INLINE,e,function(){var e=(0,t.Z)((function*(e){var{actions:t={}}=e;yield pi({module:Ti,nomodule:Di},{onInteraction:!1}),(e=>{wi=[],Oi=[],Object.entries(e).forEach((e=>{var t,[r,n]=e;Ei(wi,n.id)||(t=n.id,wi.push(t),mn(t,on.impression))})),document.addEventListener("mrfCloseInline",(e=>{var t,r=null===(t=e.detail)||void 0===t?void 0:t.id;Ei(Oi,r)||(Oi.push(r),mn(r,on.close))}))})(t)}));return function(t){return e.apply(this,arguments)}}())}));return function(t){return e.apply(this,arguments)}}(),Ii=function(){var e=(0,t.Z)((function*(e){var t,r=null===(t=e.loader)||void 0===t?void 0:t.actions,n={handlerName:Tr.LOADER,handled:!1};return r&&(Object.values(r).forEach((e=>{var{moduleName:t,config:r}=e;window.marfeel.cmd.push(["loader",function(e){e.load(t,r)}])})),n.handled=!0),Promise.resolve(n)}));return function(t){return e.apply(this,arguments)}}(),_i="closed",xi=function(){var e=(0,t.Z)((function*(e,t){var r,n,i=yield t.wait("piano-offer");return!("purchase"!==i.offerType||("inline"===i.displayMode?(e.compassSDK.setPageVar(_i,"hard-paywall"),0):"modal"!==i.displayMode||!i.activeMeters||"DefaultMeter"!==(r=i.activeMeters,n=JSON.parse(r),Array.isArray(n)?n[0]:n).meterName||(e.compassSDK.setPageVar(_i,"dynamic-paywall"),0)))}));return function(t,r){return e.apply(this,arguments)}}(),Ri="piano subscribe",Ni=function(){var e=(0,t.Z)((function*(e,t,r){var n,i=yield r.wait("piano-subscription"),o=t.find((e=>e.rid===i.rid));return!!o&&(e.compassSDK.trackConversion(null!==(n=o.conversion)&&void 0!==n?n:Ri),!0)}));return function(t,r,n){return e.apply(this,arguments)}}(),Vi=function(){var e=(0,t.Z)((function*(e,r,n){var i,o,s=yield Promise.all(r.map(function(){var r=(0,t.Z)((function*(t){if(yield((e,t)=>new Promise((r=>{e.api.callApi("/access/check",{rid:t},(function(e){var t=e.access.granted;return r(t)}))})))(e,t.rid))return t}));return function(e){return r.apply(this,arguments)}}()));n.compassSDK.setUserType(null!==(i=null===(o=s.find(Boolean))||void 0===o?void 0:o.userType)&&void 0!==i?i:"logged")}));return function(t,r,n){return e.apply(this,arguments)}}(),Li=function(){var e=(0,t.Z)((function*(e,t){var r,n,i=null!==(r=null===(n=e.pianoId.getUser())||void 0===n?void 0:n.uid)&&void 0!==r?r:void 0;if(!i)try{var o,s;i=JSON.parse(atob(null===(o=e.pianoId.getToken())||void 0===o||null===(s=o.split("."))||void 0===s?void 0:s[1])).sub}catch(e){}i&&t.compassSDK.setSiteUserId(i)}));return function(t,r){return e.apply(this,arguments)}}(),Mi=function(){var e=(0,t.Z)((function*(){if(window.tp&&!Array.isArray(window.tp)||(yield new Promise((e=>{!function(){window.tp=window.tp||[],Array.isArray(window.tp)&&window.tp.push(arguments)}("init",e)}))),window.tp&&!Array.isArray(window.tp))return window.tp}));return function(){return e.apply(this,arguments)}}(),Ui=e=>Array.isArray(e.resources)?e.resources:e.rid.split(";").map((e=>({rid:e,userType:3,conversion:Ri}))),Zi=[[Ai],[(e,t)=>{var{compass:r}=e,n={handlerName:"compass",handled:!1};if(null!=r&&r.actions){var i={layouts:[],modules:[]};Object.values(r.actions).forEach((e=>{var{recirculationModules:r=[],userType:n,userVars:o={},conversionButtons:s=[],layouts:a=[]}=e;t.compassSDK.setConversionButtons(s),void 0!==n&&t.compassSDK.setUserType(n),Object.entries(o).forEach((e=>{var[r,n]=e;return t.compassSDK.setUserVar(r,n)})),i.modules.push(...r),i.layouts.push(...a)})),t.compassSDK.setRecirculationConfig(i),n.handled=!0}return Promise.resolve(n)}],[e=>{var{adManager:t}=e,r={handlerName:"ad-manager",handled:!1};return null!=t&&t.actions&&(Object.values(t.actions).forEach((e=>{var t,{targeting:r}=e;(t=r)&&(window.googletag=window.googletag||{cmd:[]},t.forEach((e=>{var{key:t,value:r}=e;window.googletag.cmd.push((()=>{window.googletag.pubads().setTargeting(t,r)}))})))})),r.handled=!0),Promise.resolve(r)},hi,Wr,Si,(e,t)=>{var r,n=null===(r=e.googleOptimize)||void 0===r?void 0:r.actions,i={handlerName:Tr.GOOGLE_OPTIMIZE,handled:!1};if(n){var o=Object.values(n).map((e=>{var{experiments:t}=e;return t})).reduce(((e,t)=>(t.forEach((t=>e.add(t))),e)),new Set);if(o.size>0)return new Promise((e=>{!function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push(arguments)}("event","optimize.callback",{callback:(r,n)=>{o.has(n)&&(t.compassSDK.setUserVar("optimize-".concat(n),r),o.delete(n)),0===o.size&&(i.handled=!0,e(i))}})}))}return Promise.resolve(i)},function(){var e=(0,t.Z)((function*(e,r,n){var i,o=null===(i=e.piano)||void 0===i?void 0:i.actions,s={handlerName:Tr.PIANO,handled:!1};if(o){var a=Object.values(o).map(Ui).reduce(((e,t)=>[...e,...t]),[]),c=Object.values(o).some((e=>null==e?void 0:e.deviceUnification));return new Promise((e=>{Promise.all([xi(r,n),Ni(r,a,n),Mi().then(function(){var e=(0,t.Z)((function*(e){e&&e.pianoId.isUserValid()&&(yield Vi(e,a,r),c&&(yield Li(e,r)))}));return function(t){return e.apply(this,arguments)}}())]).then((()=>{s.handled=!0,e(s)}))}))}return Promise.resolve(s)}));return function(t,r,n){return e.apply(this,arguments)}}(),(e,t)=>{var{goalTracking:r}=e,n={handlerName:"goalTracking",handled:!1};return null!=r&&r.actions&&(Object.values(r.actions).forEach((e=>{var{goals:r}=e;null==r||r.forEach((e=>t.compassSDK.trackConversion(e)))})),n.handled=!0),Promise.resolve(n)},(e,t)=>{var{genericGoalTracking:r}=e,n={handlerName:"genericGoalTracking",handled:!1},i=!1;if(null!=r&&r.actions){var o,s,a=Object.values(r.actions).reduce(((e,t)=>((e[t.source]=e[t.source]||[]).push(t),e)),{});if((null===(o=a[Cn.POST_MESSAGE])||void 0===o?void 0:o.length)>0){var c=An(a[Cn.POST_MESSAGE]);window.addEventListener("message",(e=>{if(Object.keys(c).includes(e.origin)){var r,n;try{n=JSON.parse(e.data)}catch(e){return}"complete"!==n.event&&("close"!==n.event&&"purge"!==n.event||null===(r=n.params)||void 0===r||!r.completePayment)||i||(i=!0,t.compassSDK.trackConversion(c[e.origin]))}})),n.handled=!0}if((null===(s=a[Cn.HTTP])||void 0===s?void 0:s.length)>0){var u=An(a[Cn.HTTP]),l=window.fetch,d=window.XMLHttpRequest.prototype.open;window.fetch=(e,r)=>{var n=l(e,r);return Object.keys(u).includes(e)&&n.then((r=>{r.ok&&t.compassSDK.trackConversion(u[e])})),n},window.XMLHttpRequest.prototype.open=function(){d.apply(this,arguments);try{var e=new URL(arguments[1]);Object.keys(u).includes(e.origin)&&t.compassSDK.setPageVar(u[e.origin],"true")}catch(e){}},n.handled=!0}}return Promise.resolve(n)},Ii,(e,t)=>{var{siteContextSynchronizer:r}=e,n={handlerName:"siteContextSynchronizer",handled:!1};return null!=r&&r.actions&&(Object.values(r.actions).forEach((e=>{e.definition.forEach((e=>{return r=e,n=t.compassSDK,o=0,s=(e,t)=>{var r=Vn(e,t.params);switch(function(e){return void 0!==(null==e?void 0:e.name)}(t.action)?t.action.name:t.action){case"userType":"string"!=typeof r&&"number"!=typeof r||n.setUserType(r);break;case"conversion":"string"==typeof r&&n.trackConversion(r);break;case"marfeelCMD":var i=t.action;window.marfeel.cmd.push([i.config.module,e=>{var t;Array.isArray(r)&&(null==e||null===(t=e[i.config.method])||void 0===t||t.call(e,...r))}])}},a=e=>{for(var t of r.effects)if(Nn(e,t.condition))return void s(e,t)},(c=function e(){var t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=r.path.startsWith("window.")?r.path.substring(7):r.path,s=Rn(window,i);if(s)if("array"===r.type){if(Array.isArray(s)){for(var c=o;c<s.length;c++)a(s[c]);o=s.length}}else a(s);var u=null!==(t=r.observe)&&void 0!==t?t:5e3;n&&u>0&&setTimeout((()=>e()),u)})(),i=()=>{c(!1)},void 0!==document.addEventListener&&void 0!==document.hidden&&document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&i()})),void window.addEventListener("pagehide",(()=>{i()}),{capture:!0});var r,n,i,o,s,a,c}))})),n.handled=!0),Promise.resolve(n)}]],qi=function(){var e=(0,t.Z)((function*(e,t,r){var n=[];for(var i of Zi){var o=yield Promise.all(i.map((n=>n(e,t,r))));n.push(...o)}return n}));return function(t,r,n){return e.apply(this,arguments)}}();class Fi{constructor(){(0,r.Z)(this,"promise",void 0),(0,r.Z)(this,"promiseResolve",void 0),this.promise=new Promise((e=>{this.promiseResolve=e}))}resolve(){var e;null===(e=this.promiseResolve)||void 0===e||e.call(this)}}var zi=function(e){return e.NOT_EQUALS="NOT_EQUALS",e.EQUALS="EQUALS",e}({}),Ki=e=>e.replace(/\/+$/,""),Hi=(e,t)=>e.hostname===t.hostname&&Ki(e.pathname)===Ki(t.pathname);function Ji(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bi={url:e=>{var t=window.location;switch(e.operator){case zi.NOT_EQUALS:return e.values.every((e=>!Hi(t,new URL(e))));case zi.EQUALS:default:return e.values.some((e=>Hi(t,new URL(e))))}}};function Wi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $i=e=>!!e;class Yi{constructor(e,t,n){(0,r.Z)(this,"config",void 0),(0,r.Z)(this,"compassSDK",void 0),(0,r.Z)(this,"synchronizer",void 0),(0,r.Z)(this,"executionData",void 0),(0,r.Z)(this,"deferred",void 0);var i=e.experiences||e.flowcards;this.compassSDK=t,this.synchronizer=n,this.config={accountId:e.accountId,targeting:{}},i&&Object.assign(this.config,i),this.deferred=new Fi,this.executionData=this.loadExperiences()}loadExperiences(){var e=this;return(0,t.Z)((function*(){var t,r,n,i,o,s,a,c,u={},l=[],d={config:e.config,compassSDK:e.compassSDK},{active:p,clientParameters:h,preflight:f}=yield(t=e.config,t.preflight?Promise.resolve(t.preflight):function(e){return(e=>Pn(e,"https://flowcards.mrf.io/json/active",new Set(["site_id","page_technology","debug_experiences"])))(e).then(fetch).then((e=>e.json())).then((e=>e.preflight?Sn(Sn({},e),{},{preflight:En(e.preflight)}):e))}({location:new URL(window.location.toString()),siteId:t.accountId,pageTechnology:0}));if(f){var m=(r=f,Object.entries(r).reduce(((e,t)=>{var[r,n]=t,i=(e=>{if(!e.actions)return e;var t=Object.entries(e.actions).filter((e=>{var t,[r,n]=e;return t=n,!Array.isArray(t.filters)||0===t.filters.length||t.filters.every((e=>{var t=Bi[e.key];return!t||t(e)}))}));return 0!==t.length?Gi(Gi({},e),{},{actions:t.reduce(((e,t)=>{var[r,n]=t;return Gi(Gi({},e),{},{[r]:n})}),{})}):void 0})(n);return i?Gi(Gi({},e),{},{[r]:i}):e}),{}));u=Cr()(u,m);var v=yield((e,t,r)=>{var n=qi(e,t,r),i=new Promise((e=>{window.setTimeout((()=>{e(void 0)}),3e3)}));return Promise.race([n,i])})(m,d,e.synchronizer);Array.isArray(v)&&l.push(...v);var[g]=l.filter((e=>"compass"===(null==e?void 0:e.handlerName)));(null==g||!g.handled)&&d.compassSDK.setRecirculationConfig({})}if(p){yield(n=e.config,i=e.deferred,null!==(o=n.waitFor)&&void 0!==o&&o.promise?n.waitFor.promise:null!==(s=n.waitFor)&&void 0!==s&&s.timeout?(c=n.waitFor.timeout,new Promise((e=>{setTimeout(e,c)}))):null!==(a=n.waitFor)&&void 0!==a&&a.done?i.promise:Promise.resolve()),yield function(e,t){return ni.apply(this,arguments)}(e.config,e.compassSDK);var y=yield ii(e.config,e.compassSDK,h).then((t=>(u=Cr()(u,t),((e,t,r)=>qi(e,t,r))(t,d,e.synchronizer))));Array.isArray(y)&&l.push(...y)}var b=l.filter($i).reduce(((e,t)=>Xi(Xi({},e),{},{[t.handlerName]:e[t.handlerName]||t.handled})),{});return Object.values(Tr).forEach((t=>{e.synchronizer.resolve(t,!!b[t])})),{handled:b,experiences:u}}))()}done(){this.deferred.resolve()}addTargeting(e,t){this.config.targeting[e]=t}addExperience(e,t){var r,n,i,o;null!==(n=(r=this.config).experiences)&&void 0!==n||(r.experiences={}),null!==(o=(i=this.config.experiences)[e])&&void 0!==o||(i[e]=[]),this.config.experiences[e].push(t)}addEventListener(e,t,r){var n=function(e,t){return"navigationchange"===e?e=>{t(e)}:"navigationfromcard"===e?ti(t,"host"):"navigationtocard"===e?ti(t,"flowcards"):null}(t,r);n&&li(e).addEventListener("navigationchange",n)}hasExperiences(e){return this.executionData.then((t=>{var{handled:r}=t;return!!r[e]}))}triggerExperiences(){var e=this;return(0,t.Z)((function*(){return e.loadExperiences()}))()}hasExperimentation(e){return this.executionData.then((t=>{var{experiences:r}=t;return((e,t)=>{var r,n=null===(r=e.experimentation)||void 0===r?void 0:r.actions;return!!n&&Object.values(n).some((e=>{var{url:r}=e;return-1!==r.indexOf("experimentType=".concat(t))}))})(r,e)}))}getRecommendations(e){var r=this;return(0,t.Z)((function*(){return yield function(e){return Ln.apply(this,arguments)}({experienceId:e,canonical:r.compassSDK.getCanonical(),userId:r.compassSDK.getUserId().actualUserId})}))()}}u("experiences",["compass","synchronizer"],(()=>Promise.resolve(Yi)));class Qi{constructor(e,t){(0,r.Z)(this,"croupier",void 0),this.croupier=t}addTargeting(e,t){this.croupier.addTargeting(e,t)}addCard(e){this.croupier.addExperience(Tr.FLOWCARDS,e)}addEventListener(e,t){this.croupier.addEventListener(Tr.FLOWCARDS,e,t)}hasCards(){return this.croupier.hasExperiences(Tr.FLOWCARDS)}}u("flowcards",["experiences"],(()=>Promise.resolve(Qi)));class eo{constructor(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,r.Z)(this,"onChangeCallback",void 0),(0,r.Z)(this,"consent",void 0),this.consent=e}isInitiated(){return!0}onChange(e){this.onChangeCallback=e}getConsent(){return this.consent}setConsent(e,t){var r;this.consent=t,null===(r=this.onChangeCallback)||void 0===r||r.call(this)}}var to=["tcloaded","useractioncomplete"],ro={cookies:{vendors:[943],purposes:[1,7,8,9,10]},personalization:{vendors:[943],purposes:[1,5,6,7,8,9,10]}};class no{constructor(){(0,r.Z)(this,"tcData",void 0),this.onChange((e=>{this.tcData=e}).bind(this))}isInitiated(){return!!this.tcData}hasConsentForVendor(e){var t,r;return!0===(null===(t=this.tcData)||void 0===t||null===(r=t.vendor)||void 0===r?void 0:r.consents[e])}hasConsentForPurpose(e){var t,r;return!0===(null===(t=this.tcData)||void 0===t||null===(r=t.purpose)||void 0===r?void 0:r.consents[e])}matchRequirements(e){return!!e&&!!this.tcData&&e.vendors.every(this.hasConsentForVendor.bind(this))&&e.purposes.every(this.hasConsentForPurpose.bind(this))}onChange(e){var t,r;null===(t=(r=window).__tcfapi)||void 0===t||t.call(r,"addEventListener",2,((t,r)=>{r&&to.includes(t.eventStatus)&&e(t)}))}getConsent(e){return!(!this.tcData||this.tcData.gdprApplies)||this.matchRequirements(ro[e])}}class io{constructor(e){(0,r.Z)(this,"handler",void 0),this.handler=function(e){return(void 0===e.gdpr||e.gdpr)&&window.__tcfapi?new no:new eo}(e)}isInitiated(){return this.handler.isInitiated()}onChange(e){this.handler.onChange(e)}getConsent(e){return this.handler.getConsent(e)}setConsent(e,t){this.handler instanceof eo||(this.handler=new eo),this.handler.setConsent(e,t)}}u("consent",[],(()=>Promise.resolve(io))),u("multimedia",["compass"],function(){var e=(0,t.Z)((function*(e){return e.multimedia?s.e(513).then(s.bind(s,513)).then((e=>e.default)):Promise.reject()}));return function(t){return e.apply(this,arguments)}}());class oo{constructor(){(0,r.Z)(this,"promises",void 0),this.promises={}}wait(e){var t,r;null!==(r=(t=this.promises)[e])&&void 0!==r||(t[e]={});var n=this.promises[e].promise;return void 0===n?(n=new Promise(((t,r)=>{this.promises[e].resolve=t,this.promises[e].reject=r})),this.promises[e].promise=n,n):n}resolve(e,t){var r,n;null!==(n=(r=this.promises)[e])&&void 0!==n||(r[e]={}),void 0===this.promises[e].resolve?this.promises[e].promise=Promise.resolve(t):(0,this.promises[e].resolve)(t)}reject(e,t){var r,n;null!==(n=(r=this.promises)[e])&&void 0!==n||(r[e]={}),void 0===this.promises[e].reject?this.promises[e].promise=Promise.reject(t):(0,this.promises[e].reject)(t)}}u("synchronizer",[],(()=>Promise.resolve(oo)));var so=(e,t,r)=>{var n,i;n=((e,t,r)=>{var n=document.createElement("script");return n.src=e,n.id=r,t?n.type="module":n.setAttribute("nomodule",""),n})(e,r,t),i=document.body,new Promise(((e,t)=>{n.addEventListener("error",(e=>t(e.error))),i.append(n)}))},ao="https://sdk.mrf.io/statics",co={ecommerce:{srcModule:"".concat(ao,"/compass-ecommerce-sdk.js"),srcNoModule:"".concat(ao,"/compass-ecommerce-sdk.es5.js"),dependencies:["compass"]},multimedia:{srcModule:"".concat(ao,"/compass-multimedia-sdk.js"),srcNoModule:"".concat(ao,"/compass-multimedia-sdk.es5.js"),dependencies:["compass"]}},uo=e=>"".concat(e,"?version=639");class lo{load(e,t){var r=co[e];t&&function(){c.addConfig(...arguments)}(t),so(uo(r.srcModule),e,!0),so(uo(r.srcNoModule),e,!1)}}u("loader",[],(()=>Promise.resolve(lo)))})();