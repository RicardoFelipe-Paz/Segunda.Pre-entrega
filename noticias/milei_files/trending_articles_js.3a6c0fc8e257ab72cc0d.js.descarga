(window._vfP=window._vfP||[]).push([[169],{1315:function(t,e,i){"use strict";i.r(e);i(92),i(9),i(3),i(7),i(11),i(189),i(32),i(19),i(33),i(17),i(40),i(28);var n=i(36),r=i(197),a=i(0),s=i(4),o=i(83),d=i(268),c=i(858),l=i(307),u=i(771),g=i(116),h=i(6),v=i(54),_=i(64),f=i(640),p=i(674),m=i(413),b=(i(26),i(15),i(16),i(57),i(141)),y=i(93),O=i(1),E=i(109),A=i(680);function S(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function T(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?S(Object(i),!0).forEach((function(e){C(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function C(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var R={props:{widgetTag:n.a.string.isRequired,containerId:n.a.string,uniqueId:n.a.string.isRequired,index:n.a.number.isRequired,enabled:n.a.bool.def(!0)},data(){return{isThresholdReached:!1,adSettings:{ad_integration:g.b[this.widgetTag].ad_integration,pixel_threshold:g.b[this.widgetTag].pixel_threshold,site_ad_id:g.b[this.widgetTag].site_ad_id,widget_tag:this.widgetTag},adStatus:y.PENDING,adProvider:null,pixel_threshold:v.r}},computed:{eventPayload(){return{widget:h.d.CONTENT_RECIRCULATION,ad_setting:this.adSettings.ad_integration,pixel_threshold:this.adSettings.pixel_threshold,adData:{index:this.index,container_id:this.containerId}}},isPromoPlacement(){return this.enabled},isReadyToLoad(){return this.isPromoPlacement&&this.isThresholdReached},showAd(){return this.adStatus===y.SUCCESS},adImplementationClass(){return this.adProvider?"vf-promo-".concat(this.adProvider):null}},mounted(){var t;(this.loadSetting(),this.isPromoPlacement)?this.initializeLoadTracker():this.initializeAnalytics(null===(t=this.$el)||void 0===t?void 0:t.parentNode)},methods:T(T({},Object(b.b)({trackAdEvent:s.gd})),{},{initializeLoadTracker(){var t=this;Object(E.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"".concat(this.pixel_threshold,"px")}).then((function(){t.isThresholdReached=!0,t.initializeAnalytics(t.$el)}))},initializeAnalytics(t){var e=T(T({},this.eventPayload),{},{event_type:O.b.EVENTS.AD_LOAD,adElement:t});this.trackAdEvent(e)},onSuccess(){this.adStatus=y.SUCCESS},onError(){this.adStatus=y.ERROR},loadSetting(){var t=this.$store.getters[a.Jc];this.adProvider=t[this.adSettings.ad_integration],this.pixel_threshold=t[this.adSettings.pixel_threshold]}}),watch:{isPromoPlacement:{handler(){this.isPromoPlacement&&this.initializeLoadTracker()}}},components:{adContainer:A.a}},w=i(56),P=Object(w.a)(R,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showAd,expression:"showAd"}],staticClass:"vf-promo",class:t.adImplementationClass},[i("div",{staticClass:"vf-label vf-label-upper vf-promo__label"},[t._v("\n            "+t._s(t.$i18n("ads.advertisement"))+"\n        ")]),t._v(" "),t.isReadyToLoad?i("ad-container",{attrs:{"unique-id":t.uniqueId,"ad-settings":t.adSettings},on:{success:t.onSuccess,error:t.onError}}):t._e()],1)])}),[],!1,null,"143c489c",null).exports,I=i(690),N=i(952),x=i(953),L=i(1002),j=i(702),k=i(990),D=i(849),M={props:{trendingArticle:n.a.shape(N.a).isRequired.loose,view:n.a.oneOf(Object.values(_.g)).isRequired,hasImage:n.a.bool.def(!0),isReversed:n.a.bool.def(!1),trackingMedium:n.a.oneOf(Object.values(d)).def(d.STANDALONE_TOP_PAGES_MEDIUM)},components:{contentBadge:j.a,vfTrendingIcon:L.a,itemLayout:k.a,commentIcon:D.a},inject:[l.b],data:()=>({isImageInvalid:!1}),computed:{trendingArticleClasses(){return["vf-trending-article",{"vf-trending-article--condensed":this.isCondensed}]},trendingArticleTag(){return null!==this.url?"a":"div"},trendingArticleAttrs(){var t={};return"a"===this.trendingArticleTag&&(t.href=this.url),t},trendingArticleA11yLabel(){return this.$i18n("trending_articles.trending_article.comments.a11y_label",{title:this.trendingArticle.origin_title,count:this.trendingArticle.total_visible_contents})},size(){switch(this.view){case _.g.CONDENSED:return this.SIZES.SMALL;case _.g.LIST:case _.g.FULL:default:return this.SIZES.MEDIUM}},isImageEmpty(){return!this.trendingArticle.origin_image_url},count(){return this.trendingArticle.total_visible_contents},countText(){return this.$i18n("trending_articles.count.comments",{count:this.count})},url(){var t='The URL "'.concat(this.trendingArticle.origin_url,'" is invalid, please update the og:url on the article page to be a valid URL');return Object(x.a)(this.trendingArticle.origin_url,this.trackingMedium,t)},isCondensed(){return this.view===_.g.CONDENSED}},methods:{handleImageError(){this.isImageInvalid=!0}}},q=Object(w.a)(M,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(t.trendingArticleTag,t._b({tag:"component",class:t.trendingArticleClasses},"component",t.trendingArticleAttrs,!1),[i("p",{staticClass:"vf-trending-article__a11y-label vf-offscreen-text"},[t._v("\n        "+t._s(t.trendingArticleA11yLabel)+"\n    ")]),t._v(" "),i("item-layout",{staticClass:"vf-trending-article__layout",attrs:{"aria-hidden":"true","collapse-height":"",title:t.trendingArticle.origin_title,size:t.size,"is-reversed":t.isReversed,"has-image":t.hasImage,image:{src:t.trendingArticle.origin_image_url,alt:t.trendingArticle.origin_image_alt||t.$i18n("trending_articles.visual.image_alt_text")}},on:{"img-error":t.handleImageError},scopedSlots:t._u([t.isCondensed?{key:"image",fn:function(e){var n=e.classes;return[i("div",{class:["vf-trending-article__content-badge",n.base]},[i("content-badge",{attrs:{count:t.count,"a11y-label":t.countText}})],1)]}}:t.isImageEmpty||t.isImageInvalid?{key:"image",fn:function(t){var e=t.classes;return[i("div",{class:["vf-trending-article__trending-icon-wrapper",e.base]},[i("vf-trending-icon",{staticClass:"vf-trending-article__trending-icon"})],1)]}}:null,t.isCondensed?null:{key:"additional-details",fn:function(e){var n=e.classes;return[i("p",{staticClass:"vf-trending-article__comment-count",class:Object.values(n)},[i("comment-icon",{staticClass:"vf-trending-article__comment-icon",attrs:{count:t.count}}),t._v("\n                "+t._s(t.count)+"\n            ")],1)]}}],null,!0)})],1)}),[],!1,null,"6ce0e247",null).exports,$={props:{trendingArticles:n.a.array.isRequired,view:n.a.oneOf(Object.values(_.g)).isRequired,isThumbnailEnabled:n.a.bool.isRequired,thumbnailPosition:n.a.oneOf(Object.values(_.e)).isRequired,trackingMedium:n.a.oneOf(Object.values(d)).def(d.STANDALONE_TOP_PAGES_MEDIUM)},computed:{trendingArticlesClasses(){return["vf-trending-articles-list",{"vf-trending-articles-list--condensed":this.isCondensed,"vf-trending-articles-list--list":this.isList}]},isCondensed(){return this.view===_.g.CONDENSED},isList(){return this.view===_.g.LIST},isReversed(){return this.isCondensed||this.thumbnailPosition===_.e.RIGHT},validatedTrackingMedium(){return this.isCondensed&&this.trackingMedium===d.STANDALONE_TOP_PAGES_MEDIUM?d.STANDALONE_TOP_PAGES_CONDENSED_MEDIUM:this.trackingMedium}},components:{trendingArticle:q}},U=Object(w.a)($,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{class:t.trendingArticlesClasses},t._l(t.trendingArticles,(function(e){return i("li",{key:e.content_container_uuid,staticClass:"vf-trending-article-list__item"},[i("trending-article",{attrs:{"trending-article":e,view:t.view,"is-reversed":t.isReversed,"has-image":t.isThumbnailEnabled,"tracking-medium":t.validatedTrackingMedium}})],1)})),0)}),[],!1,null,"01a27c49",null).exports,z=i(986),W=i(987),G=i(950),B={components:{announceLayout:z.a,paddedContainer:W.a,vfNoDataIcon:G.a},inject:[l.b],props:{text:n.a.string}},V=Object(w.a)(B,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("padded-container",{staticClass:"vf-trending-articles-announce"},[i("announce-layout",{attrs:{size:t.SIZES.SMALL,subtitle:t.text},scopedSlots:t._u([{key:"header",fn:function(){return[t._t("header",[i("div",{staticClass:"vf-trending-articles-announce__status"},[i("vf-no-data-icon",{staticClass:"vf-trending-articles-announce__status-icon"})],1)])]},proxy:!0},{key:"footer",fn:function(){return[t._t("default")]},proxy:!0}],null,!0)})],1)}),[],!1,null,"52e8d3ab",null).exports;function H(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Z(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Z(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw a}}}}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var J={props:{containerId:n.a.string,sectionUuid:n.a.uuid.isRequired,limit:n.a.number.isRequired,daysPublished:n.a.number.isRequired,trendWindow:n.a.number.isRequired,sort:n.a.oneOf(Object.values(_.c)).isRequired,view:n.a.oneOf(Object.values(_.g)).isRequired,isThumbnailEnabled:n.a.bool.isRequired,thumbnailPosition:n.a.oneOf(Object.values(_.e)).isRequired,title:n.a.string,trackingMedium:n.a.oneOf(Object.values(d)).def(d.STANDALONE_TOP_PAGES_MEDIUM),isHiddenOnEmpty:n.a.bool.def(!1),isContentRecirculationWidget:n.a.bool.def(!1),dataVfId:n.a.string.isRequired},components:{spinningLoader:p.a,adContainerTrendingArticles:P,trendingArticlesAnnounce:V,trendingArticles:U,vfButton:f.a,optOutPersonal:I.b,contentRecirculation:function(){return Promise.all([i.e(0),i.e(171),i.e(36)]).then(i.bind(null,1318))}},inject:[l.a,l.b,l.c],data(){return{trendingArticlesBaseWithActivity:Object(m.a)(U,h.d.TRENDING_ARTICLES,this.dataVfId,50,50,this.containerId),trendingId:null,breakLine:!1,source:null,adSettings:{ad_integration:g.b[h.d.STANDALONE_AD].ad_integration},adProvider:null,privacyExpanded:!1,canOptOutOfPpid:!1}},created(){this.statusKey=Object(r.a)(),this.fetchTrendingContent(),this.widgetTag=h.d.CONTENT_RECIRCULATION,this.ppidTriggerPosition=I.c},computed:{status(){return this.$store.getters[a.zb](this.statusKey,c.a)},trendingArticles(){var t=this.$store.getters[a.Bb](this.trendingId);return t&&t.trending||null},sortedBy(){switch(this.sort){case _.c.COMMENTS:default:return"total_visible_contents"}},isEmpty(){return null!==this.trendingArticles&&0===this.trendingArticles.length},areAdsEnabled(){return this.$store.getters[a.Jc][v.a]!==o.a.NONE},a11yHeaderText(){return 0===this.daysPublished?this.$i18n("trending_articles.header.a11y_label.comments.all_time"):this.$i18n("trending_articles.header.a11y_label.comments.num_days",{days:this.daysPublished})},isVisible(){return!this.isEmpty||!this.isHiddenOnEmpty}},methods:{fetchTrendingContent(){var t=this,e=this.isContentRecirculationWidget?u.b:u.a;this.$store.dispatch(s.yb,{section_uuid:this.sectionUuid,limit:this.limit,content_container_window_days:this.daysPublished||void 0,content_window_hours:this.trendWindow,sorted_by:this.sortedBy,status_key:this.statusKey,ignore_container_id:this.containerId,source:e}).then((function(e){var i=e.trending_id,n=e.source;t.trendingId=i,t.source=n,t.createObserverWrapperSize()}))},handleReload(){this.fetchTrendingContent()},createObserverWrapperSize(){this.isContentRecirculationWidget&&this.areAdsEnabled&&this.status!==this.STATUSES.ERROR&&new ResizeObserver(this.callbackWrapperSize).observe(this.$refs.trendingArticleWrapper)},callbackWrapperSize(t){var e,i=H(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;this.breakLine=n.target.clientWidth<_.h}}catch(t){i.e(t)}finally{i.f()}},loadAdSetting(){var t=this.$store.getters[a.Jc];this.adProvider=t[this.adSettings.ad_integration],this.canOptOutOfPpid=this.isContentRecirculationWidget&&Object(I.a)(this.adProvider)},onTogglePrivacySettings(t){this.privacyExpanded=t}},mounted(){this.loadAdSetting()}},K=Object(w.a)(J,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isVisible?i("div",{staticClass:"vf-trending-articles",class:{"--vf-ppid-control":t.canOptOutOfPpid,"--vf-ppid-control--expanded":t.privacyExpanded,"--vf-ppid-row-break-line":t.breakLine&&t.canOptOutOfPpid}},[i("h2",{staticClass:"vf-trending-articles__header vf-subheading-text"},[t._v("\n        "+t._s(t.title||t.$i18n("trending_articles.header.heading"))+"\n    ")]),t._v(" "),i("p",{staticClass:"vf-trending-articles__a11y-header vf-offscreen-text"},[t._v("\n        "+t._s(t.a11yHeaderText)+"\n    ")]),t._v(" "),i("div",{ref:"trendingArticleWrapper",staticClass:"vf-trending-articles__content-wrapper"},[i("div",{staticClass:"vf-trending-articles__row",class:{"vf-trending-articles__row__break-line":t.breakLine,"vf-trending-articles__row__justify-center":t.status===t.STATUSES.ERROR||t.status===t.STATUSES.PENDING,"vf-trending-articles__row__align-center":t.status===t.STATUSES.ERROR||t.status===t.STATUSES.PENDING||t.isEmpty}},[i("div",{staticClass:"vf-trending-articles__flex-wrapper"},[i("div",{staticClass:"vf-trending-articles__ad"},[i("div",{staticClass:"vf-trending-articles__ad-container-wrapper"},[t.isContentRecirculationWidget&&t.areAdsEnabled&&t.status!==t.STATUSES.ERROR?i("ad-container-trending-articles",{staticClass:"vf3-conversations-list__promo\n                                vf-content-recirculation-ad",attrs:{"container-id":t.containerId,"unique-id":""+t._uid,index:0,"widget-tag":t.widgetTag}}):t._e()],1),t._v(" "),t.canOptOutOfPpid&&t.breakLine?i("opt-out-personal",{staticClass:"vf-trending-articles__ppid-opt-out --vf-ad-break-line",attrs:{"ad-provider":t.adProvider,"unique-id":""+t._uid,"trigger-position":t.ppidTriggerPosition.CENTER},on:{"toggle-privacy-settings":t.onTogglePrivacySettings}}):t._e()],1)]),t._v(" "),i("transition",{attrs:{name:"fade",mode:"out-in"}},[t.status===t.STATUSES.ERROR?i("trending-articles-announce",{staticClass:"vf-trending-articles--error"},[i("span",[t._v("\n                        "+t._s(t.$i18n("trending_articles.states.error.text"))+" â€”\n                        "),i("vf-button",{staticClass:"vf-trending-articles__error-action",attrs:{"is-link":"",palette:t.PALETTES.ACCENT,size:t.SIZES.INLINE},nativeOn:{click:function(e){return t.handleReload(e)}}},[t._v("\n                            "+t._s(t.$i18n("trending_articles.states.error.action"))+"\n                        ")])],1)]):t.status===t.STATUSES.PENDING?i("trending-articles-announce",{staticClass:"vf-trending-articles__loading",attrs:{text:t.$i18n("trending_articles.states.loading")},scopedSlots:t._u([{key:"header",fn:function(){return[i("spinning-loader",{attrs:{size:t.SIZES.MEDIUM}})]},proxy:!0}],null,!1,1394825101)}):t.isEmpty?i("trending-articles-announce",{staticClass:"vf-trending-articles__empty",attrs:{text:t.$i18n("trending_articles.states.empty")}}):t.isContentRecirculationWidget?i("content-recirculation",{attrs:{"trending-articles":t.trendingArticles,"tracking-medium":t.trackingMedium,"container-id":t.containerId,source:t.source,"data-vf-id":t.dataVfId}}):i(t.trendingArticlesBaseWithActivity,{tag:"component",attrs:{"trending-articles":t.trendingArticles,view:t.view,"is-thumbnail-enabled":t.isThumbnailEnabled,"thumbnail-position":t.thumbnailPosition,"tracking-medium":t.trackingMedium,"data-vf-id":t.dataVfId,"container-id":t.containerId}})],1)],1),t._v(" "),t.canOptOutOfPpid&&!t.breakLine?i("opt-out-personal",{staticClass:"vf-trending-articles__ppid-opt-out --vf-ad-inline",attrs:{"ad-provider":t.adProvider,"unique-id":""+t._uid},on:{"toggle-privacy-settings":t.onTogglePrivacySettings}}):t._e()],1)]):t._e()}),[],!1,null,"550be318",null);e.default=K.exports},702:function(t,e,i){"use strict";var n={props:{count:{type:Number,required:!0},a11yLabel:{type:String,required:!0},hasRealtime:{type:Boolean,default:!1},hasMentions:{type:Boolean,default:!1},isTyping:{type:Boolean,default:!1}},computed:{classes(){return{"remaining-content--accent":this.hasRealtime,"remaining-content--mention":this.hasMentions}},formattedCount(){return this.count>99?"99+":this.count}}},r=i(56),a=Object(r.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"vf-icon remaining-content",class:this.classes,attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 25 25"}},[e("path",{attrs:{d:"M.5 23.793V2A1.5 1.5 0 0 1 2 .5h21A1.5 1.5 0 0 1 24.5 2v17a1.5 1.5 0 0 1-1.5 1.5H3.793L.5 23.793z"}}),this._v(" "),e("transition",{attrs:{name:"fade",mode:"out-in"}},[this.isTyping?e("g",this._l([6.25,12.5,18.75],(function(t){return e("circle",{key:t,staticClass:"remaining-content__loader-circle",attrs:{cx:t,cy:"10.5",r:"1.5"}})})),0):e("text",{staticClass:"remaining-content__count",attrs:{"aria-hidden":"true",y:"15",x:"12.5","text-anchor":"middle"}},[this._v("\n            "+this._s(this.formattedCount)+"\n        ")])])],1)}),[],!1,null,"6d708264",null);e.a=a.exports},771:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return r}));var n="recommender",r="livecomments"},858:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n="TRENDING_ARTICLES"},952:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(36),r={origin_title:n.a.string.isRequired,total_visible_contents:n.a.number.isRequired,origin_image_url:n.a.string,origin_url:n.a.string.isRequired}},953:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i(9),i(3),i(11),i(195),i(188);var n=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'The URL "'.concat(t,'" is invalid');try{var n=new URL(t);return n.searchParams.append("__vfz","medium=".concat(e)),n.href}catch(t){return console.error(i),null}}}}]);
//# sourceMappingURL=trending_articles_js.3a6c0fc8e257ab72cc0d.js.map